var so=Object.defineProperty;var uo=(v,rr,h)=>rr in v?so(v,rr,{enumerable:!0,configurable:!0,writable:!0,value:h}):v[rr]=h;var Fe=(v,rr,h)=>uo(v,typeof rr!="symbol"?rr+"":rr,h);var fo=async function(v={}){var rr,h=v,G,ar,Or=new Promise((n,i)=>{G=n,ar=i}),Sr=typeof window=="object",lr=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var X="./this.program",_e=(n,i)=>{throw i},ge=import.meta.url,m="";function le(n){return h.locateFile?h.locateFile(n,m):m+n}var oe,ye;if(Sr||lr){try{m=new URL(".",ge).href}catch{}lr&&(ye=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),oe=async n=>{var i=await fetch(n,{credentials:"same-origin"});if(i.ok)return i.arrayBuffer();throw new Error(i.status+" : "+i.url)}}var we=console.log.bind(console),kr=console.error.bind(console),q,$r,Cr=!1,ne,_r,wr,Ir,Gr,Rr,V,qr,hr,be,Kr;function Lr(){var n=$r.buffer;_r=new Int8Array(n),Ir=new Int16Array(n),wr=new Uint8Array(n),Gr=new Uint16Array(n),Rr=new Int32Array(n),V=new Uint32Array(n),qr=new Float32Array(n),Kr=new Float64Array(n),hr=new BigInt64Array(n),be=new BigUint64Array(n)}function jr(){if(h.preRun)for(typeof h.preRun=="function"&&(h.preRun=[h.preRun]);h.preRun.length;)Zr(h.preRun.shift());Le(He)}function ve(){Nr.Z()}function de(){if(h.postRun)for(typeof h.postRun=="function"&&(h.postRun=[h.postRun]);h.postRun.length;)tt(h.postRun.shift());Le($e)}var Fr=0,zr=null;function ke(n){var i;Fr++,(i=h.monitorRunDependencies)==null||i.call(h,Fr)}function Te(n){var s;if(Fr--,(s=h.monitorRunDependencies)==null||s.call(h,Fr),Fr==0&&zr){var i=zr;zr=null,i()}}function Ee(n){var s;(s=h.onAbort)==null||s.call(h,n),n="Aborted("+n+")",kr(n),Cr=!0,n+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(n);throw ar(i),i}var Tr;function Me(){return h.locateFile?le("elheif-wasm.wasm"):new URL(""+new URL("assets/elheif-wasm-Cde5jrns.wasm",import.meta.url).href,import.meta.url).href}function Ae(n){if(n==Tr&&q)return new Uint8Array(q);if(ye)return ye(n);throw"both async and sync fetching of the wasm failed"}async function rt(n){if(!q)try{var i=await oe(n);return new Uint8Array(i)}catch{}return Ae(n)}async function Ue(n,i){try{var s=await rt(n),f=await WebAssembly.instantiate(s,i);return f}catch(p){kr(`failed to asynchronously prepare wasm: ${p}`),Ee(p)}}async function De(n,i,s){if(!n&&typeof WebAssembly.instantiateStreaming=="function")try{var f=fetch(i,{credentials:"same-origin"}),p=await WebAssembly.instantiateStreaming(f,s);return p}catch(_){kr(`wasm streaming compile failed: ${_}`),kr("falling back to ArrayBuffer instantiation")}return Ue(i,s)}function Ie(){return{a:Rn}}async function et(){function n(_,b){return Nr=_.exports,$r=Nr.Y,Lr(),it=Nr.$,Te(),Nr}ke();function i(_){return n(_.instance)}var s=Ie();if(h.instantiateWasm)return new Promise((_,b)=>{h.instantiateWasm(s,(g,C)=>{_(n(g))})});Tr??(Tr=Me());try{var f=await De(q,Tr,s),p=i(f);return p}catch(_){return ar(_),Promise.reject(_)}}class Pe{constructor(i){Fe(this,"name","ExitStatus");this.message=`Program terminated with exit(${i})`,this.status=i}}var Le=n=>{for(;n.length>0;)n.shift()(h)},$e=[],tt=n=>$e.push(n),He=[],Zr=n=>He.push(n),Jr=!0;class k{constructor(i){this.excPtr=i,this.ptr=i-24}set_type(i){V[this.ptr+4>>2]=i}get_type(){return V[this.ptr+4>>2]}set_destructor(i){V[this.ptr+8>>2]=i}get_destructor(){return V[this.ptr+8>>2]}set_caught(i){i=i?1:0,_r[this.ptr+12]=i}get_caught(){return _r[this.ptr+12]!=0}set_rethrown(i){i=i?1:0,_r[this.ptr+13]=i}get_rethrown(){return _r[this.ptr+13]!=0}init(i,s){this.set_adjusted_ptr(0),this.set_type(i),this.set_destructor(s)}set_adjusted_ptr(i){V[this.ptr+16>>2]=i}get_adjusted_ptr(){return V[this.ptr+16>>2]}}var W=0,$=(n,i,s)=>{var f=new k(n);throw f.init(i,s),W=n,W},B=typeof TextDecoder<"u"?new TextDecoder:void 0,M=(n,i=0,s=NaN)=>{for(var f=i+s,p=i;n[p]&&!(p>=f);)++p;if(p-i>16&&n.buffer&&B)return B.decode(n.subarray(i,p));for(var _="";i<p;){var b=n[i++];if(!(b&128)){_+=String.fromCharCode(b);continue}var g=n[i++]&63;if((b&224)==192){_+=String.fromCharCode((b&31)<<6|g);continue}var C=n[i++]&63;if((b&240)==224?b=(b&15)<<12|g<<6|C:b=(b&7)<<18|g<<12|C<<6|n[i++]&63,b<65536)_+=String.fromCharCode(b);else{var F=b-65536;_+=String.fromCharCode(55296|F>>10,56320|F&1023)}}return _},tr=(n,i)=>n?M(wr,n,i):"";function y(n,i,s){return 0}var or=(n,i,s)=>{};function Q(n,i,s){return 0}function dr(n,i,s,f){}var gr=(n,i,s)=>{},O=()=>Ee(""),P={},w=n=>{for(;n.length;){var i=n.pop(),s=n.pop();s(i)}};function x(n){return this.fromWireType(V[n>>2])}var U={},N={},fr={},yr=h.InternalError=class extends Error{constructor(i){super(i),this.name="InternalError"}},Z=n=>{throw new yr(n)},K=(n,i,s)=>{n.forEach(g=>fr[g]=i);function f(g){var C=s(g);C.length!==n.length&&Z("Mismatched type converter count");for(var F=0;F<n.length;++F)A(n[F],C[F])}var p=new Array(i.length),_=[],b=0;i.forEach((g,C)=>{N.hasOwnProperty(g)?p[C]=N[g]:(_.push(g),U.hasOwnProperty(g)||(U[g]=[]),U[g].push(()=>{p[C]=N[g],++b,b===_.length&&f(p)}))}),_.length===0&&f(p)},Hr=n=>{var i=P[n];delete P[n];var s=i.rawConstructor,f=i.rawDestructor,p=i.fields,_=p.map(b=>b.getterReturnType).concat(p.map(b=>b.setterArgumentType));K([n],_,b=>{var g={};return p.forEach((C,F)=>{var D=C.fieldName,J=b[F],Pr=b[F].optional,Br=C.getter,Yr=C.getterContext,Xe=b[F+p.length],mt=C.setter,_t=C.setterContext;g[D]={read:gt=>J.fromWireType(Br(Yr,gt)),write:(gt,Mn)=>{var qt=[];mt(_t,gt,Xe.toWireType(qt,Mn)),w(qt)},optional:Pr}}),[{name:i.name,fromWireType:C=>{var F={};for(var D in g)F[D]=g[D].read(C);return f(C),F},toWireType:(C,F)=>{for(var D in g)if(!(D in F)&&!g[D].optional)throw new TypeError(`Missing field: "${D}"`);var J=s();for(D in g)g[D].write(J,F[D]);return C!==null&&C.push(f,J),J},argPackAdvance:sr,readValueFromPointer:x,destructorFunction:f}]})},I=n=>{if(n===null)return"null";var i=typeof n;return i==="object"||i==="array"||i==="function"?n.toString():""+n},R=()=>{for(var n=new Array(256),i=0;i<256;++i)n[i]=String.fromCharCode(i);T=n},T,S=n=>{for(var i="",s=n;wr[s];)i+=T[wr[s++]];return i},Y=h.BindingError=class extends Error{constructor(i){super(i),this.name="BindingError"}},L=n=>{throw new Y(n)};function nr(n,i,s={}){var f=i.name;if(n||L(`type "${f}" must have a positive integer typeid pointer`),N.hasOwnProperty(n)){if(s.ignoreDuplicateRegistrations)return;L(`Cannot register type '${f}' twice`)}if(N[n]=i,delete fr[n],U.hasOwnProperty(n)){var p=U[n];delete U[n],p.forEach(_=>_())}}function A(n,i,s={}){return nr(n,i,s)}var mr=(n,i,s)=>{switch(i){case 1:return s?f=>_r[f]:f=>wr[f];case 2:return s?f=>Ir[f>>1]:f=>Gr[f>>1];case 4:return s?f=>Rr[f>>2]:f=>V[f>>2];case 8:return s?f=>hr[f>>3]:f=>be[f>>3];default:throw new TypeError(`invalid integer width (${i}): ${n}`)}},cr=(n,i,s,f,p)=>{i=S(i);var _=i.indexOf("u")!=-1;A(n,{name:i,fromWireType:b=>b,toWireType:function(b,g){if(typeof g!="bigint"&&typeof g!="number")throw new TypeError(`Cannot convert "${I(g)}" to ${this.name}`);return typeof g=="number"&&(g=BigInt(g)),g},argPackAdvance:sr,readValueFromPointer:mr(i,s,!_),destructorFunction:null})},sr=8,Tt=(n,i,s,f)=>{i=S(i),A(n,{name:i,fromWireType:function(p){return!!p},toWireType:function(p,_){return _?s:f},argPackAdvance:sr,readValueFromPointer:function(p){return this.fromWireType(wr[p])},destructorFunction:null})},ur=[],Xr=[],We=n=>{n>9&&--Xr[n+1]===0&&(Xr[n]=void 0,ur.push(n))},rn=()=>Xr.length/2-5-ur.length,Et=()=>{Xr.push(0,1,void 0,1,null,1,!0,1,!1,1),h.count_emval_handles=rn},vr={toValue:n=>(n||L(`Cannot use deleted val. handle = ${n}`),Xr[n]),toHandle:n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const i=ur.pop()||Xr.length;return Xr[i]=n,Xr[i+1]=1,i}}}},At={name:"emscripten::val",fromWireType:n=>{var i=vr.toValue(n);return We(n),i},toWireType:(n,i)=>vr.toHandle(i),argPackAdvance:sr,readValueFromPointer:x,destructorFunction:null},Oe=n=>A(n,At),Ve=(n,i,s)=>{if(n[i].overloadTable===void 0){var f=n[i];n[i]=function(...p){return n[i].overloadTable.hasOwnProperty(p.length)||L(`Function '${s}' called with an invalid number of arguments (${p.length}) - expects one of (${n[i].overloadTable})!`),n[i].overloadTable[p.length].apply(this,p)},n[i].overloadTable=[],n[i].overloadTable[f.argCount]=f}},Pt=(n,i,s)=>{h.hasOwnProperty(n)?((s===void 0||h[n].overloadTable!==void 0&&h[n].overloadTable[s]!==void 0)&&L(`Cannot register public name '${n}' twice`),Ve(h,n,n),h[n].overloadTable.hasOwnProperty(s)&&L(`Cannot register multiple overloads of a function with the same number of arguments (${s})!`),h[n].overloadTable[s]=i):(h[n]=i,h[n].argCount=s)},Qr=(n,i,s)=>{switch(i){case 1:return s?function(f){return this.fromWireType(_r[f])}:function(f){return this.fromWireType(wr[f])};case 2:return s?function(f){return this.fromWireType(Ir[f>>1])}:function(f){return this.fromWireType(Gr[f>>1])};case 4:return s?function(f){return this.fromWireType(Rr[f>>2])}:function(f){return this.fromWireType(V[f>>2])};default:throw new TypeError(`invalid integer width (${i}): ${n}`)}},en=(n,i,s,f)=>{i=S(i);function p(){}p.values={},A(n,{name:i,constructor:p,fromWireType:function(_){return this.constructor.values[_]},toWireType:(_,b)=>b.value,argPackAdvance:sr,readValueFromPointer:Qr(i,s,f),destructorFunction:null}),Pt(i,p)},Ce=(n,i)=>Object.defineProperty(i,"name",{value:n}),$t=n=>{var i=dt(n),s=S(i);return ue(i),s},se=(n,i)=>{var s=N[n];return s===void 0&&L(`${i} has unknown type ${$t(n)}`),s},Wt=(n,i,s)=>{var f=se(n,"enum");i=S(i);var p=f.constructor,_=Object.create(f.constructor.prototype,{value:{value:s},constructor:{value:Ce(`${f.name}_${i}`,function(){})}});p.values[s]=_,p[i]=_},tn=(n,i)=>{switch(i){case 4:return function(s){return this.fromWireType(qr[s>>2])};case 8:return function(s){return this.fromWireType(Kr[s>>3])};default:throw new TypeError(`invalid float width (${i}): ${n}`)}},nn=(n,i,s)=>{i=S(i),A(n,{name:i,fromWireType:f=>f,toWireType:(f,p)=>p,argPackAdvance:sr,readValueFromPointer:tn(i,s),destructorFunction:null})};function Ot(n){for(var i=1;i<n.length;++i)if(n[i]!==null&&n[i].destructorFunction===void 0)return!0;return!1}function an(n,i,s,f){for(var p=Ot(n),_=n.length-2,b=[],g=["fn"],C=0;C<_;++C)b.push(`arg${C}`),g.push(`arg${C}Wired`);b=b.join(","),g=g.join(",");var F=`return function (${b}) {
`;p&&(F+=`var destructors = [];
`);for(var D=p?"destructors":"null",J=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],C=0;C<_;++C)F+=`var arg${C}Wired = argType${C}['toWireType'](${D}, arg${C});
`,J.push(`argType${C}`);if(F+=(s||f?"var rv = ":"")+`invoker(${g});
`,p)F+=`runDestructors(destructors);
`;else for(var C=2;C<n.length;++C){var Pr=C===1?"thisWired":"arg"+(C-2)+"Wired";n[C].destructorFunction!==null&&(F+=`${Pr}_dtor(${Pr});
`,J.push(`${Pr}_dtor`))}return s&&(F+=`var ret = retType['fromWireType'](rv);
return ret;
`),F+=`}
`,[J,F]}function on(n,i,s,f,p,_){var b=i.length;b<2&&L("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var g=i[1]!==null&&s!==null,C=Ot(i),F=i[0].name!=="void",D=[n,L,f,p,w,i[0],i[1]],J=0;J<b-2;++J)D.push(i[J+2]);if(!C)for(var J=2;J<i.length;++J)i[J].destructorFunction!==null&&D.push(i[J].destructorFunction);let[Pr,Br]=an(i,g,F,_);var Yr=new Function(...Pr,Br)(...D);return Ce(n,Yr)}var Ct=(n,i)=>{for(var s=[],f=0;f<n;f++)s.push(V[i+f*4>>2]);return s},sn=(n,i,s)=>{h.hasOwnProperty(n)||Z("Replacing nonexistent public symbol"),h[n].overloadTable!==void 0&&s!==void 0?h[n].overloadTable[s]=i:(h[n]=i,h[n].argCount=s)},nt=[],it,un=n=>{var i=nt[n];return i||(nt[n]=i=it.get(n)),i},re=(n,i,s=!1)=>{n=S(n);function f(){var _=un(i);return _}var p=f();return typeof p!="function"&&L(`unknown function pointer with signature ${n}: ${i}`),p};class jt extends Error{}var xt=(n,i)=>{var s=[],f={};function p(_){if(!f[_]&&!N[_]){if(fr[_]){fr[_].forEach(p);return}s.push(_),f[_]=!0}}throw i.forEach(p),new jt(`${n}: `+s.map($t).join([", "]))},St=n=>{n=n.trim();const i=n.indexOf("(");return i===-1?n:n.slice(0,i)},Rt=(n,i,s,f,p,_,b,g)=>{var C=Ct(i,s);n=S(n),n=St(n),p=re(f,p,b),Pt(n,function(){xt(`Cannot call ${n} due to unbound types`,C)},i-1),K([],C,F=>{var D=[F[0],null].concat(F.slice(1));return sn(n,on(n,D,null,p,_,b),i-1),[]})},Ft=(n,i,s,f,p)=>{i=S(i);var _=D=>D;if(f===0){var b=32-8*s;_=D=>D<<b>>>b}var g=i.includes("unsigned"),C=(D,J)=>{},F;g?F=function(D,J){return C(J,this.name),J>>>0}:F=function(D,J){return C(J,this.name),J},A(n,{name:i,fromWireType:_,toWireType:F,argPackAdvance:sr,readValueFromPointer:mr(i,s,f!==0),destructorFunction:null})},fn=(n,i,s)=>{var f=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],p=f[i];function _(b){var g=V[b>>2],C=V[b+4>>2];return new p(_r.buffer,C,g)}s=S(s),A(n,{name:s,fromWireType:_,argPackAdvance:sr,readValueFromPointer:_},{ignoreDuplicateRegistrations:!0})},Ne=Object.assign({optional:!0},At),at=(n,i)=>{A(n,Ne)},je=(n,i,s,f)=>{if(!(f>0))return 0;for(var p=s,_=s+f-1,b=0;b<n.length;++b){var g=n.charCodeAt(b);if(g>=55296&&g<=57343){var C=n.charCodeAt(++b);g=65536+((g&1023)<<10)|C&1023}if(g<=127){if(s>=_)break;i[s++]=g}else if(g<=2047){if(s+1>=_)break;i[s++]=192|g>>6,i[s++]=128|g&63}else if(g<=65535){if(s+2>=_)break;i[s++]=224|g>>12,i[s++]=128|g>>6&63,i[s++]=128|g&63}else{if(s+3>=_)break;i[s++]=240|g>>18,i[s++]=128|g>>12&63,i[s++]=128|g>>6&63,i[s++]=128|g&63}}return i[s]=0,s-p},Mr=(n,i,s)=>je(n,wr,i,s),ie=n=>{for(var i=0,s=0;s<n.length;++s){var f=n.charCodeAt(s);f<=127?i++:f<=2047?i+=2:f>=55296&&f<=57343?(i+=4,++s):i+=3}return i},Be=(n,i)=>{i=S(i),A(n,{name:i,fromWireType(s){for(var f=V[s>>2],p=s+4,_,b,g=p,b=0;b<=f;++b){var C=p+b;if(b==f||wr[C]==0){var F=C-g,D=tr(g,F);_===void 0?_=D:(_+="\0",_+=D),g=C+1}}return ue(s),_},toWireType(s,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var p,_=typeof f=="string";_||ArrayBuffer.isView(f)&&f.BYTES_PER_ELEMENT==1||L("Cannot pass non-string to std::string"),_?p=ie(f):p=f.length;var b=Yt(4+p+1),g=b+4;return V[b>>2]=p,_?Mr(f,g,p+1):wr.set(f,g),s!==null&&s.push(ue,b),b},argPackAdvance:sr,readValueFromPointer:x,destructorFunction(s){ue(s)}})},ot=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ye=(n,i)=>{for(var s=n,f=s>>1,p=f+i/2;!(f>=p)&&Gr[f];)++f;if(s=f<<1,s-n>32&&ot)return ot.decode(wr.subarray(n,s));for(var _="",b=0;!(b>=i/2);++b){var g=Ir[n+b*2>>1];if(g==0)break;_+=String.fromCharCode(g)}return _},st=(n,i,s)=>{if(s??(s=2147483647),s<2)return 0;s-=2;for(var f=i,p=s<n.length*2?s/2:n.length,_=0;_<p;++_){var b=n.charCodeAt(_);Ir[i>>1]=b,i+=2}return Ir[i>>1]=0,i-f},cn=n=>n.length*2,ln=(n,i)=>{for(var s=0,f="";!(s>=i/4);){var p=Rr[n+s*4>>2];if(p==0)break;if(++s,p>=65536){var _=p-65536;f+=String.fromCharCode(55296|_>>10,56320|_&1023)}else f+=String.fromCharCode(p)}return f},vn=(n,i,s)=>{if(s??(s=2147483647),s<4)return 0;for(var f=i,p=f+s-4,_=0;_<n.length;++_){var b=n.charCodeAt(_);if(b>=55296&&b<=57343){var g=n.charCodeAt(++_);b=65536+((b&1023)<<10)|g&1023}if(Rr[i>>2]=b,i+=4,i+4>p)break}return Rr[i>>2]=0,i-f},Mt=n=>{for(var i=0,s=0;s<n.length;++s){var f=n.charCodeAt(s);f>=55296&&f<=57343&&++s,i+=4}return i},Er=(n,i,s)=>{s=S(s);var f,p,_,b;i===2?(f=Ye,p=st,b=cn,_=g=>Gr[g>>1]):i===4&&(f=ln,p=vn,b=Mt,_=g=>V[g>>2]),A(n,{name:s,fromWireType:g=>{for(var C=V[g>>2],F,D=g+4,J=0;J<=C;++J){var Pr=g+4+J*i;if(J==C||_(Pr)==0){var Br=Pr-D,Yr=f(D,Br);F===void 0?F=Yr:(F+="\0",F+=Yr),D=Pr+i}}return ue(g),F},toWireType:(g,C)=>{typeof C!="string"&&L(`Cannot pass non-string to C++ string type ${s}`);var F=b(C),D=Yt(4+F+i);return V[D>>2]=F/i,p(C,D+4,F+i),g!==null&&g.push(ue,D),D},argPackAdvance:sr,readValueFromPointer:x,destructorFunction(g){ue(g)}})},xe=(n,i)=>{Oe(n)},er=(n,i,s,f,p,_)=>{P[n]={name:S(i),rawConstructor:re(s,f),rawDestructor:re(p,_),fields:[]}},dn=(n,i,s,f,p,_,b,g,C,F)=>{P[n].fields.push({fieldName:S(i),getterReturnType:s,getter:re(f,p),getterContext:_,setterArgumentType:b,setter:re(g,C),setterContext:F})},Vr=(n,i)=>{i=S(i),A(n,{isVoid:!0,name:i,argPackAdvance:0,fromWireType:()=>{},toWireType:(s,f)=>{}})},Ur=0,pn=()=>{Jr=!1,Ur=0},Ut=(n,i,s)=>{var f=[],p=n.toWireType(f,s);return f.length&&(V[i>>2]=vr.toHandle(f)),p},ut=(n,i,s)=>(n=vr.toValue(n),i=se(i,"emval::as"),Ut(i,s,n)),pe=[],Dt=(n,i,s,f)=>(n=pe[n],i=vr.toValue(i),n(null,i,s,f)),hn={},Ge=n=>{var i=hn[n];return i===void 0?S(n):i},It=(n,i,s,f,p)=>(n=pe[n],i=vr.toValue(i),s=Ge(s),n(i,i[s],f,p)),ft=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),mn=n=>n===0?vr.toHandle(ft()):(n=Ge(n),vr.toHandle(ft()[n])),_n=n=>{var i=pe.length;return pe.push(n),i},gn=(n,i)=>{for(var s=new Array(n),f=0;f<n;++f)s[f]=se(V[i+f*4>>2],`parameter ${f}`);return s},qe=(n,i,s)=>{var f=gn(n,i),p=f.shift();n--;var _=`return function (obj, func, destructorsRef, args) {
`,b=0,g=[];s===0&&g.push("obj");for(var C=["retType"],F=[p],D=0;D<n;++D)g.push(`arg${D}`),C.push(`argType${D}`),F.push(f[D]),_+=`  var arg${D} = argType${D}.readValueFromPointer(args${b?"+"+b:""});
`,b+=f[D].argPackAdvance;var J=s===1?"new func":"func.call";_+=`  var rv = ${J}(${g.join(", ")});
`,p.isVoid||(C.push("emval_returnValue"),F.push(Ut),_+=`  return emval_returnValue(retType, destructorsRef, rv);
`),_+=`};
`;var Pr=new Function(...C,_)(...F),Br=`methodCaller<(${f.map(Yr=>Yr.name).join(", ")}) => ${p.name}>`;return _n(Ce(Br,Pr))},yn=(n,i)=>(n=vr.toValue(n),i=vr.toValue(i),vr.toHandle(n[i])),Se=n=>{n>9&&(Xr[n+1]+=1)},wn=()=>vr.toHandle([]),Ke=n=>vr.toHandle(Ge(n)),he=()=>vr.toHandle({}),bn=n=>{var i=vr.toValue(n);w(i),We(n)},ct=(n,i,s)=>{n=vr.toValue(n),i=vr.toValue(i),s=vr.toValue(s),n[i]=s},kn=(n,i)=>{n=se(n,"_emval_take_value");var s=n.readValueFromPointer(i);return vr.toHandle(s)},Re={},Lt=n=>{if(n instanceof Pe||n=="unwind")return ne;_e(1,n)},Ht=()=>Jr||Ur>0,ze=n=>{var i;ne=n,Ht()||((i=h.onExit)==null||i.call(h,n),Cr=!0),_e(n,new Pe(n))},Tn=(n,i)=>{ne=n,ze(n)},Vt=Tn,En=()=>{if(!Ht())try{Vt(ne)}catch(n){Lt(n)}},An=n=>{if(!Cr)try{n(),En()}catch(i){Lt(i)}},Ze=()=>performance.now(),Nt=(n,i)=>{if(Re[n]&&(clearTimeout(Re[n].id),delete Re[n]),!i)return 0;var s=setTimeout(()=>{delete Re[n],An(()=>pt(n,Ze()))},i);return Re[n]={id:s,timeout_ms:i},0},Pn=(n,i,s,f)=>{var p=new Date().getFullYear(),_=new Date(p,0,1),b=new Date(p,6,1),g=_.getTimezoneOffset(),C=b.getTimezoneOffset(),F=Math.max(g,C);V[n>>2]=F*60,Rr[i>>2]=+(g!=C);var D=Br=>{var Yr=Br>=0?"-":"+",Xe=Math.abs(Br),mt=String(Math.floor(Xe/60)).padStart(2,"0"),_t=String(Xe%60).padStart(2,"0");return`UTC${Yr}${mt}${_t}`},J=D(g),Pr=D(C);C<g?(Mr(J,s,17),Mr(Pr,f,17)):(Mr(J,f,17),Mr(Pr,s,17))},$n=()=>2147483648,Wn=(n,i)=>Math.ceil(n/i)*i,ee=n=>{var i=$r.buffer,s=(n-i.byteLength+65535)/65536|0;try{return $r.grow(s),Lr(),1}catch{}},On=n=>{var i=wr.length;n>>>=0;var s=$n();if(n>s)return!1;for(var f=1;f<=4;f*=2){var p=i*(1+.2/f);p=Math.min(p,n+100663296);var _=Math.min(s,Wn(Math.max(n,p),65536)),b=ee(_);if(b)return!0}return!1},Je={},Bt=()=>X||"./this.program",me=()=>{if(!me.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Bt()};for(var s in Je)Je[s]===void 0?delete i[s]:i[s]=Je[s];var f=[];for(var s in i)f.push(`${s}=${i[s]}`);me.strings=f}return me.strings},Cn=(n,i)=>{var s=0,f=0;for(var p of me()){var _=i+s;V[n+f>>2]=_,s+=Mr(p,_,1/0)+1,f+=4}return 0},lt=(n,i)=>{var s=me();V[n>>2]=s.length;var f=0;for(var p of s)f+=ie(p)+1;return V[i>>2]=f,0},te=n=>52,vt=(n,i,s,f)=>52;function jn(n,i,s,f){return 70}var xn=[null,[],[]],Ar=(n,i)=>{var s=xn[n];i===0||i===10?((n===1?we:kr)(M(s)),s.length=0):s.push(i)},Sn=(n,i,s,f)=>{for(var p=0,_=0;_<s;_++){var b=V[i>>2],g=V[i+4>>2];i+=8;for(var C=0;C<g;C++)Ar(n,wr[b+C]);p+=g}return V[f>>2]=p,0};R(),Et(),h.noExitRuntime&&(Jr=h.noExitRuntime),h.print&&(we=h.print),h.printErr&&(kr=h.printErr),h.wasmBinary&&(q=h.wasmBinary),h.arguments&&h.arguments,h.thisProgram&&(X=h.thisProgram);var Rn={p:$,F:y,X:or,W:Q,E:dr,V:gr,Q:O,B:Hr,A:cr,P:Tt,O:Oe,z:en,a:Wt,y:nn,x:Rt,g:Ft,c:fn,N:at,M:Be,u:Er,o:xe,w:er,l:dn,L:Vr,K:pn,k:ut,r:Dt,q:It,b:We,n:mn,i:qe,h:yn,f:Se,J:wn,e:Ke,m:he,d:bn,j:ct,t:kn,I:Nt,H:Pn,G:On,U:Cn,T:lt,v:Vt,s:te,D:vt,S:jn,C:Sn,R:ze},Nr=await et();Nr.Z;var Yt=Nr._,dt=Nr.aa,ue=Nr.ba,pt=Nr.ca;function ht(){if(Fr>0){zr=ht;return}if(jr(),Fr>0){zr=ht;return}function n(){var i;h.calledRun=!0,!Cr&&(ve(),G(h),(i=h.onRuntimeInitialized)==null||i.call(h),de())}h.setStatus?(h.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>h.setStatus(""),1),n()},1)):n()}function Fn(){if(h.preInit)for(typeof h.preInit=="function"&&(h.preInit=[h.preInit]);h.preInit.length>0;)h.preInit.shift()()}Fn(),ht();const Gt=["heif_error_code","heif_suberror_code"];for(const n of Gt)for(const i in h[n])!h[n].hasOwnProperty(i)||i==="values"||(h[i]=h[n][i]);return rr=Or,rr};function co(v){if(Object.prototype.hasOwnProperty.call(v,"__esModule"))return v;var rr=v.default;if(typeof rr=="function"){var h=function G(){return this instanceof G?Reflect.construct(rr,arguments,this.constructor):rr.apply(this,arguments)};h.prototype=rr.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(v).forEach(function(G){var ar=Object.getOwnPropertyDescriptor(v,G);Object.defineProperty(h,G,ar.get?ar:{enumerable:!0,get:function(){return v[G]}})}),h}var kt={exports:{}},lo={},vo=Object.freeze({__proto__:null,default:lo}),Qe=co(vo);/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 9.2.0
 * @date    2024-10-11
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */var po=kt.exports,Li;function ho(){return Li||(Li=1,function(v,rr){(function(h,G){G(rr)})(po,function(h){var G={},ar={exports:{}};(function(k){var W=function(M){return typeof M<"u"&&M.versions!=null&&M.versions.node!=null&&M+""=="[object process]"};k.exports.isNode=W,k.exports.platform=typeof process<"u"&&W(process)?"node":"browser";var $=k.exports.platform==="node"&&Qe;k.exports.isMainThread=k.exports.platform==="node"?(!$||$.isMainThread)&&!process.connected:typeof Window<"u",k.exports.cpus=k.exports.platform==="browser"?self.navigator.hardwareConcurrency:Qe.cpus().length})(ar);var Or=ar.exports,Sr={},lr;function X(){if(lr)return Sr;lr=1;function k(M,tr){var y=this;if(!(this instanceof k))throw new SyntaxError("Constructor must be called with the new operator");if(typeof M!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var or=[],Q=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var dr=function(w,x){or.push(w),Q.push(x)};this.then=function(P,w){return new k(function(x,U){var N=P?W(P,x,U):x,fr=w?W(w,x,U):U;dr(N,fr)},y)};var gr=function(w){return y.resolved=!0,y.rejected=!1,y.pending=!1,or.forEach(function(x){x(w)}),dr=function(U,N){U(w)},gr=O=function(){},y},O=function(w){return y.resolved=!1,y.rejected=!0,y.pending=!1,Q.forEach(function(x){x(w)}),dr=function(U,N){N(w)},gr=O=function(){},y};this.cancel=function(){return tr?tr.cancel():O(new $),y},this.timeout=function(P){if(tr)tr.timeout(P);else{var w=setTimeout(function(){O(new B("Promise timed out after "+P+" ms"))},P);y.always(function(){clearTimeout(w)})}return y},M(function(P){gr(P)},function(P){O(P)})}function W(M,tr,y){return function(or){try{var Q=M(or);Q&&typeof Q.then=="function"&&typeof Q.catch=="function"?Q.then(tr,y):tr(Q)}catch(dr){y(dr)}}}k.prototype.catch=function(M){return this.then(null,M)},k.prototype.always=function(M){return this.then(M,M)},k.prototype.finally=function(M){var tr=this,y=function(){return new k(function(Q){return Q()}).then(M).then(function(){return tr})};return this.then(y,y)},k.all=function(M){return new k(function(tr,y){var or=M.length,Q=[];or?M.forEach(function(dr,gr){dr.then(function(O){Q[gr]=O,or--,or==0&&tr(Q)},function(O){or=0,y(O)})}):tr(Q)})},k.defer=function(){var M={};return M.promise=new k(function(tr,y){M.resolve=tr,M.reject=y}),M};function $(M){this.message=M||"promise cancelled",this.stack=new Error().stack}$.prototype=new Error,$.prototype.constructor=Error,$.prototype.name="CancellationError",k.CancellationError=$;function B(M){this.message=M||"timeout exceeded",this.stack=new Error().stack}return B.prototype=new Error,B.prototype.constructor=Error,B.prototype.name="TimeoutError",k.TimeoutError=B,Sr.Promise=k,Sr}function _e(k,W){(W==null||W>k.length)&&(W=k.length);for(var $=0,B=Array(W);$<W;$++)B[$]=k[$];return B}function ge(k,W){var $=typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(!$){if(Array.isArray(k)||($=q(k))||W){$&&(k=$);var B=0,M=function(){};return{s:M,n:function(){return B>=k.length?{done:!0}:{done:!1,value:k[B++]}},e:function(Q){throw Q},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tr,y=!0,or=!1;return{s:function(){$=$.call(k)},n:function(){var Q=$.next();return y=Q.done,Q},e:function(Q){or=!0,tr=Q},f:function(){try{y||$.return==null||$.return()}finally{if(or)throw tr}}}}function m(k,W,$){return(W=we(W))in k?Object.defineProperty(k,W,{value:$,enumerable:!0,configurable:!0,writable:!0}):k[W]=$,k}function le(k,W){var $=Object.keys(k);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(k);W&&(B=B.filter(function(M){return Object.getOwnPropertyDescriptor(k,M).enumerable})),$.push.apply($,B)}return $}function oe(k){for(var W=1;W<arguments.length;W++){var $=arguments[W]!=null?arguments[W]:{};W%2?le(Object($),!0).forEach(function(B){m(k,B,$[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors($)):le(Object($)).forEach(function(B){Object.defineProperty(k,B,Object.getOwnPropertyDescriptor($,B))})}return k}function ye(k,W){if(typeof k!="object"||!k)return k;var $=k[Symbol.toPrimitive];if($!==void 0){var B=$.call(k,W);if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(k)}function we(k){var W=ye(k,"string");return typeof W=="symbol"?W:W+""}function kr(k){"@babel/helpers - typeof";return kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},kr(k)}function q(k,W){if(k){if(typeof k=="string")return _e(k,W);var $={}.toString.call(k).slice(8,-1);return $==="Object"&&k.constructor&&($=k.constructor.name),$==="Map"||$==="Set"?Array.from(k):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?_e(k,W):void 0}}var $r={exports:{}},Cr={},ne;function _r(){return ne||(ne=1,Cr.validateOptions=function(W,$,B){if(W){var M=W?Object.keys(W):[],tr=M.find(function(or){return!$.includes(or)});if(tr)throw new Error('Object "'+B+'" contains an unknown option "'+tr+'"');var y=$.find(function(or){return Object.prototype[or]&&!M.includes(or)});if(y)throw new Error('Object "'+B+'" contains an inherited option "'+y+'" which is not defined in the object itself but in its prototype. Only plain objects are allowed. Please remove the option from the prototype or override it with a value "undefined".');return W}},Cr.workerOptsNames=["credentials","name","type"],Cr.forkOptsNames=["cwd","detached","env","execPath","execArgv","gid","serialization","signal","killSignal","silent","stdio","uid","windowsVerbatimArguments","timeout"],Cr.workerThreadOptsNames=["argv","env","eval","execArgv","stdin","stdout","stderr","workerData","trackUnmanagedFds","transferList","resourceLimits","name"]),Cr}var wr,Ir;function Gr(){return Ir||(Ir=1,wr=`!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).worker=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={};var r=function(e,n){this.message=e,this.transfer=n},o={};function i(e,n){var t=this;if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var a=function(e,n){r.push(e),o.push(n)};this.then=function(e,n){return new i((function(t,r){var o=e?u(e,t,r):t,i=n?u(n,t,r):r;a(o,i)}),t)};var f=function(e){return t.resolved=!0,t.rejected=!1,t.pending=!1,r.forEach((function(n){n(e)})),a=function(n,t){n(e)},f=d=function(){},t},d=function(e){return t.resolved=!1,t.rejected=!0,t.pending=!1,o.forEach((function(n){n(e)})),a=function(n,t){t(e)},f=d=function(){},t};this.cancel=function(){return n?n.cancel():d(new s),t},this.timeout=function(e){if(n)n.timeout(e);else{var r=setTimeout((function(){d(new c("Promise timed out after "+e+" ms"))}),e);t.always((function(){clearTimeout(r)}))}return t},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,n,t){return function(r){try{var o=e(r);o&&"function"==typeof o.then&&"function"==typeof o.catch?o.then(n,t):n(o)}catch(e){t(e)}}}function s(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function c(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.always=function(e){return this.then(e,e)},i.prototype.finally=function(e){var n=this,t=function(){return new i((function(e){return e()})).then(e).then((function(){return n}))};return this.then(t,t)},i.all=function(e){return new i((function(n,t){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&n(o)}),(function(e){r=0,t(e)}))})):n(o)}))},i.defer=function(){var e={};return e.promise=new i((function(n,t){e.resolve=n,e.reject=t})),e},s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="CancellationError",i.CancellationError=s,c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name="TimeoutError",i.TimeoutError=c,o.Promise=i,function(n){var t=r,i=o.Promise,u="__workerpool-cleanup__",s={exit:function(){}},c={addAbortListener:function(e){s.abortListeners.push(e)},emit:s.emit};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)s.on=function(e,n){addEventListener(e,(function(e){n(e.data)}))},s.send=function(e,n){n?postMessage(e,n):postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var a;try{a=require("worker_threads")}catch(n){if("object"!==e(n)||null===n||"MODULE_NOT_FOUND"!==n.code)throw n}if(a&&null!==a.parentPort){var f=a.parentPort;s.send=f.postMessage.bind(f),s.on=f.on.bind(f),s.exit=process.exit.bind(process)}else s.on=process.on.bind(process),s.send=function(e){process.send(e)},s.on("disconnect",(function(){process.exit(1)})),s.exit=process.exit.bind(process)}function d(e){return Object.getOwnPropertyNames(e).reduce((function(n,t){return Object.defineProperty(n,t,{value:e[t],enumerable:!0})}),{})}function l(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}s.methods={},s.methods.run=function(e,n){var t=new Function("return ("+e+").apply(this, arguments);");return t.worker=c,t.apply(t,n)},s.methods.methods=function(){return Object.keys(s.methods)},s.terminationHandler=void 0,s.abortListenerTimeout=1e3,s.abortListeners=[],s.terminateAndExit=function(e){var n=function(){s.exit(e)};if(!s.terminationHandler)return n();var t=s.terminationHandler(e);return l(t)?(t.then(n,n),t):(n(),new i((function(e,n){n(new Error("Worker terminating"))})))},s.cleanup=function(e){if(!s.abortListeners.length)return s.send({id:e,method:u,error:d(new Error("Worker terminating"))}),new i((function(e){e()}));var n,t=s.abortListeners.map((function(e){return e()})),r=new i((function(e,t){n=setTimeout((function(){t(new Error("Timeout occured waiting for abort handler, killing worker"))}),s.abortListenerTimeout)})),o=i.all(t).then((function(){clearTimeout(n),s.abortListeners.length||(s.abortListeners=[])}),(function(){clearTimeout(n),s.exit()}));return i.all([o,r]).then((function(){s.send({id:e,method:u,error:null})}),(function(n){s.send({id:e,method:u,error:n?d(n):null})}))};var p=null;s.on("message",(function(e){if("__workerpool-terminate__"===e)return s.terminateAndExit(0);if(e.method===u)return s.cleanup(e.id);try{var n=s.methods[e.method];if(!n)throw new Error('Unknown method "'+e.method+'"');p=e.id;var r=n.apply(n,e.params);l(r)?r.then((function(n){n instanceof t?s.send({id:e.id,result:n.message,error:null},n.transfer):s.send({id:e.id,result:n,error:null}),p=null})).catch((function(n){s.send({id:e.id,result:null,error:d(n)}),p=null})):(r instanceof t?s.send({id:e.id,result:r.message,error:null},r.transfer):s.send({id:e.id,result:r,error:null}),p=null)}catch(n){s.send({id:e.id,result:null,error:d(n)})}})),s.register=function(e,n){if(e)for(var t in e)e.hasOwnProperty(t)&&(s.methods[t]=e[t],s.methods[t].worker=c);n&&(s.terminationHandler=n.onTerminate,s.abortListenerTimeout=n.abortListenerTimeout||1e3),s.send("ready")},s.emit=function(e){if(p){if(e instanceof t)return void s.send({id:p,isEvent:!0,payload:e.message},e.transfer);s.send({id:p,isEvent:!0,payload:e})}},n.add=s.register,n.emit=s.emit}(t),n(t)}));
//# sourceMappingURL=worker.min.js.map
`),wr}var Rr;function V(){if(Rr)return $r.exports;Rr=1;var k=X(),W=k.Promise,$=Or,B=_r(),M=B.validateOptions,tr=B.forkOptsNames,y=B.workerThreadOptsNames,or=B.workerOptsNames,Q="__workerpool-terminate__",dr="__workerpool-cleanup__";function gr(){var I=P();if(!I)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return I}function O(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":kr(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function P(){try{return Qe}catch(I){if(kr(I)==="object"&&I!==null&&I.code==="MODULE_NOT_FOUND")return null;throw I}}function w(){if($.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var I=new Blob([Gr()],{type:"text/javascript"});return window.URL.createObjectURL(I)}else return __dirname+"/worker.js"}function x(I,R){if(R.workerType==="web")return O(),U(I,R.workerOpts,Worker);if(R.workerType==="thread")return T=gr(),N(I,T,R);if(R.workerType==="process"||!R.workerType)return fr(I,yr(R),Qe);if($.platform==="browser")return O(),U(I,R.workerOpts,Worker);var T=P();return T?N(I,T,R):fr(I,yr(R),Qe)}function U(I,R,T){M(R,or,"workerOpts");var S=new T(I,R);return S.isBrowserWorker=!0,S.on=function(Y,L){this.addEventListener(Y,function(nr){L(nr.data)})},S.send=function(Y,L){this.postMessage(Y,L)},S}function N(I,R,T){var S,Y;M(T==null?void 0:T.workerThreadOpts,y,"workerThreadOpts");var L=new R.Worker(I,oe({stdout:(S=T==null?void 0:T.emitStdStreams)!==null&&S!==void 0?S:!1,stderr:(Y=T==null?void 0:T.emitStdStreams)!==null&&Y!==void 0?Y:!1},T==null?void 0:T.workerThreadOpts));return L.isWorkerThread=!0,L.send=function(nr,A){this.postMessage(nr,A)},L.kill=function(){return this.terminate(),!0},L.disconnect=function(){this.terminate()},T!=null&&T.emitStdStreams&&(L.stdout.on("data",function(nr){return L.emit("stdout",nr)}),L.stderr.on("data",function(nr){return L.emit("stderr",nr)})),L}function fr(I,R,T){M(R.forkOpts,tr,"forkOpts");var S=T.fork(I,R.forkArgs,R.forkOpts),Y=S.send;return S.send=function(L){return Y.call(S,L)},R.emitStdStreams&&(S.stdout.on("data",function(L){return S.emit("stdout",L)}),S.stderr.on("data",function(L){return S.emit("stderr",L)})),S.isChildProcess=!0,S}function yr(I){I=I||{};var R=process.execArgv.join(" "),T=R.indexOf("--inspect")!==-1,S=R.indexOf("--debug-brk")!==-1,Y=[];return T&&(Y.push("--inspect="+I.debugPort),S&&Y.push("--debug-brk")),process.execArgv.forEach(function(L){L.indexOf("--max-old-space-size")>-1&&Y.push(L)}),Object.assign({},I,{forkArgs:I.forkArgs,forkOpts:Object.assign({},I.forkOpts,{execArgv:(I.forkOpts&&I.forkOpts.execArgv||[]).concat(Y),stdio:I.emitStdStreams?"pipe":void 0})})}function Z(I){for(var R=new Error(""),T=Object.keys(I),S=0;S<T.length;S++)R[T[S]]=I[T[S]];return R}function K(I,R){if(Object.keys(I.processing).length===1){var T=Object.values(I.processing)[0];T.options&&typeof T.options.on=="function"&&T.options.on(R)}}function Hr(I,R){var T=this,S=R||{};this.script=I||w(),this.worker=x(this.script,S),this.debugPort=S.debugPort,this.forkOpts=S.forkOpts,this.forkArgs=S.forkArgs,this.workerOpts=S.workerOpts,this.workerThreadOpts=S.workerThreadOpts,this.workerTerminateTimeout=S.workerTerminateTimeout,I||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("stdout",function(A){K(T,{stdout:A.toString()})}),this.worker.on("stderr",function(A){K(T,{stderr:A.toString()})}),this.worker.on("message",function(A){if(!T.terminated)if(typeof A=="string"&&A==="ready")T.worker.ready=!0,L();else{var mr=A.id,cr=T.processing[mr];if(cr!==void 0&&(A.isEvent?cr.options&&typeof cr.options.on=="function"&&cr.options.on(A.payload):(delete T.processing[mr],T.terminating===!0&&T.terminate(),A.error?cr.resolver.reject(Z(A.error)):cr.resolver.resolve(A.result))),A.method===dr){var sr=T.tracking[A.id];sr!==void 0&&(A.error?(clearTimeout(sr.timeoutId),sr.resolver.reject(Z(A.error))):(T.tracking&&clearTimeout(sr.timeoutId),sr.resolver.resolve(sr.result))),delete T.tracking[mr]}}});function Y(A){T.terminated=!0;for(var mr in T.processing)T.processing[mr]!==void 0&&T.processing[mr].resolver.reject(A);T.processing=Object.create(null)}function L(){var A=ge(T.requestQueue.splice(0)),mr;try{for(A.s();!(mr=A.n()).done;){var cr=mr.value;T.worker.send(cr.message,cr.transfer)}}catch(sr){A.e(sr)}finally{A.f()}}var nr=this.worker;this.worker.on("error",Y),this.worker.on("exit",function(A,mr){var cr=`Workerpool Worker terminated Unexpectedly
`;cr+="    exitCode: `"+A+"`\n",cr+="    signalCode: `"+mr+"`\n",cr+="    workerpool.script: `"+T.script+"`\n",cr+="    spawnArgs: `"+nr.spawnargs+"`\n",cr+="    spawnfile: `"+nr.spawnfile+"`\n",cr+="    stdout: `"+nr.stdout+"`\n",cr+="    stderr: `"+nr.stderr+"`\n",Y(new Error(cr))}),this.processing=Object.create(null),this.tracking=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}return Hr.prototype.methods=function(){return this.exec("methods")},Hr.prototype.exec=function(I,R,T,S){T||(T=W.defer());var Y=++this.lastId;this.processing[Y]={id:Y,resolver:T,options:S};var L={message:{id:Y,method:I,params:R},transfer:S&&S.transfer};this.terminated?T.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(L.message,L.transfer):this.requestQueue.push(L);var nr=this;return T.promise.catch(function(A){if(A instanceof W.CancellationError||A instanceof W.TimeoutError)return nr.tracking[Y]={id:Y,resolver:W.defer()},delete nr.processing[Y],nr.tracking[Y].resolver.promise=nr.tracking[Y].resolver.promise.catch(function(mr){delete nr.tracking[Y];var cr=nr.terminateAndNotify(!0).then(function(){throw mr},function(sr){throw sr});return cr}),nr.worker.send({id:Y,method:dr}),nr.tracking[Y].timeoutId=setTimeout(function(){nr.tracking[Y].resolver.reject(A)},nr.workerTerminateTimeout),nr.tracking[Y].resolver.promise;throw A})},Hr.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},Hr.prototype.terminate=function(I,R){var T=this;if(I){for(var S in this.processing)this.processing[S]!==void 0&&this.processing[S].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}for(var Y=0,L=Object.values(T.tracking);Y<L.length;Y++){var nr=L[Y];clearTimeout(nr.timeoutId),nr.resolver.reject(new Error("Worker Terminating"))}if(T.tracking=Object.create(null),typeof R=="function"&&(this.terminationHandler=R),this.busy())this.terminating=!0;else{var A=function(sr){if(T.terminated=!0,T.cleaning=!1,T.worker!=null&&T.worker.removeAllListeners&&T.worker.removeAllListeners("message"),T.worker=null,T.terminating=!1,T.terminationHandler)T.terminationHandler(sr,T);else if(sr)throw sr};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){A(new Error("worker already killed!"));return}var mr=setTimeout(function(){T.worker&&T.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(mr),T.worker&&(T.worker.killed=!0),A()}),this.worker.ready?this.worker.send(Q):this.requestQueue.push({message:Q}),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");A()}},Hr.prototype.terminateAndNotify=function(I,R){var T=W.defer();return R&&T.promise.timeout(R),this.terminate(I,function(S,Y){S?T.reject(S):T.resolve(Y)}),T.promise},$r.exports=Hr,$r.exports._tryRequireWorkerThreads=P,$r.exports._setupProcessWorker=fr,$r.exports._setupBrowserWorker=U,$r.exports._setupWorkerThreadWorker=N,$r.exports.ensureWorkerThreads=gr,$r.exports}var qr,hr;function be(){if(hr)return qr;hr=1;var k=65535;qr=W;function W(){this.ports=Object.create(null),this.length=0}return W.prototype.nextAvailableStartingAt=function($){for(;this.ports[$]===!0;)$++;if($>=k)throw new Error("WorkerPool debug port limit reached: "+$+">= "+k);return this.ports[$]=!0,this.length++,$},W.prototype.releasePort=function($){delete this.ports[$],this.length--},qr}var Kr,Lr;function jr(){if(Lr)return Kr;Lr=1;var k=X(),W=k.Promise,$=V(),B=Or,M=be(),tr=new M;function y(O,P){typeof O=="string"?this.script=O||null:(this.script=null,P=O),this.workers=[],this.tasks=[],P=P||{},this.forkArgs=Object.freeze(P.forkArgs||[]),this.forkOpts=Object.freeze(P.forkOpts||{}),this.workerOpts=Object.freeze(P.workerOpts||{}),this.workerThreadOpts=Object.freeze(P.workerThreadOpts||{}),this.debugPortStart=P.debugPortStart||43210,this.nodeWorker=P.nodeWorker,this.workerType=P.workerType||P.nodeWorker||"auto",this.maxQueueSize=P.maxQueueSize||1/0,this.workerTerminateTimeout=P.workerTerminateTimeout||1e3,this.onCreateWorker=P.onCreateWorker||function(){return null},this.onTerminateWorker=P.onTerminateWorker||function(){return null},this.emitStdStreams=P.emitStdStreams||!1,P&&"maxWorkers"in P?(or(P.maxWorkers),this.maxWorkers=P.maxWorkers):this.maxWorkers=Math.max((B.cpus||4)-1,1),P&&"minWorkers"in P&&(P.minWorkers==="max"?this.minWorkers=this.maxWorkers:(Q(P.minWorkers),this.minWorkers=P.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&$.ensureWorkerThreads()}y.prototype.exec=function(O,P,w){if(P&&!Array.isArray(P))throw new TypeError('Array expected as argument "params"');if(typeof O=="string"){var x=W.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var U=this.tasks,N={method:O,params:P,resolver:x,timeout:null,options:w};U.push(N);var fr=x.promise.timeout;return x.promise.timeout=function(Z){return U.indexOf(N)!==-1?(N.timeout=Z,x.promise):fr.call(x.promise,Z)},this._next(),x.promise}else{if(typeof O=="function")return this.exec("run",[String(O),P],w);throw new TypeError('Function or string expected as argument "method"')}},y.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var O=this;return this.exec("methods").then(function(P){var w={};return P.forEach(function(x){w[x]=function(){return O.exec(x,Array.prototype.slice.call(arguments))}}),w})},y.prototype._next=function(){if(this.tasks.length>0){var O=this._getWorker();if(O){var P=this,w=this.tasks.shift();if(w.resolver.promise.pending){var x=O.exec(w.method,w.params,w.resolver,w.options).then(P._boundNext).catch(function(){if(O.terminated)return P._removeWorker(O)}).then(function(){P._next()});typeof w.timeout=="number"&&x.timeout(w.timeout)}else P._next()}}},y.prototype._getWorker=function(){for(var O=this.workers,P=0;P<O.length;P++){var w=O[P];if(w.busy()===!1)return w}return O.length<this.maxWorkers?(w=this._createWorkerHandler(),O.push(w),w):null},y.prototype._removeWorker=function(O){var P=this;return tr.releasePort(O.debugPort),this._removeWorkerFromList(O),this._ensureMinWorkers(),new W(function(w,x){O.terminate(!1,function(U){P.onTerminateWorker({forkArgs:O.forkArgs,forkOpts:O.forkOpts,workerThreadOpts:O.workerThreadOpts,script:O.script}),U?x(U):w(O)})})},y.prototype._removeWorkerFromList=function(O){var P=this.workers.indexOf(O);P!==-1&&this.workers.splice(P,1)},y.prototype.terminate=function(O,P){var w=this;this.tasks.forEach(function(yr){yr.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var x=function(Z){tr.releasePort(Z.debugPort),this._removeWorkerFromList(Z)},U=x.bind(this),N=[],fr=this.workers.slice();return fr.forEach(function(yr){var Z=yr.terminateAndNotify(O,P).then(U).always(function(){w.onTerminateWorker({forkArgs:yr.forkArgs,forkOpts:yr.forkOpts,workerThreadOpts:yr.workerThreadOpts,script:yr.script})});N.push(Z)}),W.all(N)},y.prototype.stats=function(){var O=this.workers.length,P=this.workers.filter(function(w){return w.busy()}).length;return{totalWorkers:O,busyWorkers:P,idleWorkers:O-P,pendingTasks:this.tasks.length,activeTasks:P}},y.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var O=this.workers.length;O<this.minWorkers;O++)this.workers.push(this._createWorkerHandler())},y.prototype._createWorkerHandler=function(){var O=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerOpts:this.workerOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new $(O.script||this.script,{forkArgs:O.forkArgs||this.forkArgs,forkOpts:O.forkOpts||this.forkOpts,workerOpts:O.workerOpts||this.workerOpts,workerThreadOpts:O.workerThreadOpts||this.workerThreadOpts,debugPort:tr.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout,emitStdStreams:this.emitStdStreams})};function or(O){if(!dr(O)||!gr(O)||O<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function Q(O){if(!dr(O)||!gr(O)||O<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function dr(O){return typeof O=="number"}function gr(O){return Math.round(O)==O}return Kr=y,Kr}var ve={},de,Fr;function zr(){if(Fr)return de;Fr=1;function k(W,$){this.message=W,this.transfer=$}return de=k,de}var ke;function Te(){return ke||(ke=1,function(k){var W=zr(),$=X().Promise,B="__workerpool-terminate__",M="__workerpool-cleanup__",tr=1e3,y={exit:function(){}},or={addAbortListener:function(x){y.abortListeners.push(x)},emit:y.emit};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")y.on=function(w,x){addEventListener(w,function(U){x(U.data)})},y.send=function(w,x){x?postMessage(w,x):postMessage(w)};else if(typeof process<"u"){var Q;try{Q=Qe}catch(w){if(!(kr(w)==="object"&&w!==null&&w.code==="MODULE_NOT_FOUND"))throw w}if(Q&&Q.parentPort!==null){var dr=Q.parentPort;y.send=dr.postMessage.bind(dr),y.on=dr.on.bind(dr),y.exit=process.exit.bind(process)}else y.on=process.on.bind(process),y.send=function(w){process.send(w)},y.on("disconnect",function(){process.exit(1)}),y.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function gr(w){return Object.getOwnPropertyNames(w).reduce(function(x,U){return Object.defineProperty(x,U,{value:w[U],enumerable:!0})},{})}function O(w){return w&&typeof w.then=="function"&&typeof w.catch=="function"}y.methods={},y.methods.run=function(x,U){var N=new Function("return ("+x+").apply(this, arguments);");return N.worker=or,N.apply(N,U)},y.methods.methods=function(){return Object.keys(y.methods)},y.terminationHandler=void 0,y.abortListenerTimeout=tr,y.abortListeners=[],y.terminateAndExit=function(w){var x=function(){y.exit(w)};if(!y.terminationHandler)return x();var U=y.terminationHandler(w);return O(U)?(U.then(x,x),U):(x(),new $(function(N,fr){fr(new Error("Worker terminating"))}))},y.cleanup=function(w){if(!y.abortListeners.length)return y.send({id:w,method:M,error:gr(new Error("Worker terminating"))}),new $(function(K){K()});var x=function(){y.exit()},U=function(){y.abortListeners.length||(y.abortListeners=[])},N=y.abortListeners.map(function(K){return K()}),fr,yr=new $(function(K,Hr){fr=setTimeout(function(){Hr(new Error("Timeout occured waiting for abort handler, killing worker"))},y.abortListenerTimeout)}),Z=$.all(N).then(function(){clearTimeout(fr),U()},function(){clearTimeout(fr),x()});return $.all([Z,yr]).then(function(){y.send({id:w,method:M,error:null})},function(K){y.send({id:w,method:M,error:K?gr(K):null})})};var P=null;y.on("message",function(w){if(w===B)return y.terminateAndExit(0);if(w.method===M)return y.cleanup(w.id);try{var x=y.methods[w.method];if(x){P=w.id;var U=x.apply(x,w.params);O(U)?U.then(function(N){N instanceof W?y.send({id:w.id,result:N.message,error:null},N.transfer):y.send({id:w.id,result:N,error:null}),P=null}).catch(function(N){y.send({id:w.id,result:null,error:gr(N)}),P=null}):(U instanceof W?y.send({id:w.id,result:U.message,error:null},U.transfer):y.send({id:w.id,result:U,error:null}),P=null)}else throw new Error('Unknown method "'+w.method+'"')}catch(N){y.send({id:w.id,result:null,error:gr(N)})}}),y.register=function(w,x){if(w)for(var U in w)w.hasOwnProperty(U)&&(y.methods[U]=w[U],y.methods[U].worker=or);x&&(y.terminationHandler=x.onTerminate,y.abortListenerTimeout=x.abortListenerTimeout||tr),y.send("ready")},y.emit=function(w){if(P){if(w instanceof W){y.send({id:P,isEvent:!0,payload:w.message},w.transfer);return}y.send({id:P,isEvent:!0,payload:w})}},k.add=y.register,k.emit=y.emit}(ve)),ve}var Ee=Or.platform,Tr=Or.isMainThread,Me=Or.cpus;function Ae(k,W){var $=jr();return new $(k,W)}var rt=G.pool=Ae;function Ue(k,W){var $=Te();$.add(k,W)}var De=G.worker=Ue;function Ie(k){var W=Te();W.emit(k)}var et=G.workerEmit=Ie,Pe=X(),Le=Pe.Promise,$e=G.Promise=Le,tt=G.Transfer=zr(),He=G.platform=Ee,Zr=G.isMainThread=Tr,Jr=G.cpus=Me;h.Promise=$e,h.Transfer=tt,h.cpus=Jr,h.default=G,h.isMainThread=Zr,h.platform=He,h.pool=rt,h.worker=De,h.workerEmit=et,Object.defineProperty(h,"__esModule",{value:!0})})}(kt,kt.exports)),kt.exports}var mo=ho();class Bi{constructor(rr,h,G,ar=8){Fe(this,"data");Fe(this,"width");Fe(this,"height");Fe(this,"depth");this.data=rr,this.width=h,this.height=G,this.depth=ar}}Bi.prototype.colorSpace="srgb";var Gn;(function(v){v[v.YUV444=1]="YUV444",v[v.YUV422=2]="YUV422",v[v.YUV420=3]="YUV420",v[v.YUV400=4]="YUV400"})(Gn||(Gn={}));var qn;(function(v){v[v.Auto=0]="Auto",v[v.PSNR=1]="PSNR",v[v.SSIM=2]="SSIM"})(qn||(qn={}));Gn.YUV420,qn.Auto;const _o=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&_o.decode();const Yn=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Yn.encodeInto;var Kn;(function(v){v[v.GRAYSCALE=1]="GRAYSCALE",v[v.RGB=2]="RGB",v[v.YCbCr=3]="YCbCr"})(Kn||(Kn={}));var zn;(function(v){v[v.JPEG_Annex_K=0]="JPEG_Annex_K",v[v.Flat=1]="Flat",v[v.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",v[v.ImageMagick=3]="ImageMagick",v[v.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",v[v.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",v[v.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",v[v.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",v[v.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(zn||(zn={}));Kn.YCbCr,zn.ImageMagick;var Hi;(function(v){v[v.Default=-1]="Default",v[v.False=0]="False",v[v.True=1]="True"})(Hi||(Hi={}));var Zn;(function(v){v[v.Default=-1]="Default",v[v.Zero=0]="Zero",v[v.Left=1]="Left",v[v.Top=2]="Top",v[v.Average0=3]="Average0",v[v.Select=4]="Select",v[v.Gradient=5]="Gradient",v[v.Weighted=6]="Weighted",v[v.TopRight=7]="TopRight",v[v.TopLeft=8]="TopLeft",v[v.LeftLeft=9]="LeftLeft",v[v.Average1=10]="Average1",v[v.Average2=11]="Average2",v[v.Average3=12]="Average3",v[v.Average4=13]="Average4",v[v.Best=14]="Best",v[v.Variable=15]="Variable"})(Zn||(Zn={}));Zn.Default;var Jn;(function(v){v[v.None=0]="None",v[v.SegmentSmooth=1]="SegmentSmooth",v[v.Dithering=2]="Dithering"})(Jn||(Jn={}));var Xn;(function(v){v[v.None=0]="None",v[v.Fast=1]="Fast",v[v.Best=2]="Best"})(Xn||(Xn={}));Jn.None,Xn.Fast;var go=(()=>{var v=import.meta.url;return function(rr={}){var Fi;var h;function G(){return hr.buffer!=jr.buffer&&Tr(),jr}function ar(){return hr.buffer!=jr.buffer&&Tr(),ve}function Or(){return hr.buffer!=jr.buffer&&Tr(),de}function Sr(){return hr.buffer!=jr.buffer&&Tr(),Fr}function lr(){return hr.buffer!=jr.buffer&&Tr(),zr}function X(){return hr.buffer!=jr.buffer&&Tr(),ke}function _e(){return hr.buffer!=jr.buffer&&Tr(),Te}function ge(){return hr.buffer!=jr.buffer&&Tr(),Ee}var m=rr,le,oe,ye=new Promise((r,e)=>{le=r,oe=e}),we=typeof window=="object",kr=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var q=kr&&((Fi=self.name)==null?void 0:Fi.startsWith("em-pthread")),$r=Object.assign({},m),Cr="./this.program",ne=(r,e)=>{throw e},_r="";function wr(r){return m.locateFile?m.locateFile(r,_r):_r+r}var Ir,Gr;(we||kr)&&(kr?_r=self.location.href:typeof document<"u"&&document.currentScript&&(_r=document.currentScript.src),v&&(_r=v),_r.startsWith("blob:")?_r="":_r=_r.substr(0,_r.replace(/[?#].*/,"").lastIndexOf("/")+1),kr&&(Gr=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),Ir=r=>fetch(r,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))));var Rr=m.print||console.log.bind(console),V=m.printErr||console.error.bind(console);Object.assign(m,$r),$r=null,m.arguments&&m.arguments,m.thisProgram&&(Cr=m.thisProgram);var qr=m.wasmBinary,hr,be,Kr=!1,Lr,jr,ve,de,Fr,zr,ke,Te,Ee;function Tr(){var r=hr.buffer;m.HEAP8=jr=new Int8Array(r),m.HEAP16=de=new Int16Array(r),m.HEAPU8=ve=new Uint8Array(r),m.HEAPU16=Fr=new Uint16Array(r),m.HEAP32=zr=new Int32Array(r),m.HEAPU32=ke=new Uint32Array(r),m.HEAPF32=Te=new Float32Array(r),m.HEAPF64=Ee=new Float64Array(r)}if(q){let r=function(...a){var o=a.join(" ");console.error(o)},e=function(...a){var o=a.join(" ");postMessage({cmd:"alert",text:o,threadId:Zt()})},t=function(a){try{var o=a.data,u=o.cmd;if(u==="load"){let l=[];self.onmessage=c=>l.push(c),self.startWorker=c=>{postMessage({cmd:"loaded"});for(let d of l)t(d);self.onmessage=t};for(const c of o.handlers)(!m[c]||m[c].proxy)&&(m[c]=(...d)=>{postMessage({cmd:"callHandler",handler:c,args:d})},c=="print"&&(Rr=m[c]),c=="printErr"&&(V=m[c]));hr=o.wasmMemory,Tr(),Me(o.wasmModule)}else if(u==="run"){cr(o.pthread_ptr),Vn(o.pthread_ptr,0,0,1,0,0),A.receiveObjectTransfer(o),A.threadInitTLS(),Un(o.pthread_ptr),Ae||(mi(),Ae=!0);try{Xr(o.start_routine,o.arg)}catch(l){if(l!="unwind")throw l}}else o.target==="setimmediate"||(u==="checkMailbox"?Ae&&Kt():u&&(V(`worker: received unknown command ${u}`),V(o)))}catch(l){throw _i(),l}};var Me,Ae=!1;m.printErr||(V=r),self.alert=e,m.instantiateWasm=(a,o)=>new Promise((u,l)=>{Me=c=>{var d=new WebAssembly.Instance(c,O());o(d),u()}}),self.onunhandledrejection=a=>{throw a.reason||a},self.onmessage=t}if(!q){if(m.wasmMemory)hr=m.wasmMemory;else{var rt=m.INITIAL_MEMORY||16777216;hr=new WebAssembly.Memory({initial:rt/65536,maximum:32768,shared:!0})}Tr()}var Ue=[],De=[],Ie=[];function et(){var r=m.preRun;r&&(typeof r=="function"&&(r=[r]),r.forEach($e)),mr(Ue)}function Pe(){q||mr(De)}function Le(){if(!q){var r=m.postRun;r&&(typeof r=="function"&&(r=[r]),r.forEach(He)),mr(Ie)}}function $e(r){Ue.unshift(r)}function tt(r){De.unshift(r)}function He(r){Ie.unshift(r)}var Zr=0,Jr=null;function k(r){var e;Zr++,(e=m.monitorRunDependencies)==null||e.call(m,Zr)}function W(r){var t;if(Zr--,(t=m.monitorRunDependencies)==null||t.call(m,Zr),Zr==0&&Jr){var e=Jr;Jr=null,e()}}function $(r){var t;(t=m.onAbort)==null||t.call(m,r),r="Aborted("+r+")",V(r),Kr=!0,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw oe(e),e}var B="data:application/octet-stream;base64,",M=r=>r.startsWith(B);function tr(){if(m.locateFile){var r="heic-enc.wasm";return M(r)?r:wr(r)}return new URL(""+new URL("assets/heic-enc-BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var y;function or(r){if(r==y&&qr)return new Uint8Array(qr);if(Gr)return Gr(r);throw"both async and sync fetching of the wasm failed"}function Q(r){return qr?Promise.resolve().then(()=>or(r)):Ir(r).then(e=>new Uint8Array(e),()=>or(r))}function dr(r,e,t){return Q(r).then(a=>WebAssembly.instantiate(a,e)).then(t,a=>{V(`failed to asynchronously prepare wasm: ${a}`),$(a)})}function gr(r,e,t,a){return!r&&typeof WebAssembly.instantiateStreaming=="function"&&!M(e)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(o=>{var u=WebAssembly.instantiateStreaming(o,t);return u.then(a,function(l){return V(`wasm streaming compile failed: ${l}`),V("falling back to ArrayBuffer instantiation"),dr(e,t,a)})}):dr(e,t,a)}function O(){return Da(),{a:pi}}function P(){var r=O();function e(a,o){return z=a.exports,rn(z.Wa),Tt=z.Va,tt(z.Pa),be=o,W(),z}k();function t(a){e(a.instance,a.module)}if(m.instantiateWasm)try{return m.instantiateWasm(r,e)}catch(a){V(`Module.instantiateWasm callback failed with error: ${a}`),oe(a)}return y??(y=tr()),gr(qr,y,r,t).catch(oe),{}}function w(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}var x=r=>{r.terminate(),r.onmessage=e=>{}},U=r=>{var e=A.pthreads[r];A.returnWorkerToPool(e)},N=r=>{var e=A.getNewWorker();if(!e)return 6;A.runningWorkers.push(e),A.pthreads[r.pthread_ptr]=e,e.pthread_ptr=r.pthread_ptr;var t={cmd:"run",start_routine:r.startRoutine,arg:r.arg,pthread_ptr:r.pthread_ptr};return e.postMessage(t,r.transferList),0},fr=0,yr=()=>We||fr>0,Z=()=>Pi(),K=r=>Ei(r),Hr=r=>Ai(r),I=(r,e)=>e+2097152>>>0<4194305-!!r?(r>>>0)+e*4294967296:NaN,R=(r,e,t,...a)=>{for(var o=a.length,u=Z(),l=Hr(o*8),c=l>>3,d=0;d<a.length;d++){var E=a[d];ge()[c+d]=E}var j=gi(r,e,o,l,t);return K(u),j};function T(r){var e;if(q)return R(0,0,1,r);Lr=r,yr()||(A.terminateAllThreads(),(e=m.onExit)==null||e.call(m,r),Kr=!0),ne(r,new w(r))}var S=r=>{if(r instanceof w||r=="unwind")return Lr;ne(1,r)};function Y(r){if(q)return R(1,0,0,r);nr(r)}var L=(r,e)=>{if(Lr=r,q)throw Y(r),"unwind";T(r)},nr=L,A={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){q||A.initMainThread()},initMainThread(){for(var r=2;r--;)A.allocateUnusedWorker();$e(()=>{k(),A.loadWasmModuleToAllWorkers(()=>W())})},terminateAllThreads:()=>{for(var r of A.runningWorkers)x(r);for(var r of A.unusedWorkers)x(r);A.unusedWorkers=[],A.runningWorkers=[],A.pthreads=[]},returnWorkerToPool:r=>{var e=r.pthread_ptr;delete A.pthreads[e],A.unusedWorkers.push(r),A.runningWorkers.splice(A.runningWorkers.indexOf(r),1),r.pthread_ptr=0,yi(e)},receiveObjectTransfer(r){},threadInitTLS(){A.tlsInitFunctions.forEach(r=>r())},loadWasmModuleToWorker:r=>new Promise(e=>{r.onmessage=u=>{var l=u.data,c=l.cmd;if(l.targetThread&&l.targetThread!=Zt()){var d=A.pthreads[l.targetThread];d?d.postMessage(l,l.transferList):V(`Internal error! Worker sent a message "${c}" to target pthread ${l.targetThread}, but that thread no longer exists!`);return}c==="checkMailbox"?Kt():c==="spawnThread"?N(l):c==="cleanupThread"?U(l.thread):c==="loaded"?(r.loaded=!0,e(r)):c==="alert"?alert(`Thread ${l.threadId}: ${l.text}`):l.target==="setimmediate"?r.postMessage(l):c==="callHandler"?m[l.handler](...l.args):c&&V(`worker sent an unknown command ${c}`)},r.onerror=u=>{var l="worker sent an error!";throw V(`${l} ${u.filename}:${u.lineno}: ${u.message}`),u};var t=[],a=["onExit","onAbort","print","printErr"];for(var o of a)m.propertyIsEnumerable(o)&&t.push(o);r.postMessage({cmd:"load",handlers:t,wasmMemory:hr,wasmModule:be})}),loadWasmModuleToAllWorkers(r){if(q)return r();Promise.all(A.unusedWorkers.map(A.loadWasmModuleToWorker)).then(r)},allocateUnusedWorker(){var r;r=new Worker(new URL(""+new URL("heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),A.unusedWorkers.push(r)},getNewWorker(){return A.unusedWorkers.length==0&&(A.allocateUnusedWorker(),A.loadWasmModuleToWorker(A.unusedWorkers[0])),A.unusedWorkers.pop()}},mr=r=>{r.forEach(e=>e(m))},cr=r=>{Tr();var e=X()[r+52>>2],t=X()[r+56>>2],a=e-t;Ti(e,a),K(e)},sr=[],Tt,ur=r=>{var e=sr[r];return e||(r>=sr.length&&(sr.length=r+1),sr[r]=e=Tt.get(r)),e},Xr=(r,e)=>{fr=0,We=0;var t=ur(r)(e);function a(o){yr()?Lr=o:Nn(o)}a(t)},We=m.noExitRuntime||!0,rn=r=>A.tlsInitFunctions.push(r),Et=new TextDecoder,vr=(r,e)=>{if(!r)return"";for(var t=r+e,a=r;!(a>=t)&&ar()[a];)++a;return Et.decode(ar().slice(r,a))},At=(r,e,t,a)=>{$(`Assertion failed: ${vr(r)}, at: `+[e?vr(e):"unknown filename",t,a?vr(a):"unknown function"])},Oe=[],Ve=0,Pt=r=>{var e=new Ce(r);return e.get_caught()||(e.set_caught(!0),Ve--),e.set_rethrown(!1),Oe.push(e),Wi(r),Ci(r)},Qr=0,en=()=>{pr(0,0);var r=Oe.pop();$i(r.excPtr),Qr=0};class Ce{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){X()[this.ptr+4>>2]=e}get_type(){return X()[this.ptr+4>>2]}set_destructor(e){X()[this.ptr+8>>2]=e}get_destructor(){return X()[this.ptr+8>>2]}set_caught(e){e=e?1:0,G()[this.ptr+12]=e}get_caught(){return G()[this.ptr+12]!=0}set_rethrown(e){e=e?1:0,G()[this.ptr+13]=e}get_rethrown(){return G()[this.ptr+13]!=0}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){X()[this.ptr+16>>2]=e}get_adjusted_ptr(){return X()[this.ptr+16>>2]}}var $t=r=>{throw Qr||(Qr=r),Qr},se=r=>ki(r),Wt=r=>{var e=Qr;if(!e)return se(0),0;var t=new Ce(e);t.set_adjusted_ptr(e);var a=t.get_type();if(!a)return se(0),e;for(var o of r){if(o===0||o===a)break;var u=t.ptr+16;if(Oi(o,a,u))return se(o),e}return se(a),e},tn=()=>Wt([]),nn=r=>Wt([r]),Ot=()=>{var r=Oe.pop();r||$("no exception to throw");var e=r.excPtr;throw r.get_rethrown()||(Oe.push(r),r.set_rethrown(!0),r.set_caught(!1),Ve++),Qr=e,Qr},an=(r,e,t)=>{var a=new Ce(r);throw a.init(e,t),Qr=r,Ve++,Qr},on=()=>Ve;function Ct(r,e,t,a){return q?R(2,0,1,r,e,t,a):nt(r,e,t,a)}var sn=()=>typeof SharedArrayBuffer<"u",nt=(r,e,t,a)=>{if(!sn())return 6;var o=[],u=0;if(q&&(o.length===0||u))return Ct(r,e,t,a);var l={startRoutine:t,pthread_ptr:r,arg:a,transferList:o};return q?(l.cmd="spawnThread",postMessage(l,o),0):N(l)};function it(r,e,t){return q?R(3,0,1,r,e,t):0}var un=(r,e,t,a)=>{if(!(a>0))return 0;for(var o=t,u=t+a-1,l=0;l<r.length;++l){var c=r.charCodeAt(l);if(c>=55296&&c<=57343){var d=r.charCodeAt(++l);c=65536+((c&1023)<<10)|d&1023}if(c<=127){if(t>=u)break;e[t++]=c}else if(c<=2047){if(t+1>=u)break;e[t++]=192|c>>6,e[t++]=128|c&63}else if(c<=65535){if(t+2>=u)break;e[t++]=224|c>>12,e[t++]=128|c>>6&63,e[t++]=128|c&63}else{if(t+3>=u)break;e[t++]=240|c>>18,e[t++]=128|c>>12&63,e[t++]=128|c>>6&63,e[t++]=128|c&63}}return e[t]=0,t-o},re=(r,e,t)=>un(r,ar(),e,t);function jt(r,e,t){if(q)return R(4,0,1,r,e,t)}function xt(r,e,t){return q?R(5,0,1,r,e,t):0}function St(r,e,t,a){if(q)return R(6,0,1,r,e,t,a)}function Rt(r,e,t,a){if(q)return R(7,0,1,r,e,t,a)}function Ft(r,e,t){if(q)return R(8,0,1,r,e,t)}var fn=()=>{$("")},Ne={},at=r=>{for(;r.length;){var e=r.pop(),t=r.pop();t(e)}};function je(r){return this.fromWireType(X()[r>>2])}var Mr={},ie={},Be={},ot,Ye=r=>{throw new ot(r)},st=(r,e,t)=>{r.forEach(c=>Be[c]=e);function a(c){var d=t(c);d.length!==r.length&&Ye("Mismatched type converter count");for(var E=0;E<r.length;++E)Vr(r[E],d[E])}var o=new Array(e.length),u=[],l=0;e.forEach((c,d)=>{ie.hasOwnProperty(c)?o[d]=ie[c]:(u.push(c),Mr.hasOwnProperty(c)||(Mr[c]=[]),Mr[c].push(()=>{o[d]=ie[c],++l,l===u.length&&a(o)}))}),u.length===0&&a(o)},cn=r=>{var e=Ne[r];delete Ne[r];var t=e.rawConstructor,a=e.rawDestructor,o=e.fields,u=o.map(l=>l.getterReturnType).concat(o.map(l=>l.setterArgumentType));st([r],u,l=>{var c={};return o.forEach((d,E)=>{var j=d.fieldName,H=l[E],ir=d.getter,br=d.getterContext,Wr=l[E+o.length],ae=d.setter,ce=d.setterContext;c[j]={read:xr=>H.fromWireType(ir(br,xr)),write:(xr,bt)=>{var Dr=[];ae(ce,xr,Wr.toWireType(Dr,bt)),at(Dr)}}}),[{name:e.name,fromWireType:d=>{var E={};for(var j in c)E[j]=c[j].read(d);return a(d),E},toWireType:(d,E)=>{for(var j in c)if(!(j in E))throw new TypeError(`Missing field: "${j}"`);var H=t();for(j in c)c[j].write(H,E[j]);return d!==null&&d.push(a,H),H},argPackAdvance:Ur,readValueFromPointer:je,destructorFunction:a}]})},ln=(r,e,t,a,o)=>{},vn=()=>{for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);Mt=r},Mt,Er=r=>{for(var e="",t=r;ar()[t];)e+=Mt[ar()[t++]];return e},xe,er=r=>{throw new xe(r)};function dn(r,e,t={}){var a=e.name;if(r||er(`type "${a}" must have a positive integer typeid pointer`),ie.hasOwnProperty(r)){if(t.ignoreDuplicateRegistrations)return;er(`Cannot register type '${a}' twice`)}if(ie[r]=e,delete Be[r],Mr.hasOwnProperty(r)){var o=Mr[r];delete Mr[r],o.forEach(u=>u())}}function Vr(r,e,t={}){return dn(r,e,t)}var Ur=8,pn=(r,e,t,a)=>{e=Er(e),Vr(r,{name:e,fromWireType:function(o){return!!o},toWireType:function(o,u){return u?t:a},argPackAdvance:Ur,readValueFromPointer:function(o){return this.fromWireType(ar()[o])},destructorFunction:null})},Ut=r=>({count:r.count,deleteScheduled:r.deleteScheduled,preservePointerOnDelete:r.preservePointerOnDelete,ptr:r.ptr,ptrType:r.ptrType,smartPtr:r.smartPtr,smartPtrType:r.smartPtrType}),ut=r=>{function e(t){return t.$$.ptrType.registeredClass.name}er(e(r)+" instance already deleted")},pe=!1,Dt=r=>{},hn=r=>{r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)},Ge=r=>{r.count.value-=1;var e=r.count.value===0;e&&hn(r)},It=(r,e,t)=>{if(e===t)return r;if(t.baseClass===void 0)return null;var a=It(r,e,t.baseClass);return a===null?null:t.downcast(a)},ft={},mn={},_n=(r,e)=>{for(e===void 0&&er("ptr should not be undefined");r.baseClass;)e=r.upcast(e),r=r.baseClass;return e},gn=(r,e)=>(e=_n(r,e),mn[e]),qe=(r,e)=>{(!e.ptrType||!e.ptr)&&Ye("makeClassHandle requires ptr and ptrType");var t=!!e.smartPtrType,a=!!e.smartPtr;return t!==a&&Ye("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Se(Object.create(r,{$$:{value:e,writable:!0}}))};function yn(r){var e=this.getPointee(r);if(!e)return this.destructor(r),null;var t=gn(this.registeredClass,e);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=e,t.$$.smartPtr=r,t.clone();var a=t.clone();return this.destructor(r),a}function o(){return this.isSmartPointer?qe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:r}):qe(this.registeredClass.instancePrototype,{ptrType:this,ptr:r})}var u=this.registeredClass.getActualType(e),l=ft[u];if(!l)return o.call(this);var c;this.isConst?c=l.constPointerType:c=l.pointerType;var d=It(e,this.registeredClass,c.registeredClass);return d===null?o.call(this):this.isSmartPointer?qe(c.registeredClass.instancePrototype,{ptrType:c,ptr:d,smartPtrType:this,smartPtr:r}):qe(c.registeredClass.instancePrototype,{ptrType:c,ptr:d})}var Se=r=>typeof FinalizationRegistry>"u"?(Se=e=>e,r):(pe=new FinalizationRegistry(e=>{Ge(e.$$)}),Se=e=>{var t=e.$$,a=!!t.smartPtr;if(a){var o={$$:t};pe.register(e,o,e)}return e},Dt=e=>pe.unregister(e),Se(r)),wn=()=>{Object.assign(Ke.prototype,{isAliasOf(r){if(!(this instanceof Ke)||!(r instanceof Ke))return!1;var e=this.$$.ptrType.registeredClass,t=this.$$.ptr;r.$$=r.$$;for(var a=r.$$.ptrType.registeredClass,o=r.$$.ptr;e.baseClass;)t=e.upcast(t),e=e.baseClass;for(;a.baseClass;)o=a.upcast(o),a=a.baseClass;return e===a&&t===o},clone(){if(this.$$.ptr||ut(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Se(Object.create(Object.getPrototypeOf(this),{$$:{value:Ut(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&er("Object already scheduled for deletion"),Dt(this),Ge(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&er("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Ke(){}var he=(r,e)=>Object.defineProperty(e,"name",{value:r}),bn=(r,e,t)=>{if(r[e].overloadTable===void 0){var a=r[e];r[e]=function(...o){return r[e].overloadTable.hasOwnProperty(o.length)||er(`Function '${t}' called with an invalid number of arguments (${o.length}) - expects one of (${r[e].overloadTable})!`),r[e].overloadTable[o.length].apply(this,o)},r[e].overloadTable=[],r[e].overloadTable[a.argCount]=a}},ct=(r,e,t)=>{m.hasOwnProperty(r)?((t===void 0||m[r].overloadTable!==void 0&&m[r].overloadTable[t]!==void 0)&&er(`Cannot register public name '${r}' twice`),bn(m,r,r),m.hasOwnProperty(t)&&er(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),m[r].overloadTable[t]=e):(m[r]=e,t!==void 0&&(m[r].numArguments=t))},kn=48,Re=57,Lt=r=>{r=r.replace(/[^a-zA-Z0-9_]/g,"$");var e=r.charCodeAt(0);return e>=kn&&e<=Re?`_${r}`:r};function Ht(r,e,t,a,o,u,l,c){this.name=r,this.constructor=e,this.instancePrototype=t,this.rawDestructor=a,this.baseClass=o,this.getActualType=u,this.upcast=l,this.downcast=c,this.pureVirtualFunctions=[]}var ze=(r,e,t)=>{for(;e!==t;)e.upcast||er(`Expected null or instance of ${t.name}, got an instance of ${e.name}`),r=e.upcast(r),e=e.baseClass;return r};function Tn(r,e){if(e===null)return this.isReference&&er(`null is not a valid ${this.name}`),0;e.$$||er(`Cannot pass "${pt(e)}" as a ${this.name}`),e.$$.ptr||er(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=e.$$.ptrType.registeredClass,a=ze(e.$$.ptr,t,this.registeredClass);return a}function Vt(r,e){var t;if(e===null)return this.isReference&&er(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),r!==null&&r.push(this.rawDestructor,t),t):0;(!e||!e.$$)&&er(`Cannot pass "${pt(e)}" as a ${this.name}`),e.$$.ptr||er(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&er(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var a=e.$$.ptrType.registeredClass;if(t=ze(e.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&er("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?t=e.$$.smartPtr:er(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)t=e.$$.smartPtr;else{var o=e.clone();t=this.rawShare(t,Ar.toHandle(()=>o.delete())),r!==null&&r.push(this.rawDestructor,t)}break;default:er("Unsupporting sharing policy")}return t}function En(r,e){if(e===null)return this.isReference&&er(`null is not a valid ${this.name}`),0;e.$$||er(`Cannot pass "${pt(e)}" as a ${this.name}`),e.$$.ptr||er(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&er(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var t=e.$$.ptrType.registeredClass,a=ze(e.$$.ptr,t,this.registeredClass);return a}var An=()=>{Object.assign(Ze.prototype,{getPointee(r){return this.rawGetPointee&&(r=this.rawGetPointee(r)),r},destructor(r){var e;(e=this.rawDestructor)==null||e.call(this,r)},argPackAdvance:Ur,readValueFromPointer:je,fromWireType:yn})};function Ze(r,e,t,a,o,u,l,c,d,E,j){this.name=r,this.registeredClass=e,this.isReference=t,this.isConst=a,this.isSmartPointer=o,this.pointeeType=u,this.sharingPolicy=l,this.rawGetPointee=c,this.rawConstructor=d,this.rawShare=E,this.rawDestructor=j,!o&&e.baseClass===void 0?a?(this.toWireType=Tn,this.destructorFunction=null):(this.toWireType=En,this.destructorFunction=null):this.toWireType=Vt}var Nt=(r,e,t)=>{m.hasOwnProperty(r)||Ye("Replacing nonexistent public symbol"),m[r].overloadTable!==void 0&&t!==void 0?m[r].overloadTable[t]=e:(m[r]=e,m[r].argCount=t)},Pn=(r,e,t)=>{r=r.replace(/p/g,"i");var a=m["dynCall_"+r];return a(e,...t)},$n=(r,e,t=[])=>{if(r.includes("j"))return Pn(r,e,t);var a=ur(e)(...t);return a},Wn=(r,e)=>(...t)=>$n(r,e,t),ee=(r,e)=>{r=Er(r);function t(){return r.includes("j")?Wn(r,e):ur(e)}var a=t();return typeof a!="function"&&er(`unknown function pointer with signature ${r}: ${e}`),a},On=(r,e)=>{var t=he(e,function(a){this.name=e,this.message=a;var o=new Error(a).stack;o!==void 0&&(this.stack=this.toString()+`
`+o.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},t},Je,Bt=r=>{var e=hi(r),t=Er(e);return fe(e),t},me=(r,e)=>{var t=[],a={};function o(u){if(!a[u]&&!ie[u]){if(Be[u]){Be[u].forEach(o);return}t.push(u),a[u]=!0}}throw e.forEach(o),new Je(`${r}: `+t.map(Bt).join([", "]))},Cn=(r,e,t,a,o,u,l,c,d,E,j,H,ir)=>{j=Er(j),u=ee(o,u),c&&(c=ee(l,c)),E&&(E=ee(d,E)),ir=ee(H,ir);var br=Lt(j);ct(br,function(){me(`Cannot construct ${j} due to unbound types`,[a])}),st([r,e,t],a?[a]:[],Wr=>{var Di;Wr=Wr[0];var ae,ce;a?(ae=Wr.registeredClass,ce=ae.instancePrototype):ce=Ke.prototype;var xr=he(j,function(...Bn){if(Object.getPrototypeOf(this)!==bt)throw new xe("Use 'new' to construct "+j);if(Dr.constructor_body===void 0)throw new xe(j+" has no accessible constructor");var Ii=Dr.constructor_body[Bn.length];if(Ii===void 0)throw new xe(`Tried to invoke ctor of ${j} with invalid number of parameters (${Bn.length}) - expected (${Object.keys(Dr.constructor_body).toString()}) parameters instead!`);return Ii.apply(this,Bn)}),bt=Object.create(ce,{constructor:{value:xr}});xr.prototype=bt;var Dr=new Ht(j,xr,bt,ir,ae,u,c,E);Dr.baseClass&&((Di=Dr.baseClass).__derivedClasses??(Di.__derivedClasses=[]),Dr.baseClass.__derivedClasses.push(Dr));var oo=new Ze(j,Dr,!0,!1,!1),Mi=new Ze(j+"*",Dr,!1,!1,!1),Ui=new Ze(j+" const*",Dr,!1,!0,!1);return ft[r]={pointerType:Mi,constPointerType:Ui},Nt(br,xr),[oo,Mi,Ui]})},lt=[],te=[],vt=r=>{r>9&&--te[r+1]===0&&(te[r]=void 0,lt.push(r))},jn=()=>te.length/2-5-lt.length,xn=()=>{te.push(0,1,void 0,1,null,1,!0,1,!1,1),m.count_emval_handles=jn},Ar={toValue:r=>(r||er("Cannot use deleted val. handle = "+r),te[r]),toHandle:r=>{switch(r){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=lt.pop()||te.length;return te[e]=r,te[e+1]=1,e}}}},Sn={name:"emscripten::val",fromWireType:r=>{var e=Ar.toValue(r);return vt(r),e},toWireType:(r,e)=>Ar.toHandle(e),argPackAdvance:Ur,readValueFromPointer:je,destructorFunction:null},Rn=r=>Vr(r,Sn),Nr=(r,e,t)=>{switch(e){case 1:return t?function(a){return this.fromWireType(G()[a])}:function(a){return this.fromWireType(ar()[a])};case 2:return t?function(a){return this.fromWireType(Or()[a>>1])}:function(a){return this.fromWireType(Sr()[a>>1])};case 4:return t?function(a){return this.fromWireType(lr()[a>>2])}:function(a){return this.fromWireType(X()[a>>2])};default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},Yt=(r,e,t,a)=>{e=Er(e);function o(){}o.values={},Vr(r,{name:e,constructor:o,fromWireType:function(u){return this.constructor.values[u]},toWireType:(u,l)=>l.value,argPackAdvance:Ur,readValueFromPointer:Nr(e,t,a),destructorFunction:null}),ct(e,o)},dt=(r,e)=>{var t=ie[r];return t===void 0&&er(`${e} has unknown type ${Bt(r)}`),t},ue=(r,e,t)=>{var a=dt(r,"enum");e=Er(e);var o=a.constructor,u=Object.create(a.constructor.prototype,{value:{value:t},constructor:{value:he(`${a.name}_${e}`,function(){})}});o.values[t]=u,o[e]=u},pt=r=>{if(r===null)return"null";var e=typeof r;return e==="object"||e==="array"||e==="function"?r.toString():""+r},ht=(r,e)=>{switch(e){case 4:return function(t){return this.fromWireType(_e()[t>>2])};case 8:return function(t){return this.fromWireType(ge()[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${r}`)}},Fn=(r,e,t)=>{e=Er(e),Vr(r,{name:e,fromWireType:a=>a,toWireType:(a,o)=>o,argPackAdvance:Ur,readValueFromPointer:ht(e,t),destructorFunction:null})};function Gt(r){for(var e=1;e<r.length;++e)if(r[e]!==null&&r[e].destructorFunction===void 0)return!0;return!1}function n(r,e){if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var t=he(r.name||"unknownFunctionName",function(){});t.prototype=r.prototype;var a=new t,o=r.apply(a,e);return o instanceof Object?o:a}function i(r,e,t,a){for(var o=Gt(r),u=r.length-2,l=[],c=["fn"],d=0;d<u;++d)l.push(`arg${d}`),c.push(`arg${d}Wired`);l=l.join(","),c=c.join(",");var E=`return function (${l}) {
`;o&&(E+=`var destructors = [];
`);for(var j=o?"destructors":"null",H=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],d=0;d<u;++d)E+=`var arg${d}Wired = argType${d}['toWireType'](${j}, arg${d});
`,H.push(`argType${d}`);if(E+=(t||a?"var rv = ":"")+`invoker(${c});
`,o)E+=`runDestructors(destructors);
`;else for(var d=2;d<r.length;++d){var ir=d===1?"thisWired":"arg"+(d-2)+"Wired";r[d].destructorFunction!==null&&(E+=`${ir}_dtor(${ir});
`,H.push(`${ir}_dtor`))}return t&&(E+=`var ret = retType['fromWireType'](rv);
return ret;
`),E+=`}
`,[H,E]}function s(r,e,t,a,o,u){var l=e.length;l<2&&er("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var c=e[1]!==null&&t!==null,d=Gt(e),E=e[0].name!=="void",j=[r,er,a,o,at,e[0],e[1]],H=0;H<l-2;++H)j.push(e[H+2]);if(!d)for(var H=2;H<e.length;++H)e[H].destructorFunction!==null&&j.push(e[H].destructorFunction);let[ir,br]=i(e,c,E,u);ir.push(br);var Wr=n(Function,ir)(...j);return he(r,Wr)}var f=(r,e)=>{for(var t=[],a=0;a<r;a++)t.push(X()[e+a*4>>2]);return t},p=r=>{r=r.trim();const e=r.indexOf("(");return e!==-1?r.substr(0,e):r},_=(r,e,t,a,o,u,l,c)=>{var d=f(e,t);r=Er(r),r=p(r),o=ee(a,o),ct(r,function(){me(`Cannot call ${r} due to unbound types`,d)},e-1),st([],d,E=>{var j=[E[0],null].concat(E.slice(1));return Nt(r,s(r,j,null,o,u,l),e-1),[]})},b=(r,e,t)=>{switch(e){case 1:return t?a=>G()[a]:a=>ar()[a];case 2:return t?a=>Or()[a>>1]:a=>Sr()[a>>1];case 4:return t?a=>lr()[a>>2]:a=>X()[a>>2];default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},g=(r,e,t,a,o)=>{e=Er(e);var u=j=>j;if(a===0){var l=32-8*t;u=j=>j<<l>>>l}var c=e.includes("unsigned"),d=(j,H)=>{},E;c?E=function(j,H){return d(H,this.name),H>>>0}:E=function(j,H){return d(H,this.name),H},Vr(r,{name:e,fromWireType:u,toWireType:E,argPackAdvance:Ur,readValueFromPointer:b(e,t,a!==0),destructorFunction:null})},C=(r,e,t)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=a[e];function u(l){var c=X()[l>>2],d=X()[l+4>>2];return new o(G().buffer,d,c)}t=Er(t),Vr(r,{name:t,fromWireType:u,argPackAdvance:Ur,readValueFromPointer:u},{ignoreDuplicateRegistrations:!0})},F=r=>{for(var e=0,t=0;t<r.length;++t){var a=r.charCodeAt(t);a<=127?e++:a<=2047?e+=2:a>=55296&&a<=57343?(e+=4,++t):e+=3}return e},D=(r,e)=>{e=Er(e);var t=e==="std::string";Vr(r,{name:e,fromWireType(a){var o=X()[a>>2],u=a+4,l;if(t)for(var c=u,d=0;d<=o;++d){var E=u+d;if(d==o||ar()[E]==0){var j=E-c,H=vr(c,j);l===void 0?l=H:(l+="\0",l+=H),c=E+1}}else{for(var ir=new Array(o),d=0;d<o;++d)ir[d]=String.fromCharCode(ar()[u+d]);l=ir.join("")}return fe(a),l},toWireType(a,o){o instanceof ArrayBuffer&&(o=new Uint8Array(o));var u,l=typeof o=="string";l||o instanceof Uint8Array||o instanceof Uint8ClampedArray||o instanceof Int8Array||er("Cannot pass non-string to std::string"),t&&l?u=F(o):u=o.length;var c=Hn(4+u+1),d=c+4;if(X()[c>>2]=u,t&&l)re(o,d,u+1);else if(l)for(var E=0;E<u;++E){var j=o.charCodeAt(E);j>255&&(fe(d),er("String has UTF-16 code units that do not fit in 8 bits")),ar()[d+E]=j}else for(var E=0;E<u;++E)ar()[d+E]=o[E];return a!==null&&a.push(fe,c),c},argPackAdvance:Ur,readValueFromPointer:je,destructorFunction(a){fe(a)}})},J=new TextDecoder("utf-16le"),Pr=(r,e)=>{for(var t=r,a=t>>1,o=a+e/2;!(a>=o)&&Sr()[a];)++a;return t=a<<1,J.decode(ar().slice(r,t))},Br=(r,e,t)=>{if(t??(t=2147483647),t<2)return 0;t-=2;for(var a=e,o=t<r.length*2?t/2:r.length,u=0;u<o;++u){var l=r.charCodeAt(u);Or()[e>>1]=l,e+=2}return Or()[e>>1]=0,e-a},Yr=r=>r.length*2,Xe=(r,e)=>{for(var t=0,a="";!(t>=e/4);){var o=lr()[r+t*4>>2];if(o==0)break;if(++t,o>=65536){var u=o-65536;a+=String.fromCharCode(55296|u>>10,56320|u&1023)}else a+=String.fromCharCode(o)}return a},mt=(r,e,t)=>{if(t??(t=2147483647),t<4)return 0;for(var a=e,o=a+t-4,u=0;u<r.length;++u){var l=r.charCodeAt(u);if(l>=55296&&l<=57343){var c=r.charCodeAt(++u);l=65536+((l&1023)<<10)|c&1023}if(lr()[e>>2]=l,e+=4,e+4>o)break}return lr()[e>>2]=0,e-a},_t=r=>{for(var e=0,t=0;t<r.length;++t){var a=r.charCodeAt(t);a>=55296&&a<=57343&&++t,e+=4}return e},gt=(r,e,t)=>{t=Er(t);var a,o,u,l;e===2?(a=Pr,o=Br,l=Yr,u=c=>Sr()[c>>1]):e===4&&(a=Xe,o=mt,l=_t,u=c=>X()[c>>2]),Vr(r,{name:t,fromWireType:c=>{for(var d=X()[c>>2],E,j=c+4,H=0;H<=d;++H){var ir=c+4+H*e;if(H==d||u(ir)==0){var br=ir-j,Wr=a(j,br);E===void 0?E=Wr:(E+="\0",E+=Wr),j=ir+e}}return fe(c),E},toWireType:(c,d)=>{typeof d!="string"&&er(`Cannot pass non-string to C++ string type ${t}`);var E=l(d),j=Hn(4+E+e);return X()[j>>2]=E/e,o(d,j+4,E+e),c!==null&&c.push(fe,j),j},argPackAdvance:Ur,readValueFromPointer:je,destructorFunction(c){fe(c)}})},Mn=(r,e,t,a,o,u)=>{Ne[r]={name:Er(e),rawConstructor:ee(t,a),rawDestructor:ee(o,u),fields:[]}},qt=(r,e,t,a,o,u,l,c,d,E)=>{Ne[r].fields.push({fieldName:Er(e),getterReturnType:t,getter:ee(a,o),getterContext:u,setterArgumentType:l,setter:ee(c,d),setterContext:E})},Gi=(r,e)=>{e=Er(e),Vr(r,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,a)=>{}})},qi=1,Ki=()=>qi,zi=r=>{Vn(r,!kr,1,!we,2097152,!1),A.threadInitTLS()},Zi=()=>{if(!yr())try{q?Nn(Lr):nr(Lr)}catch(r){S(r)}},ei=r=>{if(!Kr)try{r(),Zi()}catch(e){S(e)}},Un=r=>{if(typeof Atomics.waitAsync=="function"){var e=Atomics.waitAsync(lr(),r>>2,r);e.value.then(Kt);var t=r+128;Atomics.store(lr(),t>>2,1)}},Kt=()=>{var r=Zt();r&&(Un(r),ei(bi))},Ji=(r,e)=>{if(r==e)setTimeout(Kt);else if(q)postMessage({targetThread:r,cmd:"checkMailbox"});else{var t=A.pthreads[r];if(!t)return;t.postMessage({cmd:"checkMailbox"})}},Dn=[],Xi=(r,e,t,a,o)=>{Dn.length=a;for(var u=o>>3,l=0;l<a;l++)Dn[l]=ge()[u+l];var c=Ua[r];A.currentProxiedOperationCallerThread=t;var d=c(...Dn);return A.currentProxiedOperationCallerThread=0,d},Qi=()=>{We=!1,fr=0},ra=r=>{q?postMessage({cmd:"cleanupThread",thread:r}):U(r)},ea=r=>{},zt=[],ta=(r,e,t,a)=>(r=zt[r],e=Ar.toValue(e),r(null,e,t,a)),na={},In=r=>{var e=na[r];return e===void 0?Er(r):e},ia=(r,e,t,a,o)=>(r=zt[r],e=Ar.toValue(e),t=In(t),r(e,e[t],a,o)),ti=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),aa=r=>r===0?Ar.toHandle(ti()):(r=In(r),Ar.toHandle(ti()[r])),oa=r=>{var e=zt.length;return zt.push(r),e},sa=(r,e)=>{for(var t=new Array(r),a=0;a<r;++a)t[a]=dt(X()[e+a*4>>2],"parameter "+a);return t},ua=(r,e,t)=>{var a=[],o=r.toWireType(a,t);return a.length&&(X()[e>>2]=Ar.toHandle(a)),o},fa=(r,e,t)=>{var a=sa(r,e),o=a.shift();r--;var u=`return function (obj, func, destructorsRef, args) {
`,l=0,c=[];t===0&&c.push("obj");for(var d=["retType"],E=[o],j=0;j<r;++j)c.push("arg"+j),d.push("argType"+j),E.push(a[j]),u+=`  var arg${j} = argType${j}.readValueFromPointer(args${l?"+"+l:""});
`,l+=a[j].argPackAdvance;var H=t===1?"new func":"func.call";u+=`  var rv = ${H}(${c.join(", ")});
`,o.isVoid||(d.push("emval_returnValue"),E.push(ua),u+=`  return emval_returnValue(retType, destructorsRef, rv);
`),u+=`};
`,d.push(u);var ir=n(Function,d)(...E),br=`methodCaller<(${a.map(Wr=>Wr.name).join(", ")}) => ${o.name}>`;return oa(he(br,ir))},ca=r=>{r>9&&(te[r+1]+=1)},la=()=>Ar.toHandle([]),va=r=>Ar.toHandle(In(r)),da=()=>Ar.toHandle({}),pa=r=>{var e=Ar.toValue(r);at(e),vt(r)},ha=(r,e,t)=>{r=Ar.toValue(r),e=Ar.toValue(e),t=Ar.toValue(t),r[e]=t},ma=(r,e)=>{r=dt(r,"_emval_take_value");var t=r.readValueFromPointer(e);return Ar.toHandle(t)},_a=r=>r%4===0&&(r%100!==0||r%400===0),ga=[0,31,60,91,121,152,182,213,244,274,305,335],ya=[0,31,59,90,120,151,181,212,243,273,304,334],wa=r=>{var e=_a(r.getFullYear()),t=e?ga:ya,a=t[r.getMonth()]+r.getDate()-1;return a};function ba(r,e,t){var a=I(r,e),o=new Date(a*1e3);lr()[t>>2]=o.getSeconds(),lr()[t+4>>2]=o.getMinutes(),lr()[t+8>>2]=o.getHours(),lr()[t+12>>2]=o.getDate(),lr()[t+16>>2]=o.getMonth(),lr()[t+20>>2]=o.getFullYear()-1900,lr()[t+24>>2]=o.getDay();var u=wa(o)|0;lr()[t+28>>2]=u,lr()[t+36>>2]=-(o.getTimezoneOffset()*60);var l=new Date(o.getFullYear(),0,1),c=new Date(o.getFullYear(),6,1).getTimezoneOffset(),d=l.getTimezoneOffset(),E=(c!=d&&o.getTimezoneOffset()==Math.min(d,c))|0;lr()[t+32>>2]=E}function ni(r,e,t,a,o,u,l,c){return q?R(9,0,1,r,e,t,a,o,u,l,c):-52}function ii(r,e,t,a,o,u,l){if(q)return R(10,0,1,r,e,t,a,o,u,l)}var yt={},ai=()=>performance.timeOrigin+performance.now();function oi(r,e){if(q)return R(11,0,1,r,e);if(yt[r]&&(clearTimeout(yt[r].id),delete yt[r]),!e)return 0;var t=setTimeout(()=>{delete yt[r],ei(()=>wi(r,ai()))},e);return yt[r]={id:t,timeout_ms:e},0}var ka=(r,e,t,a)=>{var o=new Date().getFullYear(),u=new Date(o,0,1),l=new Date(o,6,1),c=u.getTimezoneOffset(),d=l.getTimezoneOffset(),E=Math.max(c,d);X()[r>>2]=E*60,lr()[e>>2]=+(c!=d);var j=br=>{var Wr=br>=0?"-":"+",ae=Math.abs(br),ce=String(Math.floor(ae/60)).padStart(2,"0"),xr=String(ae%60).padStart(2,"0");return`UTC${Wr}${ce}${xr}`},H=j(c),ir=j(d);d<c?(re(H,t,17),re(ir,a,17)):(re(H,a,17),re(ir,t,17))},Ta=()=>{},Ea=()=>Date.now(),Aa=()=>{fr+=1},Pa=()=>{throw Aa(),"unwind"},si=()=>2147483648,$a=()=>si(),Wa=()=>1,Oa=(r,e)=>Math.ceil(r/e)*e,Ca=r=>{var e=hr.buffer,t=(r-e.byteLength+65535)/65536|0;try{return hr.grow(t),Tr(),1}catch{}},ja=r=>{var e=ar().length;if(r>>>=0,r<=e)return!1;var t=si();if(r>t)return!1;for(var a=1;a<=4;a*=2){var o=e*(1+.2/a);o=Math.min(o,r+100663296);var u=Math.min(t,Oa(Math.max(r,o),65536)),l=Ca(u);if(l)return!0}return!1},Ln={},xa=()=>Cr||"./this.program",wt=()=>{if(!wt.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:xa()};for(var t in Ln)Ln[t]===void 0?delete e[t]:e[t]=Ln[t];var a=[];for(var t in e)a.push(`${t}=${e[t]}`);wt.strings=a}return wt.strings},Sa=(r,e)=>{for(var t=0;t<r.length;++t)G()[e++]=r.charCodeAt(t);G()[e]=0},ui=function(r,e){if(q)return R(12,0,1,r,e);var t=0;return wt().forEach((a,o)=>{var u=e+t;X()[r+o*4>>2]=u,Sa(a,u),t+=a.length+1}),0},fi=function(r,e){if(q)return R(13,0,1,r,e);var t=wt();X()[r>>2]=t.length;var a=0;return t.forEach(o=>a+=o.length+1),X()[e>>2]=a,0};function ci(r){return q?R(14,0,1,r):52}function li(r,e,t,a){return q?R(15,0,1,r,e,t,a):52}function vi(r,e,t,a,o){return q?R(16,0,1,r,e,t,a,o):70}var Ra=[null,[],[]],Fa=(r,e=0,t=NaN)=>{for(var a=e+t,o=e;r[o]&&!(o>=a);)++o;return Et.decode(r.buffer?r.buffer instanceof SharedArrayBuffer?r.slice(e,o):r.subarray(e,o):new Uint8Array(r.slice(e,o)))},Ma=(r,e)=>{var t=Ra[r];e===0||e===10?((r===1?Rr:V)(Fa(t)),t.length=0):t.push(e)};function di(r,e,t,a){if(q)return R(17,0,1,r,e,t,a);for(var o=0,u=0;u<t;u++){var l=X()[e>>2],c=X()[e+4>>2];e+=8;for(var d=0;d<c;d++)Ma(r,ar()[l+d]);o+=c}return X()[a>>2]=o,0}A.init(),ot=m.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},vn(),xe=m.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},wn(),An(),Je=m.UnboundTypeError=On(Error,"UnboundTypeError"),xn();var Ua=[T,Y,Ct,it,jt,xt,St,Rt,Ft,ni,ii,oi,ui,fi,ci,li,vi,di],pi;function Da(){pi={$:At,r:Pt,x:en,b:tn,i:nn,U:Ot,w:an,pa:on,ya:nt,e:$t,X:it,wa:jt,Fa:xt,Y:St,va:Rt,ra:Ft,Ja:fn,da:cn,ka:ln,Ma:pn,L:Cn,La:Rn,z:Yt,d:ue,_:Fn,p:_,A:g,n:C,aa:D,M:gt,O:Mn,G:qt,Na:Gi,Ia:Ki,Ca:zi,sa:Ji,za:Xi,na:Qi,S:ra,Ba:Un,Ha:ea,Oa:ta,Ka:ia,l:vt,N:aa,ca:fa,R:ca,Z:la,v:va,F:da,ba:pa,t:ha,o:ma,ia:ba,ga:ni,ha:ii,oa:oi,Aa:ka,T:Ta,K:Ea,Ga:Pa,ta:$a,y:ai,ua:Wa,qa:ja,Da:ui,Ea:fi,xa:nr,E:ci,W:li,ja:vi,V:di,I:za,c:Ia,f:Ga,u:Ka,la:Xa,H:Ja,B:eo,P:Qa,D:to,fa:io,ea:ao,h:qa,k:Ha,g:Za,m:Va,j:Ba,J:Na,Q:Ya,s:ro,q:La,C:no,a:hr,ma:T}}var z=P(),Zt=()=>(Zt=z.Qa)(),Hn=r=>(Hn=z.Ra)(r),hi=r=>(hi=z.Sa)(r),mi=()=>(mi=z.Ta)(),fe=r=>(fe=z.Ua)(r),Vn=(r,e,t,a,o,u)=>(Vn=z.Xa)(r,e,t,a,o,u),_i=()=>(_i=z.Ya)(),gi=(r,e,t,a,o)=>(gi=z.Za)(r,e,t,a,o),yi=r=>(yi=z._a)(r),Nn=r=>(Nn=z.$a)(r),wi=(r,e)=>(wi=z.ab)(r,e),bi=()=>(bi=z.bb)(),pr=(r,e)=>(pr=z.cb)(r,e),ki=r=>(ki=z.db)(r),Ti=(r,e)=>(Ti=z.eb)(r,e),Ei=r=>(Ei=z.fb)(r),Ai=r=>(Ai=z.gb)(r),Pi=()=>(Pi=z.hb)(),$i=r=>($i=z.ib)(r),Wi=r=>(Wi=z.jb)(r),Oi=(r,e,t)=>(Oi=z.kb)(r,e,t),Ci=r=>(Ci=z.lb)(r);m.dynCall_ji=(r,e)=>(m.dynCall_ji=z.mb)(r,e);var ji=m.dynCall_iij=(r,e,t,a)=>(ji=m.dynCall_iij=z.nb)(r,e,t,a);m.dynCall_jijj=(r,e,t,a,o,u)=>(m.dynCall_jijj=z.ob)(r,e,t,a,o,u),m.dynCall_vijj=(r,e,t,a,o,u)=>(m.dynCall_vijj=z.pb)(r,e,t,a,o,u),m.dynCall_jiiiii=(r,e,t,a,o,u)=>(m.dynCall_jiiiii=z.qb)(r,e,t,a,o,u),m.dynCall_jii=(r,e,t)=>(m.dynCall_jii=z.rb)(r,e,t),m.dynCall_jiiii=(r,e,t,a,o)=>(m.dynCall_jiiii=z.sb)(r,e,t,a,o),m.dynCall_jiji=(r,e,t,a,o)=>(m.dynCall_jiji=z.tb)(r,e,t,a,o);var xi=m.dynCall_iiiiij=(r,e,t,a,o,u,l)=>(xi=m.dynCall_iiiiij=z.ub)(r,e,t,a,o,u,l);m.dynCall_viijii=(r,e,t,a,o,u,l)=>(m.dynCall_viijii=z.vb)(r,e,t,a,o,u,l),m.dynCall_iiiiijj=(r,e,t,a,o,u,l,c,d)=>(m.dynCall_iiiiijj=z.wb)(r,e,t,a,o,u,l,c,d),m.dynCall_iiiiiijj=(r,e,t,a,o,u,l,c,d,E)=>(m.dynCall_iiiiiijj=z.xb)(r,e,t,a,o,u,l,c,d,E);function Ia(r,e){var t=Z();try{return ur(r)(e)}catch(a){if(K(t),a!==a+0)throw a;pr(1,0)}}function La(r,e,t,a,o,u,l,c,d,E,j){var H=Z();try{ur(r)(e,t,a,o,u,l,c,d,E,j)}catch(ir){if(K(H),ir!==ir+0)throw ir;pr(1,0)}}function Ha(r,e){var t=Z();try{ur(r)(e)}catch(a){if(K(t),a!==a+0)throw a;pr(1,0)}}function Va(r,e,t,a){var o=Z();try{ur(r)(e,t,a)}catch(u){if(K(o),u!==u+0)throw u;pr(1,0)}}function Na(r,e,t,a,o,u){var l=Z();try{ur(r)(e,t,a,o,u)}catch(c){if(K(l),c!==c+0)throw c;pr(1,0)}}function Ba(r,e,t,a,o){var u=Z();try{ur(r)(e,t,a,o)}catch(l){if(K(u),l!==l+0)throw l;pr(1,0)}}function Ya(r,e,t,a,o,u,l){var c=Z();try{ur(r)(e,t,a,o,u,l)}catch(d){if(K(c),d!==d+0)throw d;pr(1,0)}}function Ga(r,e,t){var a=Z();try{return ur(r)(e,t)}catch(o){if(K(a),o!==o+0)throw o;pr(1,0)}}function qa(r){var e=Z();try{ur(r)()}catch(t){if(K(e),t!==t+0)throw t;pr(1,0)}}function Ka(r,e,t,a){var o=Z();try{return ur(r)(e,t,a)}catch(u){if(K(o),u!==u+0)throw u;pr(1,0)}}function za(r){var e=Z();try{return ur(r)()}catch(t){if(K(e),t!==t+0)throw t;pr(1,0)}}function Za(r,e,t){var a=Z();try{ur(r)(e,t)}catch(o){if(K(a),o!==o+0)throw o;pr(1,0)}}function Ja(r,e,t,a,o,u){var l=Z();try{return ur(r)(e,t,a,o,u)}catch(c){if(K(l),c!==c+0)throw c;pr(1,0)}}function Xa(r,e,t,a,o,u){var l=Z();try{return ur(r)(e,t,a,o,u)}catch(c){if(K(l),c!==c+0)throw c;pr(1,0)}}function Qa(r,e,t,a,o,u,l,c){var d=Z();try{return ur(r)(e,t,a,o,u,l,c)}catch(E){if(K(d),E!==E+0)throw E;pr(1,0)}}function ro(r,e,t,a,o,u,l,c){var d=Z();try{ur(r)(e,t,a,o,u,l,c)}catch(E){if(K(d),E!==E+0)throw E;pr(1,0)}}function eo(r,e,t,a,o,u,l){var c=Z();try{return ur(r)(e,t,a,o,u,l)}catch(d){if(K(c),d!==d+0)throw d;pr(1,0)}}function to(r,e,t,a,o,u,l,c,d,E,j,H){var ir=Z();try{return ur(r)(e,t,a,o,u,l,c,d,E,j,H)}catch(br){if(K(ir),br!==br+0)throw br;pr(1,0)}}function no(r,e,t,a,o,u,l,c,d,E,j,H,ir,br,Wr,ae){var ce=Z();try{ur(r)(e,t,a,o,u,l,c,d,E,j,H,ir,br,Wr,ae)}catch(xr){if(K(ce),xr!==xr+0)throw xr;pr(1,0)}}function io(r,e,t,a,o,u,l){var c=Z();try{return xi(r,e,t,a,o,u,l)}catch(d){if(K(c),d!==d+0)throw d;pr(1,0)}}function ao(r,e,t,a){var o=Z();try{return ji(r,e,t,a)}catch(u){if(K(o),u!==u+0)throw u;pr(1,0)}}var Jt,Si;Jr=function r(){Jt||Ri(),Jt||(Jr=r)};function Ri(){if(Zr>0)return;if(q){le(m),Pe(),startWorker(m);return}if(!Si&&(Si=1,et(),Zr>0))return;function r(){var e;Jt||(Jt=1,m.calledRun=1,!Kr&&(Pe(),le(m),(e=m.onRuntimeInitialized)==null||e.call(m),Le()))}m.setStatus?(m.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>m.setStatus(""),1),r()},1)):r()}if(m.preInit)for(typeof m.preInit=="function"&&(m.preInit=[m.preInit]);m.preInit.length>0;)m.preInit.pop()();return Ri(),h=ye,h}})(),Vi,Ni,yo=(Ni=(Vi=globalThis.self)==null?void 0:Vi.name)==null?void 0:Ni.startsWith("em-pthread");yo&&go();var Qn;(function(v){v[v.UVAdapt=0]="UVAdapt",v[v.UV420=1]="UV420",v[v.UV444=2]="UV444",v[v.UVAuto=3]="UVAuto"})(Qn||(Qn={}));var ri;(function(v){v[v.YCoCg=0]="YCoCg",v[v.YCbCr=1]="YCbCr",v[v.Custom=2]="Custom",v[v.YIQ=3]="YIQ"})(ri||(ri={}));Qn.UVAuto,ri.YCoCg;globalThis._icodec_ImageData=(v,rr,h,G)=>G===8?new wo(v,rr,h):new Bi(v,rr,h,G);class wo extends ImageData{constructor(){super(...arguments);Fe(this,"depth",8)}}var Qt={};let Xt=null;async function bo(v,rr){await Yi();let h=await createImageBitmap(v),G=new OffscreenCanvas(h.width,h.height),ar=G.getContext("2d");ar.drawImage(h,0,0),h.close();let Or=ar.getImageData(0,0,G.width,G.height);const Sr=Qt.jsEncodeImages([Or],rr);return console.log("worker jsEncodeImage send",Sr),Sr}async function ko(v){await Yi();const rr=Qt.jsDecodeImage(await v.arrayBuffer());return console.log("worker jsDecodeImage send",rr),rr}async function Yi(){Xt||(Xt=fo(Qt)),await Xt}async function To(){Xt=null,Qt={}}mo.worker({jsEncodeImages:bo,jsDecodeImage:ko,prune:To});
