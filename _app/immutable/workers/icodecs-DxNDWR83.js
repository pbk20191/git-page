var $o=Object.defineProperty;var ko=(u,P,x)=>P in u?$o(u,P,{enumerable:!0,configurable:!0,writable:!0,value:x}):u[P]=x;var Kt=(u,P,x)=>ko(u,typeof P!="symbol"?P+"":P,x);function da(u,P){return u(typeof P=="string"?{locateFile:()=>P}:{wasmBinary:P})}class ni{constructor(P,x,d,D=8){Kt(this,"data");Kt(this,"width");Kt(this,"height");Kt(this,"depth");this.data=P,this.width=x,this.height=d,this.depth=D}}ni.prototype.colorSpace="srgb";function ai(u,P,x,d,D){D={...x,...D};const{data:Y,width:mr,height:G}=d;D.bitDepth=d.depth??8;const M=P.encode(Y,mr,G,D);return Po(M,u)}function Po(u,P){if(typeof u=="string")throw new Error(`${P}: ${u}`);if(u)return u;throw new Error(P+" failed")}var Ro=(()=>{var u=import.meta.url;return function(P={}){var x,d=P,D,Y,mr=new Promise((t,i)=>{D=t,Y=i}),G=Object.assign({},d),M=(t,i)=>{throw i},K="";function sr(t){return d.locateFile?d.locateFile(t,K):K+t}var w;typeof document<"u"&&document.currentScript&&(K=document.currentScript.src),u&&(K=u),K.startsWith("blob:")?K="":K=K.substr(0,K.replace(/[?#].*/,"").lastIndexOf("/")+1),w=t=>fetch(t,{credentials:"same-origin"}).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(i.status+" : "+i.url)));var tr=d.print||console.log.bind(console),lr=d.printErr||console.error.bind(console);Object.assign(d,G),G=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram;var Zr=d.wasmBinary,Kr,Ur=!1,B,ur,ar,Br,cr,vr,dr,ge,We;function br(){var t=Kr.buffer;d.HEAP8=ur=new Int8Array(t),d.HEAP16=Br=new Int16Array(t),d.HEAPU8=ar=new Uint8Array(t),d.HEAPU16=cr=new Uint16Array(t),d.HEAP32=vr=new Int32Array(t),d.HEAPU32=dr=new Uint32Array(t),d.HEAPF32=ge=new Float32Array(t),d.HEAPF64=We=new Float64Array(t)}var ae=[],hr=[],Ke=[];function je(){var t=d.preRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(pt)),xe(ae)}function ie(){xe(hr)}function Ir(){var t=d.postRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(qr)),xe(Ke)}function pt(t){ae.unshift(t)}function gt(t){hr.unshift(t)}function qr(t){Ke.unshift(t)}var kr=0,oe=null;function yt(t){var i;kr++,(i=d.monitorRunDependencies)==null||i.call(d,kr)}function qe(t){var l;if(kr--,(l=d.monitorRunDependencies)==null||l.call(d,kr),kr==0&&oe){var i=oe;oe=null,i()}}function Er(t){var l;(l=d.onAbort)==null||l.call(d,t),t="Aborted("+t+")",lr(t),Ur=!0,t+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(t);throw Y(i),i}var Je="data:application/octet-stream;base64,",Se=t=>t.startsWith(Je);function ze(){if(d.locateFile){var t="avif-enc.wasm";return Se(t)?t:sr(t)}return new URL(""+new URL("assets/avif-enc-CL1PFR12.wasm",import.meta.url).href,import.meta.url).href}var ye;function Xe(t){if(t==ye&&Zr)return new Uint8Array(Zr);throw"both async and sync fetching of the wasm failed"}function Ze(t){return Zr?Promise.resolve().then(()=>Xe(t)):w(t).then(i=>new Uint8Array(i),()=>Xe(t))}function mt(t,i,l){return Ze(t).then(c=>WebAssembly.instantiate(c,i)).then(l,c=>{lr(`failed to asynchronously prepare wasm: ${c}`),Er(c)})}function wt(t,i,l,c){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!Se(i)&&typeof fetch=="function"?fetch(i,{credentials:"same-origin"}).then(g=>{var b=WebAssembly.instantiateStreaming(g,l);return b.then(c,function(E){return lr(`wasm streaming compile failed: ${E}`),lr("falling back to ArrayBuffer instantiation"),mt(i,l,c)})}):mt(i,l,c)}function Jt(){return{a:T}}function Qe(){var t=Jt();function i(c,g){return C=c.exports,Kr=C.$,br(),ee=C.ca,gt(C.aa),qe(),C}yt();function l(c){i(c.instance)}if(d.instantiateWasm)try{return d.instantiateWasm(t,i)}catch(c){lr(`Module.instantiateWasm callback failed with error: ${c}`),Y(c)}return ye??(ye=ze()),wt(Zr,ye,t,l).catch(Y),{}}function Ue(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var xe=t=>{t.forEach(i=>i(d))},Jr=d.noExitRuntime||!0,Q=t=>N(t),ir=()=>pr(),se=new TextDecoder,Pr=(t,i)=>{if(!t)return"";for(var l=t+i,c=t;!(c>=l)&&ar[c];)++c;return se.decode(ar.subarray(t,c))},Qr=(t,i,l,c)=>{Er(`Assertion failed: ${Pr(t)}, at: `+[i?Pr(i):"unknown filename",l,c?Pr(c):"unknown function"])};function me(t,i,l){return 0}function bt(t,i,l){return 0}function Oe(t,i,l,c){}var rt=()=>{Er("")},Ie={},De=t=>{for(;t.length;){var i=t.pop(),l=t.pop();l(i)}};function Me(t){return this.fromWireType(dr[t>>2])}var zr={},or={},ue={},Tr,et=t=>{throw new Tr(t)},Rr=(t,i,l)=>{t.forEach(A=>ue[A]=i);function c(A){var $=l(A);$.length!==t.length&&et("Mismatched type converter count");for(var W=0;W<t.length;++W)Mr(t[W],$[W])}var g=new Array(i.length),b=[],E=0;i.forEach((A,$)=>{or.hasOwnProperty(A)?g[$]=or[A]:(b.push(A),zr.hasOwnProperty(A)||(zr[A]=[]),zr[A].push(()=>{g[$]=or[A],++E,E===b.length&&c(g)}))}),b.length===0&&c(g)},Fr=t=>{var i=Ie[t];delete Ie[t];var l=i.rawConstructor,c=i.rawDestructor,g=i.fields,b=g.map(E=>E.getterReturnType).concat(g.map(E=>E.setterArgumentType));Rr([t],b,E=>{var A={};return g.forEach(($,W)=>{var I=$.fieldName,H=E[W],er=$.getter,$r=$.getterContext,_e=E[W+g.length],Nn=$.setter,Yn=$.setterContext;A[I]={read:pn=>H.fromWireType(er($r,pn)),write:(pn,Gn)=>{var gn=[];Nn(Yn,pn,_e.toWireType(gn,Gn)),De(gn)}}}),[{name:i.name,fromWireType:$=>{var W={};for(var I in A)W[I]=A[I].read($);return c($),W},toWireType:($,W)=>{for(var I in A)if(!(I in W))throw new TypeError(`Missing field: "${I}"`);var H=l();for(I in A)A[I].write(H,W[I]);return $!==null&&$.push(c,H),H},argPackAdvance:Nr,readValueFromPointer:Me,destructorFunction:c}]})},tt=(t,i,l,c,g)=>{},rr=()=>{for(var t=new Array(256),i=0;i<256;++i)t[i]=String.fromCharCode(i);z=t},z,Ar=t=>{for(var i="",l=t;ar[l];)i+=z[ar[l++]];return i},Tt,X=t=>{throw new Tt(t)};function Dr(t,i,l={}){var c=i.name;if(t||X(`type "${c}" must have a positive integer typeid pointer`),or.hasOwnProperty(t)){if(l.ignoreDuplicateRegistrations)return;X(`Cannot register type '${c}' twice`)}if(or[t]=i,delete ue[t],zr.hasOwnProperty(t)){var g=zr[t];delete zr[t],g.forEach(b=>b())}}function Mr(t,i,l={}){return Dr(t,i,l)}var Nr=8,zt=(t,i,l,c)=>{i=Ar(i),Mr(t,{name:i,fromWireType:function(g){return!!g},toWireType:function(g,b){return b?l:c},argPackAdvance:Nr,readValueFromPointer:function(g){return this.fromWireType(ar[g])},destructorFunction:null})},fe=[],V=[],we=t=>{t>9&&--V[t+1]===0&&(V[t]=void 0,fe.push(t))},be=()=>V.length/2-5-fe.length,Te=()=>{V.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=be},Vr={toValue:t=>(t||X("Cannot use deleted val. handle = "+t),V[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const i=fe.pop()||V.length;return V[i]=t,V[i+1]=1,i}}}},nr={name:"emscripten::val",fromWireType:t=>{var i=Vr.toValue(t);return we(t),i},toWireType:(t,i)=>Vr.toHandle(i),argPackAdvance:Nr,readValueFromPointer:Me,destructorFunction:null},Xt=t=>Mr(t,nr),nt=(t,i)=>{switch(i){case 4:return function(l){return this.fromWireType(ge[l>>2])};case 8:return function(l){return this.fromWireType(We[l>>3])};default:throw new TypeError(`invalid float width (${i}): ${t}`)}},At=(t,i,l)=>{i=Ar(i),Mr(t,{name:i,fromWireType:c=>c,toWireType:(c,g)=>g,argPackAdvance:Nr,readValueFromPointer:nt(i,l),destructorFunction:null})},le=(t,i)=>Object.defineProperty(i,"name",{value:t});function Ae(t){for(var i=1;i<t.length;++i)if(t[i]!==null&&t[i].destructorFunction===void 0)return!0;return!1}function Ct(t,i){if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var l=le(t.name||"unknownFunctionName",function(){});l.prototype=t.prototype;var c=new l,g=t.apply(c,i);return g instanceof Object?g:c}function Ve(t,i,l,c){for(var g=Ae(t),b=t.length-2,E=[],A=["fn"],$=0;$<b;++$)E.push(`arg${$}`),A.push(`arg${$}Wired`);E=E.join(","),A=A.join(",");var W=`return function (${E}) {
`;g&&(W+=`var destructors = [];
`);for(var I=g?"destructors":"null",H=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],$=0;$<b;++$)W+=`var arg${$}Wired = argType${$}['toWireType'](${I}, arg${$});
`,H.push(`argType${$}`);if(W+=(l||c?"var rv = ":"")+`invoker(${A});
`,g)W+=`runDestructors(destructors);
`;else for(var $=2;$<t.length;++$){var er=$===1?"thisWired":"arg"+($-2)+"Wired";t[$].destructorFunction!==null&&(W+=`${er}_dtor(${er});
`,H.push(`${er}_dtor`))}return l&&(W+=`var ret = retType['fromWireType'](rv);
return ret;
`),W+=`}
`,[H,W]}function He(t,i,l,c,g,b){var E=i.length;E<2&&X("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var A=i[1]!==null&&l!==null,$=Ae(i),W=i[0].name!=="void",I=[t,X,c,g,De,i[0],i[1]],H=0;H<E-2;++H)I.push(i[H+2]);if(!$)for(var H=2;H<i.length;++H)i[H].destructorFunction!==null&&I.push(i[H].destructorFunction);let[er,$r]=Ve(i,A,W,b);er.push($r);var _e=Ct(Function,er)(...I);return le(t,_e)}var Zt=(t,i,l)=>{if(t[i].overloadTable===void 0){var c=t[i];t[i]=function(...g){return t[i].overloadTable.hasOwnProperty(g.length)||X(`Function '${l}' called with an invalid number of arguments (${g.length}) - expects one of (${t[i].overloadTable})!`),t[i].overloadTable[g.length].apply(this,g)},t[i].overloadTable=[],t[i].overloadTable[c.argCount]=c}},Wr=(t,i,l)=>{d.hasOwnProperty(t)?((l===void 0||d[t].overloadTable!==void 0&&d[t].overloadTable[l]!==void 0)&&X(`Cannot register public name '${t}' twice`),Zt(d,t,t),d.hasOwnProperty(l)&&X(`Cannot register multiple overloads of a function with the same number of arguments (${l})!`),d[t].overloadTable[l]=i):(d[t]=i,l!==void 0&&(d[t].numArguments=l))},Et=(t,i)=>{for(var l=[],c=0;c<t;c++)l.push(dr[i+c*4>>2]);return l},Le=(t,i,l)=>{d.hasOwnProperty(t)||et("Replacing nonexistent public symbol"),d[t].overloadTable!==void 0&&l!==void 0?d[t].overloadTable[l]=i:(d[t]=i,d[t].argCount=l)},Qt=(t,i,l)=>{t=t.replace(/p/g,"i");var c=d["dynCall_"+t];return c(i,...l)},re=[],ee,_r=t=>{var i=re[t];return i||(t>=re.length&&(re.length=t+1),re[t]=i=ee.get(t)),i},$t=(t,i,l=[])=>{if(t.includes("j"))return Qt(t,i,l);var c=_r(i)(...l);return c},rn=(t,i)=>(...l)=>$t(t,i,l),Ce=(t,i)=>{t=Ar(t);function l(){return t.includes("j")?rn(t,i):_r(i)}var c=l();return typeof c!="function"&&X(`unknown function pointer with signature ${t}: ${i}`),c},en=(t,i)=>{var l=le(i,function(c){this.name=i,this.message=c;var g=new Error(c).stack;g!==void 0&&(this.stack=this.toString()+`
`+g.replace(/^Error(:[^\n]*)?\n/,""))});return l.prototype=Object.create(t.prototype),l.prototype.constructor=l,l.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},l},at,kt=t=>{var i=S(t),l=Ar(i);return F(i),l},Pt=(t,i)=>{var l=[],c={};function g(b){if(!c[b]&&!or[b]){if(ue[b]){ue[b].forEach(g);return}l.push(b),c[b]=!0}}throw i.forEach(g),new at(`${t}: `+l.map(kt).join([", "]))},Rt=t=>{t=t.trim();const i=t.indexOf("(");return i!==-1?t.substr(0,i):t},tn=(t,i,l,c,g,b,E,A)=>{var $=Et(i,l);t=Ar(t),t=Rt(t),g=Ce(c,g),Wr(t,function(){Pt(`Cannot call ${t} due to unbound types`,$)},i-1),Rr([],$,W=>{var I=[W[0],null].concat(W.slice(1));return Le(t,He(t,I,null,g,b,E),i-1),[]})},Ee=(t,i,l)=>{switch(i){case 1:return l?c=>ur[c]:c=>ar[c];case 2:return l?c=>Br[c>>1]:c=>cr[c>>1];case 4:return l?c=>vr[c>>2]:c=>dr[c>>2];default:throw new TypeError(`invalid integer width (${i}): ${t}`)}},Ft=(t,i,l,c,g)=>{i=Ar(i);var b=I=>I;if(c===0){var E=32-8*l;b=I=>I<<E>>>E}var A=i.includes("unsigned"),$=(I,H)=>{},W;A?W=function(I,H){return $(H,this.name),H>>>0}:W=function(I,H){return $(H,this.name),H},Mr(t,{name:i,fromWireType:b,toWireType:W,argPackAdvance:Nr,readValueFromPointer:Ee(i,l,c!==0),destructorFunction:null})},Wt=(t,i,l)=>{var c=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g=c[i];function b(E){var A=dr[E>>2],$=dr[E+4>>2];return new g(ur.buffer,$,A)}l=Ar(l),Mr(t,{name:l,fromWireType:b,argPackAdvance:Nr,readValueFromPointer:b},{ignoreDuplicateRegistrations:!0})},jt=(t,i,l,c)=>{if(!(c>0))return 0;for(var g=l,b=l+c-1,E=0;E<t.length;++E){var A=t.charCodeAt(E);if(A>=55296&&A<=57343){var $=t.charCodeAt(++E);A=65536+((A&1023)<<10)|$&1023}if(A<=127){if(l>=b)break;i[l++]=A}else if(A<=2047){if(l+1>=b)break;i[l++]=192|A>>6,i[l++]=128|A&63}else if(A<=65535){if(l+2>=b)break;i[l++]=224|A>>12,i[l++]=128|A>>6&63,i[l++]=128|A&63}else{if(l+3>=b)break;i[l++]=240|A>>18,i[l++]=128|A>>12&63,i[l++]=128|A>>6&63,i[l++]=128|A&63}}return i[l]=0,l-g},St=(t,i,l)=>jt(t,ar,i,l),Ut=t=>{for(var i=0,l=0;l<t.length;++l){var c=t.charCodeAt(l);c<=127?i++:c<=2047?i+=2:c>=55296&&c<=57343?(i+=4,++l):i+=3}return i},nn=(t,i)=>{i=Ar(i);var l=i==="std::string";Mr(t,{name:i,fromWireType(c){var g=dr[c>>2],b=c+4,E;if(l)for(var A=b,$=0;$<=g;++$){var W=b+$;if($==g||ar[W]==0){var I=W-A,H=Pr(A,I);E===void 0?E=H:(E+="\0",E+=H),A=W+1}}else{for(var er=new Array(g),$=0;$<g;++$)er[$]=String.fromCharCode(ar[b+$]);E=er.join("")}return F(c),E},toWireType(c,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var b,E=typeof g=="string";E||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||X("Cannot pass non-string to std::string"),l&&E?b=Ut(g):b=g.length;var A=k(4+b+1),$=A+4;if(dr[A>>2]=b,l&&E)St(g,$,b+1);else if(E)for(var W=0;W<b;++W){var I=g.charCodeAt(W);I>255&&(F($),X("String has UTF-16 code units that do not fit in 8 bits")),ar[$+W]=I}else for(var W=0;W<b;++W)ar[$+W]=g[W];return c!==null&&c.push(F,A),A},argPackAdvance:Nr,readValueFromPointer:Me,destructorFunction(c){F(c)}})},Be=new TextDecoder("utf-16le"),it=(t,i)=>{for(var l=t,c=l>>1,g=c+i/2;!(c>=g)&&cr[c];)++c;return l=c<<1,Be.decode(ar.subarray(t,l))},$e=(t,i,l)=>{if(l??(l=2147483647),l<2)return 0;l-=2;for(var c=i,g=l<t.length*2?l/2:t.length,b=0;b<g;++b){var E=t.charCodeAt(b);Br[i>>1]=E,i+=2}return Br[i>>1]=0,i-c},ce=t=>t.length*2,te=(t,i)=>{for(var l=0,c="";!(l>=i/4);){var g=vr[t+l*4>>2];if(g==0)break;if(++l,g>=65536){var b=g-65536;c+=String.fromCharCode(55296|b>>10,56320|b&1023)}else c+=String.fromCharCode(g)}return c},Ne=(t,i,l)=>{if(l??(l=2147483647),l<4)return 0;for(var c=i,g=c+l-4,b=0;b<t.length;++b){var E=t.charCodeAt(b);if(E>=55296&&E<=57343){var A=t.charCodeAt(++b);E=65536+((E&1023)<<10)|A&1023}if(vr[i>>2]=E,i+=4,i+4>g)break}return vr[i>>2]=0,i-c},xt=t=>{for(var i=0,l=0;l<t.length;++l){var c=t.charCodeAt(l);c>=55296&&c<=57343&&++l,i+=4}return i},Ye=(t,i,l)=>{l=Ar(l);var c,g,b,E;i===2?(c=it,g=$e,E=ce,b=A=>cr[A>>1]):i===4&&(c=te,g=Ne,E=xt,b=A=>dr[A>>2]),Mr(t,{name:l,fromWireType:A=>{for(var $=dr[A>>2],W,I=A+4,H=0;H<=$;++H){var er=A+4+H*i;if(H==$||b(er)==0){var $r=er-I,_e=c(I,$r);W===void 0?W=_e:(W+="\0",W+=_e),I=er+i}}return F(A),W},toWireType:(A,$)=>{typeof $!="string"&&X(`Cannot pass non-string to C++ string type ${l}`);var W=E($),I=k(4+W+i);return dr[I>>2]=W/i,g($,I+4,W+i),A!==null&&A.push(F,I),I},argPackAdvance:Nr,readValueFromPointer:Me,destructorFunction(A){F(A)}})},ot=(t,i,l,c,g,b)=>{Ie[t]={name:Ar(i),rawConstructor:Ce(l,c),rawDestructor:Ce(g,b),fields:[]}},an=(t,i,l,c,g,b,E,A,$,W)=>{Ie[t].fields.push({fieldName:Ar(i),getterReturnType:l,getter:Ce(c,g),getterContext:b,setterArgumentType:E,setter:Ce(A,$),setterContext:W})},st=(t,i)=>{i=Ar(i),Mr(t,{isVoid:!0,name:i,argPackAdvance:0,fromWireType:()=>{},toWireType:(l,c)=>{}})},on=(t,i,l)=>ar.copyWithin(t,i,i+l),Ot=()=>{Jr=!1,Mt=0},gr=()=>{throw 1/0},Xr=[],J=(t,i,l,c)=>(t=Xr[t],i=Vr.toValue(i),t(null,i,l,c)),sn={},xr=t=>{var i=sn[t];return i===void 0?Ar(t):i},Or=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),un=t=>t===0?Vr.toHandle(Or()):(t=xr(t),Vr.toHandle(Or()[t])),fn=t=>{var i=Xr.length;return Xr.push(t),i},ut=(t,i)=>{var l=or[t];return l===void 0&&X(`${i} has unknown type ${kt(t)}`),l},ne=(t,i)=>{for(var l=new Array(t),c=0;c<t;++c)l[c]=ut(dr[i+c*4>>2],"parameter "+c);return l},ft=(t,i,l)=>{var c=[],g=t.toWireType(c,l);return c.length&&(dr[i>>2]=Vr.toHandle(c)),g},It=(t,i,l)=>{var c=ne(t,i),g=c.shift();t--;var b=`return function (obj, func, destructorsRef, args) {
`,E=0,A=[];l===0&&A.push("obj");for(var $=["retType"],W=[g],I=0;I<t;++I)A.push("arg"+I),$.push("argType"+I),W.push(c[I]),b+=`  var arg${I} = argType${I}.readValueFromPointer(args${E?"+"+E:""});
`,E+=c[I].argPackAdvance;var H=l===1?"new func":"func.call";b+=`  var rv = ${H}(${A.join(", ")});
`,g.isVoid||($.push("emval_returnValue"),W.push(ft),b+=`  return emval_returnValue(retType, destructorsRef, rv);
`),b+=`};
`,$.push(b);var er=Ct(Function,$)(...W),$r=`methodCaller<(${c.map(_e=>_e.name).join(", ")}) => ${g.name}>`;return fn(le($r,er))},lt=t=>Vr.toHandle(xr(t)),ct=t=>{var i=Vr.toValue(t);De(i),we(t)},ve={},Dt=t=>{if(t instanceof Ue||t=="unwind")return B;M(1,t)},Mt=0,Vt=()=>Jr||Mt>0,ke=t=>{var i;B=t,Vt()||((i=d.onExit)==null||i.call(d,t),Ur=!0),M(t,new Ue(t))},ln=(t,i)=>{B=t,ke(t)},Pe=ln,cn=()=>{if(!Vt())try{Pe(B)}catch(t){Dt(t)}},Ge=t=>{if(!Ur)try{t(),cn()}catch(i){Dt(i)}},de=()=>performance.now(),vn=(t,i)=>{if(ve[t]&&(clearTimeout(ve[t].id),delete ve[t]),!i)return 0;var l=setTimeout(()=>{delete ve[t],Ge(()=>O(t,de()))},i);return ve[t]={id:l,timeout_ms:i},0},jr=()=>Date.now(),Ht=()=>2147483648,vt=(t,i)=>Math.ceil(t/i)*i,Yr=t=>{var i=Kr.buffer,l=(t-i.byteLength+65535)/65536|0;try{return Kr.grow(l),br(),1}catch{}},Lt=t=>{var i=ar.length;t>>>=0;var l=Ht();if(t>l)return!1;for(var c=1;c<=4;c*=2){var g=i*(1+.2/c);g=Math.min(g,t+100663296);var b=Math.min(l,vt(Math.max(t,g),65536)),E=Yr(b);if(E)return!0}return!1},he=t=>52,Bt=(t,i,l,c)=>52;function Nt(t,i,l,c,g){return 70}var a=[null,[],[]],s=(t,i=0,l=NaN)=>{for(var c=i+l,g=i;t[g]&&!(g>=c);)++g;return se.decode(t.buffer?t.subarray(i,g):new Uint8Array(t.slice(i,g)))},v=(t,i)=>{var l=a[t];i===0||i===10?((t===1?tr:lr)(s(l)),l.length=0):l.push(i)},_=(t,i,l,c)=>{for(var g=0,b=0;b<l;b++){var E=dr[i>>2],A=dr[i+4>>2];i+=8;for(var $=0;$<A;$++)v(t,ar[E+$]);g+=A}return dr[c>>2]=g,0};Tr=d.InternalError=class extends Error{constructor(i){super(i),this.name="InternalError"}},rr(),Tt=d.BindingError=class extends Error{constructor(i){super(i),this.name="BindingError"}},Te(),at=d.UnboundTypeError=en(Error,"UnboundTypeError");var T={a:Qr,s:me,M:bt,N:Oe,P:rt,y:Fr,C:tt,Z:zt,Y:Xt,t:At,T:tn,i:Ft,d:Wt,u:nn,o:Ye,L:ot,e:an,_:st,I:on,E:Ot,G:gr,x:J,p:we,q:un,w:It,k:lt,v:ct,F:vn,O:jr,H:Lt,r:he,K:Bt,z:Nt,J:_,j:xn,c:dn,n:Mn,m:bn,Q:Hn,S:Vn,R:Tn,B:Ln,A:Bn,g:In,f:dt,h:wr,b:ht,l:Yt,W:hn,V:Dn,X:On,U:_n,D:ke},C=Qe(),S=t=>(S=C.ba)(t),k=t=>(k=C.da)(t),F=t=>(F=C.ea)(t),O=(t,i)=>(O=C.fa)(t,i),U=(t,i)=>(U=C.ga)(t,i),N=t=>(N=C.ha)(t),pr=()=>(pr=C.ia)();d.dynCall_jiiiii=(t,i,l,c,g,b)=>(d.dynCall_jiiiii=C.ja)(t,i,l,c,g,b),d.dynCall_jiiiiiiii=(t,i,l,c,g,b,E,A,$)=>(d.dynCall_jiiiiiiii=C.ka)(t,i,l,c,g,b,E,A,$),d.dynCall_jiiiiiiiii=(t,i,l,c,g,b,E,A,$,W)=>(d.dynCall_jiiiiiiiii=C.la)(t,i,l,c,g,b,E,A,$,W),d.dynCall_jiiiiii=(t,i,l,c,g,b,E)=>(d.dynCall_jiiiiii=C.ma)(t,i,l,c,g,b,E);var Hr=d.dynCall_iiiijj=(t,i,l,c,g,b,E,A)=>(Hr=d.dynCall_iiiijj=C.na)(t,i,l,c,g,b,E,A),yr=d.dynCall_ij=(t,i,l)=>(yr=d.dynCall_ij=C.oa)(t,i,l);d.dynCall_iiijii=(t,i,l,c,g,b,E)=>(d.dynCall_iiijii=C.pa)(t,i,l,c,g,b,E),d.dynCall_jiji=(t,i,l,c,g)=>(d.dynCall_jiji=C.qa)(t,i,l,c,g);function dt(t,i,l){var c=ir();try{_r(t)(i,l)}catch(g){if(Q(c),g!==g+0)throw g;U(1,0)}}function dn(t,i,l){var c=ir();try{return _r(t)(i,l)}catch(g){if(Q(c),g!==g+0)throw g;U(1,0)}}function ht(t,i,l,c,g){var b=ir();try{_r(t)(i,l,c,g)}catch(E){if(Q(b),E!==E+0)throw E;U(1,0)}}function wr(t,i,l,c){var g=ir();try{_r(t)(i,l,c)}catch(b){if(Q(g),b!==b+0)throw b;U(1,0)}}function Yt(t,i,l,c,g,b){var E=ir();try{_r(t)(i,l,c,g,b)}catch(A){if(Q(E),A!==A+0)throw A;U(1,0)}}function xn(t,i){var l=ir();try{return _r(t)(i)}catch(c){if(Q(l),c!==c+0)throw c;U(1,0)}}function On(t,i,l,c,g,b,E,A,$,W){var I=ir();try{_r(t)(i,l,c,g,b,E,A,$,W)}catch(H){if(Q(I),H!==H+0)throw H;U(1,0)}}function In(t,i){var l=ir();try{_r(t)(i)}catch(c){if(Q(l),c!==c+0)throw c;U(1,0)}}function hn(t,i,l,c,g,b,E,A){var $=ir();try{_r(t)(i,l,c,g,b,E,A)}catch(W){if(Q($),W!==W+0)throw W;U(1,0)}}function Dn(t,i,l,c,g,b,E,A,$){var W=ir();try{_r(t)(i,l,c,g,b,E,A,$)}catch(I){if(Q(W),I!==I+0)throw I;U(1,0)}}function _n(t,i,l,c,g,b,E,A,$,W,I,H){var er=ir();try{_r(t)(i,l,c,g,b,E,A,$,W,I,H)}catch($r){if(Q(er),$r!==$r+0)throw $r;U(1,0)}}function Mn(t,i,l,c){var g=ir();try{return _r(t)(i,l,c)}catch(b){if(Q(g),b!==b+0)throw b;U(1,0)}}function Vn(t,i,l,c,g,b,E,A,$,W,I){var H=ir();try{return _r(t)(i,l,c,g,b,E,A,$,W,I)}catch(er){if(Q(H),er!==er+0)throw er;U(1,0)}}function bn(t,i,l,c,g){var b=ir();try{return _r(t)(i,l,c,g)}catch(E){if(Q(b),E!==E+0)throw E;U(1,0)}}function Tn(t,i,l,c,g,b,E,A,$,W,I,H){var er=ir();try{return _r(t)(i,l,c,g,b,E,A,$,W,I,H)}catch($r){if(Q(er),$r!==$r+0)throw $r;U(1,0)}}function Hn(t,i,l,c,g,b,E){var A=ir();try{return _r(t)(i,l,c,g,b,E)}catch($){if(Q(A),$!==$+0)throw $;U(1,0)}}function Ln(t,i,l,c,g,b,E,A){var $=ir();try{return Hr(t,i,l,c,g,b,E,A)}catch(W){if(Q($),W!==W+0)throw W;U(1,0)}}function Bn(t,i,l){var c=ir();try{return yr(t,i,l)}catch(g){if(Q(c),g!==g+0)throw g;U(1,0)}}var Gt,An;oe=function t(){Gt||Cn(),Gt||(oe=t)};function Cn(){if(kr>0||!An&&(An=1,je(),kr>0))return;function t(){var i;Gt||(Gt=1,d.calledRun=1,!Ur&&(ie(),D(d),(i=d.onRuntimeInitialized)==null||i.call(d),Ir()))}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),t()},1)):t()}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return Cn(),x=mr,x}})(),na;(function(u){u[u.YUV444=1]="YUV444",u[u.YUV422=2]="YUV422",u[u.YUV420=3]="YUV420",u[u.YUV400=4]="YUV400"})(na||(na={}));var aa;(function(u){u[u.Auto=0]="Auto",u[u.PSNR=1]="PSNR",u[u.SSIM=2]="SSIM"})(aa||(aa={}));const Fo={quality:50,qualityAlpha:-1,speed:6,subsample:na.YUV420,autoTiling:!1,tileColsLog2:0,tileRowsLog2:0,chromaDeltaQ:!1,sharpness:0,denoiseLevel:0,tune:aa.Auto,sharpYUV:!1};let ii;async function Wo(u){return ii??(ii=await da(Ro,u))}function jo(u,P){return ai("AVIF Encode",ii,Fo,u,P)}const So=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&So.decode();const ea=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};ea.encodeInto;var ia;(function(u){u[u.GRAYSCALE=1]="GRAYSCALE",u[u.RGB=2]="RGB",u[u.YCbCr=3]="YCbCr"})(ia||(ia={}));var oa;(function(u){u[u.JPEG_Annex_K=0]="JPEG_Annex_K",u[u.Flat=1]="Flat",u[u.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",u[u.ImageMagick=3]="ImageMagick",u[u.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",u[u.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",u[u.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",u[u.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",u[u.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(oa||(oa={}));ia.YCbCr,oa.ImageMagick;var Qa;(function(u){u[u.Default=-1]="Default",u[u.False=0]="False",u[u.True=1]="True"})(Qa||(Qa={}));var sa;(function(u){u[u.Default=-1]="Default",u[u.Zero=0]="Zero",u[u.Left=1]="Left",u[u.Top=2]="Top",u[u.Average0=3]="Average0",u[u.Select=4]="Select",u[u.Gradient=5]="Gradient",u[u.Weighted=6]="Weighted",u[u.TopRight=7]="TopRight",u[u.TopLeft=8]="TopLeft",u[u.LeftLeft=9]="LeftLeft",u[u.Average1=10]="Average1",u[u.Average2=11]="Average2",u[u.Average3=12]="Average3",u[u.Average4=13]="Average4",u[u.Best=14]="Best",u[u.Variable=15]="Variable"})(sa||(sa={}));sa.Default;var Uo=(()=>{var u=import.meta.url;return function(P={}){var x,d=P,D,Y,mr=new Promise((a,s)=>{D=a,Y=s}),G=Object.assign({},d),M=(a,s)=>{throw s},K="";function sr(a){return d.locateFile?d.locateFile(a,K):K+a}var w;typeof document<"u"&&document.currentScript&&(K=document.currentScript.src),u&&(K=u),K.startsWith("blob:")?K="":K=K.substr(0,K.replace(/[?#].*/,"").lastIndexOf("/")+1),w=a=>fetch(a,{credentials:"same-origin"}).then(s=>s.ok?s.arrayBuffer():Promise.reject(new Error(s.status+" : "+s.url))),d.print||console.log.bind(console);var tr=d.printErr||console.error.bind(console);Object.assign(d,G),G=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram;var lr=d.wasmBinary,Zr,Kr=!1,Ur,B,ur,ar,Br,cr,vr,dr,ge;function We(){var a=Zr.buffer;d.HEAP8=B=new Int8Array(a),d.HEAP16=ar=new Int16Array(a),d.HEAPU8=ur=new Uint8Array(a),d.HEAPU16=Br=new Uint16Array(a),d.HEAP32=cr=new Int32Array(a),d.HEAPU32=vr=new Uint32Array(a),d.HEAPF32=dr=new Float32Array(a),d.HEAPF64=ge=new Float64Array(a)}var br=[],ae=[],hr=[];function Ke(){var a=d.preRun;a&&(typeof a=="function"&&(a=[a]),a.forEach(Ir)),Ue(br)}function je(){Ue(ae)}function ie(){var a=d.postRun;a&&(typeof a=="function"&&(a=[a]),a.forEach(gt)),Ue(hr)}function Ir(a){br.unshift(a)}function pt(a){ae.unshift(a)}function gt(a){hr.unshift(a)}var qr=0,kr=null;function oe(a){var s;qr++,(s=d.monitorRunDependencies)==null||s.call(d,qr)}function yt(a){var v;if(qr--,(v=d.monitorRunDependencies)==null||v.call(d,qr),qr==0&&kr){var s=kr;kr=null,s()}}function qe(a){var v;(v=d.onAbort)==null||v.call(d,a),a="Aborted("+a+")",tr(a),Kr=!0,a+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(a);throw Y(s),s}var Er="data:application/octet-stream;base64,",Je=a=>a.startsWith(Er);function Se(){if(d.locateFile){var a="webp-enc.wasm";return Je(a)?a:sr(a)}return new URL(""+new URL("assets/webp-enc-Dan2K9zl.wasm",import.meta.url).href,import.meta.url).href}var ze;function ye(a){if(a==ze&&lr)return new Uint8Array(lr);throw"both async and sync fetching of the wasm failed"}function Xe(a){return lr?Promise.resolve().then(()=>ye(a)):w(a).then(s=>new Uint8Array(s),()=>ye(a))}function Ze(a,s,v){return Xe(a).then(_=>WebAssembly.instantiate(_,s)).then(v,_=>{tr(`failed to asynchronously prepare wasm: ${_}`),qe(_)})}function mt(a,s,v,_){return!a&&typeof WebAssembly.instantiateStreaming=="function"&&!Je(s)&&typeof fetch=="function"?fetch(s,{credentials:"same-origin"}).then(T=>{var C=WebAssembly.instantiateStreaming(T,v);return C.then(_,function(S){return tr(`wasm streaming compile failed: ${S}`),tr("falling back to ArrayBuffer instantiation"),Ze(s,v,_)})}):Ze(s,v,_)}function wt(){return{a:vn}}function Jt(){var a=wt();function s(_,T){return jr=_.exports,Zr=jr.B,We(),Et=jr.E,pt(jr.C),yt(),jr}oe();function v(_){s(_.instance)}if(d.instantiateWasm)try{return d.instantiateWasm(a,s)}catch(_){tr(`Module.instantiateWasm callback failed with error: ${_}`),Y(_)}return ze??(ze=Se()),mt(lr,ze,a,v).catch(Y),{}}function Qe(a){this.name="ExitStatus",this.message=`Program terminated with exit(${a})`,this.status=a}var Ue=a=>{a.forEach(s=>s(d))},xe=d.noExitRuntime||!0,Jr=()=>{qe("")},Q={},ir=a=>{for(;a.length;){var s=a.pop(),v=a.pop();v(s)}};function se(a){return this.fromWireType(vr[a>>2])}var Pr={},Qr={},me={},bt,Oe=a=>{throw new bt(a)},rt=(a,s,v)=>{a.forEach(k=>me[k]=s);function _(k){var F=v(k);F.length!==a.length&&Oe("Mismatched type converter count");for(var O=0;O<a.length;++O)Rr(a[O],F[O])}var T=new Array(s.length),C=[],S=0;s.forEach((k,F)=>{Qr.hasOwnProperty(k)?T[F]=Qr[k]:(C.push(k),Pr.hasOwnProperty(k)||(Pr[k]=[]),Pr[k].push(()=>{T[F]=Qr[k],++S,S===C.length&&_(T)}))}),C.length===0&&_(T)},Ie=a=>{var s=Q[a];delete Q[a];var v=s.rawConstructor,_=s.rawDestructor,T=s.fields,C=T.map(S=>S.getterReturnType).concat(T.map(S=>S.setterArgumentType));rt([a],C,S=>{var k={};return T.forEach((F,O)=>{var U=F.fieldName,N=S[O],pr=F.getter,Hr=F.getterContext,yr=S[O+T.length],dt=F.setter,dn=F.setterContext;k[U]={read:ht=>N.fromWireType(pr(Hr,ht)),write:(ht,wr)=>{var Yt=[];dt(dn,ht,yr.toWireType(Yt,wr)),ir(Yt)}}}),[{name:s.name,fromWireType:F=>{var O={};for(var U in k)O[U]=k[U].read(F);return _(F),O},toWireType:(F,O)=>{for(var U in k)if(!(U in O))throw new TypeError(`Missing field: "${U}"`);var N=v();for(U in k)k[U].write(N,O[U]);return F!==null&&F.push(_,N),N},argPackAdvance:Fr,readValueFromPointer:se,destructorFunction:_}]})},De=(a,s,v,_,T)=>{},Me=()=>{for(var a=new Array(256),s=0;s<256;++s)a[s]=String.fromCharCode(s);zr=a},zr,or=a=>{for(var s="",v=a;ur[v];)s+=zr[ur[v++]];return s},ue,Tr=a=>{throw new ue(a)};function et(a,s,v={}){var _=s.name;if(a||Tr(`type "${_}" must have a positive integer typeid pointer`),Qr.hasOwnProperty(a)){if(v.ignoreDuplicateRegistrations)return;Tr(`Cannot register type '${_}' twice`)}if(Qr[a]=s,delete me[a],Pr.hasOwnProperty(a)){var T=Pr[a];delete Pr[a],T.forEach(C=>C())}}function Rr(a,s,v={}){return et(a,s,v)}var Fr=8,tt=(a,s,v,_)=>{s=or(s),Rr(a,{name:s,fromWireType:function(T){return!!T},toWireType:function(T,C){return C?v:_},argPackAdvance:Fr,readValueFromPointer:function(T){return this.fromWireType(ur[T])},destructorFunction:null})},rr=[],z=[],Ar=a=>{a>9&&--z[a+1]===0&&(z[a]=void 0,rr.push(a))},Tt=()=>z.length/2-5-rr.length,X=()=>{z.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=Tt},Dr={toValue:a=>(a||Tr("Cannot use deleted val. handle = "+a),z[a]),toHandle:a=>{switch(a){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const s=rr.pop()||z.length;return z[s]=a,z[s+1]=1,s}}}},Mr={name:"emscripten::val",fromWireType:a=>{var s=Dr.toValue(a);return Ar(a),s},toWireType:(a,s)=>Dr.toHandle(s),argPackAdvance:Fr,readValueFromPointer:se,destructorFunction:null},Nr=a=>Rr(a,Mr),zt=(a,s,v)=>{if(a[s].overloadTable===void 0){var _=a[s];a[s]=function(...T){return a[s].overloadTable.hasOwnProperty(T.length)||Tr(`Function '${v}' called with an invalid number of arguments (${T.length}) - expects one of (${a[s].overloadTable})!`),a[s].overloadTable[T.length].apply(this,T)},a[s].overloadTable=[],a[s].overloadTable[_.argCount]=_}},fe=(a,s,v)=>{d.hasOwnProperty(a)?((v===void 0||d[a].overloadTable!==void 0&&d[a].overloadTable[v]!==void 0)&&Tr(`Cannot register public name '${a}' twice`),zt(d,a,a),d.hasOwnProperty(v)&&Tr(`Cannot register multiple overloads of a function with the same number of arguments (${v})!`),d[a].overloadTable[v]=s):(d[a]=s,v!==void 0&&(d[a].numArguments=v))},V=(a,s,v)=>{switch(s){case 1:return v?function(_){return this.fromWireType(B[_])}:function(_){return this.fromWireType(ur[_])};case 2:return v?function(_){return this.fromWireType(ar[_>>1])}:function(_){return this.fromWireType(Br[_>>1])};case 4:return v?function(_){return this.fromWireType(cr[_>>2])}:function(_){return this.fromWireType(vr[_>>2])};default:throw new TypeError(`invalid integer width (${s}): ${a}`)}},we=(a,s,v,_)=>{s=or(s);function T(){}T.values={},Rr(a,{name:s,constructor:T,fromWireType:function(C){return this.constructor.values[C]},toWireType:(C,S)=>S.value,argPackAdvance:Fr,readValueFromPointer:V(s,v,_),destructorFunction:null}),fe(s,T)},be=(a,s)=>Object.defineProperty(s,"name",{value:a}),Te=a=>{var s=Ht(a),v=or(s);return Yr(s),v},Vr=(a,s)=>{var v=Qr[a];return v===void 0&&Tr(`${s} has unknown type ${Te(a)}`),v},nr=(a,s,v)=>{var _=Vr(a,"enum");s=or(s);var T=_.constructor,C=Object.create(_.constructor.prototype,{value:{value:v},constructor:{value:be(`${_.name}_${s}`,function(){})}});T.values[v]=C,T[s]=C},Xt=(a,s)=>{switch(s){case 4:return function(v){return this.fromWireType(dr[v>>2])};case 8:return function(v){return this.fromWireType(ge[v>>3])};default:throw new TypeError(`invalid float width (${s}): ${a}`)}},nt=(a,s,v)=>{s=or(s),Rr(a,{name:s,fromWireType:_=>_,toWireType:(_,T)=>T,argPackAdvance:Fr,readValueFromPointer:Xt(s,v),destructorFunction:null})};function At(a){for(var s=1;s<a.length;++s)if(a[s]!==null&&a[s].destructorFunction===void 0)return!0;return!1}function le(a,s){if(!(a instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof a} which is not a function`);var v=be(a.name||"unknownFunctionName",function(){});v.prototype=a.prototype;var _=new v,T=a.apply(_,s);return T instanceof Object?T:_}function Ae(a,s,v,_){for(var T=At(a),C=a.length-2,S=[],k=["fn"],F=0;F<C;++F)S.push(`arg${F}`),k.push(`arg${F}Wired`);S=S.join(","),k=k.join(",");var O=`return function (${S}) {
`;T&&(O+=`var destructors = [];
`);for(var U=T?"destructors":"null",N=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],F=0;F<C;++F)O+=`var arg${F}Wired = argType${F}['toWireType'](${U}, arg${F});
`,N.push(`argType${F}`);if(O+=(v||_?"var rv = ":"")+`invoker(${k});
`,T)O+=`runDestructors(destructors);
`;else for(var F=2;F<a.length;++F){var pr=F===1?"thisWired":"arg"+(F-2)+"Wired";a[F].destructorFunction!==null&&(O+=`${pr}_dtor(${pr});
`,N.push(`${pr}_dtor`))}return v&&(O+=`var ret = retType['fromWireType'](rv);
return ret;
`),O+=`}
`,[N,O]}function Ct(a,s,v,_,T,C){var S=s.length;S<2&&Tr("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var k=s[1]!==null&&v!==null,F=At(s),O=s[0].name!=="void",U=[a,Tr,_,T,ir,s[0],s[1]],N=0;N<S-2;++N)U.push(s[N+2]);if(!F)for(var N=2;N<s.length;++N)s[N].destructorFunction!==null&&U.push(s[N].destructorFunction);let[pr,Hr]=Ae(s,k,O,C);pr.push(Hr);var yr=le(Function,pr)(...U);return be(a,yr)}var Ve=(a,s)=>{for(var v=[],_=0;_<a;_++)v.push(vr[s+_*4>>2]);return v},He=(a,s,v)=>{d.hasOwnProperty(a)||Oe("Replacing nonexistent public symbol"),d[a].overloadTable!==void 0&&v!==void 0?d[a].overloadTable[v]=s:(d[a]=s,d[a].argCount=v)},Zt=(a,s,v)=>{a=a.replace(/p/g,"i");var _=d["dynCall_"+a];return _(s,...v)},Wr=[],Et,Le=a=>{var s=Wr[a];return s||(a>=Wr.length&&(Wr.length=a+1),Wr[a]=s=Et.get(a)),s},Qt=(a,s,v=[])=>{if(a.includes("j"))return Zt(a,s,v);var _=Le(s)(...v);return _},re=(a,s)=>(...v)=>Qt(a,s,v),ee=(a,s)=>{a=or(a);function v(){return a.includes("j")?re(a,s):Le(s)}var _=v();return typeof _!="function"&&Tr(`unknown function pointer with signature ${a}: ${s}`),_},_r=(a,s)=>{var v=be(s,function(_){this.name=s,this.message=_;var T=new Error(_).stack;T!==void 0&&(this.stack=this.toString()+`
`+T.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(a.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},v},$t,rn=(a,s)=>{var v=[],_={};function T(C){if(!_[C]&&!Qr[C]){if(me[C]){me[C].forEach(T);return}v.push(C),_[C]=!0}}throw s.forEach(T),new $t(`${a}: `+v.map(Te).join([", "]))},Ce=a=>{a=a.trim();const s=a.indexOf("(");return s!==-1?a.substr(0,s):a},en=(a,s,v,_,T,C,S,k)=>{var F=Ve(s,v);a=or(a),a=Ce(a),T=ee(_,T),fe(a,function(){rn(`Cannot call ${a} due to unbound types`,F)},s-1),rt([],F,O=>{var U=[O[0],null].concat(O.slice(1));return He(a,Ct(a,U,null,T,C,S),s-1),[]})},at=(a,s,v)=>{switch(s){case 1:return v?_=>B[_]:_=>ur[_];case 2:return v?_=>ar[_>>1]:_=>Br[_>>1];case 4:return v?_=>cr[_>>2]:_=>vr[_>>2];default:throw new TypeError(`invalid integer width (${s}): ${a}`)}},kt=(a,s,v,_,T)=>{s=or(s);var C=U=>U;if(_===0){var S=32-8*v;C=U=>U<<S>>>S}var k=s.includes("unsigned"),F=(U,N)=>{},O;k?O=function(U,N){return F(N,this.name),N>>>0}:O=function(U,N){return F(N,this.name),N},Rr(a,{name:s,fromWireType:C,toWireType:O,argPackAdvance:Fr,readValueFromPointer:at(s,v,_!==0),destructorFunction:null})},Pt=(a,s,v)=>{var _=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],T=_[s];function C(S){var k=vr[S>>2],F=vr[S+4>>2];return new T(B.buffer,F,k)}v=or(v),Rr(a,{name:v,fromWireType:C,argPackAdvance:Fr,readValueFromPointer:C},{ignoreDuplicateRegistrations:!0})},Rt=(a,s,v,_)=>{if(!(_>0))return 0;for(var T=v,C=v+_-1,S=0;S<a.length;++S){var k=a.charCodeAt(S);if(k>=55296&&k<=57343){var F=a.charCodeAt(++S);k=65536+((k&1023)<<10)|F&1023}if(k<=127){if(v>=C)break;s[v++]=k}else if(k<=2047){if(v+1>=C)break;s[v++]=192|k>>6,s[v++]=128|k&63}else if(k<=65535){if(v+2>=C)break;s[v++]=224|k>>12,s[v++]=128|k>>6&63,s[v++]=128|k&63}else{if(v+3>=C)break;s[v++]=240|k>>18,s[v++]=128|k>>12&63,s[v++]=128|k>>6&63,s[v++]=128|k&63}}return s[v]=0,v-T},tn=(a,s,v)=>Rt(a,ur,s,v),Ee=a=>{for(var s=0,v=0;v<a.length;++v){var _=a.charCodeAt(v);_<=127?s++:_<=2047?s+=2:_>=55296&&_<=57343?(s+=4,++v):s+=3}return s},Ft=new TextDecoder,Wt=(a,s)=>{if(!a)return"";for(var v=a+s,_=a;!(_>=v)&&ur[_];)++_;return Ft.decode(ur.subarray(a,_))},jt=(a,s)=>{s=or(s);var v=s==="std::string";Rr(a,{name:s,fromWireType(_){var T=vr[_>>2],C=_+4,S;if(v)for(var k=C,F=0;F<=T;++F){var O=C+F;if(F==T||ur[O]==0){var U=O-k,N=Wt(k,U);S===void 0?S=N:(S+="\0",S+=N),k=O+1}}else{for(var pr=new Array(T),F=0;F<T;++F)pr[F]=String.fromCharCode(ur[C+F]);S=pr.join("")}return Yr(_),S},toWireType(_,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var C,S=typeof T=="string";S||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array||Tr("Cannot pass non-string to std::string"),v&&S?C=Ee(T):C=T.length;var k=vt(4+C+1),F=k+4;if(vr[k>>2]=C,v&&S)tn(T,F,C+1);else if(S)for(var O=0;O<C;++O){var U=T.charCodeAt(O);U>255&&(Yr(F),Tr("String has UTF-16 code units that do not fit in 8 bits")),ur[F+O]=U}else for(var O=0;O<C;++O)ur[F+O]=T[O];return _!==null&&_.push(Yr,k),k},argPackAdvance:Fr,readValueFromPointer:se,destructorFunction(_){Yr(_)}})},St=new TextDecoder("utf-16le"),Ut=(a,s)=>{for(var v=a,_=v>>1,T=_+s/2;!(_>=T)&&Br[_];)++_;return v=_<<1,St.decode(ur.subarray(a,v))},nn=(a,s,v)=>{if(v??(v=2147483647),v<2)return 0;v-=2;for(var _=s,T=v<a.length*2?v/2:a.length,C=0;C<T;++C){var S=a.charCodeAt(C);ar[s>>1]=S,s+=2}return ar[s>>1]=0,s-_},Be=a=>a.length*2,it=(a,s)=>{for(var v=0,_="";!(v>=s/4);){var T=cr[a+v*4>>2];if(T==0)break;if(++v,T>=65536){var C=T-65536;_+=String.fromCharCode(55296|C>>10,56320|C&1023)}else _+=String.fromCharCode(T)}return _},$e=(a,s,v)=>{if(v??(v=2147483647),v<4)return 0;for(var _=s,T=_+v-4,C=0;C<a.length;++C){var S=a.charCodeAt(C);if(S>=55296&&S<=57343){var k=a.charCodeAt(++C);S=65536+((S&1023)<<10)|k&1023}if(cr[s>>2]=S,s+=4,s+4>T)break}return cr[s>>2]=0,s-_},ce=a=>{for(var s=0,v=0;v<a.length;++v){var _=a.charCodeAt(v);_>=55296&&_<=57343&&++v,s+=4}return s},te=(a,s,v)=>{v=or(v);var _,T,C,S;s===2?(_=Ut,T=nn,S=Be,C=k=>Br[k>>1]):s===4&&(_=it,T=$e,S=ce,C=k=>vr[k>>2]),Rr(a,{name:v,fromWireType:k=>{for(var F=vr[k>>2],O,U=k+4,N=0;N<=F;++N){var pr=k+4+N*s;if(N==F||C(pr)==0){var Hr=pr-U,yr=_(U,Hr);O===void 0?O=yr:(O+="\0",O+=yr),U=pr+s}}return Yr(k),O},toWireType:(k,F)=>{typeof F!="string"&&Tr(`Cannot pass non-string to C++ string type ${v}`);var O=S(F),U=vt(4+O+s);return vr[U>>2]=O/s,T(F,U+4,O+s),k!==null&&k.push(Yr,U),U},argPackAdvance:Fr,readValueFromPointer:se,destructorFunction(k){Yr(k)}})},Ne=(a,s,v,_,T,C)=>{Q[a]={name:or(s),rawConstructor:ee(v,_),rawDestructor:ee(T,C),fields:[]}},xt=(a,s,v,_,T,C,S,k,F,O)=>{Q[a].fields.push({fieldName:or(s),getterReturnType:v,getter:ee(_,T),getterContext:C,setterArgumentType:S,setter:ee(k,F),setterContext:O})},Ye=(a,s)=>{s=or(s),Rr(a,{isVoid:!0,name:s,argPackAdvance:0,fromWireType:()=>{},toWireType:(v,_)=>{}})},ot=(a,s,v)=>ur.copyWithin(a,s,s+v),an=()=>{xe=!1,It=0},st=[],on=(a,s,v,_)=>(a=st[a],s=Dr.toValue(s),a(null,s,v,_)),Ot={},gr=a=>{var s=Ot[a];return s===void 0?or(a):s},Xr=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),J=a=>a===0?Dr.toHandle(Xr()):(a=gr(a),Dr.toHandle(Xr()[a])),sn=a=>{var s=st.length;return st.push(a),s},xr=(a,s)=>{for(var v=new Array(a),_=0;_<a;++_)v[_]=Vr(vr[s+_*4>>2],"parameter "+_);return v},Or=(a,s,v)=>{var _=[],T=a.toWireType(_,v);return _.length&&(vr[s>>2]=Dr.toHandle(_)),T},un=(a,s,v)=>{var _=xr(a,s),T=_.shift();a--;var C=`return function (obj, func, destructorsRef, args) {
`,S=0,k=[];v===0&&k.push("obj");for(var F=["retType"],O=[T],U=0;U<a;++U)k.push("arg"+U),F.push("argType"+U),O.push(_[U]),C+=`  var arg${U} = argType${U}.readValueFromPointer(args${S?"+"+S:""});
`,S+=_[U].argPackAdvance;var N=v===1?"new func":"func.call";C+=`  var rv = ${N}(${k.join(", ")});
`,T.isVoid||(F.push("emval_returnValue"),O.push(Or),C+=`  return emval_returnValue(retType, destructorsRef, rv);
`),C+=`};
`,F.push(C);var pr=le(Function,F)(...O),Hr=`methodCaller<(${_.map(yr=>yr.name).join(", ")}) => ${T.name}>`;return sn(be(Hr,pr))},fn=a=>Dr.toHandle(gr(a)),ut=a=>{var s=Dr.toValue(a);ir(s),Ar(a)},ne={},ft=a=>{if(a instanceof Qe||a=="unwind")return Ur;M(1,a)},It=0,lt=()=>xe||It>0,ct=a=>{var s;Ur=a,lt()||((s=d.onExit)==null||s.call(d,a),Kr=!0),M(a,new Qe(a))},ve=(a,s)=>{Ur=a,ct(a)},Dt=ve,Mt=()=>{if(!lt())try{Dt(Ur)}catch(a){ft(a)}},Vt=a=>{if(!Kr)try{a(),Mt()}catch(s){ft(s)}},ke=()=>performance.now(),ln=(a,s)=>{if(ne[a]&&(clearTimeout(ne[a].id),delete ne[a]),!s)return 0;var v=setTimeout(()=>{delete ne[a],Vt(()=>Lt(a,ke()))},s);return ne[a]={id:v,timeout_ms:s},0},Pe=()=>2147483648,cn=(a,s)=>Math.ceil(a/s)*s,Ge=a=>{var s=Zr.buffer,v=(a-s.byteLength+65535)/65536|0;try{return Zr.grow(v),We(),1}catch{}},de=a=>{var s=ur.length;a>>>=0;var v=Pe();if(a>v)return!1;for(var _=1;_<=4;_*=2){var T=s*(1+.2/_);T=Math.min(T,a+100663296);var C=Math.min(v,cn(Math.max(a,T),65536)),S=Ge(C);if(S)return!0}return!1};bt=d.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Me(),ue=d.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},X(),$t=d.UnboundTypeError=_r(Error,"UnboundTypeError");var vn={u:Jr,k:Ie,o:De,x:tt,w:Nr,m:we,d:nr,h:nt,n:en,c:kt,b:Pt,i:jt,e:te,l:Ne,a:xt,y:Ye,t:ot,q:an,j:on,f:Ar,g:J,A:un,v:fn,z:ut,r:ln,s:de,p:ct},jr=Jt(),Ht=a=>(Ht=jr.D)(a),vt=a=>(vt=jr.F)(a),Yr=a=>(Yr=jr.G)(a),Lt=(a,s)=>(Lt=jr.H)(a,s);d.dynCall_jiiiii=(a,s,v,_,T,C)=>(d.dynCall_jiiiii=jr.I)(a,s,v,_,T,C);var he,Bt;kr=function a(){he||Nt(),he||(kr=a)};function Nt(){if(qr>0||!Bt&&(Bt=1,Ke(),qr>0))return;function a(){var s;he||(he=1,d.calledRun=1,!Kr&&(je(),D(d),(s=d.onRuntimeInitialized)==null||s.call(d),ie()))}d.setStatus?(d.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>d.setStatus(""),1),a()},1)):a()}if(d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();return Nt(),x=mr,x}})(),ua;(function(u){u[u.None=0]="None",u[u.SegmentSmooth=1]="SegmentSmooth",u[u.Dithering=2]="Dithering"})(ua||(ua={}));var fa;(function(u){u[u.None=0]="None",u[u.Fast=1]="Fast",u[u.Best=2]="Best"})(fa||(fa={}));ua.None,fa.Fast;let xo;async function Oo(u){return xo??(xo=await da(Uo,u))}var oi=(()=>{var u=import.meta.url;return function(P={}){var qa;var x;function d(){return hr.buffer!=Ir.buffer&&Er(),Ir}function D(){return hr.buffer!=Ir.buffer&&Er(),pt}function Y(){return hr.buffer!=Ir.buffer&&Er(),gt}function mr(){return hr.buffer!=Ir.buffer&&Er(),qr}function G(){return hr.buffer!=Ir.buffer&&Er(),kr}function M(){return hr.buffer!=Ir.buffer&&Er(),oe}function K(){return hr.buffer!=Ir.buffer&&Er(),yt}function sr(){return hr.buffer!=Ir.buffer&&Er(),qe}var w=P,tr,lr,Zr=new Promise((r,e)=>{tr=r,lr=e}),Kr=typeof window=="object",Ur=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var B=Ur&&((qa=self.name)==null?void 0:qa.startsWith("em-pthread")),ur=Object.assign({},w),ar="./this.program",Br=(r,e)=>{throw e},cr="";function vr(r){return w.locateFile?w.locateFile(r,cr):cr+r}var dr,ge;(Kr||Ur)&&(Ur?cr=self.location.href:typeof document<"u"&&document.currentScript&&(cr=document.currentScript.src),u&&(cr=u),cr.startsWith("blob:")?cr="":cr=cr.substr(0,cr.replace(/[?#].*/,"").lastIndexOf("/")+1),Ur&&(ge=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),dr=r=>fetch(r,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))));var We=w.print||console.log.bind(console),br=w.printErr||console.error.bind(console);Object.assign(w,ur),ur=null,w.arguments&&w.arguments,w.thisProgram&&(ar=w.thisProgram);var ae=w.wasmBinary,hr,Ke,je=!1,ie,Ir,pt,gt,qr,kr,oe,yt,qe;function Er(){var r=hr.buffer;w.HEAP8=Ir=new Int8Array(r),w.HEAP16=gt=new Int16Array(r),w.HEAPU8=pt=new Uint8Array(r),w.HEAPU16=qr=new Uint16Array(r),w.HEAP32=kr=new Int32Array(r),w.HEAPU32=oe=new Uint32Array(r),w.HEAPF32=yt=new Float32Array(r),w.HEAPF64=qe=new Float64Array(r)}if(B){let r=function(...o){var f=o.join(" ");console.error(f)},e=function(...o){var f=o.join(" ");postMessage({cmd:"alert",text:f,threadId:kn()})},n=function(o){try{var f=o.data,h=f.cmd;if(h==="load"){let y=[];self.onmessage=p=>y.push(p),self.startWorker=p=>{postMessage({cmd:"loaded"});for(let m of y)n(m);self.onmessage=n};for(const p of f.handlers)(!w[p]||w[p].proxy)&&(w[p]=(...m)=>{postMessage({cmd:"callHandler",handler:p,args:m})},p=="print"&&(We=w[p]),p=="printErr"&&(br=w[p]));hr=f.wasmMemory,Er(),Je(f.wasmModule)}else if(h==="run"){be(f.pthread_ptr),Zn(f.pthread_ptr,0,0,1,0,0),V.receiveObjectTransfer(f),V.threadInitTLS(),Kn(f.pthread_ptr),Se||(Ra(),Se=!0);try{Xt(f.start_routine,f.arg)}catch(y){if(y!="unwind")throw y}}else f.target==="setimmediate"||(h==="checkMailbox"?Se&&En():h&&(br(`worker: received unknown command ${h}`),br(f)))}catch(y){throw Fa(),y}};var Je,Se=!1;w.printErr||(br=r),self.alert=e,w.instantiateWasm=(o,f)=>new Promise((h,y)=>{Je=p=>{var m=new WebAssembly.Instance(p,zr());f(m),h()}}),self.onunhandledrejection=o=>{throw o.reason||o},self.onmessage=n}if(!B){if(w.wasmMemory)hr=w.wasmMemory;else{var ze=w.INITIAL_MEMORY||16777216;hr=new WebAssembly.Memory({initial:ze/65536,maximum:32768,shared:!0})}Er()}var ye=[],Xe=[],Ze=[];function mt(){var r=w.preRun;r&&(typeof r=="function"&&(r=[r]),r.forEach(Qe)),we(ye)}function wt(){B||we(Xe)}function Jt(){if(!B){var r=w.postRun;r&&(typeof r=="function"&&(r=[r]),r.forEach(xe)),we(Ze)}}function Qe(r){ye.unshift(r)}function Ue(r){Xe.unshift(r)}function xe(r){Ze.unshift(r)}var Jr=0,Q=null;function ir(r){var e;Jr++,(e=w.monitorRunDependencies)==null||e.call(w,Jr)}function se(r){var n;if(Jr--,(n=w.monitorRunDependencies)==null||n.call(w,Jr),Jr==0&&Q){var e=Q;Q=null,e()}}function Pr(r){var n;(n=w.onAbort)==null||n.call(w,r),r="Aborted("+r+")",br(r),je=!0,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw lr(e),e}var Qr="data:application/octet-stream;base64,",me=r=>r.startsWith(Qr);function bt(){if(w.locateFile){var r="heic-enc.wasm";return me(r)?r:vr(r)}return new URL(""+new URL("assets/heic-enc-BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var Oe;function rt(r){if(r==Oe&&ae)return new Uint8Array(ae);if(ge)return ge(r);throw"both async and sync fetching of the wasm failed"}function Ie(r){return ae?Promise.resolve().then(()=>rt(r)):dr(r).then(e=>new Uint8Array(e),()=>rt(r))}function De(r,e,n){return Ie(r).then(o=>WebAssembly.instantiate(o,e)).then(n,o=>{br(`failed to asynchronously prepare wasm: ${o}`),Pr(o)})}function Me(r,e,n,o){return!r&&typeof WebAssembly.instantiateStreaming=="function"&&!me(e)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(f=>{var h=WebAssembly.instantiateStreaming(f,n);return h.then(o,function(y){return br(`wasm streaming compile failed: ${y}`),br("falling back to ArrayBuffer instantiation"),De(e,n,o)})}):De(e,n,o)}function zr(){return to(),{a:ka}}function or(){var r=zr();function e(o,f){return q=o.exports,At(q.Wa),Vr=q.Va,Ue(q.Pa),Ke=f,se(),q}ir();function n(o){e(o.instance,o.module)}if(w.instantiateWasm)try{return w.instantiateWasm(r,e)}catch(o){br(`Module.instantiateWasm callback failed with error: ${o}`),lr(o)}return Oe??(Oe=bt()),Me(ae,Oe,r,n).catch(lr),{}}function ue(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}var Tr=r=>{r.terminate(),r.onmessage=e=>{}},et=r=>{var e=V.pthreads[r];V.returnWorkerToPool(e)},Rr=r=>{var e=V.getNewWorker();if(!e)return 6;V.runningWorkers.push(e),V.pthreads[r.pthread_ptr]=e,e.pthread_ptr=r.pthread_ptr;var n={cmd:"run",start_routine:r.startRoutine,arg:r.arg,pthread_ptr:r.pthread_ptr};return e.postMessage(n,r.transferList),0},Fr=0,tt=()=>nt||Fr>0,rr=()=>Ma(),z=r=>Ia(r),Ar=r=>Da(r),Tt=(r,e)=>e+2097152>>>0<4194305-!!r?(r>>>0)+e*4294967296:NaN,X=(r,e,n,...o)=>{for(var f=o.length,h=rr(),y=Ar(f*8),p=y>>3,m=0;m<o.length;m++){var R=o[m];sr()[p+m]=R}var j=Wa(r,e,f,y,n);return z(h),j};function Dr(r){var e;if(B)return X(0,0,1,r);ie=r,tt()||(V.terminateAllThreads(),(e=w.onExit)==null||e.call(w,r),je=!0),Br(r,new ue(r))}var Mr=r=>{if(r instanceof ue||r=="unwind")return ie;Br(1,r)};function Nr(r){if(B)return X(1,0,0,r);fe(r)}var zt=(r,e)=>{if(ie=r,B)throw Nr(r),"unwind";Dr(r)},fe=zt,V={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){B||V.initMainThread()},initMainThread(){for(var r=2;r--;)V.allocateUnusedWorker();Qe(()=>{ir(),V.loadWasmModuleToAllWorkers(()=>se())})},terminateAllThreads:()=>{for(var r of V.runningWorkers)Tr(r);for(var r of V.unusedWorkers)Tr(r);V.unusedWorkers=[],V.runningWorkers=[],V.pthreads=[]},returnWorkerToPool:r=>{var e=r.pthread_ptr;delete V.pthreads[e],V.unusedWorkers.push(r),V.runningWorkers.splice(V.runningWorkers.indexOf(r),1),r.pthread_ptr=0,ja(e)},receiveObjectTransfer(r){},threadInitTLS(){V.tlsInitFunctions.forEach(r=>r())},loadWasmModuleToWorker:r=>new Promise(e=>{r.onmessage=h=>{var y=h.data,p=y.cmd;if(y.targetThread&&y.targetThread!=kn()){var m=V.pthreads[y.targetThread];m?m.postMessage(y,y.transferList):br(`Internal error! Worker sent a message "${p}" to target pthread ${y.targetThread}, but that thread no longer exists!`);return}p==="checkMailbox"?En():p==="spawnThread"?Rr(y):p==="cleanupThread"?et(y.thread):p==="loaded"?(r.loaded=!0,e(r)):p==="alert"?alert(`Thread ${y.threadId}: ${y.text}`):y.target==="setimmediate"?r.postMessage(y):p==="callHandler"?w[y.handler](...y.args):p&&br(`worker sent an unknown command ${p}`)},r.onerror=h=>{var y="worker sent an error!";throw br(`${y} ${h.filename}:${h.lineno}: ${h.message}`),h};var n=[],o=["onExit","onAbort","print","printErr"];for(var f of o)w.propertyIsEnumerable(f)&&n.push(f);r.postMessage({cmd:"load",handlers:n,wasmMemory:hr,wasmModule:Ke})}),loadWasmModuleToAllWorkers(r){if(B)return r();Promise.all(V.unusedWorkers.map(V.loadWasmModuleToWorker)).then(r)},allocateUnusedWorker(){var r;r=new Worker(new URL(""+new URL("heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),V.unusedWorkers.push(r)},getNewWorker(){return V.unusedWorkers.length==0&&(V.allocateUnusedWorker(),V.loadWasmModuleToWorker(V.unusedWorkers[0])),V.unusedWorkers.pop()}},we=r=>{r.forEach(e=>e(w))},be=r=>{Er();var e=M()[r+52>>2],n=M()[r+56>>2],o=e-n;Oa(e,o),z(e)},Te=[],Vr,nr=r=>{var e=Te[r];return e||(r>=Te.length&&(Te.length=r+1),Te[r]=e=Vr.get(r)),e},Xt=(r,e)=>{Fr=0,nt=0;var n=nr(r)(e);function o(f){tt()?ie=f:Qn(f)}o(n)},nt=w.noExitRuntime||!0,At=r=>V.tlsInitFunctions.push(r),le=new TextDecoder,Ae=(r,e)=>{if(!r)return"";for(var n=r+e,o=r;!(o>=n)&&D()[o];)++o;return le.decode(D().slice(r,o))},Ct=(r,e,n,o)=>{Pr(`Assertion failed: ${Ae(r)}, at: `+[e?Ae(e):"unknown filename",n,o?Ae(o):"unknown function"])},Ve=[],He=0,Zt=r=>{var e=new Le(r);return e.get_caught()||(e.set_caught(!0),He--),e.set_rethrown(!1),Ve.push(e),Ha(r),Ba(r)},Wr=0,Et=()=>{fr(0,0);var r=Ve.pop();Va(r.excPtr),Wr=0};class Le{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){M()[this.ptr+4>>2]=e}get_type(){return M()[this.ptr+4>>2]}set_destructor(e){M()[this.ptr+8>>2]=e}get_destructor(){return M()[this.ptr+8>>2]}set_caught(e){e=e?1:0,d()[this.ptr+12]=e}get_caught(){return d()[this.ptr+12]!=0}set_rethrown(e){e=e?1:0,d()[this.ptr+13]=e}get_rethrown(){return d()[this.ptr+13]!=0}init(e,n){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(n)}set_adjusted_ptr(e){M()[this.ptr+16>>2]=e}get_adjusted_ptr(){return M()[this.ptr+16>>2]}}var Qt=r=>{throw Wr||(Wr=r),Wr},re=r=>xa(r),ee=r=>{var e=Wr;if(!e)return re(0),0;var n=new Le(e);n.set_adjusted_ptr(e);var o=n.get_type();if(!o)return re(0),e;for(var f of r){if(f===0||f===o)break;var h=n.ptr+16;if(La(f,o,h))return re(f),e}return re(o),e},_r=()=>ee([]),$t=r=>ee([r]),rn=()=>{var r=Ve.pop();r||Pr("no exception to throw");var e=r.excPtr;throw r.get_rethrown()||(Ve.push(r),r.set_rethrown(!0),r.set_caught(!1),He++),Wr=e,Wr},Ce=(r,e,n)=>{var o=new Le(r);throw o.init(e,n),Wr=r,He++,Wr},en=()=>He;function at(r,e,n,o){return B?X(2,0,1,r,e,n,o):Pt(r,e,n,o)}var kt=()=>typeof SharedArrayBuffer<"u",Pt=(r,e,n,o)=>{if(!kt())return 6;var f=[],h=0;if(B&&(f.length===0||h))return at(r,e,n,o);var y={startRoutine:n,pthread_ptr:r,arg:o,transferList:f};return B?(y.cmd="spawnThread",postMessage(y,f),0):Rr(y)};function Rt(r,e,n){return B?X(3,0,1,r,e,n):0}var tn=(r,e,n,o)=>{if(!(o>0))return 0;for(var f=n,h=n+o-1,y=0;y<r.length;++y){var p=r.charCodeAt(y);if(p>=55296&&p<=57343){var m=r.charCodeAt(++y);p=65536+((p&1023)<<10)|m&1023}if(p<=127){if(n>=h)break;e[n++]=p}else if(p<=2047){if(n+1>=h)break;e[n++]=192|p>>6,e[n++]=128|p&63}else if(p<=65535){if(n+2>=h)break;e[n++]=224|p>>12,e[n++]=128|p>>6&63,e[n++]=128|p&63}else{if(n+3>=h)break;e[n++]=240|p>>18,e[n++]=128|p>>12&63,e[n++]=128|p>>6&63,e[n++]=128|p&63}}return e[n]=0,n-f},Ee=(r,e,n)=>tn(r,D(),e,n);function Ft(r,e,n){if(B)return X(4,0,1,r,e,n)}function Wt(r,e,n){return B?X(5,0,1,r,e,n):0}function jt(r,e,n,o){if(B)return X(6,0,1,r,e,n,o)}function St(r,e,n,o){if(B)return X(7,0,1,r,e,n,o)}function Ut(r,e,n){if(B)return X(8,0,1,r,e,n)}var nn=()=>{Pr("")},Be={},it=r=>{for(;r.length;){var e=r.pop(),n=r.pop();n(e)}};function $e(r){return this.fromWireType(M()[r>>2])}var ce={},te={},Ne={},xt,Ye=r=>{throw new xt(r)},ot=(r,e,n)=>{r.forEach(p=>Ne[p]=e);function o(p){var m=n(p);m.length!==r.length&&Ye("Mismatched type converter count");for(var R=0;R<r.length;++R)xr(r[R],m[R])}var f=new Array(e.length),h=[],y=0;e.forEach((p,m)=>{te.hasOwnProperty(p)?f[m]=te[p]:(h.push(p),ce.hasOwnProperty(p)||(ce[p]=[]),ce[p].push(()=>{f[m]=te[p],++y,y===h.length&&o(f)}))}),h.length===0&&o(f)},an=r=>{var e=Be[r];delete Be[r];var n=e.rawConstructor,o=e.rawDestructor,f=e.fields,h=f.map(y=>y.getterReturnType).concat(f.map(y=>y.setterArgumentType));ot([r],h,y=>{var p={};return f.forEach((m,R)=>{var j=m.fieldName,L=y[R],Z=m.getter,Cr=m.getterContext,Sr=y[R+f.length],pe=m.setter,Fe=m.setterContext;p[j]={read:Lr=>L.fromWireType(Z(Cr,Lr)),write:(Lr,wn)=>{var Gr=[];pe(Fe,Lr,Sr.toWireType(Gr,wn)),it(Gr)}}}),[{name:e.name,fromWireType:m=>{var R={};for(var j in p)R[j]=p[j].read(m);return o(m),R},toWireType:(m,R)=>{for(var j in p)if(!(j in R))throw new TypeError(`Missing field: "${j}"`);var L=n();for(j in p)p[j].write(L,R[j]);return m!==null&&m.push(o,L),L},argPackAdvance:Or,readValueFromPointer:$e,destructorFunction:o}]})},st=(r,e,n,o,f)=>{},on=()=>{for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);Ot=r},Ot,gr=r=>{for(var e="",n=r;D()[n];)e+=Ot[D()[n++]];return e},Xr,J=r=>{throw new Xr(r)};function sn(r,e,n={}){var o=e.name;if(r||J(`type "${o}" must have a positive integer typeid pointer`),te.hasOwnProperty(r)){if(n.ignoreDuplicateRegistrations)return;J(`Cannot register type '${o}' twice`)}if(te[r]=e,delete Ne[r],ce.hasOwnProperty(r)){var f=ce[r];delete ce[r],f.forEach(h=>h())}}function xr(r,e,n={}){return sn(r,e,n)}var Or=8,un=(r,e,n,o)=>{e=gr(e),xr(r,{name:e,fromWireType:function(f){return!!f},toWireType:function(f,h){return h?n:o},argPackAdvance:Or,readValueFromPointer:function(f){return this.fromWireType(D()[f])},destructorFunction:null})},fn=r=>({count:r.count,deleteScheduled:r.deleteScheduled,preservePointerOnDelete:r.preservePointerOnDelete,ptr:r.ptr,ptrType:r.ptrType,smartPtr:r.smartPtr,smartPtrType:r.smartPtrType}),ut=r=>{function e(n){return n.$$.ptrType.registeredClass.name}J(e(r)+" instance already deleted")},ne=!1,ft=r=>{},It=r=>{r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)},lt=r=>{r.count.value-=1;var e=r.count.value===0;e&&It(r)},ct=(r,e,n)=>{if(e===n)return r;if(n.baseClass===void 0)return null;var o=ct(r,e,n.baseClass);return o===null?null:n.downcast(o)},ve={},Dt={},Mt=(r,e)=>{for(e===void 0&&J("ptr should not be undefined");r.baseClass;)e=r.upcast(e),r=r.baseClass;return e},Vt=(r,e)=>(e=Mt(r,e),Dt[e]),ke=(r,e)=>{(!e.ptrType||!e.ptr)&&Ye("makeClassHandle requires ptr and ptrType");var n=!!e.smartPtrType,o=!!e.smartPtr;return n!==o&&Ye("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Pe(Object.create(r,{$$:{value:e,writable:!0}}))};function ln(r){var e=this.getPointee(r);if(!e)return this.destructor(r),null;var n=Vt(this.registeredClass,e);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=e,n.$$.smartPtr=r,n.clone();var o=n.clone();return this.destructor(r),o}function f(){return this.isSmartPointer?ke(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:r}):ke(this.registeredClass.instancePrototype,{ptrType:this,ptr:r})}var h=this.registeredClass.getActualType(e),y=ve[h];if(!y)return f.call(this);var p;this.isConst?p=y.constPointerType:p=y.pointerType;var m=ct(e,this.registeredClass,p.registeredClass);return m===null?f.call(this):this.isSmartPointer?ke(p.registeredClass.instancePrototype,{ptrType:p,ptr:m,smartPtrType:this,smartPtr:r}):ke(p.registeredClass.instancePrototype,{ptrType:p,ptr:m})}var Pe=r=>typeof FinalizationRegistry>"u"?(Pe=e=>e,r):(ne=new FinalizationRegistry(e=>{lt(e.$$)}),Pe=e=>{var n=e.$$,o=!!n.smartPtr;if(o){var f={$$:n};ne.register(e,f,e)}return e},ft=e=>ne.unregister(e),Pe(r)),cn=()=>{Object.assign(Ge.prototype,{isAliasOf(r){if(!(this instanceof Ge)||!(r instanceof Ge))return!1;var e=this.$$.ptrType.registeredClass,n=this.$$.ptr;r.$$=r.$$;for(var o=r.$$.ptrType.registeredClass,f=r.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;o.baseClass;)f=o.upcast(f),o=o.baseClass;return e===o&&n===f},clone(){if(this.$$.ptr||ut(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=Pe(Object.create(Object.getPrototypeOf(this),{$$:{value:fn(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&J("Object already scheduled for deletion"),ft(this),lt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&J("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Ge(){}var de=(r,e)=>Object.defineProperty(e,"name",{value:r}),vn=(r,e,n)=>{if(r[e].overloadTable===void 0){var o=r[e];r[e]=function(...f){return r[e].overloadTable.hasOwnProperty(f.length)||J(`Function '${n}' called with an invalid number of arguments (${f.length}) - expects one of (${r[e].overloadTable})!`),r[e].overloadTable[f.length].apply(this,f)},r[e].overloadTable=[],r[e].overloadTable[o.argCount]=o}},jr=(r,e,n)=>{w.hasOwnProperty(r)?((n===void 0||w[r].overloadTable!==void 0&&w[r].overloadTable[n]!==void 0)&&J(`Cannot register public name '${r}' twice`),vn(w,r,r),w.hasOwnProperty(n)&&J(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),w[r].overloadTable[n]=e):(w[r]=e,n!==void 0&&(w[r].numArguments=n))},Ht=48,vt=57,Yr=r=>{r=r.replace(/[^a-zA-Z0-9_]/g,"$");var e=r.charCodeAt(0);return e>=Ht&&e<=vt?`_${r}`:r};function Lt(r,e,n,o,f,h,y,p){this.name=r,this.constructor=e,this.instancePrototype=n,this.rawDestructor=o,this.baseClass=f,this.getActualType=h,this.upcast=y,this.downcast=p,this.pureVirtualFunctions=[]}var he=(r,e,n)=>{for(;e!==n;)e.upcast||J(`Expected null or instance of ${n.name}, got an instance of ${e.name}`),r=e.upcast(r),e=e.baseClass;return r};function Bt(r,e){if(e===null)return this.isReference&&J(`null is not a valid ${this.name}`),0;e.$$||J(`Cannot pass "${_n(e)}" as a ${this.name}`),e.$$.ptr||J(`Cannot pass deleted object as a pointer of type ${this.name}`);var n=e.$$.ptrType.registeredClass,o=he(e.$$.ptr,n,this.registeredClass);return o}function Nt(r,e){var n;if(e===null)return this.isReference&&J(`null is not a valid ${this.name}`),this.isSmartPointer?(n=this.rawConstructor(),r!==null&&r.push(this.rawDestructor,n),n):0;(!e||!e.$$)&&J(`Cannot pass "${_n(e)}" as a ${this.name}`),e.$$.ptr||J(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&J(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var o=e.$$.ptrType.registeredClass;if(n=he(e.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&J("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:J(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var f=e.clone();n=this.rawShare(n,wr.toHandle(()=>f.delete())),r!==null&&r.push(this.rawDestructor,n)}break;default:J("Unsupporting sharing policy")}return n}function a(r,e){if(e===null)return this.isReference&&J(`null is not a valid ${this.name}`),0;e.$$||J(`Cannot pass "${_n(e)}" as a ${this.name}`),e.$$.ptr||J(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&J(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass,o=he(e.$$.ptr,n,this.registeredClass);return o}var s=()=>{Object.assign(v.prototype,{getPointee(r){return this.rawGetPointee&&(r=this.rawGetPointee(r)),r},destructor(r){var e;(e=this.rawDestructor)==null||e.call(this,r)},argPackAdvance:Or,readValueFromPointer:$e,fromWireType:ln})};function v(r,e,n,o,f,h,y,p,m,R,j){this.name=r,this.registeredClass=e,this.isReference=n,this.isConst=o,this.isSmartPointer=f,this.pointeeType=h,this.sharingPolicy=y,this.rawGetPointee=p,this.rawConstructor=m,this.rawShare=R,this.rawDestructor=j,!f&&e.baseClass===void 0?o?(this.toWireType=Bt,this.destructorFunction=null):(this.toWireType=a,this.destructorFunction=null):this.toWireType=Nt}var _=(r,e,n)=>{w.hasOwnProperty(r)||Ye("Replacing nonexistent public symbol"),w[r].overloadTable!==void 0&&n!==void 0?w[r].overloadTable[n]=e:(w[r]=e,w[r].argCount=n)},T=(r,e,n)=>{r=r.replace(/p/g,"i");var o=w["dynCall_"+r];return o(e,...n)},C=(r,e,n=[])=>{if(r.includes("j"))return T(r,e,n);var o=nr(e)(...n);return o},S=(r,e)=>(...n)=>C(r,e,n),k=(r,e)=>{r=gr(r);function n(){return r.includes("j")?S(r,e):nr(e)}var o=n();return typeof o!="function"&&J(`unknown function pointer with signature ${r}: ${e}`),o},F=(r,e)=>{var n=de(e,function(o){this.name=e,this.message=o;var f=new Error(o).stack;f!==void 0&&(this.stack=this.toString()+`
`+f.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},n},O,U=r=>{var e=Pa(r),n=gr(e);return Re(e),n},N=(r,e)=>{var n=[],o={};function f(h){if(!o[h]&&!te[h]){if(Ne[h]){Ne[h].forEach(f);return}n.push(h),o[h]=!0}}throw e.forEach(f),new O(`${r}: `+n.map(U).join([", "]))},pr=(r,e,n,o,f,h,y,p,m,R,j,L,Z)=>{j=gr(j),h=k(f,h),p&&(p=k(y,p)),R&&(R=k(m,R)),Z=k(L,Z);var Cr=Yr(j);jr(Cr,function(){N(`Cannot construct ${j} due to unbound types`,[o])}),ot([r,e,n],o?[o]:[],Sr=>{var Xa;Sr=Sr[0];var pe,Fe;o?(pe=Sr.registeredClass,Fe=pe.instancePrototype):Fe=Ge.prototype;var Lr=de(j,function(...ra){if(Object.getPrototypeOf(this)!==wn)throw new Xr("Use 'new' to construct "+j);if(Gr.constructor_body===void 0)throw new Xr(j+" has no accessible constructor");var Za=Gr.constructor_body[ra.length];if(Za===void 0)throw new Xr(`Tried to invoke ctor of ${j} with invalid number of parameters (${ra.length}) - expected (${Object.keys(Gr.constructor_body).toString()}) parameters instead!`);return Za.apply(this,ra)}),wn=Object.create(Fe,{constructor:{value:Lr}});Lr.prototype=wn;var Gr=new Lt(j,Lr,wn,Z,pe,h,p,R);Gr.baseClass&&((Xa=Gr.baseClass).__derivedClasses??(Xa.__derivedClasses=[]),Gr.baseClass.__derivedClasses.push(Gr));var Eo=new v(j,Gr,!0,!1,!1),Ja=new v(j+"*",Gr,!1,!1,!1),za=new v(j+" const*",Gr,!1,!0,!1);return ve[r]={pointerType:Ja,constPointerType:za},_(Cr,Lr),[Eo,Ja,za]})},Hr=[],yr=[],dt=r=>{r>9&&--yr[r+1]===0&&(yr[r]=void 0,Hr.push(r))},dn=()=>yr.length/2-5-Hr.length,ht=()=>{yr.push(0,1,void 0,1,null,1,!0,1,!1,1),w.count_emval_handles=dn},wr={toValue:r=>(r||J("Cannot use deleted val. handle = "+r),yr[r]),toHandle:r=>{switch(r){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=Hr.pop()||yr.length;return yr[e]=r,yr[e+1]=1,e}}}},Yt={name:"emscripten::val",fromWireType:r=>{var e=wr.toValue(r);return dt(r),e},toWireType:(r,e)=>wr.toHandle(e),argPackAdvance:Or,readValueFromPointer:$e,destructorFunction:null},xn=r=>xr(r,Yt),On=(r,e,n)=>{switch(e){case 1:return n?function(o){return this.fromWireType(d()[o])}:function(o){return this.fromWireType(D()[o])};case 2:return n?function(o){return this.fromWireType(Y()[o>>1])}:function(o){return this.fromWireType(mr()[o>>1])};case 4:return n?function(o){return this.fromWireType(G()[o>>2])}:function(o){return this.fromWireType(M()[o>>2])};default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},In=(r,e,n,o)=>{e=gr(e);function f(){}f.values={},xr(r,{name:e,constructor:f,fromWireType:function(h){return this.constructor.values[h]},toWireType:(h,y)=>y.value,argPackAdvance:Or,readValueFromPointer:On(e,n,o),destructorFunction:null}),jr(e,f)},hn=(r,e)=>{var n=te[r];return n===void 0&&J(`${e} has unknown type ${U(r)}`),n},Dn=(r,e,n)=>{var o=hn(r,"enum");e=gr(e);var f=o.constructor,h=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:de(`${o.name}_${e}`,function(){})}});f.values[n]=h,f[e]=h},_n=r=>{if(r===null)return"null";var e=typeof r;return e==="object"||e==="array"||e==="function"?r.toString():""+r},Mn=(r,e)=>{switch(e){case 4:return function(n){return this.fromWireType(K()[n>>2])};case 8:return function(n){return this.fromWireType(sr()[n>>3])};default:throw new TypeError(`invalid float width (${e}): ${r}`)}},Vn=(r,e,n)=>{e=gr(e),xr(r,{name:e,fromWireType:o=>o,toWireType:(o,f)=>f,argPackAdvance:Or,readValueFromPointer:Mn(e,n),destructorFunction:null})};function bn(r){for(var e=1;e<r.length;++e)if(r[e]!==null&&r[e].destructorFunction===void 0)return!0;return!1}function Tn(r,e){if(!(r instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof r} which is not a function`);var n=de(r.name||"unknownFunctionName",function(){});n.prototype=r.prototype;var o=new n,f=r.apply(o,e);return f instanceof Object?f:o}function Hn(r,e,n,o){for(var f=bn(r),h=r.length-2,y=[],p=["fn"],m=0;m<h;++m)y.push(`arg${m}`),p.push(`arg${m}Wired`);y=y.join(","),p=p.join(",");var R=`return function (${y}) {
`;f&&(R+=`var destructors = [];
`);for(var j=f?"destructors":"null",L=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=0;m<h;++m)R+=`var arg${m}Wired = argType${m}['toWireType'](${j}, arg${m});
`,L.push(`argType${m}`);if(R+=(n||o?"var rv = ":"")+`invoker(${p});
`,f)R+=`runDestructors(destructors);
`;else for(var m=2;m<r.length;++m){var Z=m===1?"thisWired":"arg"+(m-2)+"Wired";r[m].destructorFunction!==null&&(R+=`${Z}_dtor(${Z});
`,L.push(`${Z}_dtor`))}return n&&(R+=`var ret = retType['fromWireType'](rv);
return ret;
`),R+=`}
`,[L,R]}function Ln(r,e,n,o,f,h){var y=e.length;y<2&&J("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var p=e[1]!==null&&n!==null,m=bn(e),R=e[0].name!=="void",j=[r,J,o,f,it,e[0],e[1]],L=0;L<y-2;++L)j.push(e[L+2]);if(!m)for(var L=2;L<e.length;++L)e[L].destructorFunction!==null&&j.push(e[L].destructorFunction);let[Z,Cr]=Hn(e,p,R,h);Z.push(Cr);var Sr=Tn(Function,Z)(...j);return de(r,Sr)}var Bn=(r,e)=>{for(var n=[],o=0;o<r;o++)n.push(M()[e+o*4>>2]);return n},Gt=r=>{r=r.trim();const e=r.indexOf("(");return e!==-1?r.substr(0,e):r},An=(r,e,n,o,f,h,y,p)=>{var m=Bn(e,n);r=gr(r),r=Gt(r),f=k(o,f),jr(r,function(){N(`Cannot call ${r} due to unbound types`,m)},e-1),ot([],m,R=>{var j=[R[0],null].concat(R.slice(1));return _(r,Ln(r,j,null,f,h,y),e-1),[]})},Cn=(r,e,n)=>{switch(e){case 1:return n?o=>d()[o]:o=>D()[o];case 2:return n?o=>Y()[o>>1]:o=>mr()[o>>1];case 4:return n?o=>G()[o>>2]:o=>M()[o>>2];default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},t=(r,e,n,o,f)=>{e=gr(e);var h=j=>j;if(o===0){var y=32-8*n;h=j=>j<<y>>>y}var p=e.includes("unsigned"),m=(j,L)=>{},R;p?R=function(j,L){return m(L,this.name),L>>>0}:R=function(j,L){return m(L,this.name),L},xr(r,{name:e,fromWireType:h,toWireType:R,argPackAdvance:Or,readValueFromPointer:Cn(e,n,o!==0),destructorFunction:null})},i=(r,e,n)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f=o[e];function h(y){var p=M()[y>>2],m=M()[y+4>>2];return new f(d().buffer,m,p)}n=gr(n),xr(r,{name:n,fromWireType:h,argPackAdvance:Or,readValueFromPointer:h},{ignoreDuplicateRegistrations:!0})},l=r=>{for(var e=0,n=0;n<r.length;++n){var o=r.charCodeAt(n);o<=127?e++:o<=2047?e+=2:o>=55296&&o<=57343?(e+=4,++n):e+=3}return e},c=(r,e)=>{e=gr(e);var n=e==="std::string";xr(r,{name:e,fromWireType(o){var f=M()[o>>2],h=o+4,y;if(n)for(var p=h,m=0;m<=f;++m){var R=h+m;if(m==f||D()[R]==0){var j=R-p,L=Ae(p,j);y===void 0?y=L:(y+="\0",y+=L),p=R+1}}else{for(var Z=new Array(f),m=0;m<f;++m)Z[m]=String.fromCharCode(D()[h+m]);y=Z.join("")}return Re(o),y},toWireType(o,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var h,y=typeof f=="string";y||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||J("Cannot pass non-string to std::string"),n&&y?h=l(f):h=f.length;var p=Xn(4+h+1),m=p+4;if(M()[p>>2]=h,n&&y)Ee(f,m,h+1);else if(y)for(var R=0;R<h;++R){var j=f.charCodeAt(R);j>255&&(Re(m),J("String has UTF-16 code units that do not fit in 8 bits")),D()[m+R]=j}else for(var R=0;R<h;++R)D()[m+R]=f[R];return o!==null&&o.push(Re,p),p},argPackAdvance:Or,readValueFromPointer:$e,destructorFunction(o){Re(o)}})},g=new TextDecoder("utf-16le"),b=(r,e)=>{for(var n=r,o=n>>1,f=o+e/2;!(o>=f)&&mr()[o];)++o;return n=o<<1,g.decode(D().slice(r,n))},E=(r,e,n)=>{if(n??(n=2147483647),n<2)return 0;n-=2;for(var o=e,f=n<r.length*2?n/2:r.length,h=0;h<f;++h){var y=r.charCodeAt(h);Y()[e>>1]=y,e+=2}return Y()[e>>1]=0,e-o},A=r=>r.length*2,$=(r,e)=>{for(var n=0,o="";!(n>=e/4);){var f=G()[r+n*4>>2];if(f==0)break;if(++n,f>=65536){var h=f-65536;o+=String.fromCharCode(55296|h>>10,56320|h&1023)}else o+=String.fromCharCode(f)}return o},W=(r,e,n)=>{if(n??(n=2147483647),n<4)return 0;for(var o=e,f=o+n-4,h=0;h<r.length;++h){var y=r.charCodeAt(h);if(y>=55296&&y<=57343){var p=r.charCodeAt(++h);y=65536+((y&1023)<<10)|p&1023}if(G()[e>>2]=y,e+=4,e+4>f)break}return G()[e>>2]=0,e-o},I=r=>{for(var e=0,n=0;n<r.length;++n){var o=r.charCodeAt(n);o>=55296&&o<=57343&&++n,e+=4}return e},H=(r,e,n)=>{n=gr(n);var o,f,h,y;e===2?(o=b,f=E,y=A,h=p=>mr()[p>>1]):e===4&&(o=$,f=W,y=I,h=p=>M()[p>>2]),xr(r,{name:n,fromWireType:p=>{for(var m=M()[p>>2],R,j=p+4,L=0;L<=m;++L){var Z=p+4+L*e;if(L==m||h(Z)==0){var Cr=Z-j,Sr=o(j,Cr);R===void 0?R=Sr:(R+="\0",R+=Sr),j=Z+e}}return Re(p),R},toWireType:(p,m)=>{typeof m!="string"&&J(`Cannot pass non-string to C++ string type ${n}`);var R=y(m),j=Xn(4+R+e);return M()[j>>2]=R/e,f(m,j+4,R+e),p!==null&&p.push(Re,j),j},argPackAdvance:Or,readValueFromPointer:$e,destructorFunction(p){Re(p)}})},er=(r,e,n,o,f,h)=>{Be[r]={name:gr(e),rawConstructor:k(n,o),rawDestructor:k(f,h),fields:[]}},$r=(r,e,n,o,f,h,y,p,m,R)=>{Be[r].fields.push({fieldName:gr(e),getterReturnType:n,getter:k(o,f),getterContext:h,setterArgumentType:y,setter:k(p,m),setterContext:R})},_e=(r,e)=>{e=gr(e),xr(r,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:()=>{},toWireType:(n,o)=>{}})},Nn=1,Yn=()=>Nn,pn=r=>{Zn(r,!Ur,1,!Kr,2097152,!1),V.threadInitTLS()},Gn=()=>{if(!tt())try{B?Qn(ie):fe(ie)}catch(r){Mr(r)}},gn=r=>{if(!je)try{r(),Gn()}catch(e){Mr(e)}},Kn=r=>{if(typeof Atomics.waitAsync=="function"){var e=Atomics.waitAsync(G(),r>>2,r);e.value.then(En);var n=r+128;Atomics.store(G(),n>>2,1)}},En=()=>{var r=kn();r&&(Kn(r),gn(Ua))},_i=(r,e)=>{if(r==e)setTimeout(En);else if(B)postMessage({targetThread:r,cmd:"checkMailbox"});else{var n=V.pthreads[r];if(!n)return;n.postMessage({cmd:"checkMailbox"})}},qn=[],pi=(r,e,n,o,f)=>{qn.length=o;for(var h=f>>3,y=0;y<o;y++)qn[y]=sr()[h+y];var p=eo[r];V.currentProxiedOperationCallerThread=n;var m=p(...qn);return V.currentProxiedOperationCallerThread=0,m},gi=()=>{nt=!1,Fr=0},yi=r=>{B?postMessage({cmd:"cleanupThread",thread:r}):et(r)},mi=r=>{},$n=[],wi=(r,e,n,o)=>(r=$n[r],e=wr.toValue(e),r(null,e,n,o)),bi={},Jn=r=>{var e=bi[r];return e===void 0?gr(r):e},Ti=(r,e,n,o,f)=>(r=$n[r],e=wr.toValue(e),n=Jn(n),r(e,e[n],o,f)),_a=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Ai=r=>r===0?wr.toHandle(_a()):(r=Jn(r),wr.toHandle(_a()[r])),Ci=r=>{var e=$n.length;return $n.push(r),e},Ei=(r,e)=>{for(var n=new Array(r),o=0;o<r;++o)n[o]=hn(M()[e+o*4>>2],"parameter "+o);return n},$i=(r,e,n)=>{var o=[],f=r.toWireType(o,n);return o.length&&(M()[e>>2]=wr.toHandle(o)),f},ki=(r,e,n)=>{var o=Ei(r,e),f=o.shift();r--;var h=`return function (obj, func, destructorsRef, args) {
`,y=0,p=[];n===0&&p.push("obj");for(var m=["retType"],R=[f],j=0;j<r;++j)p.push("arg"+j),m.push("argType"+j),R.push(o[j]),h+=`  var arg${j} = argType${j}.readValueFromPointer(args${y?"+"+y:""});
`,y+=o[j].argPackAdvance;var L=n===1?"new func":"func.call";h+=`  var rv = ${L}(${p.join(", ")});
`,f.isVoid||(m.push("emval_returnValue"),R.push($i),h+=`  return emval_returnValue(retType, destructorsRef, rv);
`),h+=`};
`,m.push(h);var Z=Tn(Function,m)(...R),Cr=`methodCaller<(${o.map(Sr=>Sr.name).join(", ")}) => ${f.name}>`;return Ci(de(Cr,Z))},Pi=r=>{r>9&&(yr[r+1]+=1)},Ri=()=>wr.toHandle([]),Fi=r=>wr.toHandle(Jn(r)),Wi=()=>wr.toHandle({}),ji=r=>{var e=wr.toValue(r);it(e),dt(r)},Si=(r,e,n)=>{r=wr.toValue(r),e=wr.toValue(e),n=wr.toValue(n),r[e]=n},Ui=(r,e)=>{r=hn(r,"_emval_take_value");var n=r.readValueFromPointer(e);return wr.toHandle(n)},xi=r=>r%4===0&&(r%100!==0||r%400===0),Oi=[0,31,60,91,121,152,182,213,244,274,305,335],Ii=[0,31,59,90,120,151,181,212,243,273,304,334],Di=r=>{var e=xi(r.getFullYear()),n=e?Oi:Ii,o=n[r.getMonth()]+r.getDate()-1;return o};function Mi(r,e,n){var o=Tt(r,e),f=new Date(o*1e3);G()[n>>2]=f.getSeconds(),G()[n+4>>2]=f.getMinutes(),G()[n+8>>2]=f.getHours(),G()[n+12>>2]=f.getDate(),G()[n+16>>2]=f.getMonth(),G()[n+20>>2]=f.getFullYear()-1900,G()[n+24>>2]=f.getDay();var h=Di(f)|0;G()[n+28>>2]=h,G()[n+36>>2]=-(f.getTimezoneOffset()*60);var y=new Date(f.getFullYear(),0,1),p=new Date(f.getFullYear(),6,1).getTimezoneOffset(),m=y.getTimezoneOffset(),R=(p!=m&&f.getTimezoneOffset()==Math.min(m,p))|0;G()[n+32>>2]=R}function pa(r,e,n,o,f,h,y,p){return B?X(9,0,1,r,e,n,o,f,h,y,p):-52}function ga(r,e,n,o,f,h,y){if(B)return X(10,0,1,r,e,n,o,f,h,y)}var yn={},ya=()=>performance.timeOrigin+performance.now();function ma(r,e){if(B)return X(11,0,1,r,e);if(yn[r]&&(clearTimeout(yn[r].id),delete yn[r]),!e)return 0;var n=setTimeout(()=>{delete yn[r],gn(()=>Sa(r,ya()))},e);return yn[r]={id:n,timeout_ms:e},0}var Vi=(r,e,n,o)=>{var f=new Date().getFullYear(),h=new Date(f,0,1),y=new Date(f,6,1),p=h.getTimezoneOffset(),m=y.getTimezoneOffset(),R=Math.max(p,m);M()[r>>2]=R*60,G()[e>>2]=+(p!=m);var j=Cr=>{var Sr=Cr>=0?"-":"+",pe=Math.abs(Cr),Fe=String(Math.floor(pe/60)).padStart(2,"0"),Lr=String(pe%60).padStart(2,"0");return`UTC${Sr}${Fe}${Lr}`},L=j(p),Z=j(m);m<p?(Ee(L,n,17),Ee(Z,o,17)):(Ee(L,o,17),Ee(Z,n,17))},Hi=()=>{},Li=()=>Date.now(),Bi=()=>{Fr+=1},Ni=()=>{throw Bi(),"unwind"},wa=()=>2147483648,Yi=()=>wa(),Gi=()=>1,Ki=(r,e)=>Math.ceil(r/e)*e,qi=r=>{var e=hr.buffer,n=(r-e.byteLength+65535)/65536|0;try{return hr.grow(n),Er(),1}catch{}},Ji=r=>{var e=D().length;if(r>>>=0,r<=e)return!1;var n=wa();if(r>n)return!1;for(var o=1;o<=4;o*=2){var f=e*(1+.2/o);f=Math.min(f,r+100663296);var h=Math.min(n,Ki(Math.max(r,f),65536)),y=qi(h);if(y)return!0}return!1},zn={},zi=()=>ar||"./this.program",mn=()=>{if(!mn.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:zi()};for(var n in zn)zn[n]===void 0?delete e[n]:e[n]=zn[n];var o=[];for(var n in e)o.push(`${n}=${e[n]}`);mn.strings=o}return mn.strings},Xi=(r,e)=>{for(var n=0;n<r.length;++n)d()[e++]=r.charCodeAt(n);d()[e]=0},ba=function(r,e){if(B)return X(12,0,1,r,e);var n=0;return mn().forEach((o,f)=>{var h=e+n;M()[r+f*4>>2]=h,Xi(o,h),n+=o.length+1}),0},Ta=function(r,e){if(B)return X(13,0,1,r,e);var n=mn();M()[r>>2]=n.length;var o=0;return n.forEach(f=>o+=f.length+1),M()[e>>2]=o,0};function Aa(r){return B?X(14,0,1,r):52}function Ca(r,e,n,o){return B?X(15,0,1,r,e,n,o):52}function Ea(r,e,n,o,f){return B?X(16,0,1,r,e,n,o,f):70}var Zi=[null,[],[]],Qi=(r,e=0,n=NaN)=>{for(var o=e+n,f=e;r[f]&&!(f>=o);)++f;return le.decode(r.buffer?r.buffer instanceof SharedArrayBuffer?r.slice(e,f):r.subarray(e,f):new Uint8Array(r.slice(e,f)))},ro=(r,e)=>{var n=Zi[r];e===0||e===10?((r===1?We:br)(Qi(n)),n.length=0):n.push(e)};function $a(r,e,n,o){if(B)return X(17,0,1,r,e,n,o);for(var f=0,h=0;h<n;h++){var y=M()[e>>2],p=M()[e+4>>2];e+=8;for(var m=0;m<p;m++)ro(r,D()[y+m]);f+=p}return M()[o>>2]=f,0}V.init(),xt=w.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},on(),Xr=w.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},cn(),s(),O=w.UnboundTypeError=F(Error,"UnboundTypeError"),ht();var eo=[Dr,Nr,at,Rt,Ft,Wt,jt,St,Ut,pa,ga,ma,ba,Ta,Aa,Ca,Ea,$a],ka;function to(){ka={$:Ct,r:Zt,x:Et,b:_r,i:$t,U:rn,w:Ce,pa:en,ya:Pt,e:Qt,X:Rt,wa:Ft,Fa:Wt,Y:jt,va:St,ra:Ut,Ja:nn,da:an,ka:st,Ma:un,L:pr,La:xn,z:In,d:Dn,_:Vn,p:An,A:t,n:i,aa:c,M:H,O:er,G:$r,Na:_e,Ia:Yn,Ca:pn,sa:_i,za:pi,na:gi,S:yi,Ba:Kn,Ha:mi,Oa:wi,Ka:Ti,l:dt,N:Ai,ca:ki,R:Pi,Z:Ri,v:Fi,F:Wi,ba:ji,t:Si,o:Ui,ia:Mi,ga:pa,ha:ga,oa:ma,Aa:Vi,T:Hi,K:Li,Ga:Ni,ta:Yi,y:ya,ua:Gi,qa:Ji,Da:ba,Ea:Ta,xa:fe,E:Aa,W:Ca,ja:Ea,V:$a,I:ho,c:no,f:lo,u:vo,la:go,H:po,B:wo,P:yo,D:bo,fa:Ao,ea:Co,h:co,k:io,g:_o,m:oo,j:uo,J:so,Q:fo,s:mo,q:ao,C:To,a:hr,ma:Dr}}var q=or(),kn=()=>(kn=q.Qa)(),Xn=r=>(Xn=q.Ra)(r),Pa=r=>(Pa=q.Sa)(r),Ra=()=>(Ra=q.Ta)(),Re=r=>(Re=q.Ua)(r),Zn=(r,e,n,o,f,h)=>(Zn=q.Xa)(r,e,n,o,f,h),Fa=()=>(Fa=q.Ya)(),Wa=(r,e,n,o,f)=>(Wa=q.Za)(r,e,n,o,f),ja=r=>(ja=q._a)(r),Qn=r=>(Qn=q.$a)(r),Sa=(r,e)=>(Sa=q.ab)(r,e),Ua=()=>(Ua=q.bb)(),fr=(r,e)=>(fr=q.cb)(r,e),xa=r=>(xa=q.db)(r),Oa=(r,e)=>(Oa=q.eb)(r,e),Ia=r=>(Ia=q.fb)(r),Da=r=>(Da=q.gb)(r),Ma=()=>(Ma=q.hb)(),Va=r=>(Va=q.ib)(r),Ha=r=>(Ha=q.jb)(r),La=(r,e,n)=>(La=q.kb)(r,e,n),Ba=r=>(Ba=q.lb)(r);w.dynCall_ji=(r,e)=>(w.dynCall_ji=q.mb)(r,e);var Na=w.dynCall_iij=(r,e,n,o)=>(Na=w.dynCall_iij=q.nb)(r,e,n,o);w.dynCall_jijj=(r,e,n,o,f,h)=>(w.dynCall_jijj=q.ob)(r,e,n,o,f,h),w.dynCall_vijj=(r,e,n,o,f,h)=>(w.dynCall_vijj=q.pb)(r,e,n,o,f,h),w.dynCall_jiiiii=(r,e,n,o,f,h)=>(w.dynCall_jiiiii=q.qb)(r,e,n,o,f,h),w.dynCall_jii=(r,e,n)=>(w.dynCall_jii=q.rb)(r,e,n),w.dynCall_jiiii=(r,e,n,o,f)=>(w.dynCall_jiiii=q.sb)(r,e,n,o,f),w.dynCall_jiji=(r,e,n,o,f)=>(w.dynCall_jiji=q.tb)(r,e,n,o,f);var Ya=w.dynCall_iiiiij=(r,e,n,o,f,h,y)=>(Ya=w.dynCall_iiiiij=q.ub)(r,e,n,o,f,h,y);w.dynCall_viijii=(r,e,n,o,f,h,y)=>(w.dynCall_viijii=q.vb)(r,e,n,o,f,h,y),w.dynCall_iiiiijj=(r,e,n,o,f,h,y,p,m)=>(w.dynCall_iiiiijj=q.wb)(r,e,n,o,f,h,y,p,m),w.dynCall_iiiiiijj=(r,e,n,o,f,h,y,p,m,R)=>(w.dynCall_iiiiiijj=q.xb)(r,e,n,o,f,h,y,p,m,R);function no(r,e){var n=rr();try{return nr(r)(e)}catch(o){if(z(n),o!==o+0)throw o;fr(1,0)}}function ao(r,e,n,o,f,h,y,p,m,R,j){var L=rr();try{nr(r)(e,n,o,f,h,y,p,m,R,j)}catch(Z){if(z(L),Z!==Z+0)throw Z;fr(1,0)}}function io(r,e){var n=rr();try{nr(r)(e)}catch(o){if(z(n),o!==o+0)throw o;fr(1,0)}}function oo(r,e,n,o){var f=rr();try{nr(r)(e,n,o)}catch(h){if(z(f),h!==h+0)throw h;fr(1,0)}}function so(r,e,n,o,f,h){var y=rr();try{nr(r)(e,n,o,f,h)}catch(p){if(z(y),p!==p+0)throw p;fr(1,0)}}function uo(r,e,n,o,f){var h=rr();try{nr(r)(e,n,o,f)}catch(y){if(z(h),y!==y+0)throw y;fr(1,0)}}function fo(r,e,n,o,f,h,y){var p=rr();try{nr(r)(e,n,o,f,h,y)}catch(m){if(z(p),m!==m+0)throw m;fr(1,0)}}function lo(r,e,n){var o=rr();try{return nr(r)(e,n)}catch(f){if(z(o),f!==f+0)throw f;fr(1,0)}}function co(r){var e=rr();try{nr(r)()}catch(n){if(z(e),n!==n+0)throw n;fr(1,0)}}function vo(r,e,n,o){var f=rr();try{return nr(r)(e,n,o)}catch(h){if(z(f),h!==h+0)throw h;fr(1,0)}}function ho(r){var e=rr();try{return nr(r)()}catch(n){if(z(e),n!==n+0)throw n;fr(1,0)}}function _o(r,e,n){var o=rr();try{nr(r)(e,n)}catch(f){if(z(o),f!==f+0)throw f;fr(1,0)}}function po(r,e,n,o,f,h){var y=rr();try{return nr(r)(e,n,o,f,h)}catch(p){if(z(y),p!==p+0)throw p;fr(1,0)}}function go(r,e,n,o,f,h){var y=rr();try{return nr(r)(e,n,o,f,h)}catch(p){if(z(y),p!==p+0)throw p;fr(1,0)}}function yo(r,e,n,o,f,h,y,p){var m=rr();try{return nr(r)(e,n,o,f,h,y,p)}catch(R){if(z(m),R!==R+0)throw R;fr(1,0)}}function mo(r,e,n,o,f,h,y,p){var m=rr();try{nr(r)(e,n,o,f,h,y,p)}catch(R){if(z(m),R!==R+0)throw R;fr(1,0)}}function wo(r,e,n,o,f,h,y){var p=rr();try{return nr(r)(e,n,o,f,h,y)}catch(m){if(z(p),m!==m+0)throw m;fr(1,0)}}function bo(r,e,n,o,f,h,y,p,m,R,j,L){var Z=rr();try{return nr(r)(e,n,o,f,h,y,p,m,R,j,L)}catch(Cr){if(z(Z),Cr!==Cr+0)throw Cr;fr(1,0)}}function To(r,e,n,o,f,h,y,p,m,R,j,L,Z,Cr,Sr,pe){var Fe=rr();try{nr(r)(e,n,o,f,h,y,p,m,R,j,L,Z,Cr,Sr,pe)}catch(Lr){if(z(Fe),Lr!==Lr+0)throw Lr;fr(1,0)}}function Ao(r,e,n,o,f,h,y){var p=rr();try{return Ya(r,e,n,o,f,h,y)}catch(m){if(z(p),m!==m+0)throw m;fr(1,0)}}function Co(r,e,n,o){var f=rr();try{return Na(r,e,n,o)}catch(h){if(z(f),h!==h+0)throw h;fr(1,0)}}var Pn,Ga;Q=function r(){Pn||Ka(),Pn||(Q=r)};function Ka(){if(Jr>0)return;if(B){tr(w),wt(),startWorker(w);return}if(!Ga&&(Ga=1,mt(),Jr>0))return;function r(){var e;Pn||(Pn=1,w.calledRun=1,!je&&(wt(),tr(w),(e=w.onRuntimeInitialized)==null||e.call(w),Jt()))}w.setStatus?(w.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>w.setStatus(""),1),r()},1)):r()}if(w.preInit)for(typeof w.preInit=="function"&&(w.preInit=[w.preInit]);w.preInit.length>0;)w.preInit.pop()();return Ka(),x=Zr,x}})(),ei,ti,Io=(ti=(ei=globalThis.self)==null?void 0:ei.name)==null?void 0:ti.startsWith("em-pthread");Io&&oi();const Do={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};let si;async function Mo(u){return si??(si=await da(oi,u))}function ui(u,P){return ai("HEIC Encode",si,Do,u,P)}var la;(function(u){u[u.UVAdapt=0]="UVAdapt",u[u.UV420=1]="UV420",u[u.UV444=2]="UV444",u[u.UVAuto=3]="UVAuto"})(la||(la={}));var ca;(function(u){u[u.YCoCg=0]="YCoCg",u[u.YCbCr=1]="YCbCr",u[u.Custom=2]="Custom",u[u.YIQ=3]="YIQ"})(ca||(ca={}));la.UVAuto,ca.YCoCg;globalThis._icodec_ImageData=(u,P,x,d)=>d===8?new Vo(u,P,x):new ni(u,P,x,d);class Vo extends ImageData{constructor(){super(...arguments);Kt(this,"depth",8)}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fi=Symbol("Comlink.proxy"),Ho=Symbol("Comlink.endpoint"),Lo=Symbol("Comlink.releaseProxy"),ta=Symbol("Comlink.finalizer"),Fn=Symbol("Comlink.thrown"),li=u=>typeof u=="object"&&u!==null||typeof u=="function",Bo={canHandle:u=>li(u)&&u[fi],serialize(u){const{port1:P,port2:x}=new MessageChannel;return ha(u,P),[x,[x]]},deserialize(u){return u.start(),Ko(u)}},No={canHandle:u=>li(u)&&Fn in u,serialize({value:u}){let P;return u instanceof Error?P={isError:!0,value:{message:u.message,name:u.name,stack:u.stack}}:P={isError:!1,value:u},[P,[]]},deserialize(u){throw u.isError?Object.assign(new Error(u.value.message),u.value):u.value}},ci=new Map([["proxy",Bo],["throw",No]]);function Yo(u,P){for(const x of u)if(P===x||x==="*"||x instanceof RegExp&&x.test(P))return!0;return!1}function ha(u,P=globalThis,x=["*"]){P.addEventListener("message",function d(D){if(!D||!D.data)return;if(!Yo(x,D.origin)){console.warn(`Invalid origin '${D.origin}' for comlink proxy`);return}const{id:Y,type:mr,path:G}=Object.assign({path:[]},D.data),M=(D.data.argumentList||[]).map(_t);let K;try{const sr=G.slice(0,-1).reduce((tr,lr)=>tr[lr],u),w=G.reduce((tr,lr)=>tr[lr],u);switch(mr){case"GET":K=w;break;case"SET":sr[G.slice(-1)[0]]=_t(D.data.value),K=!0;break;case"APPLY":K=w.apply(sr,M);break;case"CONSTRUCT":{const tr=new w(...M);K=Xo(tr)}break;case"ENDPOINT":{const{port1:tr,port2:lr}=new MessageChannel;ha(u,lr),K=Un(tr,[tr])}break;case"RELEASE":K=void 0;break;default:return}}catch(sr){K={value:sr,[Fn]:0}}Promise.resolve(K).catch(sr=>({value:sr,[Fn]:0})).then(sr=>{const[w,tr]=Sn(sr);P.postMessage(Object.assign(Object.assign({},w),{id:Y}),tr),mr==="RELEASE"&&(P.removeEventListener("message",d),vi(P),ta in u&&typeof u[ta]=="function"&&u[ta]())}).catch(sr=>{const[w,tr]=Sn({value:new TypeError("Unserializable return value"),[Fn]:0});P.postMessage(Object.assign(Object.assign({},w),{id:Y}),tr)})}),P.start&&P.start()}function Go(u){return u.constructor.name==="MessagePort"}function vi(u){Go(u)&&u.close()}function Ko(u,P){const x=new Map;return u.addEventListener("message",function(D){const{data:Y}=D;if(!Y||!Y.id)return;const mr=x.get(Y.id);if(mr)try{mr(Y)}finally{x.delete(Y.id)}}),va(u,x,[],P)}function Rn(u){if(u)throw new Error("Proxy has been released and is not useable")}function di(u){return qt(u,new Map,{type:"RELEASE"}).then(()=>{vi(u)})}const Wn=new WeakMap,jn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(u=>{const P=(Wn.get(u)||0)-1;Wn.set(u,P),P===0&&di(u)});function qo(u,P){const x=(Wn.get(P)||0)+1;Wn.set(P,x),jn&&jn.register(u,P,u)}function Jo(u){jn&&jn.unregister(u)}function va(u,P,x=[],d=function(){}){let D=!1;const Y=new Proxy(d,{get(mr,G){if(Rn(D),G===Lo)return()=>{Jo(Y),di(u),P.clear(),D=!0};if(G==="then"){if(x.length===0)return{then:()=>Y};const M=qt(u,P,{type:"GET",path:x.map(K=>K.toString())}).then(_t);return M.then.bind(M)}return va(u,P,[...x,G])},set(mr,G,M){Rn(D);const[K,sr]=Sn(M);return qt(u,P,{type:"SET",path:[...x,G].map(w=>w.toString()),value:K},sr).then(_t)},apply(mr,G,M){Rn(D);const K=x[x.length-1];if(K===Ho)return qt(u,P,{type:"ENDPOINT"}).then(_t);if(K==="bind")return va(u,P,x.slice(0,-1));const[sr,w]=ri(M);return qt(u,P,{type:"APPLY",path:x.map(tr=>tr.toString()),argumentList:sr},w).then(_t)},construct(mr,G){Rn(D);const[M,K]=ri(G);return qt(u,P,{type:"CONSTRUCT",path:x.map(sr=>sr.toString()),argumentList:M},K).then(_t)}});return qo(Y,u),Y}function zo(u){return Array.prototype.concat.apply([],u)}function ri(u){const P=u.map(Sn);return[P.map(x=>x[0]),zo(P.map(x=>x[1]))]}const hi=new WeakMap;function Un(u,P){return hi.set(u,P),u}function Xo(u){return Object.assign(u,{[fi]:!0})}function Sn(u){for(const[P,x]of ci)if(x.canHandle(u)){const[d,D]=x.serialize(u);return[{type:"HANDLER",name:P,value:d},D]}return[{type:"RAW",value:u},hi.get(u)||[]]}function _t(u){switch(u.type){case"HANDLER":return ci.get(u.name).deserialize(u.value);case"RAW":return u.value}}function qt(u,P,x,d){return new Promise(D=>{const Y=Zo();P.set(Y,D),u.start&&u.start(),u.postMessage(Object.assign({id:Y},x),d)})}function Zo(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Qo=""+new URL("assets/avif-enc-CL1PFR12.wasm",import.meta.url).href,rs=""+new URL("assets/heic-enc-BzJ-xkxZ.wasm",import.meta.url).href,es=""+new URL("assets/webp-enc-Dan2K9zl.wasm",import.meta.url).href;async function ts(u,P){await Mo(rs);let x=ui(u,P);return Un(x,[x.buffer])}async function ns(u,P){await Oo(es);let x=ui(u,P);return Un(x,[x.buffer])}async function as(u,P){await Wo(Qo);let x=jo(u,P);return Un(x,[x.buffer])}async function is(u,P){try{const d=new OffscreenCanvas(u.width,u.height).getContext("2d");d.drawImage(u,0,0);const D=d.getImageData(0,0,u.width,u.height),Y={width:D.width,height:D.height,depth:8,data:D.data};return await ts(Y,P)}finally{u.close()}}async function os(u,P){try{const d=new OffscreenCanvas(u.width,u.height).getContext("2d");d.drawImage(u,0,0);const D=d.getImageData(0,0,u.width,u.height),Y={width:D.width,height:D.height,depth:8,data:D.data};return await as(Y,P)}finally{u.close()}}async function ss(u,P){try{const d=new OffscreenCanvas(u.width,u.height).getContext("2d");d.drawImage(u,0,0);const D=d.getImageData(0,0,u.width,u.height),Y={width:D.width,height:D.height,depth:8,data:D.data};return await ns(Y,P)}finally{u.close()}}ha({bitmapToHEIC:is,bitmapToAVIF:os,bitmapToWEBP:ss});
