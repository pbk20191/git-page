var xo=Object.defineProperty;var So=(Cr,dr,et)=>dr in Cr?xo(Cr,dr,{enumerable:!0,configurable:!0,writable:!0,value:et}):Cr[dr]=et;var wt=(Cr,dr,et)=>So(Cr,typeof dr!="symbol"?dr+"":dr,et);(function(){"use strict";var ba,ka;function Cr(v,K){return v(typeof K=="string"?{locateFile:()=>K}:{wasmBinary:K})}class dr{constructor(K,q,m,te=8){wt(this,"data");wt(this,"width");wt(this,"height");wt(this,"depth");this.data=K,this.width=q,this.height=m,this.depth=te}}dr.prototype.colorSpace="srgb";function et(v,K,q,m,te){te={...q,...te};const{data:Re,width:rr,height:le}=m;te.bitDepth=m.depth??8;const Z=K.encode(Re,rr,le,te);return da(Z,v)}function da(v,K){if(typeof v=="string")throw new Error(`${K}: ${v}`);if(v)return v;throw new Error(K+" failed")}var Ln;(function(v){v[v.YUV444=1]="YUV444",v[v.YUV422=2]="YUV422",v[v.YUV420=3]="YUV420",v[v.YUV400=4]="YUV400"})(Ln||(Ln={}));var Hn;(function(v){v[v.Auto=0]="Auto",v[v.PSNR=1]="PSNR",v[v.SSIM=2]="SSIM"})(Hn||(Hn={})),Ln.YUV420,Hn.Auto;const Ba=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ba.decode();const Nn=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Nn.encodeInto;var Vn;(function(v){v[v.GRAYSCALE=1]="GRAYSCALE",v[v.RGB=2]="RGB",v[v.YCbCr=3]="YCbCr"})(Vn||(Vn={}));var Bn;(function(v){v[v.JPEG_Annex_K=0]="JPEG_Annex_K",v[v.Flat=1]="Flat",v[v.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",v[v.ImageMagick=3]="ImageMagick",v[v.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",v[v.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",v[v.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",v[v.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",v[v.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Bn||(Bn={})),Vn.YCbCr,Bn.ImageMagick;var pa;(function(v){v[v.Default=-1]="Default",v[v.False=0]="False",v[v.True=1]="True"})(pa||(pa={}));var Yn;(function(v){v[v.Default=-1]="Default",v[v.Zero=0]="Zero",v[v.Left=1]="Left",v[v.Top=2]="Top",v[v.Average0=3]="Average0",v[v.Select=4]="Select",v[v.Gradient=5]="Gradient",v[v.Weighted=6]="Weighted",v[v.TopRight=7]="TopRight",v[v.TopLeft=8]="TopLeft",v[v.LeftLeft=9]="LeftLeft",v[v.Average1=10]="Average1",v[v.Average2=11]="Average2",v[v.Average3=12]="Average3",v[v.Average4=13]="Average4",v[v.Best=14]="Best",v[v.Variable=15]="Variable"})(Yn||(Yn={})),Yn.Default;var Gn;(function(v){v[v.None=0]="None",v[v.SegmentSmooth=1]="SegmentSmooth",v[v.Dithering=2]="Dithering"})(Gn||(Gn={}));var qn;(function(v){v[v.None=0]="None",v[v.Fast=1]="Fast",v[v.Best=2]="Best"})(qn||(qn={})),Gn.None,qn.Fast;var ha=(()=>{var v=self.location.href;return function(K={}){var Ia;var q;function m(){return we.buffer!=Ve.buffer&&Me(),Ve}function te(){return we.buffer!=Ve.buffer&&Me(),Wr}function Re(){return we.buffer!=Ve.buffer&&Me(),jr}function rr(){return we.buffer!=Ve.buffer&&Me(),Dr}function le(){return we.buffer!=Ve.buffer&&Me(),Mr}function Z(){return we.buffer!=Ve.buffer&&Me(),ze}function Fr(){return we.buffer!=Ve.buffer&&Me(),fr}function Le(){return we.buffer!=Ve.buffer&&Me(),tt}var b=K,wr,Ar,pr=new Promise((e,r)=>{wr=e,Ar=r}),br=typeof window=="object",Ue=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var J=Ue&&((Ia=self.name)==null?void 0:Ia.startsWith("em-pthread")),De=Object.assign({},b),$e="./this.program",me=(e,r)=>{throw r},Oe="";function ar(e){return b.locateFile?b.locateFile(e,Oe):Oe+e}var qe,oe;(br||Ue)&&(Ue?Oe=self.location.href:typeof document<"u"&&document.currentScript&&(Oe=document.currentScript.src),v&&(Oe=v),Oe.startsWith("blob:")?Oe="":Oe=Oe.substr(0,Oe.replace(/[?#].*/,"").lastIndexOf("/")+1),Ue&&(oe=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),qe=e=>fetch(e,{credentials:"same-origin"}).then(r=>r.ok?r.arrayBuffer():Promise.reject(new Error(r.status+" : "+r.url))));var Or=b.print||console.log.bind(console),We=b.printErr||console.error.bind(console);Object.assign(b,De),De=null,b.arguments&&b.arguments,b.thisProgram&&($e=b.thisProgram);var or=b.wasmBinary,we,Ur,sr=!1,ur,Ve,Wr,jr,Dr,Mr,ze,fr,tt;function Me(){var e=we.buffer;b.HEAP8=Ve=new Int8Array(e),b.HEAP16=jr=new Int16Array(e),b.HEAPU8=Wr=new Uint8Array(e),b.HEAPU16=Dr=new Uint16Array(e),b.HEAP32=Mr=new Int32Array(e),b.HEAPU32=ze=new Uint32Array(e),b.HEAPF32=fr=new Float32Array(e),b.HEAPF64=tt=new Float64Array(e)}if(J){let e=function(...o){var u=o.join(" ");console.error(u)},r=function(...o){var u=o.join(" ");postMessage({cmd:"alert",text:u,threadId:yr()})},i=function(o){try{var u=o.data,c=u.cmd;if(c==="load"){let d=[];self.onmessage=l=>d.push(l),self.startWorker=l=>{postMessage({cmd:"loaded"});for(let _ of d)i(_);self.onmessage=i};for(const l of u.handlers)(!b[l]||b[l].proxy)&&(b[l]=(..._)=>{postMessage({cmd:"callHandler",handler:l,args:_})},l=="print"&&(Or=b[l]),l=="printErr"&&(We=b[l]));we=u.wasmMemory,Me(),kr(u.wasmModule)}else if(c==="run"){ve(u.pthread_ptr),yt(u.pthread_ptr,0,0,1,0,0),W.receiveObjectTransfer(u),W.threadInitTLS(),It(u.pthread_ptr),Ir||(Vt(),Ir=!0);try{Zn(u.start_routine,u.arg)}catch(d){if(d!="unwind")throw d}}else u.target==="setimmediate"||(c==="checkMailbox"?Ir&&_t():c&&(We(`worker: received unknown command ${c}`),We(u)))}catch(d){throw gt(),d}};var kr,Ir=!1;b.printErr||(We=e),self.alert=r,b.instantiateWasm=(o,u)=>new Promise((c,d)=>{kr=l=>{var _=new WebAssembly.Instance(l,j());u(_),c()}}),self.onunhandledrejection=o=>{throw o.reason||o},self.onmessage=i}if(!J){if(b.wasmMemory)we=b.wasmMemory;else{var nt=b.INITIAL_MEMORY||16777216;we=new WebAssembly.Memory({initial:nt/65536,maximum:32768,shared:!0})}Me()}var it=[],xr=[],Lr=[];function kt(){var e=b.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(at)),de(it)}function Hr(){J||de(xr)}function Tt(){if(!J){var e=b.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(ot)),de(Lr)}}function at(e){it.unshift(e)}function $t(e){xr.unshift(e)}function ot(e){Lr.unshift(e)}var Ke=0,hr=null;function w(e){var r;Ke++,(r=b.monitorRunDependencies)==null||r.call(b,Ke)}function T(e){var i;if(Ke--,(i=b.monitorRunDependencies)==null||i.call(b,Ke),Ke==0&&hr){var r=hr;hr=null,r()}}function O(e){var i;(i=b.onAbort)==null||i.call(b,e),e="Aborted("+e+")",We(e),sr=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw Ar(r),r}var V="data:application/octet-stream;base64,",D=e=>e.startsWith(V);function re(){if(b.locateFile){var e="heic-enc.wasm";return D(e)?e:ar(e)}return new URL(""+new URL("assets/heic-enc-BzJ-xkxZ.wasm",self.location.href).href,self.location.href).href}var k;function ue(e){if(e==k&&or)return new Uint8Array(or);if(oe)return oe(e);throw"both async and sync fetching of the wasm failed"}function Y(e){return or?Promise.resolve().then(()=>ue(e)):qe(e).then(r=>new Uint8Array(r),()=>ue(e))}function ye(e,r,i){return Y(e).then(o=>WebAssembly.instantiate(o,r)).then(i,o=>{We(`failed to asynchronously prepare wasm: ${o}`),O(o)})}function be(e,r,i,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!D(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(u=>{var c=WebAssembly.instantiateStreaming(u,i);return c.then(o,function(d){return We(`wasm streaming compile failed: ${d}`),We("falling back to ArrayBuffer instantiation"),ye(r,i,o)})}):ye(r,i,o)}function j(){return vr(),{a:Qe}}function A(){var e=j();function r(o,u){return U=o.exports,Gt(U.Wa),st=U.Va,$t(U.Pa),Ur=u,T(),U}w();function i(o){r(o.instance,o.module)}if(b.instantiateWasm)try{return b.instantiateWasm(e,r)}catch(o){We(`Module.instantiateWasm callback failed with error: ${o}`),Ar(o)}return k??(k=re()),be(or,k,e,i).catch(Ar),{}}function $(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var R=e=>{e.terminate(),e.onmessage=r=>{}},L=e=>{var r=W.pthreads[e];W.returnWorkerToPool(r)},Q=e=>{var r=W.getNewWorker();if(!r)return 6;W.runningWorkers.push(r),W.pthreads[e.pthread_ptr]=r,r.pthread_ptr=e.pthread_ptr;var i={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return r.postMessage(i,e.transferList),0},ke=0,Pe=()=>Pt||ke>0,ee=()=>Wa(),G=e=>Aa(e),tr=e=>Oa(e),M=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN,F=(e,r,i,...o)=>{for(var u=o.length,c=ee(),d=tr(u*8),l=d>>3,_=0;_<o.length;_++){var P=o[_];Le()[l+_]=P}var S=Bt(e,r,u,d,i);return G(c),S};function E(e){var r;if(J)return F(0,0,1,e);ur=e,Pe()||(W.terminateAllThreads(),(r=b.onExit)==null||r.call(b,e),sr=!0),me(e,new $(e))}var I=e=>{if(e instanceof $||e=="unwind")return ur;me(1,e)};function B(e){if(J)return F(1,0,0,e);X(e)}var z=(e,r)=>{if(ur=e,J)throw B(e),"unwind";E(e)},X=z,W={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){J||W.initMainThread()},initMainThread(){for(var e=2;e--;)W.allocateUnusedWorker();at(()=>{w(),W.loadWasmModuleToAllWorkers(()=>T())})},terminateAllThreads:()=>{for(var e of W.runningWorkers)R(e);for(var e of W.unusedWorkers)R(e);W.unusedWorkers=[],W.runningWorkers=[],W.pthreads=[]},returnWorkerToPool:e=>{var r=e.pthread_ptr;delete W.pthreads[r],W.unusedWorkers.push(e),W.runningWorkers.splice(W.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ta(r)},receiveObjectTransfer(e){},threadInitTLS(){W.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(r=>{e.onmessage=c=>{var d=c.data,l=d.cmd;if(d.targetThread&&d.targetThread!=yr()){var _=W.pthreads[d.targetThread];_?_.postMessage(d,d.transferList):We(`Internal error! Worker sent a message "${l}" to target pthread ${d.targetThread}, but that thread no longer exists!`);return}l==="checkMailbox"?_t():l==="spawnThread"?Q(d):l==="cleanupThread"?L(d.thread):l==="loaded"?(e.loaded=!0,r(e)):l==="alert"?alert(`Thread ${d.threadId}: ${d.text}`):d.target==="setimmediate"?e.postMessage(d):l==="callHandler"?b[d.handler](...d.args):l&&We(`worker sent an unknown command ${l}`)},e.onerror=c=>{var d="worker sent an error!";throw We(`${d} ${c.filename}:${c.lineno}: ${c.message}`),c};var i=[],o=["onExit","onAbort","print","printErr"];for(var u of o)b.propertyIsEnumerable(u)&&i.push(u);e.postMessage({cmd:"load",handlers:i,wasmMemory:we,wasmModule:Ur})}),loadWasmModuleToAllWorkers(e){if(J)return e();Promise.all(W.unusedWorkers.map(W.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("heic-enc-nk-Udw7s.js",self.location.href).href,self.location.href),{type:"module",name:"em-pthread"}),W.unusedWorkers.push(e)},getNewWorker(){return W.unusedWorkers.length==0&&(W.allocateUnusedWorker(),W.loadWasmModuleToWorker(W.unusedWorkers[0])),W.unusedWorkers.pop()}},de=e=>{e.forEach(r=>r(b))},ve=e=>{Me();var r=Z()[e+52>>2],i=Z()[e+56>>2],o=r-i;Ca(r,o),G(r)},pe=[],st,he=e=>{var r=pe[e];return r||(e>=pe.length&&(pe.length=e+1),pe[e]=r=st.get(e)),r},Zn=(e,r)=>{ke=0,Pt=0;var i=he(e)(r);function o(u){Pe()?ur=u:la(u)}o(i)},Pt=b.noExitRuntime||!0,Gt=e=>W.tlsInitFunctions.push(e),Ee=new TextDecoder,_r=(e,r)=>{if(!e)return"";for(var i=e+r,o=e;!(o>=i)&&te()[o];)++o;return Ee.decode(te().slice(e,o))},ne=(e,r,i,o)=>{O(`Assertion failed: ${_r(e)}, at: `+[r?_r(r):"unknown filename",i,o?_r(o):"unknown function"])},ut=[],He=0,nr=e=>{var r=new Nr(e);return r.get_caught()||(r.set_caught(!0),He--),r.set_rethrown(!1),ut.push(r),xa(e),Ra(e)},cr=0,Jn=()=>{ge(0,0);var e=ut.pop();ja(e.excPtr),cr=0};class Nr{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){Z()[this.ptr+4>>2]=r}get_type(){return Z()[this.ptr+4>>2]}set_destructor(r){Z()[this.ptr+8>>2]=r}get_destructor(){return Z()[this.ptr+8>>2]}set_caught(r){r=r?1:0,m()[this.ptr+12]=r}get_caught(){return m()[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,m()[this.ptr+13]=r}get_rethrown(){return m()[this.ptr+13]!=0}init(r,i){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(i)}set_adjusted_ptr(r){Z()[this.ptr+16>>2]=r}get_adjusted_ptr(){return Z()[this.ptr+16>>2]}}var Et=e=>{throw cr||(cr=e),cr},Vr=e=>Ea(e),qt=e=>{var r=cr;if(!r)return Vr(0),0;var i=new Nr(r);i.set_adjusted_ptr(r);var o=i.get_type();if(!o)return Vr(0),r;for(var u of e){if(u===0||u===o)break;var c=i.ptr+16;if(Sa(u,o,c))return Vr(u),r}return Vr(o),r},zt=()=>qt([]),Kt=e=>qt([e]),Zt=()=>{var e=ut.pop();e||O("no exception to throw");var r=e.excPtr;throw e.get_rethrown()||(ut.push(e),e.set_rethrown(!0),e.set_caught(!1),He++),cr=r,cr},Xn=(e,r,i)=>{var o=new Nr(e);throw o.init(r,i),cr=e,He++,cr},Qn=()=>He;function Jt(e,r,i,o){return J?F(2,0,1,e,r,i,o):Xt(e,r,i,o)}var ft=()=>typeof SharedArrayBuffer<"u",Xt=(e,r,i,o)=>{if(!ft())return 6;var u=[],c=0;if(J&&(u.length===0||c))return Jt(e,r,i,o);var d={startRoutine:i,pthread_ptr:e,arg:o,transferList:u};return J?(d.cmd="spawnThread",postMessage(d,u),0):Q(d)};function Sr(e,r,i){return J?F(3,0,1,e,r,i):0}var ei=(e,r,i,o)=>{if(!(o>0))return 0;for(var u=i,c=i+o-1,d=0;d<e.length;++d){var l=e.charCodeAt(d);if(l>=55296&&l<=57343){var _=e.charCodeAt(++d);l=65536+((l&1023)<<10)|_&1023}if(l<=127){if(i>=c)break;r[i++]=l}else if(l<=2047){if(i+1>=c)break;r[i++]=192|l>>6,r[i++]=128|l&63}else if(l<=65535){if(i+2>=c)break;r[i++]=224|l>>12,r[i++]=128|l>>6&63,r[i++]=128|l&63}else{if(i+3>=c)break;r[i++]=240|l>>18,r[i++]=128|l>>12&63,r[i++]=128|l>>6&63,r[i++]=128|l&63}}return r[i]=0,i-u},mr=(e,r,i)=>ei(e,te(),r,i);function Tr(e,r,i){if(J)return F(4,0,1,e,r,i)}function Qt(e,r,i){return J?F(5,0,1,e,r,i):0}function ct(e,r,i,o){if(J)return F(6,0,1,e,r,i,o)}function en(e,r,i,o){if(J)return F(7,0,1,e,r,i,o)}function rn(e,r,i){if(J)return F(8,0,1,e,r,i)}var ri=()=>{O("")},lt={},Br=e=>{for(;e.length;){var r=e.pop(),i=e.pop();i(r)}};function Yr(e){return this.fromWireType(Z()[e>>2])}var Rr={},$r={},vt={},Gr,qr=e=>{throw new Gr(e)},Ct=(e,r,i)=>{e.forEach(l=>vt[l]=r);function o(l){var _=i(l);_.length!==e.length&&qr("Mismatched type converter count");for(var P=0;P<e.length;++P)Ze(e[P],_[P])}var u=new Array(r.length),c=[],d=0;r.forEach((l,_)=>{$r.hasOwnProperty(l)?u[_]=$r[l]:(c.push(l),Rr.hasOwnProperty(l)||(Rr[l]=[]),Rr[l].push(()=>{u[_]=$r[l],++d,d===c.length&&o(u)}))}),c.length===0&&o(u)},dt=e=>{var r=lt[e];delete lt[e];var i=r.rawConstructor,o=r.rawDestructor,u=r.fields,c=u.map(d=>d.getterReturnType).concat(u.map(d=>d.setterArgumentType));Ct([e],c,d=>{var l={};return u.forEach((_,P)=>{var S=_.fieldName,N=d[P],se=_.getter,Ae=_.getterContext,Ie=d[P+u.length],gr=_.setter,Er=_.setterContext;l[S]={read:Ge=>N.fromWireType(se(Ae,Ge)),write:(Ge,Yt)=>{var er=[];gr(Er,Ge,Ie.toWireType(er,Yt)),Br(er)}}}),[{name:r.name,fromWireType:_=>{var P={};for(var S in l)P[S]=l[S].read(_);return o(_),P},toWireType:(_,P)=>{for(var S in l)if(!(S in P))throw new TypeError(`Missing field: "${S}"`);var N=i();for(S in l)l[S].write(N,P[S]);return _!==null&&_.push(o,N),N},argPackAdvance:Je,readValueFromPointer:Yr,destructorFunction:o}]})},tn=(e,r,i,o,u)=>{},_e=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);nn=e},nn,je=e=>{for(var r="",i=e;te()[i];)r+=nn[te()[i++]];return r},Ne,ie=e=>{throw new Ne(e)};function an(e,r,i={}){var o=r.name;if(e||ie(`type "${o}" must have a positive integer typeid pointer`),$r.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;ie(`Cannot register type '${o}' twice`)}if($r[e]=r,delete vt[e],Rr.hasOwnProperty(e)){var u=Rr[e];delete Rr[e],u.forEach(c=>c())}}function Ze(e,r,i={}){return an(e,r,i)}var Je=8,ti=(e,r,i,o)=>{r=je(r),Ze(e,{name:r,fromWireType:function(u){return!!u},toWireType:function(u,c){return c?i:o},argPackAdvance:Je,readValueFromPointer:function(u){return this.fromWireType(te()[u])},destructorFunction:null})},At=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Xe=e=>{function r(i){return i.$$.ptrType.registeredClass.name}ie(r(e)+" instance already deleted")},zr=!1,on=e=>{},ni=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Ce=e=>{e.count.value-=1;var r=e.count.value===0;r&&ni(e)},sn=(e,r,i)=>{if(r===i)return e;if(i.baseClass===void 0)return null;var o=sn(e,r,i.baseClass);return o===null?null:i.downcast(o)},un={},ii={},ai=(e,r)=>{for(r===void 0&&ie("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},Ot=(e,r)=>(r=ai(e,r),ii[r]),pt=(e,r)=>{(!r.ptrType||!r.ptr)&&qr("makeClassHandle requires ptr and ptrType");var i=!!r.smartPtrType,o=!!r.smartPtr;return i!==o&&qr("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Kr(Object.create(e,{$$:{value:r,writable:!0}}))};function Wt(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var i=Ot(this.registeredClass,r);if(i!==void 0){if(i.$$.count.value===0)return i.$$.ptr=r,i.$$.smartPtr=e,i.clone();var o=i.clone();return this.destructor(e),o}function u(){return this.isSmartPointer?pt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):pt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(r),d=un[c];if(!d)return u.call(this);var l;this.isConst?l=d.constPointerType:l=d.pointerType;var _=sn(r,this.registeredClass,l.registeredClass);return _===null?u.call(this):this.isSmartPointer?pt(l.registeredClass.instancePrototype,{ptrType:l,ptr:_,smartPtrType:this,smartPtr:e}):pt(l.registeredClass.instancePrototype,{ptrType:l,ptr:_})}var Kr=e=>typeof FinalizationRegistry>"u"?(Kr=r=>r,e):(zr=new FinalizationRegistry(r=>{Ce(r.$$)}),Kr=r=>{var i=r.$$,o=!!i.smartPtr;if(o){var u={$$:i};zr.register(r,u,r)}return r},on=r=>zr.unregister(r),Kr(e)),oi=()=>{Object.assign(Zr.prototype,{isAliasOf(e){if(!(this instanceof Zr)||!(e instanceof Zr))return!1;var r=this.$$.ptrType.registeredClass,i=this.$$.ptr;e.$$=e.$$;for(var o=e.$$.ptrType.registeredClass,u=e.$$.ptr;r.baseClass;)i=r.upcast(i),r=r.baseClass;for(;o.baseClass;)u=o.upcast(u),o=o.baseClass;return r===o&&i===u},clone(){if(this.$$.ptr||Xe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Kr(Object.create(Object.getPrototypeOf(this),{$$:{value:At(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),on(this),Ce(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ie("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Zr(){}var Pr=(e,r)=>Object.defineProperty(r,"name",{value:e}),si=(e,r,i)=>{if(e[r].overloadTable===void 0){var o=e[r];e[r]=function(...u){return e[r].overloadTable.hasOwnProperty(u.length)||ie(`Function '${i}' called with an invalid number of arguments (${u.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[u.length].apply(this,u)},e[r].overloadTable=[],e[r].overloadTable[o.argCount]=o}},jt=(e,r,i)=>{b.hasOwnProperty(e)?((i===void 0||b[e].overloadTable!==void 0&&b[e].overloadTable[i]!==void 0)&&ie(`Cannot register public name '${e}' twice`),si(b,e,e),b.hasOwnProperty(i)&&ie(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),b[e].overloadTable[i]=r):(b[e]=r,i!==void 0&&(b[e].numArguments=i))},ui=48,fi=57,ci=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=ui&&r<=fi?`_${e}`:e};function li(e,r,i,o,u,c,d,l){this.name=e,this.constructor=r,this.instancePrototype=i,this.rawDestructor=o,this.baseClass=u,this.getActualType=c,this.upcast=d,this.downcast=l,this.pureVirtualFunctions=[]}var xt=(e,r,i)=>{for(;r!==i;)r.upcast||ie(`Expected null or instance of ${i.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function vi(e,r){if(r===null)return this.isReference&&ie(`null is not a valid ${this.name}`),0;r.$$||ie(`Cannot pass "${Dt(r)}" as a ${this.name}`),r.$$.ptr||ie(`Cannot pass deleted object as a pointer of type ${this.name}`);var i=r.$$.ptrType.registeredClass,o=xt(r.$$.ptr,i,this.registeredClass);return o}function di(e,r){var i;if(r===null)return this.isReference&&ie(`null is not a valid ${this.name}`),this.isSmartPointer?(i=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,i),i):0;(!r||!r.$$)&&ie(`Cannot pass "${Dt(r)}" as a ${this.name}`),r.$$.ptr||ie(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&ie(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var o=r.$$.ptrType.registeredClass;if(i=xt(r.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&ie("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?i=r.$$.smartPtr:ie(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:i=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)i=r.$$.smartPtr;else{var u=r.clone();i=this.rawShare(i,xe.toHandle(()=>u.delete())),e!==null&&e.push(this.rawDestructor,i)}break;default:ie("Unsupporting sharing policy")}return i}function pi(e,r){if(r===null)return this.isReference&&ie(`null is not a valid ${this.name}`),0;r.$$||ie(`Cannot pass "${Dt(r)}" as a ${this.name}`),r.$$.ptr||ie(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&ie(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var i=r.$$.ptrType.registeredClass,o=xt(r.$$.ptr,i,this.registeredClass);return o}var hi=()=>{Object.assign(ht.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var r;(r=this.rawDestructor)==null||r.call(this,e)},argPackAdvance:Je,readValueFromPointer:Yr,fromWireType:Wt})};function ht(e,r,i,o,u,c,d,l,_,P,S){this.name=e,this.registeredClass=r,this.isReference=i,this.isConst=o,this.isSmartPointer=u,this.pointeeType=c,this.sharingPolicy=d,this.rawGetPointee=l,this.rawConstructor=_,this.rawShare=P,this.rawDestructor=S,!u&&r.baseClass===void 0?o?(this.toWireType=vi,this.destructorFunction=null):(this.toWireType=pi,this.destructorFunction=null):this.toWireType=di}var fn=(e,r,i)=>{b.hasOwnProperty(e)||qr("Replacing nonexistent public symbol"),b[e].overloadTable!==void 0&&i!==void 0?b[e].overloadTable[i]=r:(b[e]=r,b[e].argCount=i)},_i=(e,r,i)=>{e=e.replace(/p/g,"i");var o=b["dynCall_"+e];return o(r,...i)},mi=(e,r,i=[])=>{if(e.includes("j"))return _i(e,r,i);var o=he(r)(...i);return o},yi=(e,r)=>(...i)=>mi(e,r,i),lr=(e,r)=>{e=je(e);function i(){return e.includes("j")?yi(e,r):he(r)}var o=i();return typeof o!="function"&&ie(`unknown function pointer with signature ${e}: ${r}`),o},gi=(e,r)=>{var i=Pr(r,function(o){this.name=r,this.message=o;var u=new Error(o).stack;u!==void 0&&(this.stack=this.toString()+`
`+u.replace(/^Error(:[^\n]*)?\n/,""))});return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},i},cn,ln=e=>{var r=Mn(e),i=je(r);return ir(r),i},vn=(e,r)=>{var i=[],o={};function u(c){if(!o[c]&&!$r[c]){if(vt[c]){vt[c].forEach(u);return}i.push(c),o[c]=!0}}throw r.forEach(u),new cn(`${e}: `+i.map(ln).join([", "]))},wi=(e,r,i,o,u,c,d,l,_,P,S,N,se)=>{S=je(S),c=lr(u,c),l&&(l=lr(d,l)),P&&(P=lr(_,P)),se=lr(N,se);var Ae=ci(S);jt(Ae,function(){vn(`Cannot construct ${S} due to unbound types`,[o])}),Ct([e,r,i],o?[o]:[],Ie=>{var Na;Ie=Ie[0];var gr,Er;o?(gr=Ie.registeredClass,Er=gr.instancePrototype):Er=Zr.prototype;var Ge=Pr(S,function(...va){if(Object.getPrototypeOf(this)!==Yt)throw new Ne("Use 'new' to construct "+S);if(er.constructor_body===void 0)throw new Ne(S+" has no accessible constructor");var Va=er.constructor_body[va.length];if(Va===void 0)throw new Ne(`Tried to invoke ctor of ${S} with invalid number of parameters (${va.length}) - expected (${Object.keys(er.constructor_body).toString()}) parameters instead!`);return Va.apply(this,va)}),Yt=Object.create(Er,{constructor:{value:Ge}});Ge.prototype=Yt;var er=new li(S,Ge,Yt,se,gr,c,l,P);er.baseClass&&((Na=er.baseClass).__derivedClasses??(Na.__derivedClasses=[]),er.baseClass.__derivedClasses.push(er));var jo=new ht(S,er,!0,!1,!1),La=new ht(S+"*",er,!1,!1,!1),Ha=new ht(S+" const*",er,!1,!0,!1);return un[e]={pointerType:La,constPointerType:Ha},fn(Ae,Ge),[jo,La,Ha]})},St=[],Be=[],Rt=e=>{e>9&&--Be[e+1]===0&&(Be[e]=void 0,St.push(e))},bi=()=>Be.length/2-5-St.length,Ft=()=>{Be.push(0,1,void 0,1,null,1,!0,1,!1,1),b.count_emval_handles=bi},xe={toValue:e=>(e||ie("Cannot use deleted val. handle = "+e),Be[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=St.pop()||Be.length;return Be[r]=e,Be[r+1]=1,r}}}},dn={name:"emscripten::val",fromWireType:e=>{var r=xe.toValue(e);return Rt(e),r},toWireType:(e,r)=>xe.toHandle(r),argPackAdvance:Je,readValueFromPointer:Yr,destructorFunction:null},ki=e=>Ze(e,dn),Ti=(e,r,i)=>{switch(r){case 1:return i?function(o){return this.fromWireType(m()[o])}:function(o){return this.fromWireType(te()[o])};case 2:return i?function(o){return this.fromWireType(Re()[o>>1])}:function(o){return this.fromWireType(rr()[o>>1])};case 4:return i?function(o){return this.fromWireType(le()[o>>2])}:function(o){return this.fromWireType(Z()[o>>2])};default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},$i=(e,r,i,o)=>{r=je(r);function u(){}u.values={},Ze(e,{name:r,constructor:u,fromWireType:function(c){return this.constructor.values[c]},toWireType:(c,d)=>d.value,argPackAdvance:Je,readValueFromPointer:Ti(r,i,o),destructorFunction:null}),jt(r,u)},Ut=(e,r)=>{var i=$r[e];return i===void 0&&ie(`${r} has unknown type ${ln(e)}`),i},Pi=(e,r,i)=>{var o=Ut(e,"enum");r=je(r);var u=o.constructor,c=Object.create(o.constructor.prototype,{value:{value:i},constructor:{value:Pr(`${o.name}_${r}`,function(){})}});u.values[i]=c,u[r]=c},Dt=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},Ei=(e,r)=>{switch(r){case 4:return function(i){return this.fromWireType(Fr()[i>>2])};case 8:return function(i){return this.fromWireType(Le()[i>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},Ci=(e,r,i)=>{r=je(r),Ze(e,{name:r,fromWireType:o=>o,toWireType:(o,u)=>u,argPackAdvance:Je,readValueFromPointer:Ei(r,i),destructorFunction:null})};function pn(e){for(var r=1;r<e.length;++r)if(e[r]!==null&&e[r].destructorFunction===void 0)return!0;return!1}function hn(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var i=Pr(e.name||"unknownFunctionName",function(){});i.prototype=e.prototype;var o=new i,u=e.apply(o,r);return u instanceof Object?u:o}function Ai(e,r,i,o){for(var u=pn(e),c=e.length-2,d=[],l=["fn"],_=0;_<c;++_)d.push(`arg${_}`),l.push(`arg${_}Wired`);d=d.join(","),l=l.join(",");var P=`return function (${d}) {
`;u&&(P+=`var destructors = [];
`);for(var S=u?"destructors":"null",N=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],_=0;_<c;++_)P+=`var arg${_}Wired = argType${_}['toWireType'](${S}, arg${_});
`,N.push(`argType${_}`);if(P+=(i||o?"var rv = ":"")+`invoker(${l});
`,u)P+=`runDestructors(destructors);
`;else for(var _=2;_<e.length;++_){var se=_===1?"thisWired":"arg"+(_-2)+"Wired";e[_].destructorFunction!==null&&(P+=`${se}_dtor(${se});
`,N.push(`${se}_dtor`))}return i&&(P+=`var ret = retType['fromWireType'](rv);
return ret;
`),P+=`}
`,[N,P]}function Oi(e,r,i,o,u,c){var d=r.length;d<2&&ie("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var l=r[1]!==null&&i!==null,_=pn(r),P=r[0].name!=="void",S=[e,ie,o,u,Br,r[0],r[1]],N=0;N<d-2;++N)S.push(r[N+2]);if(!_)for(var N=2;N<r.length;++N)r[N].destructorFunction!==null&&S.push(r[N].destructorFunction);let[se,Ae]=Ai(r,l,P,c);se.push(Ae);var Ie=hn(Function,se)(...S);return Pr(e,Ie)}var Jr=(e,r)=>{for(var i=[],o=0;o<e;o++)i.push(Z()[r+o*4>>2]);return i},_n=e=>{e=e.trim();const r=e.indexOf("(");return r!==-1?e.substr(0,r):e},mn=(e,r,i,o,u,c,d,l)=>{var _=Jr(r,i);e=je(e),e=_n(e),u=lr(o,u),jt(e,function(){vn(`Cannot call ${e} due to unbound types`,_)},r-1),Ct([],_,P=>{var S=[P[0],null].concat(P.slice(1));return fn(e,Oi(e,S,null,u,c,d),r-1),[]})},yn=(e,r,i)=>{switch(r){case 1:return i?o=>m()[o]:o=>te()[o];case 2:return i?o=>Re()[o>>1]:o=>rr()[o>>1];case 4:return i?o=>le()[o>>2]:o=>Z()[o>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},gn=(e,r,i,o,u)=>{r=je(r);var c=S=>S;if(o===0){var d=32-8*i;c=S=>S<<d>>>d}var l=r.includes("unsigned"),_=(S,N)=>{},P;l?P=function(S,N){return _(N,this.name),N>>>0}:P=function(S,N){return _(N,this.name),N},Ze(e,{name:r,fromWireType:c,toWireType:P,argPackAdvance:Je,readValueFromPointer:yn(r,i,o!==0),destructorFunction:null})},Wi=(e,r,i)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],u=o[r];function c(d){var l=Z()[d>>2],_=Z()[d+4>>2];return new u(m().buffer,_,l)}i=je(i),Ze(e,{name:i,fromWireType:c,argPackAdvance:Je,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},ji=e=>{for(var r=0,i=0;i<e.length;++i){var o=e.charCodeAt(i);o<=127?r++:o<=2047?r+=2:o>=55296&&o<=57343?(r+=4,++i):r+=3}return r},xi=(e,r)=>{r=je(r);var i=r==="std::string";Ze(e,{name:r,fromWireType(o){var u=Z()[o>>2],c=o+4,d;if(i)for(var l=c,_=0;_<=u;++_){var P=c+_;if(_==u||te()[P]==0){var S=P-l,N=_r(l,S);d===void 0?d=N:(d+="\0",d+=N),l=P+1}}else{for(var se=new Array(u),_=0;_<u;++_)se[_]=String.fromCharCode(te()[c+_]);d=se.join("")}return ir(o),d},toWireType(o,u){u instanceof ArrayBuffer&&(u=new Uint8Array(u));var c,d=typeof u=="string";d||u instanceof Uint8Array||u instanceof Uint8ClampedArray||u instanceof Int8Array||ie("Cannot pass non-string to std::string"),i&&d?c=ji(u):c=u.length;var l=Fe(4+c+1),_=l+4;if(Z()[l>>2]=c,i&&d)mr(u,_,c+1);else if(d)for(var P=0;P<c;++P){var S=u.charCodeAt(P);S>255&&(ir(_),ie("String has UTF-16 code units that do not fit in 8 bits")),te()[_+P]=S}else for(var P=0;P<c;++P)te()[_+P]=u[P];return o!==null&&o.push(ir,l),l},argPackAdvance:Je,readValueFromPointer:Yr,destructorFunction(o){ir(o)}})},Si=new TextDecoder("utf-16le"),Ri=(e,r)=>{for(var i=e,o=i>>1,u=o+r/2;!(o>=u)&&rr()[o];)++o;return i=o<<1,Si.decode(te().slice(e,i))},Fi=(e,r,i)=>{if(i??(i=2147483647),i<2)return 0;i-=2;for(var o=r,u=i<e.length*2?i/2:e.length,c=0;c<u;++c){var d=e.charCodeAt(c);Re()[r>>1]=d,r+=2}return Re()[r>>1]=0,r-o},Ui=e=>e.length*2,Di=(e,r)=>{for(var i=0,o="";!(i>=r/4);){var u=le()[e+i*4>>2];if(u==0)break;if(++i,u>=65536){var c=u-65536;o+=String.fromCharCode(55296|c>>10,56320|c&1023)}else o+=String.fromCharCode(u)}return o},Mi=(e,r,i)=>{if(i??(i=2147483647),i<4)return 0;for(var o=r,u=o+i-4,c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d>=55296&&d<=57343){var l=e.charCodeAt(++c);d=65536+((d&1023)<<10)|l&1023}if(le()[r>>2]=d,r+=4,r+4>u)break}return le()[r>>2]=0,r-o},Ii=e=>{for(var r=0,i=0;i<e.length;++i){var o=e.charCodeAt(i);o>=55296&&o<=57343&&++i,r+=4}return r},Li=(e,r,i)=>{i=je(i);var o,u,c,d;r===2?(o=Ri,u=Fi,d=Ui,c=l=>rr()[l>>1]):r===4&&(o=Di,u=Mi,d=Ii,c=l=>Z()[l>>2]),Ze(e,{name:i,fromWireType:l=>{for(var _=Z()[l>>2],P,S=l+4,N=0;N<=_;++N){var se=l+4+N*r;if(N==_||c(se)==0){var Ae=se-S,Ie=o(S,Ae);P===void 0?P=Ie:(P+="\0",P+=Ie),S=se+r}}return ir(l),P},toWireType:(l,_)=>{typeof _!="string"&&ie(`Cannot pass non-string to C++ string type ${i}`);var P=d(_),S=Fe(4+P+r);return Z()[S>>2]=P/r,u(_,S+4,P+r),l!==null&&l.push(ir,S),S},argPackAdvance:Je,readValueFromPointer:Yr,destructorFunction(l){ir(l)}})},Mt=(e,r,i,o,u,c)=>{lt[e]={name:je(r),rawConstructor:lr(i,o),rawDestructor:lr(u,c),fields:[]}},Hi=(e,r,i,o,u,c,d,l,_,P)=>{lt[e].fields.push({fieldName:je(r),getterReturnType:i,getter:lr(o,u),getterContext:c,setterArgumentType:d,setter:lr(l,_),setterContext:P})},Xr=(e,r)=>{r=je(r),Ze(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(i,o)=>{}})},Ni=1,Vi=()=>Ni,Bi=e=>{yt(e,!Ue,1,!br,2097152,!1),W.threadInitTLS()},Yi=()=>{if(!Pe())try{J?la(ur):X(ur)}catch(e){I(e)}},wn=e=>{if(!sr)try{e(),Yi()}catch(r){I(r)}},It=e=>{if(typeof Atomics.waitAsync=="function"){var r=Atomics.waitAsync(le(),e>>2,e);r.value.then(_t);var i=e+128;Atomics.store(le(),i>>2,1)}},_t=()=>{var e=yr();e&&(It(e),wn(Pa))},Gi=(e,r)=>{if(e==r)setTimeout(_t);else if(J)postMessage({targetThread:e,cmd:"checkMailbox"});else{var i=W.pthreads[e];if(!i)return;i.postMessage({cmd:"checkMailbox"})}},Lt=[],qi=(e,r,i,o,u)=>{Lt.length=o;for(var c=u>>3,d=0;d<o;d++)Lt[d]=Le()[c+d];var l=Se[e];W.currentProxiedOperationCallerThread=i;var _=l(...Lt);return W.currentProxiedOperationCallerThread=0,_},zi=()=>{Pt=!1,ke=0},fe=e=>{J?postMessage({cmd:"cleanupThread",thread:e}):L(e)},bn=e=>{},Ye=[],Ht=(e,r,i,o)=>(e=Ye[e],r=xe.toValue(r),e(null,r,i,o)),kn={},ce=e=>{var r=kn[e];return r===void 0?je(e):r},Tn=(e,r,i,o,u)=>(e=Ye[e],r=xe.toValue(r),i=ce(i),e(r,r[i],o,u)),Nt=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),$n=e=>e===0?xe.toHandle(Nt()):(e=ce(e),xe.toHandle(Nt()[e])),Pn=e=>{var r=Ye.length;return Ye.push(e),r},En=(e,r)=>{for(var i=new Array(e),o=0;o<e;++o)i[o]=Ut(Z()[r+o*4>>2],"parameter "+o);return i},Cn=(e,r,i)=>{var o=[],u=e.toWireType(o,i);return o.length&&(Z()[r>>2]=xe.toHandle(o)),u},An=(e,r,i)=>{var o=En(e,r),u=o.shift();e--;var c=`return function (obj, func, destructorsRef, args) {
`,d=0,l=[];i===0&&l.push("obj");for(var _=["retType"],P=[u],S=0;S<e;++S)l.push("arg"+S),_.push("argType"+S),P.push(o[S]),c+=`  var arg${S} = argType${S}.readValueFromPointer(args${d?"+"+d:""});
`,d+=o[S].argPackAdvance;var N=i===1?"new func":"func.call";c+=`  var rv = ${N}(${l.join(", ")});
`,u.isVoid||(_.push("emval_returnValue"),P.push(Cn),c+=`  return emval_returnValue(retType, destructorsRef, rv);
`),c+=`};
`,_.push(c);var se=hn(Function,_)(...P),Ae=`methodCaller<(${o.map(Ie=>Ie.name).join(", ")}) => ${u.name}>`;return Pn(Pr(Ae,se))},On=e=>{e>9&&(Be[e+1]+=1)},Wn=()=>xe.toHandle([]),Ki=e=>xe.toHandle(ce(e)),Zi=()=>xe.toHandle({}),Ji=e=>{var r=xe.toValue(e);Br(r),Rt(e)},Xi=(e,r,i)=>{e=xe.toValue(e),r=xe.toValue(r),i=xe.toValue(i),e[r]=i},Qi=(e,r)=>{e=Ut(e,"_emval_take_value");var i=e.readValueFromPointer(r);return xe.toHandle(i)},ea=e=>e%4===0&&(e%100!==0||e%400===0),ra=[0,31,60,91,121,152,182,213,244,274,305,335],ta=[0,31,59,90,120,151,181,212,243,273,304,334],na=e=>{var r=ea(e.getFullYear()),i=r?ra:ta,o=i[e.getMonth()]+e.getDate()-1;return o};function ia(e,r,i){var o=M(e,r),u=new Date(o*1e3);le()[i>>2]=u.getSeconds(),le()[i+4>>2]=u.getMinutes(),le()[i+8>>2]=u.getHours(),le()[i+12>>2]=u.getDate(),le()[i+16>>2]=u.getMonth(),le()[i+20>>2]=u.getFullYear()-1900,le()[i+24>>2]=u.getDay();var c=na(u)|0;le()[i+28>>2]=c,le()[i+36>>2]=-(u.getTimezoneOffset()*60);var d=new Date(u.getFullYear(),0,1),l=new Date(u.getFullYear(),6,1).getTimezoneOffset(),_=d.getTimezoneOffset(),P=(l!=_&&u.getTimezoneOffset()==Math.min(_,l))|0;le()[i+32>>2]=P}function jn(e,r,i,o,u,c,d,l){return J?F(9,0,1,e,r,i,o,u,c,d,l):-52}function xn(e,r,i,o,u,c,d){if(J)return F(10,0,1,e,r,i,o,u,c,d)}var Qr={},Sn=()=>performance.timeOrigin+performance.now();function Rn(e,r){if(J)return F(11,0,1,e,r);if(Qr[e]&&(clearTimeout(Qr[e].id),delete Qr[e]),!r)return 0;var i=setTimeout(()=>{delete Qr[e],wn(()=>$a(e,Sn()))},r);return Qr[e]={id:i,timeout_ms:r},0}var aa=(e,r,i,o)=>{var u=new Date().getFullYear(),c=new Date(u,0,1),d=new Date(u,6,1),l=c.getTimezoneOffset(),_=d.getTimezoneOffset(),P=Math.max(l,_);Z()[e>>2]=P*60,le()[r>>2]=+(l!=_);var S=Ae=>{var Ie=Ae>=0?"-":"+",gr=Math.abs(Ae),Er=String(Math.floor(gr/60)).padStart(2,"0"),Ge=String(gr%60).padStart(2,"0");return`UTC${Ie}${Er}${Ge}`},N=S(l),se=S(_);_<l?(mr(N,i,17),mr(se,o,17)):(mr(N,o,17),mr(se,i,17))},oa=()=>{},sa=()=>Date.now(),ua=()=>{ke+=1},fa=()=>{throw ua(),"unwind"},Fn=()=>2147483648,ca=()=>Fn(),mt=()=>1,Un=(e,r)=>Math.ceil(e/r)*r,Dn=e=>{var r=we.buffer,i=(e-r.byteLength+65535)/65536|0;try{return we.grow(i),Me(),1}catch{}},t=e=>{var r=te().length;if(e>>>=0,e<=r)return!1;var i=Fn();if(e>i)return!1;for(var o=1;o<=4;o*=2){var u=r*(1+.2/o);u=Math.min(u,e+100663296);var c=Math.min(i,Un(Math.max(e,u),65536)),d=Dn(c);if(d)return!0}return!1},n={},a=()=>$e||"./this.program",s=()=>{if(!s.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:a()};for(var i in n)n[i]===void 0?delete r[i]:r[i]=n[i];var o=[];for(var i in r)o.push(`${i}=${r[i]}`);s.strings=o}return s.strings},f=(e,r)=>{for(var i=0;i<e.length;++i)m()[r++]=e.charCodeAt(i);m()[r]=0},p=function(e,r){if(J)return F(12,0,1,e,r);var i=0;return s().forEach((o,u)=>{var c=r+i;Z()[e+u*4>>2]=c,f(o,c),i+=o.length+1}),0},g=function(e,r){if(J)return F(13,0,1,e,r);var i=s();Z()[e>>2]=i.length;var o=0;return i.forEach(u=>o+=u.length+1),Z()[r>>2]=o,0};function h(e){return J?F(14,0,1,e):52}function y(e,r,i,o){return J?F(15,0,1,e,r,i,o):52}function C(e,r,i,o,u){return J?F(16,0,1,e,r,i,o,u):70}var x=[null,[],[]],H=(e,r=0,i=NaN)=>{for(var o=r+i,u=r;e[u]&&!(u>=o);)++u;return Ee.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(r,u):e.subarray(r,u):new Uint8Array(e.slice(r,u)))},ae=(e,r)=>{var i=x[e];r===0||r===10?((e===1?Or:We)(H(i)),i.length=0):i.push(r)};function Te(e,r,i,o){if(J)return F(17,0,1,e,r,i,o);for(var u=0,c=0;c<i;c++){var d=Z()[r>>2],l=Z()[r+4>>2];r+=8;for(var _=0;_<l;_++)ae(e,te()[d+_]);u+=l}return Z()[o>>2]=u,0}W.init(),Gr=b.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},_e(),Ne=b.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},oi(),hi(),cn=b.UnboundTypeError=gi(Error,"UnboundTypeError"),Ft();var Se=[E,B,Jt,Sr,Tr,Qt,ct,en,rn,jn,xn,Rn,p,g,h,y,C,Te],Qe;function vr(){Qe={$:ne,r:nr,x:Jn,b:zt,i:Kt,U:Zt,w:Xn,pa:Qn,ya:Xt,e:Et,X:Sr,wa:Tr,Fa:Qt,Y:ct,va:en,ra:rn,Ja:ri,da:dt,ka:tn,Ma:ti,L:wi,La:ki,z:$i,d:Pi,_:Ci,p:mn,A:gn,n:Wi,aa:xi,M:Li,O:Mt,G:Hi,Na:Xr,Ia:Vi,Ca:Bi,sa:Gi,za:qi,na:zi,S:fe,Ba:It,Ha:bn,Oa:Ht,Ka:Tn,l:Rt,N:$n,ca:An,R:On,Z:Wn,v:Ki,F:Zi,ba:Ji,t:Xi,o:Qi,ia,ga:jn,ha:xn,oa:Rn,Aa:aa,T:oa,K:sa,Ga:fa,ta:ca,y:Sn,ua:mt,qa:t,Da:p,Ea:g,xa:X,E:h,W:y,ja:C,V:Te,I:wo,c:fo,f:mo,u:go,la:To,H:ko,B:Eo,P:$o,D:Co,fa:Oo,ea:Wo,h:yo,k:lo,g:bo,m:vo,j:ho,J:po,Q:_o,s:Po,q:co,C:Ao,a:we,ma:E}}var U=A(),yr=()=>(yr=U.Qa)(),Fe=e=>(Fe=U.Ra)(e),Mn=e=>(Mn=U.Sa)(e),Vt=()=>(Vt=U.Ta)(),ir=e=>(ir=U.Ua)(e),yt=(e,r,i,o,u,c)=>(yt=U.Xa)(e,r,i,o,u,c),gt=()=>(gt=U.Ya)(),Bt=(e,r,i,o,u)=>(Bt=U.Za)(e,r,i,o,u),Ta=e=>(Ta=U._a)(e),la=e=>(la=U.$a)(e),$a=(e,r)=>($a=U.ab)(e,r),Pa=()=>(Pa=U.bb)(),ge=(e,r)=>(ge=U.cb)(e,r),Ea=e=>(Ea=U.db)(e),Ca=(e,r)=>(Ca=U.eb)(e,r),Aa=e=>(Aa=U.fb)(e),Oa=e=>(Oa=U.gb)(e),Wa=()=>(Wa=U.hb)(),ja=e=>(ja=U.ib)(e),xa=e=>(xa=U.jb)(e),Sa=(e,r,i)=>(Sa=U.kb)(e,r,i),Ra=e=>(Ra=U.lb)(e);b.dynCall_ji=(e,r)=>(b.dynCall_ji=U.mb)(e,r);var Fa=b.dynCall_iij=(e,r,i,o)=>(Fa=b.dynCall_iij=U.nb)(e,r,i,o);b.dynCall_jijj=(e,r,i,o,u,c)=>(b.dynCall_jijj=U.ob)(e,r,i,o,u,c),b.dynCall_vijj=(e,r,i,o,u,c)=>(b.dynCall_vijj=U.pb)(e,r,i,o,u,c),b.dynCall_jiiiii=(e,r,i,o,u,c)=>(b.dynCall_jiiiii=U.qb)(e,r,i,o,u,c),b.dynCall_jii=(e,r,i)=>(b.dynCall_jii=U.rb)(e,r,i),b.dynCall_jiiii=(e,r,i,o,u)=>(b.dynCall_jiiii=U.sb)(e,r,i,o,u),b.dynCall_jiji=(e,r,i,o,u)=>(b.dynCall_jiji=U.tb)(e,r,i,o,u);var Ua=b.dynCall_iiiiij=(e,r,i,o,u,c,d)=>(Ua=b.dynCall_iiiiij=U.ub)(e,r,i,o,u,c,d);b.dynCall_viijii=(e,r,i,o,u,c,d)=>(b.dynCall_viijii=U.vb)(e,r,i,o,u,c,d),b.dynCall_iiiiijj=(e,r,i,o,u,c,d,l,_)=>(b.dynCall_iiiiijj=U.wb)(e,r,i,o,u,c,d,l,_),b.dynCall_iiiiiijj=(e,r,i,o,u,c,d,l,_,P)=>(b.dynCall_iiiiiijj=U.xb)(e,r,i,o,u,c,d,l,_,P);function fo(e,r){var i=ee();try{return he(e)(r)}catch(o){if(G(i),o!==o+0)throw o;ge(1,0)}}function co(e,r,i,o,u,c,d,l,_,P,S){var N=ee();try{he(e)(r,i,o,u,c,d,l,_,P,S)}catch(se){if(G(N),se!==se+0)throw se;ge(1,0)}}function lo(e,r){var i=ee();try{he(e)(r)}catch(o){if(G(i),o!==o+0)throw o;ge(1,0)}}function vo(e,r,i,o){var u=ee();try{he(e)(r,i,o)}catch(c){if(G(u),c!==c+0)throw c;ge(1,0)}}function po(e,r,i,o,u,c){var d=ee();try{he(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;ge(1,0)}}function ho(e,r,i,o,u){var c=ee();try{he(e)(r,i,o,u)}catch(d){if(G(c),d!==d+0)throw d;ge(1,0)}}function _o(e,r,i,o,u,c,d){var l=ee();try{he(e)(r,i,o,u,c,d)}catch(_){if(G(l),_!==_+0)throw _;ge(1,0)}}function mo(e,r,i){var o=ee();try{return he(e)(r,i)}catch(u){if(G(o),u!==u+0)throw u;ge(1,0)}}function yo(e){var r=ee();try{he(e)()}catch(i){if(G(r),i!==i+0)throw i;ge(1,0)}}function go(e,r,i,o){var u=ee();try{return he(e)(r,i,o)}catch(c){if(G(u),c!==c+0)throw c;ge(1,0)}}function wo(e){var r=ee();try{return he(e)()}catch(i){if(G(r),i!==i+0)throw i;ge(1,0)}}function bo(e,r,i){var o=ee();try{he(e)(r,i)}catch(u){if(G(o),u!==u+0)throw u;ge(1,0)}}function ko(e,r,i,o,u,c){var d=ee();try{return he(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;ge(1,0)}}function To(e,r,i,o,u,c){var d=ee();try{return he(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;ge(1,0)}}function $o(e,r,i,o,u,c,d,l){var _=ee();try{return he(e)(r,i,o,u,c,d,l)}catch(P){if(G(_),P!==P+0)throw P;ge(1,0)}}function Po(e,r,i,o,u,c,d,l){var _=ee();try{he(e)(r,i,o,u,c,d,l)}catch(P){if(G(_),P!==P+0)throw P;ge(1,0)}}function Eo(e,r,i,o,u,c,d){var l=ee();try{return he(e)(r,i,o,u,c,d)}catch(_){if(G(l),_!==_+0)throw _;ge(1,0)}}function Co(e,r,i,o,u,c,d,l,_,P,S,N){var se=ee();try{return he(e)(r,i,o,u,c,d,l,_,P,S,N)}catch(Ae){if(G(se),Ae!==Ae+0)throw Ae;ge(1,0)}}function Ao(e,r,i,o,u,c,d,l,_,P,S,N,se,Ae,Ie,gr){var Er=ee();try{he(e)(r,i,o,u,c,d,l,_,P,S,N,se,Ae,Ie,gr)}catch(Ge){if(G(Er),Ge!==Ge+0)throw Ge;ge(1,0)}}function Oo(e,r,i,o,u,c,d){var l=ee();try{return Ua(e,r,i,o,u,c,d)}catch(_){if(G(l),_!==_+0)throw _;ge(1,0)}}function Wo(e,r,i,o){var u=ee();try{return Fa(e,r,i,o)}catch(c){if(G(u),c!==c+0)throw c;ge(1,0)}}var In,Da;hr=function e(){In||Ma(),In||(hr=e)};function Ma(){if(Ke>0)return;if(J){wr(b),Hr(),startWorker(b);return}if(!Da&&(Da=1,kt(),Ke>0))return;function e(){var r;In||(In=1,b.calledRun=1,!sr&&(Hr(),wr(b),(r=b.onRuntimeInitialized)==null||r.call(b),Tt()))}b.setStatus?(b.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>b.setStatus(""),1),e()},1)):e()}if(b.preInit)for(typeof b.preInit=="function"&&(b.preInit=[b.preInit]);b.preInit.length>0;)b.preInit.pop()();return Ma(),q=pr,q}})(),Ya=(ka=(ba=globalThis.self)==null?void 0:ba.name)==null?void 0:ka.startsWith("em-pthread");Ya&&ha();var Ga=(()=>{var v=self.location.href;return function(K={}){var q,m=K,te,Re,rr=new Promise((t,n)=>{te=t,Re=n}),le=Object.assign({},m),Z="./this.program",Fr=(t,n)=>{throw n},Le="";function b(t){return m.locateFile?m.locateFile(t,Le):Le+t}var wr;typeof document<"u"&&document.currentScript&&(Le=document.currentScript.src),v&&(Le=v),Le.startsWith("blob:")?Le="":Le=Le.substr(0,Le.replace(/[?#].*/,"").lastIndexOf("/")+1),wr=t=>fetch(t,{credentials:"same-origin"}).then(n=>n.ok?n.arrayBuffer():Promise.reject(new Error(n.status+" : "+n.url)));var Ar=m.print||console.log.bind(console),pr=m.printErr||console.error.bind(console);Object.assign(m,le),le=null,m.arguments&&m.arguments,m.thisProgram&&(Z=m.thisProgram);var br=m.wasmBinary,Ue,J=!1,De,$e,me,Oe,ar,qe,oe,Or,We;function or(){var t=Ue.buffer;m.HEAP8=$e=new Int8Array(t),m.HEAP16=Oe=new Int16Array(t),m.HEAPU8=me=new Uint8Array(t),m.HEAPU16=ar=new Uint16Array(t),m.HEAP32=qe=new Int32Array(t),m.HEAPU32=oe=new Uint32Array(t),m.HEAPF32=Or=new Float32Array(t),m.HEAPF64=We=new Float64Array(t)}var we=[],Ur=[],sr=[];function ur(){var t=m.preRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(jr)),Ke(we)}function Ve(){Ke(Ur)}function Wr(){var t=m.postRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(Mr)),Ke(sr)}function jr(t){we.unshift(t)}function Dr(t){Ur.unshift(t)}function Mr(t){sr.unshift(t)}var ze=0,fr=null;function tt(t){var n;ze++,(n=m.monitorRunDependencies)==null||n.call(m,ze)}function Me(t){var a;if(ze--,(a=m.monitorRunDependencies)==null||a.call(m,ze),ze==0&&fr){var n=fr;fr=null,n()}}function kr(t){var a;(a=m.onAbort)==null||a.call(m,t),t="Aborted("+t+")",pr(t),J=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw Re(n),n}var Ir="data:application/octet-stream;base64,",nt=t=>t.startsWith(Ir);function it(){if(m.locateFile){var t="heic-dec.wasm";return nt(t)?t:b(t)}return new URL(""+new URL("assets/heic-dec-DrPBZ1Ea.wasm",self.location.href).href,self.location.href).href}var xr;function Lr(t){if(t==xr&&br)return new Uint8Array(br);throw"both async and sync fetching of the wasm failed"}function kt(t){return br?Promise.resolve().then(()=>Lr(t)):wr(t).then(n=>new Uint8Array(n),()=>Lr(t))}function Hr(t,n,a){return kt(t).then(s=>WebAssembly.instantiate(s,n)).then(a,s=>{pr(`failed to asynchronously prepare wasm: ${s}`),kr(s)})}function Tt(t,n,a,s){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!nt(n)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(f=>{var p=WebAssembly.instantiateStreaming(f,a);return p.then(s,function(g){return pr(`wasm streaming compile failed: ${g}`),pr("falling back to ArrayBuffer instantiation"),Hr(n,a,s)})}):Hr(n,a,s)}function at(){return{a:zi}}function $t(){var t=at();function n(s,f){return fe=s.exports,Ue=fe.va,or(),tn=fe.za,Dr(fe.wa),Me(),fe}tt();function a(s){n(s.instance)}if(m.instantiateWasm)try{return m.instantiateWasm(t,n)}catch(s){pr(`Module.instantiateWasm callback failed with error: ${s}`),Re(s)}return xr??(xr=it()),Tt(br,xr,t,a).catch(Re),{}}function ot(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var Ke=t=>{t.forEach(n=>n(m))},hr=m.noExitRuntime||!0,w=t=>Nt(t),T=()=>$n(),O=new TextDecoder,V=(t,n)=>{if(!t)return"";for(var a=t+n,s=t;!(s>=a)&&me[s];)++s;return O.decode(me.subarray(t,s))},D=(t,n,a,s)=>{kr(`Assertion failed: ${V(t)}, at: `+[n?V(n):"unknown filename",a,s?V(s):"unknown function"])},re=[],k=0,ue=t=>{var n=new be(t);return n.get_caught()||(n.set_caught(!0),k--),n.set_rethrown(!1),re.push(n),En(t),An(t)},Y=0,ye=()=>{ce(0,0);var t=re.pop();Pn(t.excPtr),Y=0};class be{constructor(n){this.excPtr=n,this.ptr=n-24}set_type(n){oe[this.ptr+4>>2]=n}get_type(){return oe[this.ptr+4>>2]}set_destructor(n){oe[this.ptr+8>>2]=n}get_destructor(){return oe[this.ptr+8>>2]}set_caught(n){n=n?1:0,$e[this.ptr+12]=n}get_caught(){return $e[this.ptr+12]!=0}set_rethrown(n){n=n?1:0,$e[this.ptr+13]=n}get_rethrown(){return $e[this.ptr+13]!=0}init(n,a){this.set_adjusted_ptr(0),this.set_type(n),this.set_destructor(a)}set_adjusted_ptr(n){oe[this.ptr+16>>2]=n}get_adjusted_ptr(){return oe[this.ptr+16>>2]}}var j=t=>{throw Y||(Y=t),Y},A=t=>Tn(t),$=t=>{var n=Y;if(!n)return A(0),0;var a=new be(n);a.set_adjusted_ptr(n);var s=a.get_type();if(!s)return A(0),n;for(var f of t){if(f===0||f===s)break;var p=a.ptr+16;if(Cn(f,s,p))return A(f),n}return A(s),n},R=()=>$([]),L=t=>$([t]),Q=()=>{var t=re.pop();t||kr("no exception to throw");var n=t.excPtr;throw t.get_rethrown()||(re.push(t),t.set_rethrown(!0),t.set_caught(!1),k++),Y=n,Y},ke=(t,n,a)=>{var s=new be(t);throw s.init(n,a),Y=t,k++,Y},Pe=()=>k,ee=(t,n,a,s)=>{if(!(s>0))return 0;for(var f=a,p=a+s-1,g=0;g<t.length;++g){var h=t.charCodeAt(g);if(h>=55296&&h<=57343){var y=t.charCodeAt(++g);h=65536+((h&1023)<<10)|y&1023}if(h<=127){if(a>=p)break;n[a++]=h}else if(h<=2047){if(a+1>=p)break;n[a++]=192|h>>6,n[a++]=128|h&63}else if(h<=65535){if(a+2>=p)break;n[a++]=224|h>>12,n[a++]=128|h>>6&63,n[a++]=128|h&63}else{if(a+3>=p)break;n[a++]=240|h>>18,n[a++]=128|h>>12&63,n[a++]=128|h>>6&63,n[a++]=128|h&63}}return n[a]=0,a-f},G=(t,n,a)=>ee(t,me,n,a),tr=(t,n,a)=>{};function M(t,n,a,s){}var F=(t,n,a)=>{},E=()=>{kr("")},I={},B=t=>{for(;t.length;){var n=t.pop(),a=t.pop();a(n)}};function z(t){return this.fromWireType(oe[t>>2])}var X={},W={},de={},ve,pe=t=>{throw new ve(t)},st=(t,n,a)=>{t.forEach(h=>de[h]=n);function s(h){var y=a(h);y.length!==t.length&&pe("Mismatched type converter count");for(var C=0;C<t.length;++C)He(t[C],y[C])}var f=new Array(n.length),p=[],g=0;n.forEach((h,y)=>{W.hasOwnProperty(h)?f[y]=W[h]:(p.push(h),X.hasOwnProperty(h)||(X[h]=[]),X[h].push(()=>{f[y]=W[h],++g,g===p.length&&s(f)}))}),p.length===0&&s(f)},he=t=>{var n=I[t];delete I[t];var a=n.rawConstructor,s=n.rawDestructor,f=n.fields,p=f.map(g=>g.getterReturnType).concat(f.map(g=>g.setterArgumentType));st([t],p,g=>{var h={};return f.forEach((y,C)=>{var x=y.fieldName,H=g[C],ae=y.getter,Te=y.getterContext,Se=g[C+f.length],Qe=y.setter,vr=y.setterContext;h[x]={read:U=>H.fromWireType(ae(Te,U)),write:(U,yr)=>{var Fe=[];Qe(vr,U,Se.toWireType(Fe,yr)),B(Fe)}}}),[{name:n.name,fromWireType:y=>{var C={};for(var x in h)C[x]=h[x].read(y);return s(y),C},toWireType:(y,C)=>{for(var x in h)if(!(x in C))throw new TypeError(`Missing field: "${x}"`);var H=a();for(x in h)h[x].write(H,C[x]);return y!==null&&y.push(s,H),H},argPackAdvance:nr,readValueFromPointer:z,destructorFunction:s}]})},Zn=(t,n,a,s,f)=>{},Pt=()=>{for(var t=new Array(256),n=0;n<256;++n)t[n]=String.fromCharCode(n);Gt=t},Gt,Ee=t=>{for(var n="",a=t;me[a];)n+=Gt[me[a++]];return n},_r,ne=t=>{throw new _r(t)};function ut(t,n,a={}){var s=n.name;if(t||ne(`type "${s}" must have a positive integer typeid pointer`),W.hasOwnProperty(t)){if(a.ignoreDuplicateRegistrations)return;ne(`Cannot register type '${s}' twice`)}if(W[t]=n,delete de[t],X.hasOwnProperty(t)){var f=X[t];delete X[t],f.forEach(p=>p())}}function He(t,n,a={}){return ut(t,n,a)}var nr=8,cr=(t,n,a,s)=>{n=Ee(n),He(t,{name:n,fromWireType:function(f){return!!f},toWireType:function(f,p){return p?a:s},argPackAdvance:nr,readValueFromPointer:function(f){return this.fromWireType(me[f])},destructorFunction:null})},Jn=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Nr=t=>{function n(a){return a.$$.ptrType.registeredClass.name}ne(n(t)+" instance already deleted")},Et=!1,Vr=t=>{},qt=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},zt=t=>{t.count.value-=1;var n=t.count.value===0;n&&qt(t)},Kt=(t,n,a)=>{if(n===a)return t;if(a.baseClass===void 0)return null;var s=Kt(t,n,a.baseClass);return s===null?null:a.downcast(s)},Zt={},Xn={},Qn=(t,n)=>{for(n===void 0&&ne("ptr should not be undefined");t.baseClass;)n=t.upcast(n),t=t.baseClass;return n},Jt=(t,n)=>(n=Qn(t,n),Xn[n]),ft=(t,n)=>{(!n.ptrType||!n.ptr)&&pe("makeClassHandle requires ptr and ptrType");var a=!!n.smartPtrType,s=!!n.smartPtr;return a!==s&&pe("Both smartPtrType and smartPtr must be specified"),n.count={value:1},Sr(Object.create(t,{$$:{value:n,writable:!0}}))};function Xt(t){var n=this.getPointee(t);if(!n)return this.destructor(t),null;var a=Jt(this.registeredClass,n);if(a!==void 0){if(a.$$.count.value===0)return a.$$.ptr=n,a.$$.smartPtr=t,a.clone();var s=a.clone();return this.destructor(t),s}function f(){return this.isSmartPointer?ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:n,smartPtrType:this,smartPtr:t}):ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var p=this.registeredClass.getActualType(n),g=Zt[p];if(!g)return f.call(this);var h;this.isConst?h=g.constPointerType:h=g.pointerType;var y=Kt(n,this.registeredClass,h.registeredClass);return y===null?f.call(this):this.isSmartPointer?ft(h.registeredClass.instancePrototype,{ptrType:h,ptr:y,smartPtrType:this,smartPtr:t}):ft(h.registeredClass.instancePrototype,{ptrType:h,ptr:y})}var Sr=t=>typeof FinalizationRegistry>"u"?(Sr=n=>n,t):(Et=new FinalizationRegistry(n=>{zt(n.$$)}),Sr=n=>{var a=n.$$,s=!!a.smartPtr;if(s){var f={$$:a};Et.register(n,f,n)}return n},Vr=n=>Et.unregister(n),Sr(t)),ei=()=>{Object.assign(mr.prototype,{isAliasOf(t){if(!(this instanceof mr)||!(t instanceof mr))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;t.$$=t.$$;for(var s=t.$$.ptrType.registeredClass,f=t.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;s.baseClass;)f=s.upcast(f),s=s.baseClass;return n===s&&a===f},clone(){if(this.$$.ptr||Nr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Sr(Object.create(Object.getPrototypeOf(this),{$$:{value:Jn(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ne("Object already scheduled for deletion"),Vr(this),zt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ne("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function mr(){}var Tr=(t,n)=>Object.defineProperty(n,"name",{value:t}),Qt=(t,n,a)=>{if(t[n].overloadTable===void 0){var s=t[n];t[n]=function(...f){return t[n].overloadTable.hasOwnProperty(f.length)||ne(`Function '${a}' called with an invalid number of arguments (${f.length}) - expects one of (${t[n].overloadTable})!`),t[n].overloadTable[f.length].apply(this,f)},t[n].overloadTable=[],t[n].overloadTable[s.argCount]=s}},ct=(t,n,a)=>{m.hasOwnProperty(t)?((a===void 0||m[t].overloadTable!==void 0&&m[t].overloadTable[a]!==void 0)&&ne(`Cannot register public name '${t}' twice`),Qt(m,t,t),m.hasOwnProperty(a)&&ne(`Cannot register multiple overloads of a function with the same number of arguments (${a})!`),m[t].overloadTable[a]=n):(m[t]=n,a!==void 0&&(m[t].numArguments=a))},en=48,rn=57,ri=t=>{t=t.replace(/[^a-zA-Z0-9_]/g,"$");var n=t.charCodeAt(0);return n>=en&&n<=rn?`_${t}`:t};function lt(t,n,a,s,f,p,g,h){this.name=t,this.constructor=n,this.instancePrototype=a,this.rawDestructor=s,this.baseClass=f,this.getActualType=p,this.upcast=g,this.downcast=h,this.pureVirtualFunctions=[]}var Br=(t,n,a)=>{for(;n!==a;)n.upcast||ne(`Expected null or instance of ${a.name}, got an instance of ${n.name}`),t=n.upcast(t),n=n.baseClass;return t};function Yr(t,n){if(n===null)return this.isReference&&ne(`null is not a valid ${this.name}`),0;n.$$||ne(`Cannot pass "${Wt(n)}" as a ${this.name}`),n.$$.ptr||ne(`Cannot pass deleted object as a pointer of type ${this.name}`);var a=n.$$.ptrType.registeredClass,s=Br(n.$$.ptr,a,this.registeredClass);return s}function Rr(t,n){var a;if(n===null)return this.isReference&&ne(`null is not a valid ${this.name}`),this.isSmartPointer?(a=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,a),a):0;(!n||!n.$$)&&ne(`Cannot pass "${Wt(n)}" as a ${this.name}`),n.$$.ptr||ne(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&n.$$.ptrType.isConst&&ne(`Cannot convert argument of type ${n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name} to parameter type ${this.name}`);var s=n.$$.ptrType.registeredClass;if(a=Br(n.$$.ptr,s,this.registeredClass),this.isSmartPointer)switch(n.$$.smartPtr===void 0&&ne("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:n.$$.smartPtrType===this?a=n.$$.smartPtr:ne(`Cannot convert argument of type ${n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:a=n.$$.smartPtr;break;case 2:if(n.$$.smartPtrType===this)a=n.$$.smartPtr;else{var f=n.clone();a=this.rawShare(a,Ce.toHandle(()=>f.delete())),t!==null&&t.push(this.rawDestructor,a)}break;default:ne("Unsupporting sharing policy")}return a}function $r(t,n){if(n===null)return this.isReference&&ne(`null is not a valid ${this.name}`),0;n.$$||ne(`Cannot pass "${Wt(n)}" as a ${this.name}`),n.$$.ptr||ne(`Cannot pass deleted object as a pointer of type ${this.name}`),n.$$.ptrType.isConst&&ne(`Cannot convert argument of type ${n.$$.ptrType.name} to parameter type ${this.name}`);var a=n.$$.ptrType.registeredClass,s=Br(n.$$.ptr,a,this.registeredClass);return s}var vt=()=>{Object.assign(Gr.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var n;(n=this.rawDestructor)==null||n.call(this,t)},argPackAdvance:nr,readValueFromPointer:z,fromWireType:Xt})};function Gr(t,n,a,s,f,p,g,h,y,C,x){this.name=t,this.registeredClass=n,this.isReference=a,this.isConst=s,this.isSmartPointer=f,this.pointeeType=p,this.sharingPolicy=g,this.rawGetPointee=h,this.rawConstructor=y,this.rawShare=C,this.rawDestructor=x,!f&&n.baseClass===void 0?s?(this.toWireType=Yr,this.destructorFunction=null):(this.toWireType=$r,this.destructorFunction=null):this.toWireType=Rr}var qr=(t,n,a)=>{m.hasOwnProperty(t)||pe("Replacing nonexistent public symbol"),m[t].overloadTable!==void 0&&a!==void 0?m[t].overloadTable[a]=n:(m[t]=n,m[t].argCount=a)},Ct=(t,n,a)=>{t=t.replace(/p/g,"i");var s=m["dynCall_"+t];return s(n,...a)},dt=[],tn,_e=t=>{var n=dt[t];return n||(t>=dt.length&&(dt.length=t+1),dt[t]=n=tn.get(t)),n},nn=(t,n,a=[])=>{if(t.includes("j"))return Ct(t,n,a);var s=_e(n)(...a);return s},je=(t,n)=>(...a)=>nn(t,n,a),Ne=(t,n)=>{t=Ee(t);function a(){return t.includes("j")?je(t,n):_e(n)}var s=a();return typeof s!="function"&&ne(`unknown function pointer with signature ${t}: ${n}`),s},ie=(t,n)=>{var a=Tr(n,function(s){this.name=n,this.message=s;var f=new Error(s).stack;f!==void 0&&(this.stack=this.toString()+`
`+f.replace(/^Error(:[^\n]*)?\n/,""))});return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},a},an,Ze=t=>{var n=bn(t),a=Ee(n);return Ye(n),a},Je=(t,n)=>{var a=[],s={};function f(p){if(!s[p]&&!W[p]){if(de[p]){de[p].forEach(f);return}a.push(p),s[p]=!0}}throw n.forEach(f),new an(`${t}: `+a.map(Ze).join([", "]))},ti=(t,n,a,s,f,p,g,h,y,C,x,H,ae)=>{x=Ee(x),p=Ne(f,p),h&&(h=Ne(g,h)),C&&(C=Ne(y,C)),ae=Ne(H,ae);var Te=ri(x);ct(Te,function(){Je(`Cannot construct ${x} due to unbound types`,[s])}),st([t,n,a],s?[s]:[],Se=>{var yt;Se=Se[0];var Qe,vr;s?(Qe=Se.registeredClass,vr=Qe.instancePrototype):vr=mr.prototype;var U=Tr(x,function(...gt){if(Object.getPrototypeOf(this)!==yr)throw new _r("Use 'new' to construct "+x);if(Fe.constructor_body===void 0)throw new _r(x+" has no accessible constructor");var Bt=Fe.constructor_body[gt.length];if(Bt===void 0)throw new _r(`Tried to invoke ctor of ${x} with invalid number of parameters (${gt.length}) - expected (${Object.keys(Fe.constructor_body).toString()}) parameters instead!`);return Bt.apply(this,gt)}),yr=Object.create(vr,{constructor:{value:U}});U.prototype=yr;var Fe=new lt(x,U,yr,ae,Qe,p,h,C);Fe.baseClass&&((yt=Fe.baseClass).__derivedClasses??(yt.__derivedClasses=[]),Fe.baseClass.__derivedClasses.push(Fe));var Mn=new Gr(x,Fe,!0,!1,!1),Vt=new Gr(x+"*",Fe,!1,!1,!1),ir=new Gr(x+" const*",Fe,!1,!0,!1);return Zt[t]={pointerType:Vt,constPointerType:ir},qr(Te,U),[Mn,Vt,ir]})},At=[],Xe=[],zr=t=>{t>9&&--Xe[t+1]===0&&(Xe[t]=void 0,At.push(t))},on=()=>Xe.length/2-5-At.length,ni=()=>{Xe.push(0,1,void 0,1,null,1,!0,1,!1,1),m.count_emval_handles=on},Ce={toValue:t=>(t||ne("Cannot use deleted val. handle = "+t),Xe[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const n=At.pop()||Xe.length;return Xe[n]=t,Xe[n+1]=1,n}}}},sn={name:"emscripten::val",fromWireType:t=>{var n=Ce.toValue(t);return zr(t),n},toWireType:(t,n)=>Ce.toHandle(n),argPackAdvance:nr,readValueFromPointer:z,destructorFunction:null},un=t=>He(t,sn),ii=(t,n,a)=>{switch(n){case 1:return a?function(s){return this.fromWireType($e[s])}:function(s){return this.fromWireType(me[s])};case 2:return a?function(s){return this.fromWireType(Oe[s>>1])}:function(s){return this.fromWireType(ar[s>>1])};case 4:return a?function(s){return this.fromWireType(qe[s>>2])}:function(s){return this.fromWireType(oe[s>>2])};default:throw new TypeError(`invalid integer width (${n}): ${t}`)}},ai=(t,n,a,s)=>{n=Ee(n);function f(){}f.values={},He(t,{name:n,constructor:f,fromWireType:function(p){return this.constructor.values[p]},toWireType:(p,g)=>g.value,argPackAdvance:nr,readValueFromPointer:ii(n,a,s),destructorFunction:null}),ct(n,f)},Ot=(t,n)=>{var a=W[t];return a===void 0&&ne(`${n} has unknown type ${Ze(t)}`),a},pt=(t,n,a)=>{var s=Ot(t,"enum");n=Ee(n);var f=s.constructor,p=Object.create(s.constructor.prototype,{value:{value:a},constructor:{value:Tr(`${s.name}_${n}`,function(){})}});f.values[a]=p,f[n]=p},Wt=t=>{if(t===null)return"null";var n=typeof t;return n==="object"||n==="array"||n==="function"?t.toString():""+t},Kr=(t,n)=>{switch(n){case 4:return function(a){return this.fromWireType(Or[a>>2])};case 8:return function(a){return this.fromWireType(We[a>>3])};default:throw new TypeError(`invalid float width (${n}): ${t}`)}},oi=(t,n,a)=>{n=Ee(n),He(t,{name:n,fromWireType:s=>s,toWireType:(s,f)=>f,argPackAdvance:nr,readValueFromPointer:Kr(n,a),destructorFunction:null})};function Zr(t){for(var n=1;n<t.length;++n)if(t[n]!==null&&t[n].destructorFunction===void 0)return!0;return!1}function Pr(t,n){if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var a=Tr(t.name||"unknownFunctionName",function(){});a.prototype=t.prototype;var s=new a,f=t.apply(s,n);return f instanceof Object?f:s}function si(t,n,a,s){for(var f=Zr(t),p=t.length-2,g=[],h=["fn"],y=0;y<p;++y)g.push(`arg${y}`),h.push(`arg${y}Wired`);g=g.join(","),h=h.join(",");var C=`return function (${g}) {
`;f&&(C+=`var destructors = [];
`);for(var x=f?"destructors":"null",H=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],y=0;y<p;++y)C+=`var arg${y}Wired = argType${y}['toWireType'](${x}, arg${y});
`,H.push(`argType${y}`);if(C+=(a||s?"var rv = ":"")+`invoker(${h});
`,f)C+=`runDestructors(destructors);
`;else for(var y=2;y<t.length;++y){var ae=y===1?"thisWired":"arg"+(y-2)+"Wired";t[y].destructorFunction!==null&&(C+=`${ae}_dtor(${ae});
`,H.push(`${ae}_dtor`))}return a&&(C+=`var ret = retType['fromWireType'](rv);
return ret;
`),C+=`}
`,[H,C]}function jt(t,n,a,s,f,p){var g=n.length;g<2&&ne("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var h=n[1]!==null&&a!==null,y=Zr(n),C=n[0].name!=="void",x=[t,ne,s,f,B,n[0],n[1]],H=0;H<g-2;++H)x.push(n[H+2]);if(!y)for(var H=2;H<n.length;++H)n[H].destructorFunction!==null&&x.push(n[H].destructorFunction);let[ae,Te]=si(n,h,C,p);ae.push(Te);var Se=Pr(Function,ae)(...x);return Tr(t,Se)}var ui=(t,n)=>{for(var a=[],s=0;s<t;s++)a.push(oe[n+s*4>>2]);return a},fi=t=>{t=t.trim();const n=t.indexOf("(");return n!==-1?t.substr(0,n):t},ci=(t,n,a,s,f,p,g,h)=>{var y=ui(n,a);t=Ee(t),t=fi(t),f=Ne(s,f),ct(t,function(){Je(`Cannot call ${t} due to unbound types`,y)},n-1),st([],y,C=>{var x=[C[0],null].concat(C.slice(1));return qr(t,jt(t,x,null,f,p,g),n-1),[]})},li=(t,n,a)=>{switch(n){case 1:return a?s=>$e[s]:s=>me[s];case 2:return a?s=>Oe[s>>1]:s=>ar[s>>1];case 4:return a?s=>qe[s>>2]:s=>oe[s>>2];default:throw new TypeError(`invalid integer width (${n}): ${t}`)}},xt=(t,n,a,s,f)=>{n=Ee(n);var p=x=>x;if(s===0){var g=32-8*a;p=x=>x<<g>>>g}var h=n.includes("unsigned"),y=(x,H)=>{},C;h?C=function(x,H){return y(H,this.name),H>>>0}:C=function(x,H){return y(H,this.name),H},He(t,{name:n,fromWireType:p,toWireType:C,argPackAdvance:nr,readValueFromPointer:li(n,a,s!==0),destructorFunction:null})},vi=(t,n,a)=>{var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f=s[n];function p(g){var h=oe[g>>2],y=oe[g+4>>2];return new f($e.buffer,y,h)}a=Ee(a),He(t,{name:a,fromWireType:p,argPackAdvance:nr,readValueFromPointer:p},{ignoreDuplicateRegistrations:!0})},di=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);s<=127?n++:s<=2047?n+=2:s>=55296&&s<=57343?(n+=4,++a):n+=3}return n},pi=(t,n)=>{n=Ee(n);var a=n==="std::string";He(t,{name:n,fromWireType(s){var f=oe[s>>2],p=s+4,g;if(a)for(var h=p,y=0;y<=f;++y){var C=p+y;if(y==f||me[C]==0){var x=C-h,H=V(h,x);g===void 0?g=H:(g+="\0",g+=H),h=C+1}}else{for(var ae=new Array(f),y=0;y<f;++y)ae[y]=String.fromCharCode(me[p+y]);g=ae.join("")}return Ye(s),g},toWireType(s,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var p,g=typeof f=="string";g||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||ne("Cannot pass non-string to std::string"),a&&g?p=di(f):p=f.length;var h=Ht(4+p+1),y=h+4;if(oe[h>>2]=p,a&&g)G(f,y,p+1);else if(g)for(var C=0;C<p;++C){var x=f.charCodeAt(C);x>255&&(Ye(y),ne("String has UTF-16 code units that do not fit in 8 bits")),me[y+C]=x}else for(var C=0;C<p;++C)me[y+C]=f[C];return s!==null&&s.push(Ye,h),h},argPackAdvance:nr,readValueFromPointer:z,destructorFunction(s){Ye(s)}})},hi=new TextDecoder("utf-16le"),ht=(t,n)=>{for(var a=t,s=a>>1,f=s+n/2;!(s>=f)&&ar[s];)++s;return a=s<<1,hi.decode(me.subarray(t,a))},fn=(t,n,a)=>{if(a??(a=2147483647),a<2)return 0;a-=2;for(var s=n,f=a<t.length*2?a/2:t.length,p=0;p<f;++p){var g=t.charCodeAt(p);Oe[n>>1]=g,n+=2}return Oe[n>>1]=0,n-s},_i=t=>t.length*2,mi=(t,n)=>{for(var a=0,s="";!(a>=n/4);){var f=qe[t+a*4>>2];if(f==0)break;if(++a,f>=65536){var p=f-65536;s+=String.fromCharCode(55296|p>>10,56320|p&1023)}else s+=String.fromCharCode(f)}return s},yi=(t,n,a)=>{if(a??(a=2147483647),a<4)return 0;for(var s=n,f=s+a-4,p=0;p<t.length;++p){var g=t.charCodeAt(p);if(g>=55296&&g<=57343){var h=t.charCodeAt(++p);g=65536+((g&1023)<<10)|h&1023}if(qe[n>>2]=g,n+=4,n+4>f)break}return qe[n>>2]=0,n-s},lr=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);s>=55296&&s<=57343&&++a,n+=4}return n},gi=(t,n,a)=>{a=Ee(a);var s,f,p,g;n===2?(s=ht,f=fn,g=_i,p=h=>ar[h>>1]):n===4&&(s=mi,f=yi,g=lr,p=h=>oe[h>>2]),He(t,{name:a,fromWireType:h=>{for(var y=oe[h>>2],C,x=h+4,H=0;H<=y;++H){var ae=h+4+H*n;if(H==y||p(ae)==0){var Te=ae-x,Se=s(x,Te);C===void 0?C=Se:(C+="\0",C+=Se),x=ae+n}}return Ye(h),C},toWireType:(h,y)=>{typeof y!="string"&&ne(`Cannot pass non-string to C++ string type ${a}`);var C=g(y),x=Ht(4+C+n);return oe[x>>2]=C/n,f(y,x+4,C+n),h!==null&&h.push(Ye,x),x},argPackAdvance:nr,readValueFromPointer:z,destructorFunction(h){Ye(h)}})},cn=(t,n,a,s,f,p)=>{I[t]={name:Ee(n),rawConstructor:Ne(a,s),rawDestructor:Ne(f,p),fields:[]}},ln=(t,n,a,s,f,p,g,h,y,C)=>{I[t].fields.push({fieldName:Ee(n),getterReturnType:a,getter:Ne(s,f),getterContext:p,setterArgumentType:g,setter:Ne(h,y),setterContext:C})},vn=(t,n)=>{n=Ee(n),He(t,{isVoid:!0,name:n,argPackAdvance:0,fromWireType:()=>{},toWireType:(a,s)=>{}})},wi=(t,n,a)=>me.copyWithin(t,n,n+a),St=()=>{hr=!1,mn=0},Be=[],Rt=(t,n,a,s)=>(t=Be[t],n=Ce.toValue(n),t(null,n,a,s)),bi={},Ft=t=>{var n=bi[t];return n===void 0?Ee(t):n},xe=(t,n,a,s,f)=>(t=Be[t],n=Ce.toValue(n),a=Ft(a),t(n,n[a],s,f)),dn=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),ki=t=>t===0?Ce.toHandle(dn()):(t=Ft(t),Ce.toHandle(dn()[t])),Ti=t=>{var n=Be.length;return Be.push(t),n},$i=(t,n)=>{for(var a=new Array(t),s=0;s<t;++s)a[s]=Ot(oe[n+s*4>>2],"parameter "+s);return a},Ut=(t,n,a)=>{var s=[],f=t.toWireType(s,a);return s.length&&(oe[n>>2]=Ce.toHandle(s)),f},Pi=(t,n,a)=>{var s=$i(t,n),f=s.shift();t--;var p=`return function (obj, func, destructorsRef, args) {
`,g=0,h=[];a===0&&h.push("obj");for(var y=["retType"],C=[f],x=0;x<t;++x)h.push("arg"+x),y.push("argType"+x),C.push(s[x]),p+=`  var arg${x} = argType${x}.readValueFromPointer(args${g?"+"+g:""});
`,g+=s[x].argPackAdvance;var H=a===1?"new func":"func.call";p+=`  var rv = ${H}(${h.join(", ")});
`,f.isVoid||(y.push("emval_returnValue"),C.push(Ut),p+=`  return emval_returnValue(retType, destructorsRef, rv);
`),p+=`};
`,y.push(p);var ae=Pr(Function,y)(...C),Te=`methodCaller<(${s.map(Se=>Se.name).join(", ")}) => ${f.name}>`;return Ti(Tr(Te,ae))},Dt=t=>{t>9&&(Xe[t+1]+=1)},Ei=()=>Ce.toHandle([]),Ci=t=>Ce.toHandle(Ft(t)),pn=()=>Ce.toHandle({}),hn=t=>{var n=Ce.toValue(t);B(n),zr(t)},Ai=(t,n,a)=>{t=Ce.toValue(t),n=Ce.toValue(n),a=Ce.toValue(a),t[n]=a},Oi=(t,n)=>{t=Ot(t,"_emval_take_value");var a=t.readValueFromPointer(n);return Ce.toHandle(a)},Jr={},_n=t=>{if(t instanceof ot||t=="unwind")return De;Fr(1,t)},mn=0,yn=()=>hr||mn>0,gn=t=>{var n;De=t,yn()||((n=m.onExit)==null||n.call(m,t),J=!0),Fr(t,new ot(t))},Wi=(t,n)=>{De=t,gn(t)},ji=Wi,xi=()=>{if(!yn())try{ji(De)}catch(t){_n(t)}},Si=t=>{if(!J)try{t(),xi()}catch(n){_n(n)}},Ri=()=>performance.now(),Fi=(t,n)=>{if(Jr[t]&&(clearTimeout(Jr[t].id),delete Jr[t]),!n)return 0;var a=setTimeout(()=>{delete Jr[t],Si(()=>kn(t,Ri()))},n);return Jr[t]={id:a,timeout_ms:n},0},Ui=(t,n,a,s)=>{var f=new Date().getFullYear(),p=new Date(f,0,1),g=new Date(f,6,1),h=p.getTimezoneOffset(),y=g.getTimezoneOffset(),C=Math.max(h,y);oe[t>>2]=C*60,qe[n>>2]=+(h!=y);var x=Te=>{var Se=Te>=0?"-":"+",Qe=Math.abs(Te),vr=String(Math.floor(Qe/60)).padStart(2,"0"),U=String(Qe%60).padStart(2,"0");return`UTC${Se}${vr}${U}`},H=x(h),ae=x(y);y<h?(G(H,a,17),G(ae,s,17)):(G(H,s,17),G(ae,a,17))},Di=()=>2147483648,Mi=(t,n)=>Math.ceil(t/n)*n,Ii=t=>{var n=Ue.buffer,a=(t-n.byteLength+65535)/65536|0;try{return Ue.grow(a),or(),1}catch{}},Li=t=>{var n=me.length;t>>>=0;var a=Di();if(t>a)return!1;for(var s=1;s<=4;s*=2){var f=n*(1+.2/s);f=Math.min(f,t+100663296);var p=Math.min(a,Mi(Math.max(t,f),65536)),g=Ii(p);if(g)return!0}return!1},Mt={},Hi=()=>Z||"./this.program",Xr=()=>{if(!Xr.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Hi()};for(var a in Mt)Mt[a]===void 0?delete n[a]:n[a]=Mt[a];var s=[];for(var a in n)s.push(`${a}=${n[a]}`);Xr.strings=s}return Xr.strings},Ni=(t,n)=>{for(var a=0;a<t.length;++a)$e[n++]=t.charCodeAt(a);$e[n]=0},Vi=(t,n)=>{var a=0;return Xr().forEach((s,f)=>{var p=n+a;oe[t+f*4>>2]=p,Ni(s,p),a+=s.length+1}),0},Bi=(t,n)=>{var a=Xr();oe[t>>2]=a.length;var s=0;return a.forEach(f=>s+=f.length+1),oe[n>>2]=s,0},Yi=t=>52,wn=(t,n,a,s)=>52;function It(t,n,a,s,f){return 70}var _t=[null,[],[]],Gi=(t,n=0,a=NaN)=>{for(var s=n+a,f=n;t[f]&&!(f>=s);)++f;return O.decode(t.buffer?t.subarray(n,f):new Uint8Array(t.slice(n,f)))},Lt=(t,n)=>{var a=_t[t];n===0||n===10?((t===1?Ar:pr)(Gi(a)),a.length=0):a.push(n)},qi=(t,n,a,s)=>{for(var f=0,p=0;p<a;p++){var g=oe[n>>2],h=oe[n+4>>2];n+=8;for(var y=0;y<h;y++)Lt(t,me[g+y]);f+=h}return oe[s>>2]=f,0};ve=m.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},Pt(),_r=m.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},ei(),vt(),an=m.UnboundTypeError=ie(Error,"UnboundTypeError"),ni();var zi={Y:D,o:ue,v:ye,a:R,h:L,M:Q,u:ke,ea:Pe,e:j,ia:tr,ka:M,ga:F,oa:E,qa:he,W:Zn,ta:cr,G:ti,sa:un,w:ai,c:pt,O:oi,m:ci,x:xt,l:vi,P:pi,H:gi,ra:cn,F:ln,ua:vn,na:wi,ba:St,S:Rt,pa:xe,i:zr,I:ki,J:Pi,Q:Dt,N:Ei,t:Ci,C:pn,R:hn,s:Ai,n:Oi,ca:Fi,da:Ui,fa:Li,la:Vi,ma:Bi,E:Yi,ja:wn,V:It,ha:qi,L:jn,$:Zi,b:Ji,d:xn,q:ia,X:Sn,D:Qr,y:oa,K:Rn,B:sa,U:Fn,T:ca,g:Qi,j:Xi,f:Ki,r:ta,k:ra,_:ea,Z:na,p:aa,z:ua,A:fa,aa:gn},fe=$t(),bn=t=>(bn=fe.xa)(t),Ye=t=>(Ye=fe.ya)(t),Ht=t=>(Ht=fe.Aa)(t),kn=(t,n)=>(kn=fe.Ba)(t,n),ce=(t,n)=>(ce=fe.Ca)(t,n),Tn=t=>(Tn=fe.Da)(t),Nt=t=>(Nt=fe.Ea)(t),$n=()=>($n=fe.Fa)(),Pn=t=>(Pn=fe.Ga)(t),En=t=>(En=fe.Ha)(t),Cn=(t,n,a)=>(Cn=fe.Ia)(t,n,a),An=t=>(An=fe.Ja)(t);m.dynCall_ji=(t,n)=>(m.dynCall_ji=fe.Ka)(t,n);var On=m.dynCall_iij=(t,n,a,s)=>(On=m.dynCall_iij=fe.La)(t,n,a,s);m.dynCall_jijj=(t,n,a,s,f,p)=>(m.dynCall_jijj=fe.Ma)(t,n,a,s,f,p),m.dynCall_vijj=(t,n,a,s,f,p)=>(m.dynCall_vijj=fe.Na)(t,n,a,s,f,p);var Wn=m.dynCall_iiiiij=(t,n,a,s,f,p,g)=>(Wn=m.dynCall_iiiiij=fe.Oa)(t,n,a,s,f,p,g);m.dynCall_jiji=(t,n,a,s,f)=>(m.dynCall_jiji=fe.Pa)(t,n,a,s,f),m.dynCall_viijii=(t,n,a,s,f,p,g)=>(m.dynCall_viijii=fe.Qa)(t,n,a,s,f,p,g),m.dynCall_iiiiijj=(t,n,a,s,f,p,g,h,y)=>(m.dynCall_iiiiijj=fe.Ra)(t,n,a,s,f,p,g,h,y),m.dynCall_iiiiiijj=(t,n,a,s,f,p,g,h,y,C)=>(m.dynCall_iiiiiijj=fe.Sa)(t,n,a,s,f,p,g,h,y,C);function Ki(t,n,a){var s=T();try{_e(t)(n,a)}catch(f){if(w(s),f!==f+0)throw f;ce(1,0)}}function Zi(t){var n=T();try{return _e(t)()}catch(a){if(w(n),a!==a+0)throw a;ce(1,0)}}function Ji(t,n){var a=T();try{return _e(t)(n)}catch(s){if(w(a),s!==s+0)throw s;ce(1,0)}}function Xi(t,n){var a=T();try{_e(t)(n)}catch(s){if(w(a),s!==s+0)throw s;ce(1,0)}}function Qi(t){var n=T();try{_e(t)()}catch(a){if(w(n),a!==a+0)throw a;ce(1,0)}}function ea(t,n,a,s,f,p){var g=T();try{_e(t)(n,a,s,f,p)}catch(h){if(w(g),h!==h+0)throw h;ce(1,0)}}function ra(t,n,a,s,f){var p=T();try{_e(t)(n,a,s,f)}catch(g){if(w(p),g!==g+0)throw g;ce(1,0)}}function ta(t,n,a,s){var f=T();try{_e(t)(n,a,s)}catch(p){if(w(f),p!==p+0)throw p;ce(1,0)}}function na(t,n,a,s,f,p,g){var h=T();try{_e(t)(n,a,s,f,p,g)}catch(y){if(w(h),y!==y+0)throw y;ce(1,0)}}function ia(t,n,a,s){var f=T();try{return _e(t)(n,a,s)}catch(p){if(w(f),p!==p+0)throw p;ce(1,0)}}function jn(t,n,a,s,f){var p=T();try{return _e(t)(n,a,s,f)}catch(g){if(w(p),g!==g+0)throw g;ce(1,0)}}function xn(t,n,a){var s=T();try{return _e(t)(n,a)}catch(f){if(w(s),f!==f+0)throw f;ce(1,0)}}function Qr(t,n,a,s,f,p){var g=T();try{return _e(t)(n,a,s,f,p)}catch(h){if(w(g),h!==h+0)throw h;ce(1,0)}}function Sn(t,n,a,s,f,p){var g=T();try{return _e(t)(n,a,s,f,p)}catch(h){if(w(g),h!==h+0)throw h;ce(1,0)}}function Rn(t,n,a,s,f,p,g,h){var y=T();try{return _e(t)(n,a,s,f,p,g,h)}catch(C){if(w(y),C!==C+0)throw C;ce(1,0)}}function aa(t,n,a,s,f,p,g,h){var y=T();try{_e(t)(n,a,s,f,p,g,h)}catch(C){if(w(y),C!==C+0)throw C;ce(1,0)}}function oa(t,n,a,s,f,p,g){var h=T();try{return _e(t)(n,a,s,f,p,g)}catch(y){if(w(h),y!==y+0)throw y;ce(1,0)}}function sa(t,n,a,s,f,p,g,h,y,C,x,H){var ae=T();try{return _e(t)(n,a,s,f,p,g,h,y,C,x,H)}catch(Te){if(w(ae),Te!==Te+0)throw Te;ce(1,0)}}function ua(t,n,a,s,f,p,g,h,y,C,x){var H=T();try{_e(t)(n,a,s,f,p,g,h,y,C,x)}catch(ae){if(w(H),ae!==ae+0)throw ae;ce(1,0)}}function fa(t,n,a,s,f,p,g,h,y,C,x,H,ae,Te,Se,Qe){var vr=T();try{_e(t)(n,a,s,f,p,g,h,y,C,x,H,ae,Te,Se,Qe)}catch(U){if(w(vr),U!==U+0)throw U;ce(1,0)}}function Fn(t,n,a,s,f,p,g){var h=T();try{return Wn(t,n,a,s,f,p,g)}catch(y){if(w(h),y!==y+0)throw y;ce(1,0)}}function ca(t,n,a,s){var f=T();try{return On(t,n,a,s)}catch(p){if(w(f),p!==p+0)throw p;ce(1,0)}}var mt,Un;fr=function t(){mt||Dn(),mt||(fr=t)};function Dn(){if(ze>0||!Un&&(Un=1,ur(),ze>0))return;function t(){var n;mt||(mt=1,m.calledRun=1,!J&&(Ve(),te(m),(n=m.onRuntimeInitialized)==null||n.call(m),Wr()))}m.setStatus?(m.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>m.setStatus(""),1),t()},1)):t()}if(m.preInit)for(typeof m.preInit=="function"&&(m.preInit=[m.preInit]);m.preInit.length>0;)m.preInit.pop()();return Dn(),q=rr,q}})();const qa={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};let _a,ma;async function za(v){return _a??(_a=await Cr(ha,v))}async function Ka(v){return ma??(ma=await Cr(Ga,v))}function Za(v,K){return et("HEIC Encode",_a,qa,v,K)}function Ja(v){return da(ma.decode(v),"HEIC Decode")}var zn;(function(v){v[v.UVAdapt=0]="UVAdapt",v[v.UV420=1]="UV420",v[v.UV444=2]="UV444",v[v.UVAuto=3]="UVAuto"})(zn||(zn={}));var Kn;(function(v){v[v.YCoCg=0]="YCoCg",v[v.YCbCr=1]="YCbCr",v[v.Custom=2]="Custom",v[v.YIQ=3]="YIQ"})(Kn||(Kn={})),zn.UVAuto,Kn.YCoCg,globalThis._icodec_ImageData=(v,K,q,m)=>m===8?new Xa(v,K,q):new dr(v,K,q,m);class Xa extends ImageData{constructor(){super(...arguments);wt(this,"depth",8)}}function Qa(v){if(Object.prototype.hasOwnProperty.call(v,"__esModule"))return v;var K=v.default;if(typeof K=="function"){var q=function m(){return this instanceof m?Reflect.construct(K,arguments,this.constructor):K.apply(this,arguments)};q.prototype=K.prototype}else q={};return Object.defineProperty(q,"__esModule",{value:!0}),Object.keys(v).forEach(function(m){var te=Object.getOwnPropertyDescriptor(v,m);Object.defineProperty(q,m,te.get?te:{enumerable:!0,get:function(){return v[m]}})}),q}var bt={exports:{}},eo={},ro=Object.freeze({__proto__:null,default:eo}),rt=Qa(ro);/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 9.2.0
 * @date    2024-10-11
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */var to=bt.exports,ya;function no(){return ya||(ya=1,function(v,K){(function(q,m){m(K)})(to,function(q){var m={},te={exports:{}};(function(w){var T=function(D){return typeof D<"u"&&D.versions!=null&&D.versions.node!=null&&D+""=="[object process]"};w.exports.isNode=T,w.exports.platform=typeof process<"u"&&T(process)?"node":"browser";var O=w.exports.platform==="node"&&rt;w.exports.isMainThread=w.exports.platform==="node"?(!O||O.isMainThread)&&!process.connected:typeof Window<"u",w.exports.cpus=w.exports.platform==="browser"?self.navigator.hardwareConcurrency:rt.cpus().length})(te);var Re=te.exports,rr={},le;function Z(){if(le)return rr;le=1;function w(D,re){var k=this;if(!(this instanceof w))throw new SyntaxError("Constructor must be called with the new operator");if(typeof D!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var ue=[],Y=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var ye=function($,R){ue.push($),Y.push(R)};this.then=function(A,$){return new w(function(R,L){var Q=A?T(A,R,L):R,ke=$?T($,R,L):L;ye(Q,ke)},k)};var be=function($){return k.resolved=!0,k.rejected=!1,k.pending=!1,ue.forEach(function(R){R($)}),ye=function(L,Q){L($)},be=j=function(){},k},j=function($){return k.resolved=!1,k.rejected=!0,k.pending=!1,Y.forEach(function(R){R($)}),ye=function(L,Q){Q($)},be=j=function(){},k};this.cancel=function(){return re?re.cancel():j(new O),k},this.timeout=function(A){if(re)re.timeout(A);else{var $=setTimeout(function(){j(new V("Promise timed out after "+A+" ms"))},A);k.always(function(){clearTimeout($)})}return k},D(function(A){be(A)},function(A){j(A)})}function T(D,re,k){return function(ue){try{var Y=D(ue);Y&&typeof Y.then=="function"&&typeof Y.catch=="function"?Y.then(re,k):re(Y)}catch(ye){k(ye)}}}w.prototype.catch=function(D){return this.then(null,D)},w.prototype.always=function(D){return this.then(D,D)},w.prototype.finally=function(D){var re=this,k=function(){return new w(function(Y){return Y()}).then(D).then(function(){return re})};return this.then(k,k)},w.all=function(D){return new w(function(re,k){var ue=D.length,Y=[];ue?D.forEach(function(ye,be){ye.then(function(j){Y[be]=j,ue--,ue==0&&re(Y)},function(j){ue=0,k(j)})}):re(Y)})},w.defer=function(){var D={};return D.promise=new w(function(re,k){D.resolve=re,D.reject=k}),D};function O(D){this.message=D||"promise cancelled",this.stack=new Error().stack}O.prototype=new Error,O.prototype.constructor=Error,O.prototype.name="CancellationError",w.CancellationError=O;function V(D){this.message=D||"timeout exceeded",this.stack=new Error().stack}return V.prototype=new Error,V.prototype.constructor=Error,V.prototype.name="TimeoutError",w.TimeoutError=V,rr.Promise=w,rr}function Fr(w,T){(T==null||T>w.length)&&(T=w.length);for(var O=0,V=Array(T);O<T;O++)V[O]=w[O];return V}function Le(w,T){var O=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!O){if(Array.isArray(w)||(O=J(w))||T){O&&(w=O);var V=0,D=function(){};return{s:D,n:function(){return V>=w.length?{done:!0}:{done:!1,value:w[V++]}},e:function(Y){throw Y},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re,k=!0,ue=!1;return{s:function(){O=O.call(w)},n:function(){var Y=O.next();return k=Y.done,Y},e:function(Y){ue=!0,re=Y},f:function(){try{k||O.return==null||O.return()}finally{if(ue)throw re}}}}function b(w,T,O){return(T=br(T))in w?Object.defineProperty(w,T,{value:O,enumerable:!0,configurable:!0,writable:!0}):w[T]=O,w}function wr(w,T){var O=Object.keys(w);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(w);T&&(V=V.filter(function(D){return Object.getOwnPropertyDescriptor(w,D).enumerable})),O.push.apply(O,V)}return O}function Ar(w){for(var T=1;T<arguments.length;T++){var O=arguments[T]!=null?arguments[T]:{};T%2?wr(Object(O),!0).forEach(function(V){b(w,V,O[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(O)):wr(Object(O)).forEach(function(V){Object.defineProperty(w,V,Object.getOwnPropertyDescriptor(O,V))})}return w}function pr(w,T){if(typeof w!="object"||!w)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var V=O.call(w,T);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(w)}function br(w){var T=pr(w,"string");return typeof T=="symbol"?T:T+""}function Ue(w){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},Ue(w)}function J(w,T){if(w){if(typeof w=="string")return Fr(w,T);var O={}.toString.call(w).slice(8,-1);return O==="Object"&&w.constructor&&(O=w.constructor.name),O==="Map"||O==="Set"?Array.from(w):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?Fr(w,T):void 0}}var De={exports:{}},$e={},me;function Oe(){return me||(me=1,$e.validateOptions=function(T,O,V){if(T){var D=T?Object.keys(T):[],re=D.find(function(ue){return!O.includes(ue)});if(re)throw new Error('Object "'+V+'" contains an unknown option "'+re+'"');var k=O.find(function(ue){return Object.prototype[ue]&&!D.includes(ue)});if(k)throw new Error('Object "'+V+'" contains an inherited option "'+k+'" which is not defined in the object itself but in its prototype. Only plain objects are allowed. Please remove the option from the prototype or override it with a value "undefined".');return T}},$e.workerOptsNames=["credentials","name","type"],$e.forkOptsNames=["cwd","detached","env","execPath","execArgv","gid","serialization","signal","killSignal","silent","stdio","uid","windowsVerbatimArguments","timeout"],$e.workerThreadOptsNames=["argv","env","eval","execArgv","stdin","stdout","stderr","workerData","trackUnmanagedFds","transferList","resourceLimits","name"]),$e}var ar,qe;function oe(){return qe||(qe=1,ar=`!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).worker=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={};var r=function(e,n){this.message=e,this.transfer=n},o={};function i(e,n){var t=this;if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var a=function(e,n){r.push(e),o.push(n)};this.then=function(e,n){return new i((function(t,r){var o=e?u(e,t,r):t,i=n?u(n,t,r):r;a(o,i)}),t)};var f=function(e){return t.resolved=!0,t.rejected=!1,t.pending=!1,r.forEach((function(n){n(e)})),a=function(n,t){n(e)},f=d=function(){},t},d=function(e){return t.resolved=!1,t.rejected=!0,t.pending=!1,o.forEach((function(n){n(e)})),a=function(n,t){t(e)},f=d=function(){},t};this.cancel=function(){return n?n.cancel():d(new s),t},this.timeout=function(e){if(n)n.timeout(e);else{var r=setTimeout((function(){d(new c("Promise timed out after "+e+" ms"))}),e);t.always((function(){clearTimeout(r)}))}return t},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,n,t){return function(r){try{var o=e(r);o&&"function"==typeof o.then&&"function"==typeof o.catch?o.then(n,t):n(o)}catch(e){t(e)}}}function s(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function c(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.always=function(e){return this.then(e,e)},i.prototype.finally=function(e){var n=this,t=function(){return new i((function(e){return e()})).then(e).then((function(){return n}))};return this.then(t,t)},i.all=function(e){return new i((function(n,t){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&n(o)}),(function(e){r=0,t(e)}))})):n(o)}))},i.defer=function(){var e={};return e.promise=new i((function(n,t){e.resolve=n,e.reject=t})),e},s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="CancellationError",i.CancellationError=s,c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name="TimeoutError",i.TimeoutError=c,o.Promise=i,function(n){var t=r,i=o.Promise,u="__workerpool-cleanup__",s={exit:function(){}},c={addAbortListener:function(e){s.abortListeners.push(e)},emit:s.emit};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)s.on=function(e,n){addEventListener(e,(function(e){n(e.data)}))},s.send=function(e,n){n?postMessage(e,n):postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var a;try{a=require("worker_threads")}catch(n){if("object"!==e(n)||null===n||"MODULE_NOT_FOUND"!==n.code)throw n}if(a&&null!==a.parentPort){var f=a.parentPort;s.send=f.postMessage.bind(f),s.on=f.on.bind(f),s.exit=process.exit.bind(process)}else s.on=process.on.bind(process),s.send=function(e){process.send(e)},s.on("disconnect",(function(){process.exit(1)})),s.exit=process.exit.bind(process)}function d(e){return Object.getOwnPropertyNames(e).reduce((function(n,t){return Object.defineProperty(n,t,{value:e[t],enumerable:!0})}),{})}function l(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}s.methods={},s.methods.run=function(e,n){var t=new Function("return ("+e+").apply(this, arguments);");return t.worker=c,t.apply(t,n)},s.methods.methods=function(){return Object.keys(s.methods)},s.terminationHandler=void 0,s.abortListenerTimeout=1e3,s.abortListeners=[],s.terminateAndExit=function(e){var n=function(){s.exit(e)};if(!s.terminationHandler)return n();var t=s.terminationHandler(e);return l(t)?(t.then(n,n),t):(n(),new i((function(e,n){n(new Error("Worker terminating"))})))},s.cleanup=function(e){if(!s.abortListeners.length)return s.send({id:e,method:u,error:d(new Error("Worker terminating"))}),new i((function(e){e()}));var n,t=s.abortListeners.map((function(e){return e()})),r=new i((function(e,t){n=setTimeout((function(){t(new Error("Timeout occured waiting for abort handler, killing worker"))}),s.abortListenerTimeout)})),o=i.all(t).then((function(){clearTimeout(n),s.abortListeners.length||(s.abortListeners=[])}),(function(){clearTimeout(n),s.exit()}));return i.all([o,r]).then((function(){s.send({id:e,method:u,error:null})}),(function(n){s.send({id:e,method:u,error:n?d(n):null})}))};var p=null;s.on("message",(function(e){if("__workerpool-terminate__"===e)return s.terminateAndExit(0);if(e.method===u)return s.cleanup(e.id);try{var n=s.methods[e.method];if(!n)throw new Error('Unknown method "'+e.method+'"');p=e.id;var r=n.apply(n,e.params);l(r)?r.then((function(n){n instanceof t?s.send({id:e.id,result:n.message,error:null},n.transfer):s.send({id:e.id,result:n,error:null}),p=null})).catch((function(n){s.send({id:e.id,result:null,error:d(n)}),p=null})):(r instanceof t?s.send({id:e.id,result:r.message,error:null},r.transfer):s.send({id:e.id,result:r,error:null}),p=null)}catch(n){s.send({id:e.id,result:null,error:d(n)})}})),s.register=function(e,n){if(e)for(var t in e)e.hasOwnProperty(t)&&(s.methods[t]=e[t],s.methods[t].worker=c);n&&(s.terminationHandler=n.onTerminate,s.abortListenerTimeout=n.abortListenerTimeout||1e3),s.send("ready")},s.emit=function(e){if(p){if(e instanceof t)return void s.send({id:p,isEvent:!0,payload:e.message},e.transfer);s.send({id:p,isEvent:!0,payload:e})}},n.add=s.register,n.emit=s.emit}(t),n(t)}));
//# sourceMappingURL=worker.min.js.map
`),ar}var Or;function We(){if(Or)return De.exports;Or=1;var w=Z(),T=w.Promise,O=Re,V=Oe(),D=V.validateOptions,re=V.forkOptsNames,k=V.workerThreadOptsNames,ue=V.workerOptsNames,Y="__workerpool-terminate__",ye="__workerpool-cleanup__";function be(){var M=A();if(!M)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return M}function j(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":Ue(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function A(){try{return rt}catch(M){if(Ue(M)==="object"&&M!==null&&M.code==="MODULE_NOT_FOUND")return null;throw M}}function $(){if(O.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var M=new Blob([oe()],{type:"text/javascript"});return window.URL.createObjectURL(M)}else return __dirname+"/worker.js"}function R(M,F){if(F.workerType==="web")return j(),L(M,F.workerOpts,Worker);if(F.workerType==="thread")return E=be(),Q(M,E,F);if(F.workerType==="process"||!F.workerType)return ke(M,Pe(F),rt);if(O.platform==="browser")return j(),L(M,F.workerOpts,Worker);var E=A();return E?Q(M,E,F):ke(M,Pe(F),rt)}function L(M,F,E){D(F,ue,"workerOpts");var I=new E(M,F);return I.isBrowserWorker=!0,I.on=function(B,z){this.addEventListener(B,function(X){z(X.data)})},I.send=function(B,z){this.postMessage(B,z)},I}function Q(M,F,E){var I,B;D(E==null?void 0:E.workerThreadOpts,k,"workerThreadOpts");var z=new F.Worker(M,Ar({stdout:(I=E==null?void 0:E.emitStdStreams)!==null&&I!==void 0?I:!1,stderr:(B=E==null?void 0:E.emitStdStreams)!==null&&B!==void 0?B:!1},E==null?void 0:E.workerThreadOpts));return z.isWorkerThread=!0,z.send=function(X,W){this.postMessage(X,W)},z.kill=function(){return this.terminate(),!0},z.disconnect=function(){this.terminate()},E!=null&&E.emitStdStreams&&(z.stdout.on("data",function(X){return z.emit("stdout",X)}),z.stderr.on("data",function(X){return z.emit("stderr",X)})),z}function ke(M,F,E){D(F.forkOpts,re,"forkOpts");var I=E.fork(M,F.forkArgs,F.forkOpts),B=I.send;return I.send=function(z){return B.call(I,z)},F.emitStdStreams&&(I.stdout.on("data",function(z){return I.emit("stdout",z)}),I.stderr.on("data",function(z){return I.emit("stderr",z)})),I.isChildProcess=!0,I}function Pe(M){M=M||{};var F=process.execArgv.join(" "),E=F.indexOf("--inspect")!==-1,I=F.indexOf("--debug-brk")!==-1,B=[];return E&&(B.push("--inspect="+M.debugPort),I&&B.push("--debug-brk")),process.execArgv.forEach(function(z){z.indexOf("--max-old-space-size")>-1&&B.push(z)}),Object.assign({},M,{forkArgs:M.forkArgs,forkOpts:Object.assign({},M.forkOpts,{execArgv:(M.forkOpts&&M.forkOpts.execArgv||[]).concat(B),stdio:M.emitStdStreams?"pipe":void 0})})}function ee(M){for(var F=new Error(""),E=Object.keys(M),I=0;I<E.length;I++)F[E[I]]=M[E[I]];return F}function G(M,F){if(Object.keys(M.processing).length===1){var E=Object.values(M.processing)[0];E.options&&typeof E.options.on=="function"&&E.options.on(F)}}function tr(M,F){var E=this,I=F||{};this.script=M||$(),this.worker=R(this.script,I),this.debugPort=I.debugPort,this.forkOpts=I.forkOpts,this.forkArgs=I.forkArgs,this.workerOpts=I.workerOpts,this.workerThreadOpts=I.workerThreadOpts,this.workerTerminateTimeout=I.workerTerminateTimeout,M||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("stdout",function(W){G(E,{stdout:W.toString()})}),this.worker.on("stderr",function(W){G(E,{stderr:W.toString()})}),this.worker.on("message",function(W){if(!E.terminated)if(typeof W=="string"&&W==="ready")E.worker.ready=!0,z();else{var de=W.id,ve=E.processing[de];if(ve!==void 0&&(W.isEvent?ve.options&&typeof ve.options.on=="function"&&ve.options.on(W.payload):(delete E.processing[de],E.terminating===!0&&E.terminate(),W.error?ve.resolver.reject(ee(W.error)):ve.resolver.resolve(W.result))),W.method===ye){var pe=E.tracking[W.id];pe!==void 0&&(W.error?(clearTimeout(pe.timeoutId),pe.resolver.reject(ee(W.error))):(E.tracking&&clearTimeout(pe.timeoutId),pe.resolver.resolve(pe.result))),delete E.tracking[de]}}});function B(W){E.terminated=!0;for(var de in E.processing)E.processing[de]!==void 0&&E.processing[de].resolver.reject(W);E.processing=Object.create(null)}function z(){var W=Le(E.requestQueue.splice(0)),de;try{for(W.s();!(de=W.n()).done;){var ve=de.value;E.worker.send(ve.message,ve.transfer)}}catch(pe){W.e(pe)}finally{W.f()}}var X=this.worker;this.worker.on("error",B),this.worker.on("exit",function(W,de){var ve=`Workerpool Worker terminated Unexpectedly
`;ve+="    exitCode: `"+W+"`\n",ve+="    signalCode: `"+de+"`\n",ve+="    workerpool.script: `"+E.script+"`\n",ve+="    spawnArgs: `"+X.spawnargs+"`\n",ve+="    spawnfile: `"+X.spawnfile+"`\n",ve+="    stdout: `"+X.stdout+"`\n",ve+="    stderr: `"+X.stderr+"`\n",B(new Error(ve))}),this.processing=Object.create(null),this.tracking=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}return tr.prototype.methods=function(){return this.exec("methods")},tr.prototype.exec=function(M,F,E,I){E||(E=T.defer());var B=++this.lastId;this.processing[B]={id:B,resolver:E,options:I};var z={message:{id:B,method:M,params:F},transfer:I&&I.transfer};this.terminated?E.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(z.message,z.transfer):this.requestQueue.push(z);var X=this;return E.promise.catch(function(W){if(W instanceof T.CancellationError||W instanceof T.TimeoutError)return X.tracking[B]={id:B,resolver:T.defer()},delete X.processing[B],X.tracking[B].resolver.promise=X.tracking[B].resolver.promise.catch(function(de){delete X.tracking[B];var ve=X.terminateAndNotify(!0).then(function(){throw de},function(pe){throw pe});return ve}),X.worker.send({id:B,method:ye}),X.tracking[B].timeoutId=setTimeout(function(){X.tracking[B].resolver.reject(W)},X.workerTerminateTimeout),X.tracking[B].resolver.promise;throw W})},tr.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},tr.prototype.terminate=function(M,F){var E=this;if(M){for(var I in this.processing)this.processing[I]!==void 0&&this.processing[I].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}for(var B=0,z=Object.values(E.tracking);B<z.length;B++){var X=z[B];clearTimeout(X.timeoutId),X.resolver.reject(new Error("Worker Terminating"))}if(E.tracking=Object.create(null),typeof F=="function"&&(this.terminationHandler=F),this.busy())this.terminating=!0;else{var W=function(pe){if(E.terminated=!0,E.cleaning=!1,E.worker!=null&&E.worker.removeAllListeners&&E.worker.removeAllListeners("message"),E.worker=null,E.terminating=!1,E.terminationHandler)E.terminationHandler(pe,E);else if(pe)throw pe};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){W(new Error("worker already killed!"));return}var de=setTimeout(function(){E.worker&&E.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(de),E.worker&&(E.worker.killed=!0),W()}),this.worker.ready?this.worker.send(Y):this.requestQueue.push({message:Y}),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");W()}},tr.prototype.terminateAndNotify=function(M,F){var E=T.defer();return F&&E.promise.timeout(F),this.terminate(M,function(I,B){I?E.reject(I):E.resolve(B)}),E.promise},De.exports=tr,De.exports._tryRequireWorkerThreads=A,De.exports._setupProcessWorker=ke,De.exports._setupBrowserWorker=L,De.exports._setupWorkerThreadWorker=Q,De.exports.ensureWorkerThreads=be,De.exports}var or,we;function Ur(){if(we)return or;we=1;var w=65535;or=T;function T(){this.ports=Object.create(null),this.length=0}return T.prototype.nextAvailableStartingAt=function(O){for(;this.ports[O]===!0;)O++;if(O>=w)throw new Error("WorkerPool debug port limit reached: "+O+">= "+w);return this.ports[O]=!0,this.length++,O},T.prototype.releasePort=function(O){delete this.ports[O],this.length--},or}var sr,ur;function Ve(){if(ur)return sr;ur=1;var w=Z(),T=w.Promise,O=We(),V=Re,D=Ur(),re=new D;function k(j,A){typeof j=="string"?this.script=j||null:(this.script=null,A=j),this.workers=[],this.tasks=[],A=A||{},this.forkArgs=Object.freeze(A.forkArgs||[]),this.forkOpts=Object.freeze(A.forkOpts||{}),this.workerOpts=Object.freeze(A.workerOpts||{}),this.workerThreadOpts=Object.freeze(A.workerThreadOpts||{}),this.debugPortStart=A.debugPortStart||43210,this.nodeWorker=A.nodeWorker,this.workerType=A.workerType||A.nodeWorker||"auto",this.maxQueueSize=A.maxQueueSize||1/0,this.workerTerminateTimeout=A.workerTerminateTimeout||1e3,this.onCreateWorker=A.onCreateWorker||function(){return null},this.onTerminateWorker=A.onTerminateWorker||function(){return null},this.emitStdStreams=A.emitStdStreams||!1,A&&"maxWorkers"in A?(ue(A.maxWorkers),this.maxWorkers=A.maxWorkers):this.maxWorkers=Math.max((V.cpus||4)-1,1),A&&"minWorkers"in A&&(A.minWorkers==="max"?this.minWorkers=this.maxWorkers:(Y(A.minWorkers),this.minWorkers=A.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&O.ensureWorkerThreads()}k.prototype.exec=function(j,A,$){if(A&&!Array.isArray(A))throw new TypeError('Array expected as argument "params"');if(typeof j=="string"){var R=T.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var L=this.tasks,Q={method:j,params:A,resolver:R,timeout:null,options:$};L.push(Q);var ke=R.promise.timeout;return R.promise.timeout=function(ee){return L.indexOf(Q)!==-1?(Q.timeout=ee,R.promise):ke.call(R.promise,ee)},this._next(),R.promise}else{if(typeof j=="function")return this.exec("run",[String(j),A],$);throw new TypeError('Function or string expected as argument "method"')}},k.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var j=this;return this.exec("methods").then(function(A){var $={};return A.forEach(function(R){$[R]=function(){return j.exec(R,Array.prototype.slice.call(arguments))}}),$})},k.prototype._next=function(){if(this.tasks.length>0){var j=this._getWorker();if(j){var A=this,$=this.tasks.shift();if($.resolver.promise.pending){var R=j.exec($.method,$.params,$.resolver,$.options).then(A._boundNext).catch(function(){if(j.terminated)return A._removeWorker(j)}).then(function(){A._next()});typeof $.timeout=="number"&&R.timeout($.timeout)}else A._next()}}},k.prototype._getWorker=function(){for(var j=this.workers,A=0;A<j.length;A++){var $=j[A];if($.busy()===!1)return $}return j.length<this.maxWorkers?($=this._createWorkerHandler(),j.push($),$):null},k.prototype._removeWorker=function(j){var A=this;return re.releasePort(j.debugPort),this._removeWorkerFromList(j),this._ensureMinWorkers(),new T(function($,R){j.terminate(!1,function(L){A.onTerminateWorker({forkArgs:j.forkArgs,forkOpts:j.forkOpts,workerThreadOpts:j.workerThreadOpts,script:j.script}),L?R(L):$(j)})})},k.prototype._removeWorkerFromList=function(j){var A=this.workers.indexOf(j);A!==-1&&this.workers.splice(A,1)},k.prototype.terminate=function(j,A){var $=this;this.tasks.forEach(function(Pe){Pe.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var R=function(ee){re.releasePort(ee.debugPort),this._removeWorkerFromList(ee)},L=R.bind(this),Q=[],ke=this.workers.slice();return ke.forEach(function(Pe){var ee=Pe.terminateAndNotify(j,A).then(L).always(function(){$.onTerminateWorker({forkArgs:Pe.forkArgs,forkOpts:Pe.forkOpts,workerThreadOpts:Pe.workerThreadOpts,script:Pe.script})});Q.push(ee)}),T.all(Q)},k.prototype.stats=function(){var j=this.workers.length,A=this.workers.filter(function($){return $.busy()}).length;return{totalWorkers:j,busyWorkers:A,idleWorkers:j-A,pendingTasks:this.tasks.length,activeTasks:A}},k.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var j=this.workers.length;j<this.minWorkers;j++)this.workers.push(this._createWorkerHandler())},k.prototype._createWorkerHandler=function(){var j=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerOpts:this.workerOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new O(j.script||this.script,{forkArgs:j.forkArgs||this.forkArgs,forkOpts:j.forkOpts||this.forkOpts,workerOpts:j.workerOpts||this.workerOpts,workerThreadOpts:j.workerThreadOpts||this.workerThreadOpts,debugPort:re.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout,emitStdStreams:this.emitStdStreams})};function ue(j){if(!ye(j)||!be(j)||j<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function Y(j){if(!ye(j)||!be(j)||j<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function ye(j){return typeof j=="number"}function be(j){return Math.round(j)==j}return sr=k,sr}var Wr={},jr,Dr;function Mr(){if(Dr)return jr;Dr=1;function w(T,O){this.message=T,this.transfer=O}return jr=w,jr}var ze;function fr(){return ze||(ze=1,function(w){var T=Mr(),O=Z().Promise,V="__workerpool-terminate__",D="__workerpool-cleanup__",re=1e3,k={exit:function(){}},ue={addAbortListener:function(R){k.abortListeners.push(R)},emit:k.emit};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")k.on=function($,R){addEventListener($,function(L){R(L.data)})},k.send=function($,R){R?postMessage($,R):postMessage($)};else if(typeof process<"u"){var Y;try{Y=rt}catch($){if(!(Ue($)==="object"&&$!==null&&$.code==="MODULE_NOT_FOUND"))throw $}if(Y&&Y.parentPort!==null){var ye=Y.parentPort;k.send=ye.postMessage.bind(ye),k.on=ye.on.bind(ye),k.exit=process.exit.bind(process)}else k.on=process.on.bind(process),k.send=function($){process.send($)},k.on("disconnect",function(){process.exit(1)}),k.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function be($){return Object.getOwnPropertyNames($).reduce(function(R,L){return Object.defineProperty(R,L,{value:$[L],enumerable:!0})},{})}function j($){return $&&typeof $.then=="function"&&typeof $.catch=="function"}k.methods={},k.methods.run=function(R,L){var Q=new Function("return ("+R+").apply(this, arguments);");return Q.worker=ue,Q.apply(Q,L)},k.methods.methods=function(){return Object.keys(k.methods)},k.terminationHandler=void 0,k.abortListenerTimeout=re,k.abortListeners=[],k.terminateAndExit=function($){var R=function(){k.exit($)};if(!k.terminationHandler)return R();var L=k.terminationHandler($);return j(L)?(L.then(R,R),L):(R(),new O(function(Q,ke){ke(new Error("Worker terminating"))}))},k.cleanup=function($){if(!k.abortListeners.length)return k.send({id:$,method:D,error:be(new Error("Worker terminating"))}),new O(function(G){G()});var R=function(){k.exit()},L=function(){k.abortListeners.length||(k.abortListeners=[])},Q=k.abortListeners.map(function(G){return G()}),ke,Pe=new O(function(G,tr){ke=setTimeout(function(){tr(new Error("Timeout occured waiting for abort handler, killing worker"))},k.abortListenerTimeout)}),ee=O.all(Q).then(function(){clearTimeout(ke),L()},function(){clearTimeout(ke),R()});return O.all([ee,Pe]).then(function(){k.send({id:$,method:D,error:null})},function(G){k.send({id:$,method:D,error:G?be(G):null})})};var A=null;k.on("message",function($){if($===V)return k.terminateAndExit(0);if($.method===D)return k.cleanup($.id);try{var R=k.methods[$.method];if(R){A=$.id;var L=R.apply(R,$.params);j(L)?L.then(function(Q){Q instanceof T?k.send({id:$.id,result:Q.message,error:null},Q.transfer):k.send({id:$.id,result:Q,error:null}),A=null}).catch(function(Q){k.send({id:$.id,result:null,error:be(Q)}),A=null}):(L instanceof T?k.send({id:$.id,result:L.message,error:null},L.transfer):k.send({id:$.id,result:L,error:null}),A=null)}else throw new Error('Unknown method "'+$.method+'"')}catch(Q){k.send({id:$.id,result:null,error:be(Q)})}}),k.register=function($,R){if($)for(var L in $)$.hasOwnProperty(L)&&(k.methods[L]=$[L],k.methods[L].worker=ue);R&&(k.terminationHandler=R.onTerminate,k.abortListenerTimeout=R.abortListenerTimeout||re),k.send("ready")},k.emit=function($){if(A){if($ instanceof T){k.send({id:A,isEvent:!0,payload:$.message},$.transfer);return}k.send({id:A,isEvent:!0,payload:$})}},w.add=k.register,w.emit=k.emit}(Wr)),Wr}var tt=Re.platform,Me=Re.isMainThread,kr=Re.cpus;function Ir(w,T){var O=Ve();return new O(w,T)}var nt=m.pool=Ir;function it(w,T){var O=fr();O.add(w,T)}var xr=m.worker=it;function Lr(w){var T=fr();T.emit(w)}var kt=m.workerEmit=Lr,Hr=Z(),Tt=Hr.Promise,at=m.Promise=Tt,$t=m.Transfer=Mr(),ot=m.platform=tt,Ke=m.isMainThread=Me,hr=m.cpus=kr;q.Promise=at,q.Transfer=$t,q.cpus=hr,q.default=m,q.isMainThread=Ke,q.platform=ot,q.pool=nt,q.worker=xr,q.workerEmit=kt,Object.defineProperty(q,"__esModule",{value:!0})})}(bt,bt.exports)),bt.exports}var io=no(),ao=""+new URL("assets/heic-enc-BzJ-xkxZ.wasm",self.location.href).href,oo=""+new URL("assets/heic-dec-DrPBZ1Ea.wasm",self.location.href).href;let ga=!1;async function wa(){ga||(await Promise.all([Ka(oo),za(ao)]),ga=!0)}async function so(v,K,q){console.log("worker jsEncodeImage",v,K,q);try{await wa()}catch(te){throw console.error("worker jsEncodeImage initIfNeeded error",te),te}console.log("worker jsEncodeImage inputs",v,K,q);const m=Za({data:v,width:K,height:q,depth:8});return console.log("worker jsEncodeImage send",m),m}async function uo(v){try{await wa()}catch(q){throw console.error("worker jsDecodeImage initIfNeeded error",q),q}const K=Ja(v);return console.log("worker jsDecodeImage send",K),K}io.worker({jsEncodeImage:so,jsDecodeImage:uo})})();
