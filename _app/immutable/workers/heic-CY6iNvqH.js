var Rn=Object.defineProperty;var Cn=(u,c,a)=>c in u?Rn(u,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[c]=a;var _e=(u,c,a)=>Cn(u,typeof c!="symbol"?c+"":c,a);var Pn=async function(u={}){var c,a=u,R,_,m=new Promise((r,e)=>{R=r,_=e}),w=typeof window=="object",C=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var F="./this.program",y=(r,e)=>{throw e},b=import.meta.url,P="";function T(r){return a.locateFile?a.locateFile(r,P):P+r}var D,mr;if(w||C){try{P=new URL(".",b).href}catch{}C&&(mr=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),D=async r=>{var e=await fetch(r,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)}}var Or=console.log.bind(console),L=console.error.bind(console),q,er,tr=!1,nr,I,k,z,J,j,p,Ur,Mr,Dr,Ir;function jr(){var r=er.buffer;I=new Int8Array(r),z=new Int16Array(r),k=new Uint8Array(r),J=new Uint16Array(r),j=new Int32Array(r),p=new Uint32Array(r),Ur=new Float32Array(r),Ir=new Float64Array(r),Mr=new BigInt64Array(r),Dr=new BigUint64Array(r)}function Re(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Ie(a.preRun.shift());Br(Lr)}function Ce(){V.Z()}function Pe(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)De(a.postRun.shift());Br(Nr)}var x=0,K=null;function Fe(r){var e;x++,(e=a.monitorRunDependencies)==null||e.call(a,x)}function ke(r){var t;if(x--,(t=a.monitorRunDependencies)==null||t.call(a,x),x==0&&K){var e=K;K=null,e()}}function xr(r){var t;(t=a.onAbort)==null||t.call(a,r),r="Aborted("+r+")",L(r),tr=!0,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw _(e),e}var yr;function Se(){return a.locateFile?T("elheif-wasm.wasm"):new URL(""+new URL("assets/elheif-wasm-Cde5jrns.wasm",import.meta.url).href,import.meta.url).href}function We(r){if(r==yr&&q)return new Uint8Array(q);if(mr)return mr(r);throw"both async and sync fetching of the wasm failed"}async function $e(r){if(!q)try{var e=await D(r);return new Uint8Array(e)}catch{}return We(r)}async function Ve(r,e){try{var t=await $e(r),n=await WebAssembly.instantiate(t,e);return n}catch(i){L(`failed to asynchronously prepare wasm: ${i}`),xr(i)}}async function Oe(r,e,t){if(!r&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(e,{credentials:"same-origin"}),i=await WebAssembly.instantiateStreaming(n,t);return i}catch(o){L(`wasm streaming compile failed: ${o}`),L("falling back to ArrayBuffer instantiation")}return Ve(e,t)}function Ue(){return{a:hn}}async function Me(){function r(o,f){return V=o.exports,er=V.Y,jr(),ae=V.$,ke(),V}Fe();function e(o){return r(o.instance)}var t=Ue();if(a.instantiateWasm)return new Promise((o,f)=>{a.instantiateWasm(t,(s,l)=>{o(r(s))})});yr??(yr=Se());try{var n=await Oe(q,yr,t),i=e(n);return i}catch(o){return _(o),Promise.reject(o)}}class Hr{constructor(e){_e(this,"name","ExitStatus");this.message=`Program terminated with exit(${e})`,this.status=e}}var Br=r=>{for(;r.length>0;)r.shift()(a)},Nr=[],De=r=>Nr.push(r),Lr=[],Ie=r=>Lr.push(r),hr=!0;class je{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){p[this.ptr+4>>2]=e}get_type(){return p[this.ptr+4>>2]}set_destructor(e){p[this.ptr+8>>2]=e}get_destructor(){return p[this.ptr+8>>2]}set_caught(e){e=e?1:0,I[this.ptr+12]=e}get_caught(){return I[this.ptr+12]!=0}set_rethrown(e){e=e?1:0,I[this.ptr+13]=e}get_rethrown(){return I[this.ptr+13]!=0}init(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}set_adjusted_ptr(e){p[this.ptr+16>>2]=e}get_adjusted_ptr(){return p[this.ptr+16>>2]}}var zr=0,xe=(r,e,t)=>{var n=new je(r);throw n.init(e,t),zr=r,zr},Gr=typeof TextDecoder<"u"?new TextDecoder:void 0,Yr=(r,e=0,t=NaN)=>{for(var n=e+t,i=e;r[i]&&!(i>=n);)++i;if(i-e>16&&r.buffer&&Gr)return Gr.decode(r.subarray(e,i));for(var o="";e<i;){var f=r[e++];if(!(f&128)){o+=String.fromCharCode(f);continue}var s=r[e++]&63;if((f&224)==192){o+=String.fromCharCode((f&31)<<6|s);continue}var l=r[e++]&63;if((f&240)==224?f=(f&15)<<12|s<<6|l:f=(f&7)<<18|s<<12|l<<6|r[e++]&63,f<65536)o+=String.fromCharCode(f);else{var v=f-65536;o+=String.fromCharCode(55296|v>>10,56320|v&1023)}}return o},He=(r,e)=>r?Yr(k,r,e):"";function Be(r,e,t){return 0}var Ne=(r,e,t)=>{};function Le(r,e,t){return 0}function ze(r,e,t,n){}var Ge=(r,e,t)=>{},Ye=()=>xr(""),ar={},wr=r=>{for(;r.length;){var e=r.pop(),t=r.pop();t(e)}};function ir(r){return this.fromWireType(p[r>>2])}var G={},H={},or={},Xe=a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},Xr=r=>{throw new Xe(r)},qr=(r,e,t)=>{r.forEach(s=>or[s]=e);function n(s){var l=t(s);l.length!==r.length&&Xr("Mismatched type converter count");for(var v=0;v<r.length;++v)W(r[v],l[v])}var i=new Array(e.length),o=[],f=0;e.forEach((s,l)=>{H.hasOwnProperty(s)?i[l]=H[s]:(o.push(s),G.hasOwnProperty(s)||(G[s]=[]),G[s].push(()=>{i[l]=H[s],++f,f===o.length&&n(i)}))}),o.length===0&&n(i)},qe=r=>{var e=ar[r];delete ar[r];var t=e.rawConstructor,n=e.rawDestructor,i=e.fields,o=i.map(f=>f.getterReturnType).concat(i.map(f=>f.setterArgumentType));qr([r],o,f=>{var s={};return i.forEach((l,v)=>{var d=l.fieldName,g=f[v],A=f[v].optional,O=l.getter,U=l.getterContext,fr=f[v+i.length],Pr=l.setter,Fr=l.setterContext;s[d]={read:kr=>g.fromWireType(O(U,kr)),write:(kr,An)=>{var pe=[];Pr(Fr,kr,fr.toWireType(pe,An)),wr(pe)},optional:A}}),[{name:e.name,fromWireType:l=>{var v={};for(var d in s)v[d]=s[d].read(l);return n(l),v},toWireType:(l,v)=>{for(var d in s)if(!(d in v)&&!s[d].optional)throw new TypeError(`Missing field: "${d}"`);var g=t();for(d in s)s[d].write(g,v[d]);return l!==null&&l.push(n,g),g},argPackAdvance:$,readValueFromPointer:ir,destructorFunction:n}]})},Je=r=>{if(r===null)return"null";var e=typeof r;return e==="object"||e==="array"||e==="function"?r.toString():""+r},Ke=()=>{for(var r=new Array(256),e=0;e<256;++e)r[e]=String.fromCharCode(e);Jr=r},Jr,E=r=>{for(var e="",t=r;k[t];)e+=Jr[k[t++]];return e},Ze=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},S=r=>{throw new Ze(r)};function Qe(r,e,t={}){var n=e.name;if(r||S(`type "${n}" must have a positive integer typeid pointer`),H.hasOwnProperty(r)){if(t.ignoreDuplicateRegistrations)return;S(`Cannot register type '${n}' twice`)}if(H[r]=e,delete or[r],G.hasOwnProperty(r)){var i=G[r];delete G[r],i.forEach(o=>o())}}function W(r,e,t={}){return Qe(r,e,t)}var Kr=(r,e,t)=>{switch(e){case 1:return t?n=>I[n]:n=>k[n];case 2:return t?n=>z[n>>1]:n=>J[n>>1];case 4:return t?n=>j[n>>2]:n=>p[n>>2];case 8:return t?n=>Mr[n>>3]:n=>Dr[n>>3];default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},rt=(r,e,t,n,i)=>{e=E(e);var o=e.indexOf("u")!=-1;W(r,{name:e,fromWireType:f=>f,toWireType:function(f,s){if(typeof s!="bigint"&&typeof s!="number")throw new TypeError(`Cannot convert "${Je(s)}" to ${this.name}`);return typeof s=="number"&&(s=BigInt(s)),s},argPackAdvance:$,readValueFromPointer:Kr(e,t,!o),destructorFunction:null})},$=8,et=(r,e,t,n)=>{e=E(e),W(r,{name:e,fromWireType:function(i){return!!i},toWireType:function(i,o){return o?t:n},argPackAdvance:$,readValueFromPointer:function(i){return this.fromWireType(k[i])},destructorFunction:null})},br=[],M=[],Tr=r=>{r>9&&--M[r+1]===0&&(M[r]=void 0,br.push(r))},tt=()=>M.length/2-5-br.length,nt=()=>{M.push(0,1,void 0,1,null,1,!0,1,!1,1),a.count_emval_handles=tt},h={toValue:r=>(r||S(`Cannot use deleted val. handle = ${r}`),M[r]),toHandle:r=>{switch(r){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=br.pop()||M.length;return M[e]=r,M[e+1]=1,e}}}},Zr={name:"emscripten::val",fromWireType:r=>{var e=h.toValue(r);return Tr(r),e},toWireType:(r,e)=>h.toHandle(e),argPackAdvance:$,readValueFromPointer:ir,destructorFunction:null},Qr=r=>W(r,Zr),at=(r,e,t)=>{if(r[e].overloadTable===void 0){var n=r[e];r[e]=function(...i){return r[e].overloadTable.hasOwnProperty(i.length)||S(`Function '${t}' called with an invalid number of arguments (${i.length}) - expects one of (${r[e].overloadTable})!`),r[e].overloadTable[i.length].apply(this,i)},r[e].overloadTable=[],r[e].overloadTable[n.argCount]=n}},re=(r,e,t)=>{a.hasOwnProperty(r)?((t===void 0||a[r].overloadTable!==void 0&&a[r].overloadTable[t]!==void 0)&&S(`Cannot register public name '${r}' twice`),at(a,r,r),a[r].overloadTable.hasOwnProperty(t)&&S(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),a[r].overloadTable[t]=e):(a[r]=e,a[r].argCount=t)},it=(r,e,t)=>{switch(e){case 1:return t?function(n){return this.fromWireType(I[n])}:function(n){return this.fromWireType(k[n])};case 2:return t?function(n){return this.fromWireType(z[n>>1])}:function(n){return this.fromWireType(J[n>>1])};case 4:return t?function(n){return this.fromWireType(j[n>>2])}:function(n){return this.fromWireType(p[n>>2])};default:throw new TypeError(`invalid integer width (${e}): ${r}`)}},ot=(r,e,t,n)=>{e=E(e);function i(){}i.values={},W(r,{name:e,constructor:i,fromWireType:function(o){return this.constructor.values[o]},toWireType:(o,f)=>f.value,argPackAdvance:$,readValueFromPointer:it(e,t,n),destructorFunction:null}),re(e,i)},Er=(r,e)=>Object.defineProperty(e,"name",{value:r}),ee=r=>{var e=wn(r),t=E(e);return B(e),t},sr=(r,e)=>{var t=H[r];return t===void 0&&S(`${e} has unknown type ${ee(r)}`),t},st=(r,e,t)=>{var n=sr(r,"enum");e=E(e);var i=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:Er(`${n.name}_${e}`,function(){})}});i.values[t]=o,i[e]=o},ut=(r,e)=>{switch(e){case 4:return function(t){return this.fromWireType(Ur[t>>2])};case 8:return function(t){return this.fromWireType(Ir[t>>3])};default:throw new TypeError(`invalid float width (${e}): ${r}`)}},ft=(r,e,t)=>{e=E(e),W(r,{name:e,fromWireType:n=>n,toWireType:(n,i)=>i,argPackAdvance:$,readValueFromPointer:ut(e,t),destructorFunction:null})};function te(r){for(var e=1;e<r.length;++e)if(r[e]!==null&&r[e].destructorFunction===void 0)return!0;return!1}function lt(r,e,t,n){for(var i=te(r),o=r.length-2,f=[],s=["fn"],l=0;l<o;++l)f.push(`arg${l}`),s.push(`arg${l}Wired`);f=f.join(","),s=s.join(",");var v=`return function (${f}) {
`;i&&(v+=`var destructors = [];
`);for(var d=i?"destructors":"null",g=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],l=0;l<o;++l)v+=`var arg${l}Wired = argType${l}['toWireType'](${d}, arg${l});
`,g.push(`argType${l}`);if(v+=(t||n?"var rv = ":"")+`invoker(${s});
`,i)v+=`runDestructors(destructors);
`;else for(var l=2;l<r.length;++l){var A=l===1?"thisWired":"arg"+(l-2)+"Wired";r[l].destructorFunction!==null&&(v+=`${A}_dtor(${A});
`,g.push(`${A}_dtor`))}return t&&(v+=`var ret = retType['fromWireType'](rv);
return ret;
`),v+=`}
`,[g,v]}function ct(r,e,t,n,i,o){var f=e.length;f<2&&S("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=e[1]!==null&&t!==null,l=te(e),v=e[0].name!=="void",d=[r,S,n,i,wr,e[0],e[1]],g=0;g<f-2;++g)d.push(e[g+2]);if(!l)for(var g=2;g<e.length;++g)e[g].destructorFunction!==null&&d.push(e[g].destructorFunction);let[A,O]=lt(e,s,v,o);var U=new Function(...A,O)(...d);return Er(r,U)}var vt=(r,e)=>{for(var t=[],n=0;n<r;n++)t.push(p[e+n*4>>2]);return t},dt=(r,e,t)=>{a.hasOwnProperty(r)||Xr("Replacing nonexistent public symbol"),a[r].overloadTable!==void 0&&t!==void 0?a[r].overloadTable[t]=e:(a[r]=e,a[r].argCount=t)},ne=[],ae,gt=r=>{var e=ne[r];return e||(ne[r]=e=ae.get(r)),e},Z=(r,e,t=!1)=>{r=E(r);function n(){var o=gt(e);return o}var i=n();return typeof i!="function"&&S(`unknown function pointer with signature ${r}: ${e}`),i};class pt extends Error{}var _t=(r,e)=>{var t=[],n={};function i(o){if(!n[o]&&!H[o]){if(or[o]){or[o].forEach(i);return}t.push(o),n[o]=!0}}throw e.forEach(i),new pt(`${r}: `+t.map(ee).join([", "]))},mt=r=>{r=r.trim();const e=r.indexOf("(");return e===-1?r:r.slice(0,e)},yt=(r,e,t,n,i,o,f,s)=>{var l=vt(e,t);r=E(r),r=mt(r),i=Z(n,i,f),re(r,function(){_t(`Cannot call ${r} due to unbound types`,l)},e-1),qr([],l,v=>{var d=[v[0],null].concat(v.slice(1));return dt(r,ct(r,d,null,i,o,f),e-1),[]})},ht=(r,e,t,n,i)=>{e=E(e);var o=d=>d;if(n===0){var f=32-8*t;o=d=>d<<f>>>f}var s=e.includes("unsigned"),l=(d,g)=>{},v;s?v=function(d,g){return l(g,this.name),g>>>0}:v=function(d,g){return l(g,this.name),g},W(r,{name:e,fromWireType:o,toWireType:v,argPackAdvance:$,readValueFromPointer:Kr(e,t,n!==0),destructorFunction:null})},wt=(r,e,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],i=n[e];function o(f){var s=p[f>>2],l=p[f+4>>2];return new i(I.buffer,l,s)}t=E(t),W(r,{name:t,fromWireType:o,argPackAdvance:$,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},bt=Object.assign({optional:!0},Zr),Tt=(r,e)=>{W(r,bt)},Et=(r,e,t,n)=>{if(!(n>0))return 0;for(var i=t,o=t+n-1,f=0;f<r.length;++f){var s=r.charCodeAt(f);if(s>=55296&&s<=57343){var l=r.charCodeAt(++f);s=65536+((s&1023)<<10)|l&1023}if(s<=127){if(t>=o)break;e[t++]=s}else if(s<=2047){if(t+1>=o)break;e[t++]=192|s>>6,e[t++]=128|s&63}else if(s<=65535){if(t+2>=o)break;e[t++]=224|s>>12,e[t++]=128|s>>6&63,e[t++]=128|s&63}else{if(t+3>=o)break;e[t++]=240|s>>18,e[t++]=128|s>>12&63,e[t++]=128|s>>6&63,e[t++]=128|s&63}}return e[t]=0,t-i},Y=(r,e,t)=>Et(r,k,e,t),ie=r=>{for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++t):e+=3}return e},At=(r,e)=>{e=E(e),W(r,{name:e,fromWireType(t){for(var n=p[t>>2],i=t+4,o,f,s=i,f=0;f<=n;++f){var l=i+f;if(f==n||k[l]==0){var v=l-s,d=He(s,v);o===void 0?o=d:(o+="\0",o+=d),s=l+1}}return B(t),o},toWireType(t,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var i,o=typeof n=="string";o||ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT==1||S("Cannot pass non-string to std::string"),o?i=ie(n):i=n.length;var f=ge(4+i+1),s=f+4;return p[f>>2]=i,o?Y(n,s,i+1):k.set(n,s),t!==null&&t.push(B,f),f},argPackAdvance:$,readValueFromPointer:ir,destructorFunction(t){B(t)}})},oe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Rt=(r,e)=>{for(var t=r,n=t>>1,i=n+e/2;!(n>=i)&&J[n];)++n;if(t=n<<1,t-r>32&&oe)return oe.decode(k.subarray(r,t));for(var o="",f=0;!(f>=e/2);++f){var s=z[r+f*2>>1];if(s==0)break;o+=String.fromCharCode(s)}return o},Ct=(r,e,t)=>{if(t??(t=2147483647),t<2)return 0;t-=2;for(var n=e,i=t<r.length*2?t/2:r.length,o=0;o<i;++o){var f=r.charCodeAt(o);z[e>>1]=f,e+=2}return z[e>>1]=0,e-n},Pt=r=>r.length*2,Ft=(r,e)=>{for(var t=0,n="";!(t>=e/4);){var i=j[r+t*4>>2];if(i==0)break;if(++t,i>=65536){var o=i-65536;n+=String.fromCharCode(55296|o>>10,56320|o&1023)}else n+=String.fromCharCode(i)}return n},kt=(r,e,t)=>{if(t??(t=2147483647),t<4)return 0;for(var n=e,i=n+t-4,o=0;o<r.length;++o){var f=r.charCodeAt(o);if(f>=55296&&f<=57343){var s=r.charCodeAt(++o);f=65536+((f&1023)<<10)|s&1023}if(j[e>>2]=f,e+=4,e+4>i)break}return j[e>>2]=0,e-n},St=r=>{for(var e=0,t=0;t<r.length;++t){var n=r.charCodeAt(t);n>=55296&&n<=57343&&++t,e+=4}return e},Wt=(r,e,t)=>{t=E(t);var n,i,o,f;e===2?(n=Rt,i=Ct,f=Pt,o=s=>J[s>>1]):e===4&&(n=Ft,i=kt,f=St,o=s=>p[s>>2]),W(r,{name:t,fromWireType:s=>{for(var l=p[s>>2],v,d=s+4,g=0;g<=l;++g){var A=s+4+g*e;if(g==l||o(A)==0){var O=A-d,U=n(d,O);v===void 0?v=U:(v+="\0",v+=U),d=A+e}}return B(s),v},toWireType:(s,l)=>{typeof l!="string"&&S(`Cannot pass non-string to C++ string type ${t}`);var v=f(l),d=ge(4+v+e);return p[d>>2]=v/e,i(l,d+4,v+e),s!==null&&s.push(B,d),d},argPackAdvance:$,readValueFromPointer:ir,destructorFunction(s){B(s)}})},$t=(r,e)=>{Qr(r)},Vt=(r,e,t,n,i,o)=>{ar[r]={name:E(e),rawConstructor:Z(t,n),rawDestructor:Z(i,o),fields:[]}},Ot=(r,e,t,n,i,o,f,s,l,v)=>{ar[r].fields.push({fieldName:E(e),getterReturnType:t,getter:Z(n,i),getterContext:o,setterArgumentType:f,setter:Z(s,l),setterContext:v})},Ut=(r,e)=>{e=E(e),W(r,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,n)=>{}})},se=0,Mt=()=>{hr=!1,se=0},ue=(r,e,t)=>{var n=[],i=r.toWireType(n,t);return n.length&&(p[e>>2]=h.toHandle(n)),i},Dt=(r,e,t)=>(r=h.toValue(r),e=sr(e,"emval::as"),ue(e,t,r)),ur=[],It=(r,e,t,n)=>(r=ur[r],e=h.toValue(e),r(null,e,t,n)),jt={},Ar=r=>{var e=jt[r];return e===void 0?E(r):e},xt=(r,e,t,n,i)=>(r=ur[r],e=h.toValue(e),t=Ar(t),r(e,e[t],n,i)),fe=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Ht=r=>r===0?h.toHandle(fe()):(r=Ar(r),h.toHandle(fe()[r])),Bt=r=>{var e=ur.length;return ur.push(r),e},Nt=(r,e)=>{for(var t=new Array(r),n=0;n<r;++n)t[n]=sr(p[e+n*4>>2],`parameter ${n}`);return t},Lt=(r,e,t)=>{var n=Nt(r,e),i=n.shift();r--;var o=`return function (obj, func, destructorsRef, args) {
`,f=0,s=[];t===0&&s.push("obj");for(var l=["retType"],v=[i],d=0;d<r;++d)s.push(`arg${d}`),l.push(`argType${d}`),v.push(n[d]),o+=`  var arg${d} = argType${d}.readValueFromPointer(args${f?"+"+f:""});
`,f+=n[d].argPackAdvance;var g=t===1?"new func":"func.call";o+=`  var rv = ${g}(${s.join(", ")});
`,i.isVoid||(l.push("emval_returnValue"),v.push(ue),o+=`  return emval_returnValue(retType, destructorsRef, rv);
`),o+=`};
`;var A=new Function(...l,o)(...v),O=`methodCaller<(${n.map(U=>U.name).join(", ")}) => ${i.name}>`;return Bt(Er(O,A))},zt=(r,e)=>(r=h.toValue(r),e=h.toValue(e),h.toHandle(r[e])),Gt=r=>{r>9&&(M[r+1]+=1)},Yt=()=>h.toHandle([]),Xt=r=>h.toHandle(Ar(r)),qt=()=>h.toHandle({}),Jt=r=>{var e=h.toValue(r);wr(e),Tr(r)},Kt=(r,e,t)=>{r=h.toValue(r),e=h.toValue(e),t=h.toValue(t),r[e]=t},Zt=(r,e)=>{r=sr(r,"_emval_take_value");var t=r.readValueFromPointer(e);return h.toHandle(t)},Q={},le=r=>{if(r instanceof Hr||r=="unwind")return nr;y(1,r)},ce=()=>hr||se>0,ve=r=>{var e;nr=r,ce()||((e=a.onExit)==null||e.call(a,r),tr=!0),y(r,new Hr(r))},Qt=(r,e)=>{nr=r,ve(r)},de=Qt,rn=()=>{if(!ce())try{de(nr)}catch(r){le(r)}},en=r=>{if(!tr)try{r(),rn()}catch(e){le(e)}},tn=()=>performance.now(),nn=(r,e)=>{if(Q[r]&&(clearTimeout(Q[r].id),delete Q[r]),!e)return 0;var t=setTimeout(()=>{delete Q[r],en(()=>bn(r,tn()))},e);return Q[r]={id:t,timeout_ms:e},0},an=(r,e,t,n)=>{var i=new Date().getFullYear(),o=new Date(i,0,1),f=new Date(i,6,1),s=o.getTimezoneOffset(),l=f.getTimezoneOffset(),v=Math.max(s,l);p[r>>2]=v*60,j[e>>2]=+(s!=l);var d=O=>{var U=O>=0?"-":"+",fr=Math.abs(O),Pr=String(Math.floor(fr/60)).padStart(2,"0"),Fr=String(fr%60).padStart(2,"0");return`UTC${U}${Pr}${Fr}`},g=d(s),A=d(l);l<s?(Y(g,t,17),Y(A,n,17)):(Y(g,n,17),Y(A,t,17))},on=()=>2147483648,sn=(r,e)=>Math.ceil(r/e)*e,un=r=>{var e=er.buffer,t=(r-e.byteLength+65535)/65536|0;try{return er.grow(t),jr(),1}catch{}},fn=r=>{var e=k.length;r>>>=0;var t=on();if(r>t)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);i=Math.min(i,r+100663296);var o=Math.min(t,sn(Math.max(r,i),65536)),f=un(o);if(f)return!0}return!1},Rr={},ln=()=>F||"./this.program",rr=()=>{if(!rr.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:ln()};for(var t in Rr)Rr[t]===void 0?delete e[t]:e[t]=Rr[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);rr.strings=n}return rr.strings},cn=(r,e)=>{var t=0,n=0;for(var i of rr()){var o=e+t;p[r+n>>2]=o,t+=Y(i,o,1/0)+1,n+=4}return 0},vn=(r,e)=>{var t=rr();p[r>>2]=t.length;var n=0;for(var i of t)n+=ie(i)+1;return p[e>>2]=n,0},dn=r=>52,gn=(r,e,t,n)=>52;function pn(r,e,t,n){return 70}var _n=[null,[],[]],mn=(r,e)=>{var t=_n[r];e===0||e===10?((r===1?Or:L)(Yr(t)),t.length=0):t.push(e)},yn=(r,e,t,n)=>{for(var i=0,o=0;o<t;o++){var f=p[e>>2],s=p[e+4>>2];e+=8;for(var l=0;l<s;l++)mn(r,k[f+l]);i+=s}return p[n>>2]=i,0};Ke(),nt(),a.noExitRuntime&&(hr=a.noExitRuntime),a.print&&(Or=a.print),a.printErr&&(L=a.printErr),a.wasmBinary&&(q=a.wasmBinary),a.arguments&&a.arguments,a.thisProgram&&(F=a.thisProgram);var hn={p:xe,F:Be,X:Ne,W:Le,E:ze,V:Ge,Q:Ye,B:qe,A:rt,P:et,O:Qr,z:ot,a:st,y:ft,x:yt,g:ht,c:wt,N:Tt,M:At,u:Wt,o:$t,w:Vt,l:Ot,L:Ut,K:Mt,k:Dt,r:It,q:xt,b:Tr,n:Ht,i:Lt,h:zt,f:Gt,J:Yt,e:Xt,m:qt,d:Jt,j:Kt,t:Zt,I:nn,H:an,G:fn,U:cn,T:vn,v:de,s:dn,D:gn,S:pn,C:yn,R:ve},V=await Me();V.Z;var ge=V._,wn=V.aa,B=V.ba,bn=V.ca;function Cr(){if(x>0){K=Cr;return}if(Re(),x>0){K=Cr;return}function r(){var e;a.calledRun=!0,!tr&&(Ce(),R(a),(e=a.onRuntimeInitialized)==null||e.call(a),Pe())}a.setStatus?(a.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>a.setStatus(""),1),r()},1)):r()}function Tn(){if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.shift()()}Tn(),Cr();const En=["heif_error_code","heif_suberror_code"];for(const r of En)for(const e in a[r])!a[r].hasOwnProperty(e)||e==="values"||(a[e]=a[r][e]);return c=m,c};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ye=Symbol("Comlink.proxy"),Fn=Symbol("Comlink.endpoint"),kn=Symbol("Comlink.releaseProxy"),Sr=Symbol("Comlink.finalizer"),cr=Symbol("Comlink.thrown"),he=u=>typeof u=="object"&&u!==null||typeof u=="function",Sn={canHandle:u=>he(u)&&u[ye],serialize(u){const{port1:c,port2:a}=new MessageChannel;return $r(u,c),[a,[a]]},deserialize(u){return u.start(),On(u)}},Wn={canHandle:u=>he(u)&&cr in u,serialize({value:u}){let c;return u instanceof Error?c={isError:!0,value:{message:u.message,name:u.name,stack:u.stack}}:c={isError:!1,value:u},[c,[]]},deserialize(u){throw u.isError?Object.assign(new Error(u.value.message),u.value):u.value}},we=new Map([["proxy",Sn],["throw",Wn]]);function $n(u,c){for(const a of u)if(c===a||a==="*"||a instanceof RegExp&&a.test(c))return!0;return!1}function $r(u,c=globalThis,a=["*"]){c.addEventListener("message",function R(_){if(!_||!_.data)return;if(!$n(a,_.origin)){console.warn(`Invalid origin '${_.origin}' for comlink proxy`);return}const{id:m,type:w,path:C}=Object.assign({path:[]},_.data),F=(_.data.argumentList||[]).map(N);let y;try{const b=C.slice(0,-1).reduce((T,D)=>T[D],u),P=C.reduce((T,D)=>T[D],u);switch(w){case"GET":y=P;break;case"SET":b[C.slice(-1)[0]]=N(_.data.value),y=!0;break;case"APPLY":y=P.apply(b,F);break;case"CONSTRUCT":{const T=new P(...F);y=In(T)}break;case"ENDPOINT":{const{port1:T,port2:D}=new MessageChannel;$r(u,D),y=Vr(T,[T])}break;case"RELEASE":y=void 0;break;default:return}}catch(b){y={value:b,[cr]:0}}Promise.resolve(y).catch(b=>({value:b,[cr]:0})).then(b=>{const[P,T]=pr(b);c.postMessage(Object.assign(Object.assign({},P),{id:m}),T),w==="RELEASE"&&(c.removeEventListener("message",R),be(c),Sr in u&&typeof u[Sr]=="function"&&u[Sr]())}).catch(b=>{const[P,T]=pr({value:new TypeError("Unserializable return value"),[cr]:0});c.postMessage(Object.assign(Object.assign({},P),{id:m}),T)})}),c.start&&c.start()}function Vn(u){return u.constructor.name==="MessagePort"}function be(u){Vn(u)&&u.close()}function On(u,c){const a=new Map;return u.addEventListener("message",function(_){const{data:m}=_;if(!m||!m.id)return;const w=a.get(m.id);if(w)try{w(m)}finally{a.delete(m.id)}}),Wr(u,a,[],c)}function lr(u){if(u)throw new Error("Proxy has been released and is not useable")}function Te(u){return X(u,new Map,{type:"RELEASE"}).then(()=>{be(u)})}const dr=new WeakMap,gr="FinalizationRegistry"in globalThis&&new FinalizationRegistry(u=>{const c=(dr.get(u)||0)-1;dr.set(u,c),c===0&&Te(u)});function Un(u,c){const a=(dr.get(c)||0)+1;dr.set(c,a),gr&&gr.register(u,c,u)}function Mn(u){gr&&gr.unregister(u)}function Wr(u,c,a=[],R=function(){}){let _=!1;const m=new Proxy(R,{get(w,C){if(lr(_),C===kn)return()=>{Mn(m),Te(u),c.clear(),_=!0};if(C==="then"){if(a.length===0)return{then:()=>m};const F=X(u,c,{type:"GET",path:a.map(y=>y.toString())}).then(N);return F.then.bind(F)}return Wr(u,c,[...a,C])},set(w,C,F){lr(_);const[y,b]=pr(F);return X(u,c,{type:"SET",path:[...a,C].map(P=>P.toString()),value:y},b).then(N)},apply(w,C,F){lr(_);const y=a[a.length-1];if(y===Fn)return X(u,c,{type:"ENDPOINT"}).then(N);if(y==="bind")return Wr(u,c,a.slice(0,-1));const[b,P]=me(F);return X(u,c,{type:"APPLY",path:a.map(T=>T.toString()),argumentList:b},P).then(N)},construct(w,C){lr(_);const[F,y]=me(C);return X(u,c,{type:"CONSTRUCT",path:a.map(b=>b.toString()),argumentList:F},y).then(N)}});return Un(m,u),m}function Dn(u){return Array.prototype.concat.apply([],u)}function me(u){const c=u.map(pr);return[c.map(a=>a[0]),Dn(c.map(a=>a[1]))]}const Ee=new WeakMap;function Vr(u,c){return Ee.set(u,c),u}function In(u){return Object.assign(u,{[ye]:!0})}function pr(u){for(const[c,a]of we)if(a.canHandle(u)){const[R,_]=a.serialize(u);return[{type:"HANDLER",name:c,value:R},_]}return[{type:"RAW",value:u},Ee.get(u)||[]]}function N(u){switch(u.type){case"HANDLER":return we.get(u.name).deserialize(u.value);case"RAW":return u.value}}function X(u,c,a,R){return new Promise(_=>{const m=jn();c.set(m,_),u.start&&u.start(),u.postMessage(Object.assign({id:m},a),R)})}function jn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var _r={};let vr=null;async function xn(u,c){await Ae();let a=await createImageBitmap(u),R=new OffscreenCanvas(a.width,a.height),_=R.getContext("2d");_.drawImage(a,0,0),a.close();let m=_.getImageData(0,0,R.width,R.height);const w=_r.jsEncodeImages([m],c);return console.log("worker jsEncodeImage send",w),w.data?Vr(w,[w.data]):w}async function Hn(u){await Ae();const c=_r.jsDecodeImage(await u.arrayBuffer());return console.log("worker jsDecodeImage send",c),c.data?Vr(c,[c.data]):c}async function Ae(){vr||(vr=Pn(_r)),await vr}async function Bn(){vr=null,_r={}}$r({jsEncodeImages:xn,jsDecodeImage:Hn,prune:Bn});
