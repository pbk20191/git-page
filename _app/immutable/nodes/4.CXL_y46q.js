import{t as w,a as _}from"../chunks/BG7Uk98R.js";import"../chunks/iFwKHc4I.js";import{p as D,y as e,a as J,$ as N,c as s,s as l,O as L,r as i,P as d,Q as f,t as z}from"../chunks/DB4Lk07f.js";import{e as P,s as Q}from"../chunks/uKYrbfZO.js";import{i as Y}from"../chunks/B47XRhwx.js";import{h as W}from"../chunks/BQ1BFapl.js";import{r as g,s as B}from"../chunks/Co-tNn5r.js";import{b as $,w as M,J as Z,a as G}from"../chunks/DbXxs98E.js";import{i as K}from"../chunks/JpWhb4AA.js";const T=""+new URL("../workers/heic-CY6iNvqH.js",import.meta.url).href;var X=w('<meta name="description" content="Converter for heif">'),ee=w('<div class="encoding-options"><label>Quality: <input type="range" min="0" max="100"> <span> </span></label> <label><input type="checkbox"> Lossless</label> <label><input type="checkbox"> SharpYUV</label></div>'),ae=w('<p><a download="converted.zip">Download zip</a></p>'),te=w('<div class="text-column"><label><input type="checkbox"> 기본 옵션 사용</label> <!>  <br> <input type="file" multiple accept="image/*"> <!></div>');function ue(q,A){D(A,!1);let b=d(!0),h=d(80),k=d(!1),x=d(!1),m=d(void 0);function F(){if(!e(b))return{quality:e(h),lossless:e(k),sharpYUV:e(x)}}async function H(a){const o=Array.from(a.target.files??[]);if(!o.length)return;const n=new Worker(T,{type:"module"}),u=M(n),y=o.map(async t=>{try{if(t.type==="image/heic"||t.type==="image/heif")return console.warn(`Skipping ${t.name} as it is already in HEIC format.`),t;const r=await u.jsEncodeImages(t,F());if(r.error)throw console.error(`Error encoding ${t.name}`,r.error),r.error;const p=t.name.replace(/\.[^/.]+$/,"")+".heic";return new File([r.data],p,{type:"image/heic"})}catch(r){throw console.error(`Error processing file ${t.name}:`,r),r}});try{const t=new Z;await Promise.all(y).then(p=>{p.forEach(c=>{c instanceof File&&t.file(c.name,c)})});const r=await t.generateAsync({type:"blob"});e(m)&&URL.revokeObjectURL(e(m)),f(m,URL.createObjectURL(r))}finally{n.terminate()}}K();var U=te();W(a=>{var o=X();N.title="About",_(a,o)});var E=s(U),C=s(E);g(C),L(),i(E);var O=l(E,2);{var I=a=>{var o=ee(),n=s(o),u=l(s(n));g(u);var y=l(u,2),t=s(y,!0);i(y),i(n);var r=l(n,2),p=s(r);g(p),L(),i(r);var c=l(r,2),j=s(c);g(j),L(),i(c),i(o),z(()=>Q(t,e(h))),G(u,()=>e(h),v=>f(h,v)),$(p,()=>e(k),v=>f(k,v)),$(j,()=>e(x),v=>f(x,v)),_(a,o)};Y(O,a=>{e(b)||a(I)})}var R=l(O,4),S=l(R,2);{var V=a=>{var o=ae(),n=s(o);i(o),z(()=>B(n,"href",e(m))),_(a,o)};Y(S,a=>{e(m)&&a(V)})}i(U),$(C,()=>e(b),a=>f(b,a)),P("change",R,H),_(q,U),J()}export{ue as component};
