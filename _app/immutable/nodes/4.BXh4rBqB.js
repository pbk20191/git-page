var qn=Object.defineProperty;var Gn=(l,_,s)=>_ in l?qn(l,_,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[_]=s;var At=(l,_,s)=>Gn(l,typeof _!="symbol"?_+"":_,s);import{t as Me,a as Ie,e as Qa}from"../chunks/a5WjkIqk.js";import{z as Jn,b as Kn,i as Wr,h as dt,C as Qn,d as Zn,K as E,a2 as Xn,e as el,g as Za,j as Ir,n as Nt,ac as tl,k as ui,l as vi,m as rl,aA as Ur,ag as ci,ai as Xa,aB as al,V as il,aC as ei,aD as sl,aE as nl,af as ll,aF as ol,az as ul,aG as vl,aH as cl,B as fl,w as dl,p as vr,c as d,t as He,a as cr,s as p,r as f,T as Oe,ap as Fr,Y as pl,$ as hl,W as St}from"../chunks/Dbtdn9f7.js";import{d as fr,e as ti}from"../chunks/xKwX_C3Q.js";import{h as _l}from"../chunks/BcMQNMkF.js";import{s as fi}from"../chunks/DAD-lUWQ.js";import{i as ri}from"../chunks/Dt9NjwHj.js";import{a as ai}from"../chunks/i5uILAt2.js";import{w as jr,t as ml}from"../chunks/4eif3qM-.js";import{a as ce,b as Ne,J as gl}from"../chunks/BzzBhkj3.js";import{b as ot,s as yl}from"../chunks/DizoNBs4.js";import{s as se}from"../chunks/gfzC0wA8.js";import{r as M,s as I}from"../chunks/DCfzdB8P.js";import{p as Nr}from"../chunks/BIPL7g2D.js";function pt(l,_){return _}function bl(l,_,s,T){for(var k=[],y=_.length,L=0;L<y;L++)nl(_[L].e,k,!0);var R=y>0&&k.length===0&&s!==null;if(R){var w=s.parentNode;ll(w),w.append(s),T.clear(),lt(l,_[0].prev,_[y-1].next)}ol(k,()=>{for(var V=0;V<y;V++){var $=_[V];R||(T.delete($.k),lt(l,$.prev,$.next)),ul($.e,!R)}})}function ht(l,_,s,T,k,y=null){var L=l,R={flags:_,items:new Map,first:null};{var w=l;L=dt?Wr(Qn(w)):w.appendChild(Jn())}dt&&Zn();var V=null,$=!1,c=Xn(()=>{var A=s();return dl(A)?A:A==null?[]:ci(A)});Kn(()=>{var A=E(c),U=A.length;if($&&U===0)return;$=U===0;let z=!1;if(dt){var le=L.data===el;le!==(U===0)&&(L=Za(),Wr(L),Ir(!1),z=!0)}if(dt){for(var B=null,g,q=0;q<U;q++){if(Nt.nodeType===8&&Nt.data===tl){L=Nt,z=!0,Ir(!1);break}var ue=A[q],X=T(ue,q);g=di(Nt,R,B,null,ue,X,q,k,_,s),R.items.set(X,g),B=g}U>0&&Wr(Za())}dt||wl(A,R,L,k,_,T,s),y!==null&&(U===0?V?ui(V):V=vi(()=>y(L)):V!==null&&rl(V,()=>{V=null})),z&&Ir(!0),E(c)}),dt&&(L=Nt)}function wl(l,_,s,T,k,y,L){var R=l.length,w=_.items,V=_.first,$=V,c,A=null,U=[],z=[],le,B,g,q;for(q=0;q<R;q+=1){if(le=l[q],B=y(le,q),g=w.get(B),g===void 0){var ue=$?$.e.nodes_start:s;A=di(ue,_,A,A===null?_.first:A.next,le,B,q,T,k,L),w.set(B,A),U=[],z=[],$=A.next;continue}if(Tl(g,le,q),(g.e.f&Ur)!==0&&ui(g.e),g!==$){if(c!==void 0&&c.has(g)){if(U.length<z.length){var X=z[0],O;A=X.prev;var ke=U[0],be=U[U.length-1];for(O=0;O<U.length;O+=1)ii(U[O],X,s);for(O=0;O<z.length;O+=1)c.delete(z[O]);lt(_,ke.prev,be.next),lt(_,A,ke),lt(_,be,X),$=X,A=be,q-=1,U=[],z=[]}else c.delete(g),ii(g,$,s),lt(_,g.prev,g.next),lt(_,g,A===null?_.first:A.next),lt(_,A,g),A=g;continue}for(U=[],z=[];$!==null&&$.k!==B;)($.e.f&Ur)===0&&(c??(c=new Set)).add($),z.push($),$=$.next;if($===null)continue;g=$}U.push(g),A=g,$=g.next}if($!==null||c!==void 0){for(var he=c===void 0?[]:ci(c);$!==null;)($.e.f&Ur)===0&&he.push($),$=$.next;var $e=he.length;if($e>0){var K=R===0?s:null;bl(_,he,K,w)}}Xa.first=_.first&&_.first.e,Xa.last=A&&A.e}function Tl(l,_,s,T){al(l.v,_),l.i=s}function di(l,_,s,T,k,y,L,R,w,V){var $=(w&vl)!==0,c=(w&cl)===0,A=$?c?il(k):ei(k):k,U=(w&sl)===0?L:ei(L),z={i:U,v:A,k:y,a:null,e:null,prev:s,next:T};try{return z.e=vi(()=>R(l,A,U,V),dt),z.e.prev=s&&s.e,z.e.next=T&&T.e,s===null?_.first=z:(s.next=z,s.e.next=z.e),T!==null&&(T.prev=z,T.e.prev=z.e),z}finally{}}function ii(l,_,s){for(var T=l.next?l.next.e.nodes_start:s,k=_?_.e.nodes_start:s,y=l.e.nodes_start;y!==T;){var L=fl(y);k.before(y),y=L}}function lt(l,_,s){_===null?l.first=s:(_.next=s,_.e.next=s&&s.e),s!==null&&(s.prev=_,s.e.prev=_&&_.e)}const si=""+new URL("../workers/icodecs-Dx2CCgwP.js",import.meta.url).href;class pi{constructor(_,s,T,k=8){At(this,"data");At(this,"width");At(this,"height");At(this,"depth");this.data=_,this.width=s,this.height=T,this.depth=k}}pi.prototype.colorSpace="srgb";var Ht;(function(l){l[l.YUV444=1]="YUV444",l[l.YUV422=2]="YUV422",l[l.YUV420=3]="YUV420",l[l.YUV400=4]="YUV400"})(Ht||(Ht={}));var Yt;(function(l){l[l.Auto=0]="Auto",l[l.PSNR=1]="PSNR",l[l.SSIM=2]="SSIM"})(Yt||(Yt={}));const hi={quality:50,qualityAlpha:-1,speed:6,subsample:Ht.YUV420,autoTiling:!1,tileColsLog2:0,tileRowsLog2:0,chromaDeltaQ:!1,sharpness:0,denoiseLevel:0,tune:Yt.Auto,sharpYUV:!1},Cl=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Cl.decode();const Lr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Lr.encodeInto;var zr;(function(l){l[l.GRAYSCALE=1]="GRAYSCALE",l[l.RGB=2]="RGB",l[l.YCbCr=3]="YCbCr"})(zr||(zr={}));var Dr;(function(l){l[l.JPEG_Annex_K=0]="JPEG_Annex_K",l[l.Flat=1]="Flat",l[l.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",l[l.ImageMagick=3]="ImageMagick",l[l.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",l[l.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",l[l.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",l[l.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",l[l.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Dr||(Dr={}));zr.YCbCr,Dr.ImageMagick;var ni;(function(l){l[l.Default=-1]="Default",l[l.False=0]="False",l[l.True=1]="True"})(ni||(ni={}));var Or;(function(l){l[l.Default=-1]="Default",l[l.Zero=0]="Zero",l[l.Left=1]="Left",l[l.Top=2]="Top",l[l.Average0=3]="Average0",l[l.Select=4]="Select",l[l.Gradient=5]="Gradient",l[l.Weighted=6]="Weighted",l[l.TopRight=7]="TopRight",l[l.TopLeft=8]="TopLeft",l[l.LeftLeft=9]="LeftLeft",l[l.Average1=10]="Average1",l[l.Average2=11]="Average2",l[l.Average3=12]="Average3",l[l.Average4=13]="Average4",l[l.Best=14]="Best",l[l.Variable=15]="Variable"})(Or||(Or={}));Or.Default;var ur;(function(l){l[l.None=0]="None",l[l.SegmentSmooth=1]="SegmentSmooth",l[l.Dithering=2]="Dithering"})(ur||(ur={}));var Pt;(function(l){l[l.None=0]="None",l[l.Fast=1]="Fast",l[l.Best=2]="Best"})(Pt||(Pt={}));const _i={lossless:!1,nearLossless:100,quality:75,targetSize:0,targetPSNR:0,method:4,snsStrength:50,filterStrength:60,filterSharpness:0,filterType:!0,segments:4,pass:1,sharpYUV:!1,preprocessing:ur.None,autofilter:!1,partitionLimit:0,alphaCompression:1,alphaFiltering:Pt.Fast,alphaQuality:100,exact:!1,emulateJpegSize:!1,lowMemory:!1,partitions:0,showCompressed:0,imageHint:0,threadLevel:0,useDeltaPalette:0};var $l=(()=>{var l=import.meta.url;return function(_={}){var Ba;var s;function T(){return Q.buffer!=W.buffer&&D(),W}function k(){return Q.buffer!=W.buffer&&D(),we}function y(){return Q.buffer!=W.buffer&&D(),xe}function L(){return Q.buffer!=W.buffer&&D(),ve}function R(){return Q.buffer!=W.buffer&&D(),ie}function w(){return Q.buffer!=W.buffer&&D(),te}function V(){return Q.buffer!=W.buffer&&D(),pe}function $(){return Q.buffer!=W.buffer&&D(),re}var c=_,A,U,z=new Promise((e,t)=>{A=e,U=t}),le=typeof window=="object",B=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var g=B&&((Ba=self.name)==null?void 0:Ba.startsWith("em-pthread")),q=Object.assign({},c),ue="./this.program",X=(e,t)=>{throw t},O="";function ke(e){return c.locateFile?c.locateFile(e,O):O+e}var be,he;(le||B)&&(B?O=self.location.href:typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),l&&(O=l),O.startsWith("blob:")?O="":O=O.substr(0,O.replace(/[?#].*/,"").lastIndexOf("/")+1),B&&(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),be=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var $e=c.print||console.log.bind(console),K=c.printErr||console.error.bind(console);Object.assign(c,q),q=null,c.arguments&&c.arguments,c.thisProgram&&(ue=c.thisProgram);var de=c.wasmBinary,Q,Ue,_e=!1,C,W,we,xe,ve,ie,te,pe,re;function D(){var e=Q.buffer;c.HEAP8=W=new Int8Array(e),c.HEAP16=xe=new Int16Array(e),c.HEAPU8=we=new Uint8Array(e),c.HEAPU16=ve=new Uint16Array(e),c.HEAP32=ie=new Int32Array(e),c.HEAPU32=te=new Uint32Array(e),c.HEAPF32=pe=new Float32Array(e),c.HEAPF64=re=new Float64Array(e)}if(g){let e=function(...a){var i=a.join(" ");console.error(i)},t=function(...a){var i=a.join(" ");postMessage({cmd:"alert",text:i,threadId:lr()})},r=function(a){try{var i=a.data,n=i.cmd;if(n==="load"){let u=[];self.onmessage=o=>u.push(o),self.startWorker=o=>{postMessage({cmd:"loaded"});for(let v of u)r(v);self.onmessage=r};for(const o of i.handlers)(!c[o]||c[o].proxy)&&(c[o]=(...v)=>{postMessage({cmd:"callHandler",handler:o,args:v})},o=="print"&&($e=c[o]),o=="printErr"&&(K=c[o]));Q=i.wasmMemory,D(),ne(i.wasmModule)}else if(n==="run"){Gt(i.pthread_ptr),Pr(i.pthread_ptr,0,0,1,0,0),F.receiveObjectTransfer(i),F.threadInitTLS(),$r(i.pthread_ptr),Ae||(Aa(),Ae=!0);try{ze(i.start_routine,i.arg)}catch(u){if(u!="unwind")throw u}}else i.target==="setimmediate"||(n==="checkMailbox"?Ae&&sr():n&&(K(`worker: received unknown command ${n}`),K(i)))}catch(u){throw Sa(),u}};var ne,Ae=!1;c.printErr||(K=e),self.alert=t,c.instantiateWasm=(a,i)=>new Promise((n,u)=>{ne=o=>{var v=new WebAssembly.Instance(o,Rt());i(v),n()}}),self.onunhandledrejection=a=>{throw a.reason||a},self.onmessage=r}if(!g){if(c.wasmMemory)Q=c.wasmMemory;else{var S=c.INITIAL_MEMORY||16777216;Q=new WebAssembly.Memory({initial:S/65536,maximum:32768,shared:!0})}D()}var G=[],J=[],me=[];function Te(){var e=c.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Fe)),Ct(G)}function ge(){g||Ct(J)}function ee(){if(!g){var e=c.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(_t)),Ct(me)}}function Fe(e){G.unshift(e)}function ut(e){J.unshift(e)}function _t(e){me.unshift(e)}var je=0,We=null;function Ye(e){var t;je++,(t=c.monitorRunDependencies)==null||t.call(c,je)}function Ke(e){var r;if(je--,(r=c.monitorRunDependencies)==null||r.call(c,je),je==0&&We){var t=We;We=null,t()}}function Be(e){var r;(r=c.onAbort)==null||r.call(c,e),e="Aborted("+e+")",K(e),_e=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw U(t),t}var st="data:application/octet-stream;base64,",Qe=e=>e.startsWith(st);function Et(){if(c.locateFile){var e="heic-enc.wasm";return Qe(e)?e:ke(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var P;function Se(e){if(e==P&&de)return new Uint8Array(de);if(he)return he(e);throw"both async and sync fetching of the wasm failed"}function Ce(e){return de?Promise.resolve().then(()=>Se(e)):be(e).then(t=>new Uint8Array(t),()=>Se(e))}function Ve(e,t,r){return Ce(e).then(a=>WebAssembly.instantiate(a,t)).then(r,a=>{K(`failed to asynchronously prepare wasm: ${a}`),Be(a)})}function Ze(e,t,r,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Qe(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var n=WebAssembly.instantiateStreaming(i,r);return n.then(a,function(u){return K(`wasm streaming compile failed: ${u}`),K("falling back to ArrayBuffer instantiation"),Ve(t,r,a)})}):Ve(t,r,a)}function Rt(){return $n(),{a:xa}}function Wt(){var e=Rt();function t(a,i){return j=a.exports,Ft(j.Wa),b=j.Va,ut(j.Pa),Ue=i,Ke(),j}Ye();function r(a){t(a.instance,a.module)}if(c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(a){K(`Module.instantiateWasm callback failed with error: ${a}`),U(a)}return P??(P=Et()),Ze(de,P,e,r).catch(U),{}}function mt(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var gt=e=>{e.terminate(),e.onmessage=t=>{}},vt=e=>{var t=F.pthreads[e];F.returnWorkerToPool(t)},It=e=>{var t=F.getNewWorker();if(!t)return 6;F.runningWorkers.push(t),F.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.postMessage(r,e.transferList),0},nt=0,yt=()=>Xe||nt>0,ae=()=>La(),Z=e=>Fa(e),Bt=e=>ja(e),Ut=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN,fe=(e,t,r,...a)=>{for(var i=a.length,n=ae(),u=Bt(i*8),o=u>>3,v=0;v<a.length;v++){var h=a[v];$()[o+v]=h}var m=Pa(e,t,i,u,r);return Z(n),m};function ct(e){var t;if(g)return fe(0,0,1,e);C=e,yt()||(F.terminateAllThreads(),(t=c.onExit)==null||t.call(c,e),_e=!0),X(e,new mt(e))}var bt=e=>{if(e instanceof mt||e=="unwind")return C;X(1,e)};function wt(e){if(g)return fe(1,0,0,e);Tt(e)}var qt=(e,t)=>{if(C=e,g)throw wt(e),"unwind";ct(e)},Tt=qt,F={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){g||F.initMainThread()},initMainThread(){for(var e=2;e--;)F.allocateUnusedWorker();Fe(()=>{Ye(),F.loadWasmModuleToAllWorkers(()=>Ke())})},terminateAllThreads:()=>{for(var e of F.runningWorkers)gt(e);for(var e of F.unusedWorkers)gt(e);F.unusedWorkers=[],F.runningWorkers=[],F.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete F.pthreads[t],F.unusedWorkers.push(e),F.runningWorkers.splice(F.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ea(t)},receiveObjectTransfer(e){},threadInitTLS(){F.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(t=>{e.onmessage=n=>{var u=n.data,o=u.cmd;if(u.targetThread&&u.targetThread!=lr()){var v=F.pthreads[u.targetThread];v?v.postMessage(u,u.transferList):K(`Internal error! Worker sent a message "${o}" to target pthread ${u.targetThread}, but that thread no longer exists!`);return}o==="checkMailbox"?sr():o==="spawnThread"?It(u):o==="cleanupThread"?vt(u.thread):o==="loaded"?(e.loaded=!0,t(e)):o==="alert"?alert(`Thread ${u.threadId}: ${u.text}`):u.target==="setimmediate"?e.postMessage(u):o==="callHandler"?c[u.handler](...u.args):o&&K(`worker sent an unknown command ${o}`)},e.onerror=n=>{var u="worker sent an error!";throw K(`${u} ${n.filename}:${n.lineno}: ${n.message}`),n};var r=[],a=["onExit","onAbort","print","printErr"];for(var i of a)c.propertyIsEnumerable(i)&&r.push(i);e.postMessage({cmd:"load",handlers:r,wasmMemory:Q,wasmModule:Ue})}),loadWasmModuleToAllWorkers(e){if(g)return e();Promise.all(F.unusedWorkers.map(F.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),F.unusedWorkers.push(e)},getNewWorker(){return F.unusedWorkers.length==0&&(F.allocateUnusedWorker(),F.loadWasmModuleToWorker(F.unusedWorkers[0])),F.unusedWorkers.pop()}},Ct=e=>{e.forEach(t=>t(c))},Gt=e=>{D();var t=w()[e+52>>2],r=w()[e+56>>2],a=t-r;Ua(t,a),Z(t)},$t=[],b,N=e=>{var t=$t[e];return t||(e>=$t.length&&($t.length=e+1),$t[e]=t=b.get(e)),t},ze=(e,t)=>{nt=0,Xe=0;var r=N(e)(t);function a(i){yt()?C=i:Er(i)}a(r)},Xe=c.noExitRuntime||!0,Ft=e=>F.tlsInitFunctions.push(e),Hr=new TextDecoder,Jt=(e,t)=>{if(!e)return"";for(var r=e+t,a=e;!(a>=r)&&k()[a];)++a;return Hr.decode(k().slice(e,a))},gi=(e,t,r,a)=>{Be(`Assertion failed: ${Jt(e)}, at: `+[t?Jt(t):"unknown filename",r,a?Jt(a):"unknown function"])},Kt=[],Qt=0,yi=e=>{var t=new dr(e);return t.get_caught()||(t.set_caught(!0),Qt--),t.set_rethrown(!1),Kt.push(t),Da(e),Ma(e)},et=0,bi=()=>{oe(0,0);var e=Kt.pop();za(e.excPtr),et=0};class dr{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){w()[this.ptr+4>>2]=t}get_type(){return w()[this.ptr+4>>2]}set_destructor(t){w()[this.ptr+8>>2]=t}get_destructor(){return w()[this.ptr+8>>2]}set_caught(t){t=t?1:0,T()[this.ptr+12]=t}get_caught(){return T()[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,T()[this.ptr+13]=t}get_rethrown(){return T()[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){w()[this.ptr+16>>2]=t}get_adjusted_ptr(){return w()[this.ptr+16>>2]}}var wi=e=>{throw et||(et=e),et},Zt=e=>Ia(e),Yr=e=>{var t=et;if(!t)return Zt(0),0;var r=new dr(t);r.set_adjusted_ptr(t);var a=r.get_type();if(!a)return Zt(0),t;for(var i of e){if(i===0||i===a)break;var n=r.ptr+16;if(Oa(i,a,n))return Zt(i),t}return Zt(a),t},Ti=()=>Yr([]),Ci=e=>Yr([e]),$i=()=>{var e=Kt.pop();e||Be("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Kt.push(e),e.set_rethrown(!0),e.set_caught(!1),Qt++),et=t,et},xi=(e,t,r)=>{var a=new dr(e);throw a.init(t,r),et=e,Qt++,et},ki=()=>Qt;function Br(e,t,r,a){return g?fe(2,0,1,e,t,r,a):qr(e,t,r,a)}var Ai=()=>typeof SharedArrayBuffer<"u",qr=(e,t,r,a)=>{if(!Ai())return 6;var i=[],n=0;if(g&&(i.length===0||n))return Br(e,t,r,a);var u={startRoutine:r,pthread_ptr:e,arg:a,transferList:i};return g?(u.cmd="spawnThread",postMessage(u,i),0):It(u)};function Gr(e,t,r){return g?fe(3,0,1,e,t,r):0}var Si=(e,t,r,a)=>{if(!(a>0))return 0;for(var i=r,n=r+a-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343){var v=e.charCodeAt(++u);o=65536+((o&1023)<<10)|v&1023}if(o<=127){if(r>=n)break;t[r++]=o}else if(o<=2047){if(r+1>=n)break;t[r++]=192|o>>6,t[r++]=128|o&63}else if(o<=65535){if(r+2>=n)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|o&63}else{if(r+3>=n)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|o&63}}return t[r]=0,r-i},jt=(e,t,r)=>Si(e,k(),t,r);function Jr(e,t,r){if(g)return fe(4,0,1,e,t,r)}function Kr(e,t,r){return g?fe(5,0,1,e,t,r):0}function Qr(e,t,r,a){if(g)return fe(6,0,1,e,t,r,a)}function Zr(e,t,r,a){if(g)return fe(7,0,1,e,t,r,a)}function Xr(e,t,r){if(g)return fe(8,0,1,e,t,r)}var Pi=()=>{Be("")},Xt={},pr=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Lt(e){return this.fromWireType(w()[e>>2])}var xt={},ft={},er={},ea,tr=e=>{throw new ea(e)},hr=(e,t,r)=>{e.forEach(o=>er[o]=t);function a(o){var v=r(o);v.length!==e.length&&tr("Mismatched type converter count");for(var h=0;h<e.length;++h)qe(e[h],v[h])}var i=new Array(t.length),n=[],u=0;t.forEach((o,v)=>{ft.hasOwnProperty(o)?i[v]=ft[o]:(n.push(o),xt.hasOwnProperty(o)||(xt[o]=[]),xt[o].push(()=>{i[v]=ft[o],++u,u===n.length&&a(i)}))}),n.length===0&&a(i)},Ei=e=>{var t=Xt[e];delete Xt[e];var r=t.rawConstructor,a=t.rawDestructor,i=t.fields,n=i.map(u=>u.getterReturnType).concat(i.map(u=>u.setterArgumentType));hr([e],n,u=>{var o={};return i.forEach((v,h)=>{var m=v.fieldName,x=u[h],Y=v.getter,ye=v.getterContext,Re=u[h+i.length],Je=v.setter,it=v.setterContext;o[m]={read:Le=>x.fromWireType(Y(ye,Le)),write:(Le,Vt)=>{var De=[];Je(it,Le,Re.toWireType(De,Vt)),pr(De)}}}),[{name:t.name,fromWireType:v=>{var h={};for(var m in o)h[m]=o[m].read(v);return a(v),h},toWireType:(v,h)=>{for(var m in o)if(!(m in h))throw new TypeError(`Missing field: "${m}"`);var x=r();for(m in o)o[m].write(x,h[m]);return v!==null&&v.push(a,x),x},argPackAdvance:Ge,readValueFromPointer:Lt,destructorFunction:a}]})},Ri=(e,t,r,a,i)=>{},Wi=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ta=e},ta,Pe=e=>{for(var t="",r=e;k()[r];)t+=ta[k()[r++]];return t},zt,H=e=>{throw new zt(e)};function Ii(e,t,r={}){var a=t.name;if(e||H(`type "${a}" must have a positive integer typeid pointer`),ft.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;H(`Cannot register type '${a}' twice`)}if(ft[e]=t,delete er[e],xt.hasOwnProperty(e)){var i=xt[e];delete xt[e],i.forEach(n=>n())}}function qe(e,t,r={}){return Ii(e,t,r)}var Ge=8,Ui=(e,t,r,a)=>{t=Pe(t),qe(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,n){return n?r:a},argPackAdvance:Ge,readValueFromPointer:function(i){return this.fromWireType(k()[i])},destructorFunction:null})},Fi=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),_r=e=>{function t(r){return r.$$.ptrType.registeredClass.name}H(t(e)+" instance already deleted")},mr=!1,ra=e=>{},ji=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},aa=e=>{e.count.value-=1;var t=e.count.value===0;t&&ji(e)},ia=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var a=ia(e,t,r.baseClass);return a===null?null:r.downcast(a)},sa={},Li={},zi=(e,t)=>{for(t===void 0&&H("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Di=(e,t)=>(t=zi(e,t),Li[t]),rr=(e,t)=>{(!t.ptrType||!t.ptr)&&tr("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,a=!!t.smartPtr;return r!==a&&tr("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Dt(Object.create(e,{$$:{value:t,writable:!0}}))};function Oi(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Di(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var a=r.clone();return this.destructor(e),a}function i(){return this.isSmartPointer?rr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):rr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var n=this.registeredClass.getActualType(t),u=sa[n];if(!u)return i.call(this);var o;this.isConst?o=u.constPointerType:o=u.pointerType;var v=ia(t,this.registeredClass,o.registeredClass);return v===null?i.call(this):this.isSmartPointer?rr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v,smartPtrType:this,smartPtr:e}):rr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v})}var Dt=e=>typeof FinalizationRegistry>"u"?(Dt=t=>t,e):(mr=new FinalizationRegistry(t=>{aa(t.$$)}),Dt=t=>{var r=t.$$,a=!!r.smartPtr;if(a){var i={$$:r};mr.register(t,i,t)}return t},ra=t=>mr.unregister(t),Dt(e)),Mi=()=>{Object.assign(ar.prototype,{isAliasOf(e){if(!(this instanceof ar)||!(e instanceof ar))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var a=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;a.baseClass;)i=a.upcast(i),a=a.baseClass;return t===a&&r===i},clone(){if(this.$$.ptr||_r(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Dt(Object.create(Object.getPrototypeOf(this),{$$:{value:Fi(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&H("Object already scheduled for deletion"),ra(this),aa(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&H("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function ar(){}var kt=(e,t)=>Object.defineProperty(t,"name",{value:e}),Vi=(e,t,r)=>{if(e[t].overloadTable===void 0){var a=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||H(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}},gr=(e,t,r)=>{c.hasOwnProperty(e)?((r===void 0||c[e].overloadTable!==void 0&&c[e].overloadTable[r]!==void 0)&&H(`Cannot register public name '${e}' twice`),Vi(c,e,e),c.hasOwnProperty(r)&&H(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),c[e].overloadTable[r]=t):(c[e]=t,r!==void 0&&(c[e].numArguments=r))},Ni=48,Hi=57,Yi=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Ni&&t<=Hi?`_${e}`:e};function Bi(e,t,r,a,i,n,u,o){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=a,this.baseClass=i,this.getActualType=n,this.upcast=u,this.downcast=o,this.pureVirtualFunctions=[]}var yr=(e,t,r)=>{for(;t!==r;)t.upcast||H(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function qi(e,t){if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),0;t.$$||H(`Cannot pass "${Cr(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}function Gi(e,t){var r;if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&H(`Cannot pass "${Cr(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&H(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var a=t.$$.ptrType.registeredClass;if(r=yr(t.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&H("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:H(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,Ee.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:H("Unsupporting sharing policy")}return r}function Ji(e,t){if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),0;t.$$||H(`Cannot pass "${Cr(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&H(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}var Ki=()=>{Object.assign(ir.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)==null||t.call(this,e)},argPackAdvance:Ge,readValueFromPointer:Lt,fromWireType:Oi})};function ir(e,t,r,a,i,n,u,o,v,h,m){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=a,this.isSmartPointer=i,this.pointeeType=n,this.sharingPolicy=u,this.rawGetPointee=o,this.rawConstructor=v,this.rawShare=h,this.rawDestructor=m,!i&&t.baseClass===void 0?a?(this.toWireType=qi,this.destructorFunction=null):(this.toWireType=Ji,this.destructorFunction=null):this.toWireType=Gi}var na=(e,t,r)=>{c.hasOwnProperty(e)||tr("Replacing nonexistent public symbol"),c[e].overloadTable!==void 0&&r!==void 0?c[e].overloadTable[r]=t:(c[e]=t,c[e].argCount=r)},Qi=(e,t,r)=>{e=e.replace(/p/g,"i");var a=c["dynCall_"+e];return a(t,...r)},Zi=(e,t,r=[])=>{if(e.includes("j"))return Qi(e,t,r);var a=N(t)(...r);return a},Xi=(e,t)=>(...r)=>Zi(e,t,r),tt=(e,t)=>{e=Pe(e);function r(){return e.includes("j")?Xi(e,t):N(t)}var a=r();return typeof a!="function"&&H(`unknown function pointer with signature ${e}: ${t}`),a},es=(e,t)=>{var r=kt(t,function(a){this.name=t,this.message=a;var i=new Error(a).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},la,oa=e=>{var t=ka(e),r=Pe(t);return at(t),r},ua=(e,t)=>{var r=[],a={};function i(n){if(!a[n]&&!ft[n]){if(er[n]){er[n].forEach(i);return}r.push(n),a[n]=!0}}throw t.forEach(i),new la(`${e}: `+r.map(oa).join([", "]))},ts=(e,t,r,a,i,n,u,o,v,h,m,x,Y)=>{m=Pe(m),n=tt(i,n),o&&(o=tt(u,o)),h&&(h=tt(v,h)),Y=tt(x,Y);var ye=Yi(m);gr(ye,function(){ua(`Cannot construct ${m} due to unbound types`,[a])}),hr([e,t,r],a?[a]:[],Re=>{var Ja;Re=Re[0];var Je,it;a?(Je=Re.registeredClass,it=Je.instancePrototype):it=ar.prototype;var Le=kt(m,function(...Rr){if(Object.getPrototypeOf(this)!==Vt)throw new zt("Use 'new' to construct "+m);if(De.constructor_body===void 0)throw new zt(m+" has no accessible constructor");var Ka=De.constructor_body[Rr.length];if(Ka===void 0)throw new zt(`Tried to invoke ctor of ${m} with invalid number of parameters (${Rr.length}) - expected (${Object.keys(De.constructor_body).toString()}) parameters instead!`);return Ka.apply(this,Rr)}),Vt=Object.create(it,{constructor:{value:Le}});Le.prototype=Vt;var De=new Bi(m,Le,Vt,Y,Je,n,o,h);De.baseClass&&((Ja=De.baseClass).__derivedClasses??(Ja.__derivedClasses=[]),De.baseClass.__derivedClasses.push(De));var Bn=new ir(m,De,!0,!1,!1),qa=new ir(m+"*",De,!1,!1,!1),Ga=new ir(m+" const*",De,!1,!0,!1);return sa[e]={pointerType:qa,constPointerType:Ga},na(ye,Le),[Bn,qa,Ga]})},br=[],rt=[],wr=e=>{e>9&&--rt[e+1]===0&&(rt[e]=void 0,br.push(e))},rs=()=>rt.length/2-5-br.length,as=()=>{rt.push(0,1,void 0,1,null,1,!0,1,!1,1),c.count_emval_handles=rs},Ee={toValue:e=>(e||H("Cannot use deleted val. handle = "+e),rt[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=br.pop()||rt.length;return rt[t]=e,rt[t+1]=1,t}}}},is={name:"emscripten::val",fromWireType:e=>{var t=Ee.toValue(e);return wr(e),t},toWireType:(e,t)=>Ee.toHandle(t),argPackAdvance:Ge,readValueFromPointer:Lt,destructorFunction:null},ss=e=>qe(e,is),ns=(e,t,r)=>{switch(t){case 1:return r?function(a){return this.fromWireType(T()[a])}:function(a){return this.fromWireType(k()[a])};case 2:return r?function(a){return this.fromWireType(y()[a>>1])}:function(a){return this.fromWireType(L()[a>>1])};case 4:return r?function(a){return this.fromWireType(R()[a>>2])}:function(a){return this.fromWireType(w()[a>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},ls=(e,t,r,a)=>{t=Pe(t);function i(){}i.values={},qe(e,{name:t,constructor:i,fromWireType:function(n){return this.constructor.values[n]},toWireType:(n,u)=>u.value,argPackAdvance:Ge,readValueFromPointer:ns(t,r,a),destructorFunction:null}),gr(t,i)},Tr=(e,t)=>{var r=ft[e];return r===void 0&&H(`${t} has unknown type ${oa(e)}`),r},os=(e,t,r)=>{var a=Tr(e,"enum");t=Pe(t);var i=a.constructor,n=Object.create(a.constructor.prototype,{value:{value:r},constructor:{value:kt(`${a.name}_${t}`,function(){})}});i.values[r]=n,i[t]=n},Cr=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},us=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(V()[r>>2])};case 8:return function(r){return this.fromWireType($()[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},vs=(e,t,r)=>{t=Pe(t),qe(e,{name:t,fromWireType:a=>a,toWireType:(a,i)=>i,argPackAdvance:Ge,readValueFromPointer:us(t,r),destructorFunction:null})};function va(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function ca(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=kt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var a=new r,i=e.apply(a,t);return i instanceof Object?i:a}function cs(e,t,r,a){for(var i=va(e),n=e.length-2,u=[],o=["fn"],v=0;v<n;++v)u.push(`arg${v}`),o.push(`arg${v}Wired`);u=u.join(","),o=o.join(",");var h=`return function (${u}) {
`;i&&(h+=`var destructors = [];
`);for(var m=i?"destructors":"null",x=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=0;v<n;++v)h+=`var arg${v}Wired = argType${v}['toWireType'](${m}, arg${v});
`,x.push(`argType${v}`);if(h+=(r||a?"var rv = ":"")+`invoker(${o});
`,i)h+=`runDestructors(destructors);
`;else for(var v=2;v<e.length;++v){var Y=v===1?"thisWired":"arg"+(v-2)+"Wired";e[v].destructorFunction!==null&&(h+=`${Y}_dtor(${Y});
`,x.push(`${Y}_dtor`))}return r&&(h+=`var ret = retType['fromWireType'](rv);
return ret;
`),h+=`}
`,[x,h]}function fs(e,t,r,a,i,n){var u=t.length;u<2&&H("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=t[1]!==null&&r!==null,v=va(t),h=t[0].name!=="void",m=[e,H,a,i,pr,t[0],t[1]],x=0;x<u-2;++x)m.push(t[x+2]);if(!v)for(var x=2;x<t.length;++x)t[x].destructorFunction!==null&&m.push(t[x].destructorFunction);let[Y,ye]=cs(t,o,h,n);Y.push(ye);var Re=ca(Function,Y)(...m);return kt(e,Re)}var ds=(e,t)=>{for(var r=[],a=0;a<e;a++)r.push(w()[t+a*4>>2]);return r},ps=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},hs=(e,t,r,a,i,n,u,o)=>{var v=ds(t,r);e=Pe(e),e=ps(e),i=tt(a,i),gr(e,function(){ua(`Cannot call ${e} due to unbound types`,v)},t-1),hr([],v,h=>{var m=[h[0],null].concat(h.slice(1));return na(e,fs(e,m,null,i,n,u),t-1),[]})},_s=(e,t,r)=>{switch(t){case 1:return r?a=>T()[a]:a=>k()[a];case 2:return r?a=>y()[a>>1]:a=>L()[a>>1];case 4:return r?a=>R()[a>>2]:a=>w()[a>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},ms=(e,t,r,a,i)=>{t=Pe(t);var n=m=>m;if(a===0){var u=32-8*r;n=m=>m<<u>>>u}var o=t.includes("unsigned"),v=(m,x)=>{},h;o?h=function(m,x){return v(x,this.name),x>>>0}:h=function(m,x){return v(x,this.name),x},qe(e,{name:t,fromWireType:n,toWireType:h,argPackAdvance:Ge,readValueFromPointer:_s(t,r,a!==0),destructorFunction:null})},gs=(e,t,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=a[t];function n(u){var o=w()[u>>2],v=w()[u+4>>2];return new i(T().buffer,v,o)}r=Pe(r),qe(e,{name:r,fromWireType:n,argPackAdvance:Ge,readValueFromPointer:n},{ignoreDuplicateRegistrations:!0})},ys=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3}return t},bs=(e,t)=>{t=Pe(t);var r=t==="std::string";qe(e,{name:t,fromWireType(a){var i=w()[a>>2],n=a+4,u;if(r)for(var o=n,v=0;v<=i;++v){var h=n+v;if(v==i||k()[h]==0){var m=h-o,x=Jt(o,m);u===void 0?u=x:(u+="\0",u+=x),o=h+1}}else{for(var Y=new Array(i),v=0;v<i;++v)Y[v]=String.fromCharCode(k()[n+v]);u=Y.join("")}return at(a),u},toWireType(a,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var n,u=typeof i=="string";u||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||H("Cannot pass non-string to std::string"),r&&u?n=ys(i):n=i.length;var o=Sr(4+n+1),v=o+4;if(w()[o>>2]=n,r&&u)jt(i,v,n+1);else if(u)for(var h=0;h<n;++h){var m=i.charCodeAt(h);m>255&&(at(v),H("String has UTF-16 code units that do not fit in 8 bits")),k()[v+h]=m}else for(var h=0;h<n;++h)k()[v+h]=i[h];return a!==null&&a.push(at,o),o},argPackAdvance:Ge,readValueFromPointer:Lt,destructorFunction(a){at(a)}})},ws=new TextDecoder("utf-16le"),Ts=(e,t)=>{for(var r=e,a=r>>1,i=a+t/2;!(a>=i)&&L()[a];)++a;return r=a<<1,ws.decode(k().slice(e,r))},Cs=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;r-=2;for(var a=t,i=r<e.length*2?r/2:e.length,n=0;n<i;++n){var u=e.charCodeAt(n);y()[t>>1]=u,t+=2}return y()[t>>1]=0,t-a},$s=e=>e.length*2,xs=(e,t)=>{for(var r=0,a="";!(r>=t/4);){var i=R()[e+r*4>>2];if(i==0)break;if(++r,i>=65536){var n=i-65536;a+=String.fromCharCode(55296|n>>10,56320|n&1023)}else a+=String.fromCharCode(i)}return a},ks=(e,t,r)=>{if(r??(r=2147483647),r<4)return 0;for(var a=t,i=a+r-4,n=0;n<e.length;++n){var u=e.charCodeAt(n);if(u>=55296&&u<=57343){var o=e.charCodeAt(++n);u=65536+((u&1023)<<10)|o&1023}if(R()[t>>2]=u,t+=4,t+4>i)break}return R()[t>>2]=0,t-a},As=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&++r,t+=4}return t},Ss=(e,t,r)=>{r=Pe(r);var a,i,n,u;t===2?(a=Ts,i=Cs,u=$s,n=o=>L()[o>>1]):t===4&&(a=xs,i=ks,u=As,n=o=>w()[o>>2]),qe(e,{name:r,fromWireType:o=>{for(var v=w()[o>>2],h,m=o+4,x=0;x<=v;++x){var Y=o+4+x*t;if(x==v||n(Y)==0){var ye=Y-m,Re=a(m,ye);h===void 0?h=Re:(h+="\0",h+=Re),m=Y+t}}return at(o),h},toWireType:(o,v)=>{typeof v!="string"&&H(`Cannot pass non-string to C++ string type ${r}`);var h=u(v),m=Sr(4+h+t);return w()[m>>2]=h/t,i(v,m+4,h+t),o!==null&&o.push(at,m),m},argPackAdvance:Ge,readValueFromPointer:Lt,destructorFunction(o){at(o)}})},Ps=(e,t,r,a,i,n)=>{Xt[e]={name:Pe(t),rawConstructor:tt(r,a),rawDestructor:tt(i,n),fields:[]}},Es=(e,t,r,a,i,n,u,o,v,h)=>{Xt[e].fields.push({fieldName:Pe(t),getterReturnType:r,getter:tt(a,i),getterContext:n,setterArgumentType:u,setter:tt(o,v),setterContext:h})},Rs=(e,t)=>{t=Pe(t),qe(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,a)=>{}})},Ws=1,Is=()=>Ws,Us=e=>{Pr(e,!B,1,!le,2097152,!1),F.threadInitTLS()},Fs=()=>{if(!yt())try{g?Er(C):Tt(C)}catch(e){bt(e)}},fa=e=>{if(!_e)try{e(),Fs()}catch(t){bt(t)}},$r=e=>{if(typeof Atomics.waitAsync=="function"){var t=Atomics.waitAsync(R(),e>>2,e);t.value.then(sr);var r=e+128;Atomics.store(R(),r>>2,1)}},sr=()=>{var e=lr();e&&($r(e),fa(Wa))},js=(e,t)=>{if(e==t)setTimeout(sr);else if(g)postMessage({targetThread:e,cmd:"checkMailbox"});else{var r=F.pthreads[e];if(!r)return;r.postMessage({cmd:"checkMailbox"})}},xr=[],Ls=(e,t,r,a,i)=>{xr.length=a;for(var n=i>>3,u=0;u<a;u++)xr[u]=$()[n+u];var o=Cn[e];F.currentProxiedOperationCallerThread=r;var v=o(...xr);return F.currentProxiedOperationCallerThread=0,v},zs=()=>{Xe=!1,nt=0},Ds=e=>{g?postMessage({cmd:"cleanupThread",thread:e}):vt(e)},Os=e=>{},nr=[],Ms=(e,t,r,a)=>(e=nr[e],t=Ee.toValue(t),e(null,t,r,a)),Vs={},kr=e=>{var t=Vs[e];return t===void 0?Pe(e):t},Ns=(e,t,r,a,i)=>(e=nr[e],t=Ee.toValue(t),r=kr(r),e(t,t[r],a,i)),da=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Hs=e=>e===0?Ee.toHandle(da()):(e=kr(e),Ee.toHandle(da()[e])),Ys=e=>{var t=nr.length;return nr.push(e),t},Bs=(e,t)=>{for(var r=new Array(e),a=0;a<e;++a)r[a]=Tr(w()[t+a*4>>2],"parameter "+a);return r},qs=(e,t,r)=>{var a=[],i=e.toWireType(a,r);return a.length&&(w()[t>>2]=Ee.toHandle(a)),i},Gs=(e,t,r)=>{var a=Bs(e,t),i=a.shift();e--;var n=`return function (obj, func, destructorsRef, args) {
`,u=0,o=[];r===0&&o.push("obj");for(var v=["retType"],h=[i],m=0;m<e;++m)o.push("arg"+m),v.push("argType"+m),h.push(a[m]),n+=`  var arg${m} = argType${m}.readValueFromPointer(args${u?"+"+u:""});
`,u+=a[m].argPackAdvance;var x=r===1?"new func":"func.call";n+=`  var rv = ${x}(${o.join(", ")});
`,i.isVoid||(v.push("emval_returnValue"),h.push(qs),n+=`  return emval_returnValue(retType, destructorsRef, rv);
`),n+=`};
`,v.push(n);var Y=ca(Function,v)(...h),ye=`methodCaller<(${a.map(Re=>Re.name).join(", ")}) => ${i.name}>`;return Ys(kt(ye,Y))},Js=e=>{e>9&&(rt[e+1]+=1)},Ks=()=>Ee.toHandle([]),Qs=e=>Ee.toHandle(kr(e)),Zs=()=>Ee.toHandle({}),Xs=e=>{var t=Ee.toValue(e);pr(t),wr(e)},en=(e,t,r)=>{e=Ee.toValue(e),t=Ee.toValue(t),r=Ee.toValue(r),e[t]=r},tn=(e,t)=>{e=Tr(e,"_emval_take_value");var r=e.readValueFromPointer(t);return Ee.toHandle(r)},rn=e=>e%4===0&&(e%100!==0||e%400===0),an=[0,31,60,91,121,152,182,213,244,274,305,335],sn=[0,31,59,90,120,151,181,212,243,273,304,334],nn=e=>{var t=rn(e.getFullYear()),r=t?an:sn,a=r[e.getMonth()]+e.getDate()-1;return a};function ln(e,t,r){var a=Ut(e,t),i=new Date(a*1e3);R()[r>>2]=i.getSeconds(),R()[r+4>>2]=i.getMinutes(),R()[r+8>>2]=i.getHours(),R()[r+12>>2]=i.getDate(),R()[r+16>>2]=i.getMonth(),R()[r+20>>2]=i.getFullYear()-1900,R()[r+24>>2]=i.getDay();var n=nn(i)|0;R()[r+28>>2]=n,R()[r+36>>2]=-(i.getTimezoneOffset()*60);var u=new Date(i.getFullYear(),0,1),o=new Date(i.getFullYear(),6,1).getTimezoneOffset(),v=u.getTimezoneOffset(),h=(o!=v&&i.getTimezoneOffset()==Math.min(v,o))|0;R()[r+32>>2]=h}function pa(e,t,r,a,i,n,u,o){return g?fe(9,0,1,e,t,r,a,i,n,u,o):-52}function ha(e,t,r,a,i,n,u){if(g)return fe(10,0,1,e,t,r,a,i,n,u)}var Ot={},_a=()=>performance.timeOrigin+performance.now();function ma(e,t){if(g)return fe(11,0,1,e,t);if(Ot[e]&&(clearTimeout(Ot[e].id),delete Ot[e]),!t)return 0;var r=setTimeout(()=>{delete Ot[e],fa(()=>Ra(e,_a()))},t);return Ot[e]={id:r,timeout_ms:t},0}var on=(e,t,r,a)=>{var i=new Date().getFullYear(),n=new Date(i,0,1),u=new Date(i,6,1),o=n.getTimezoneOffset(),v=u.getTimezoneOffset(),h=Math.max(o,v);w()[e>>2]=h*60,R()[t>>2]=+(o!=v);var m=ye=>{var Re=ye>=0?"-":"+",Je=Math.abs(ye),it=String(Math.floor(Je/60)).padStart(2,"0"),Le=String(Je%60).padStart(2,"0");return`UTC${Re}${it}${Le}`},x=m(o),Y=m(v);v<o?(jt(x,r,17),jt(Y,a,17)):(jt(x,a,17),jt(Y,r,17))},un=()=>{},vn=()=>Date.now(),cn=()=>{nt+=1},fn=()=>{throw cn(),"unwind"},ga=()=>2147483648,dn=()=>ga(),pn=()=>1,hn=(e,t)=>Math.ceil(e/t)*t,_n=e=>{var t=Q.buffer,r=(e-t.byteLength+65535)/65536|0;try{return Q.grow(r),D(),1}catch{}},mn=e=>{var t=k().length;if(e>>>=0,e<=t)return!1;var r=ga();if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var n=Math.min(r,hn(Math.max(e,i),65536)),u=_n(n);if(u)return!0}return!1},Ar={},gn=()=>ue||"./this.program",Mt=()=>{if(!Mt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:gn()};for(var r in Ar)Ar[r]===void 0?delete t[r]:t[r]=Ar[r];var a=[];for(var r in t)a.push(`${r}=${t[r]}`);Mt.strings=a}return Mt.strings},yn=(e,t)=>{for(var r=0;r<e.length;++r)T()[t++]=e.charCodeAt(r);T()[t]=0},ya=function(e,t){if(g)return fe(12,0,1,e,t);var r=0;return Mt().forEach((a,i)=>{var n=t+r;w()[e+i*4>>2]=n,yn(a,n),r+=a.length+1}),0},ba=function(e,t){if(g)return fe(13,0,1,e,t);var r=Mt();w()[e>>2]=r.length;var a=0;return r.forEach(i=>a+=i.length+1),w()[t>>2]=a,0};function wa(e){return g?fe(14,0,1,e):52}function Ta(e,t,r,a){return g?fe(15,0,1,e,t,r,a):52}function Ca(e,t,r,a,i){return g?fe(16,0,1,e,t,r,a,i):70}var bn=[null,[],[]],wn=(e,t=0,r=NaN)=>{for(var a=t+r,i=t;e[i]&&!(i>=a);)++i;return Hr.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(t,i):e.subarray(t,i):new Uint8Array(e.slice(t,i)))},Tn=(e,t)=>{var r=bn[e];t===0||t===10?((e===1?$e:K)(wn(r)),r.length=0):r.push(t)};function $a(e,t,r,a){if(g)return fe(17,0,1,e,t,r,a);for(var i=0,n=0;n<r;n++){var u=w()[t>>2],o=w()[t+4>>2];t+=8;for(var v=0;v<o;v++)Tn(e,k()[u+v]);i+=o}return w()[a>>2]=i,0}F.init(),ea=c.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Wi(),zt=c.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Mi(),Ki(),la=c.UnboundTypeError=es(Error,"UnboundTypeError"),as();var Cn=[ct,wt,Br,Gr,Jr,Kr,Qr,Zr,Xr,pa,ha,ma,ya,ba,wa,Ta,Ca,$a],xa;function $n(){xa={$:gi,r:yi,x:bi,b:Ti,i:Ci,U:$i,w:xi,pa:ki,ya:qr,e:wi,X:Gr,wa:Jr,Fa:Kr,Y:Qr,va:Zr,ra:Xr,Ja:Pi,da:Ei,ka:Ri,Ma:Ui,L:ts,La:ss,z:ls,d:os,_:vs,p:hs,A:ms,n:gs,aa:bs,M:Ss,O:Ps,G:Es,Na:Rs,Ia:Is,Ca:Us,sa:js,za:Ls,na:zs,S:Ds,Ba:$r,Ha:Os,Oa:Ms,Ka:Ns,l:wr,N:Hs,ca:Gs,R:Js,Z:Ks,v:Qs,F:Zs,ba:Xs,t:en,o:tn,ia:ln,ga:pa,ha,oa:ma,Aa:on,T:un,K:vn,Ga:fn,ta:dn,y:_a,ua:pn,qa:mn,Da:ya,Ea:ba,xa:Tt,E:wa,W:Ta,ja:Ca,V:$a,I:Fn,c:xn,f:Wn,u:Un,la:zn,H:Ln,B:Mn,P:Dn,D:Vn,fa:Hn,ea:Yn,h:In,k:An,g:jn,m:Sn,j:En,J:Pn,Q:Rn,s:On,q:kn,C:Nn,a:Q,ma:ct}}var j=Wt(),lr=()=>(lr=j.Qa)(),Sr=e=>(Sr=j.Ra)(e),ka=e=>(ka=j.Sa)(e),Aa=()=>(Aa=j.Ta)(),at=e=>(at=j.Ua)(e),Pr=(e,t,r,a,i,n)=>(Pr=j.Xa)(e,t,r,a,i,n),Sa=()=>(Sa=j.Ya)(),Pa=(e,t,r,a,i)=>(Pa=j.Za)(e,t,r,a,i),Ea=e=>(Ea=j._a)(e),Er=e=>(Er=j.$a)(e),Ra=(e,t)=>(Ra=j.ab)(e,t),Wa=()=>(Wa=j.bb)(),oe=(e,t)=>(oe=j.cb)(e,t),Ia=e=>(Ia=j.db)(e),Ua=(e,t)=>(Ua=j.eb)(e,t),Fa=e=>(Fa=j.fb)(e),ja=e=>(ja=j.gb)(e),La=()=>(La=j.hb)(),za=e=>(za=j.ib)(e),Da=e=>(Da=j.jb)(e),Oa=(e,t,r)=>(Oa=j.kb)(e,t,r),Ma=e=>(Ma=j.lb)(e);c.dynCall_ji=(e,t)=>(c.dynCall_ji=j.mb)(e,t);var Va=c.dynCall_iij=(e,t,r,a)=>(Va=c.dynCall_iij=j.nb)(e,t,r,a);c.dynCall_jijj=(e,t,r,a,i,n)=>(c.dynCall_jijj=j.ob)(e,t,r,a,i,n),c.dynCall_vijj=(e,t,r,a,i,n)=>(c.dynCall_vijj=j.pb)(e,t,r,a,i,n),c.dynCall_jiiiii=(e,t,r,a,i,n)=>(c.dynCall_jiiiii=j.qb)(e,t,r,a,i,n),c.dynCall_jii=(e,t,r)=>(c.dynCall_jii=j.rb)(e,t,r),c.dynCall_jiiii=(e,t,r,a,i)=>(c.dynCall_jiiii=j.sb)(e,t,r,a,i),c.dynCall_jiji=(e,t,r,a,i)=>(c.dynCall_jiji=j.tb)(e,t,r,a,i);var Na=c.dynCall_iiiiij=(e,t,r,a,i,n,u)=>(Na=c.dynCall_iiiiij=j.ub)(e,t,r,a,i,n,u);c.dynCall_viijii=(e,t,r,a,i,n,u)=>(c.dynCall_viijii=j.vb)(e,t,r,a,i,n,u),c.dynCall_iiiiijj=(e,t,r,a,i,n,u,o,v)=>(c.dynCall_iiiiijj=j.wb)(e,t,r,a,i,n,u,o,v),c.dynCall_iiiiiijj=(e,t,r,a,i,n,u,o,v,h)=>(c.dynCall_iiiiiijj=j.xb)(e,t,r,a,i,n,u,o,v,h);function xn(e,t){var r=ae();try{return N(e)(t)}catch(a){if(Z(r),a!==a+0)throw a;oe(1,0)}}function kn(e,t,r,a,i,n,u,o,v,h,m){var x=ae();try{N(e)(t,r,a,i,n,u,o,v,h,m)}catch(Y){if(Z(x),Y!==Y+0)throw Y;oe(1,0)}}function An(e,t){var r=ae();try{N(e)(t)}catch(a){if(Z(r),a!==a+0)throw a;oe(1,0)}}function Sn(e,t,r,a){var i=ae();try{N(e)(t,r,a)}catch(n){if(Z(i),n!==n+0)throw n;oe(1,0)}}function Pn(e,t,r,a,i,n){var u=ae();try{N(e)(t,r,a,i,n)}catch(o){if(Z(u),o!==o+0)throw o;oe(1,0)}}function En(e,t,r,a,i){var n=ae();try{N(e)(t,r,a,i)}catch(u){if(Z(n),u!==u+0)throw u;oe(1,0)}}function Rn(e,t,r,a,i,n,u){var o=ae();try{N(e)(t,r,a,i,n,u)}catch(v){if(Z(o),v!==v+0)throw v;oe(1,0)}}function Wn(e,t,r){var a=ae();try{return N(e)(t,r)}catch(i){if(Z(a),i!==i+0)throw i;oe(1,0)}}function In(e){var t=ae();try{N(e)()}catch(r){if(Z(t),r!==r+0)throw r;oe(1,0)}}function Un(e,t,r,a){var i=ae();try{return N(e)(t,r,a)}catch(n){if(Z(i),n!==n+0)throw n;oe(1,0)}}function Fn(e){var t=ae();try{return N(e)()}catch(r){if(Z(t),r!==r+0)throw r;oe(1,0)}}function jn(e,t,r){var a=ae();try{N(e)(t,r)}catch(i){if(Z(a),i!==i+0)throw i;oe(1,0)}}function Ln(e,t,r,a,i,n){var u=ae();try{return N(e)(t,r,a,i,n)}catch(o){if(Z(u),o!==o+0)throw o;oe(1,0)}}function zn(e,t,r,a,i,n){var u=ae();try{return N(e)(t,r,a,i,n)}catch(o){if(Z(u),o!==o+0)throw o;oe(1,0)}}function Dn(e,t,r,a,i,n,u,o){var v=ae();try{return N(e)(t,r,a,i,n,u,o)}catch(h){if(Z(v),h!==h+0)throw h;oe(1,0)}}function On(e,t,r,a,i,n,u,o){var v=ae();try{N(e)(t,r,a,i,n,u,o)}catch(h){if(Z(v),h!==h+0)throw h;oe(1,0)}}function Mn(e,t,r,a,i,n,u){var o=ae();try{return N(e)(t,r,a,i,n,u)}catch(v){if(Z(o),v!==v+0)throw v;oe(1,0)}}function Vn(e,t,r,a,i,n,u,o,v,h,m,x){var Y=ae();try{return N(e)(t,r,a,i,n,u,o,v,h,m,x)}catch(ye){if(Z(Y),ye!==ye+0)throw ye;oe(1,0)}}function Nn(e,t,r,a,i,n,u,o,v,h,m,x,Y,ye,Re,Je){var it=ae();try{N(e)(t,r,a,i,n,u,o,v,h,m,x,Y,ye,Re,Je)}catch(Le){if(Z(it),Le!==Le+0)throw Le;oe(1,0)}}function Hn(e,t,r,a,i,n,u){var o=ae();try{return Na(e,t,r,a,i,n,u)}catch(v){if(Z(o),v!==v+0)throw v;oe(1,0)}}function Yn(e,t,r,a){var i=ae();try{return Va(e,t,r,a)}catch(n){if(Z(i),n!==n+0)throw n;oe(1,0)}}var or,Ha;We=function e(){or||Ya(),or||(We=e)};function Ya(){if(je>0)return;if(g){A(c),ge(),startWorker(c);return}if(!Ha&&(Ha=1,Te(),je>0))return;function e(){var t;or||(or=1,c.calledRun=1,!_e&&(ge(),A(c),(t=c.onRuntimeInitialized)==null||t.call(c),ee()))}c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),e()},1)):e()}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ya(),s=z,s}})(),li,oi,xl=(oi=(li=globalThis.self)==null?void 0:li.name)==null?void 0:oi.startsWith("em-pthread");xl&&$l();const kl=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"],Al=["420","422","444"],Sl=["psnr","ssim","grain","fastdecode"],mi={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};var Mr;(function(l){l[l.UVAdapt=0]="UVAdapt",l[l.UV420=1]="UV420",l[l.UV444=2]="UV444",l[l.UVAuto=3]="UVAuto"})(Mr||(Mr={}));var Vr;(function(l){l[l.YCoCg=0]="YCoCg",l[l.YCbCr=1]="YCbCr",l[l.Custom=2]="Custom",l[l.YIQ=3]="YIQ"})(Vr||(Vr={}));Mr.UVAuto,Vr.YCoCg;globalThis._icodec_ImageData=(l,_,s,T)=>T===8?new Pl(l,_,s):new pi(l,_,s,T);class Pl extends ImageData{constructor(){super(...arguments);At(this,"depth",8)}}function El(l,_){_({...mi})}var Rl=Me("<option> </option>"),Wl=Me("<option> </option>"),Il=Me("<option> </option>"),Ul=Me('<div class="card svelte-1dgh8ms"><div class="title svelte-1dgh8ms">HEIC  (x265,HEVC) Options</div> <div class="grid svelte-1dgh8ms"><div><div class="row svelte-1dgh8ms"><label for="heic-quality">Quality <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-quality" type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label><input name="heic-lossless" type="checkbox"> Lossless</label></div> <div class="row svelte-1dgh8ms"><label for="heic-preset">Preset</label> <select id="heic-preset"></select></div> <div class="row svelte-1dgh8ms"><label for="heic-tune">Tune</label> <select id="heic-tune"></select></div> <div class="row svelte-1dgh8ms"><label for="heic-tuIntraDepth">TU Intra Depth <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-tuIntraDepth" type="range" min="1" max="4"></div></div> <div><div class="row svelte-1dgh8ms"><label for="heic-complexity">Complexity <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-complexity" type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label for="heic-chroma">Chroma</label> <select id="heic-chroma"></select></div> <div class="row svelte-1dgh8ms"><label><input name="heic-sharpYUV" type="checkbox"> Sharp YUV</label></div> <div class="row svelte-1dgh8ms"><button>Reset</button></div></div></div></div>');function Fl(l,_){vr(_,!0);let s=Nr(_,"value",15);const T={quality:`
    /**
     * Quality-based VBR [0, 100], it will map to \`--crf\` parameter of x265.
     * quality=0   -> crf=50
     * quality=50  -> crf=25
     * quality=100 -> crf=0
     *
     * @default 50
     */
    `,lossless:`
        /**
     * If true, Bypass transform, quant and loop filters.
     *
     * Note: it does not bypass chroma subsampling, you need
     *       also to set \`chroma\` to "444" for exact lossless.
     *
     * @default false
     */
    `,preset:`
        /**
     * Trade off performance for compression efficiency.
     *
     * @default "slow"
     */
    `,tune:`    /**
     * Tune the settings for a particular type of source or situation.
     *
     * @default "ssim"
     */`,tuIntraDepth:`    /**
     * Max TU recursive depth for intra CUsã€‚
     *
     * [1, 4], default 2.
     */`,complexity:`    /**
     * CPU effort, larger value increases encode time.
     * Range is [0, 100], but only changes at a few values.
     *
     * @default 50
     */`,chroma:`    /**
     * Specify chroma subsampling method.
     *
     * @default "420"
     */`,sharpYUV:`    /**
     * Use more accurate and sharper RGB->YUV conversion if needed.
     *
     * @default false
     */`};var k=Ul(),y=p(d(k),2),L=d(y),R=d(L),w=d(R),V=p(d(w)),$=d(V,!0);f(V),f(w),f(R);var c=p(R,2),A=d(c);M(A),f(c);var U=p(c,2),z=d(U),le=d(z);M(le),Oe(),f(z),f(U);var B=p(U,2),g=d(B),q=p(g,2);ht(q,21,()=>kl,pt,(S,G)=>{var J=Rl(),me={},Te=d(J,!0);f(J),He(()=>{me!==(me=E(G))&&(J.value=(J.__value=E(G))==null?"":E(G)),se(Te,E(G))}),Ie(S,J)}),f(q),f(B);var ue=p(B,2),X=d(ue),O=p(X,2);ht(O,21,()=>Sl,pt,(S,G)=>{var J=Wl(),me={},Te=d(J,!0);f(J),He(()=>{me!==(me=E(G))&&(J.value=(J.__value=E(G))==null?"":E(G)),se(Te,E(G))}),Ie(S,J)}),f(O),f(ue);var ke=p(ue,2),be=d(ke),he=p(d(be)),$e=d(he,!0);f(he),f(be),f(ke);var K=p(ke,2),de=d(K);M(de),f(K),f(L);var Q=p(L,2),Ue=d(Q),_e=d(Ue),C=p(d(_e)),W=d(C,!0);f(C),f(_e),f(Ue);var we=p(Ue,2),xe=d(we);M(xe),f(we);var ve=p(we,2),ie=d(ve),te=p(ie,2);ht(te,21,()=>Al,pt,(S,G)=>{var J=Il(),me={},Te=d(J,!0);f(J),He(()=>{me!==(me=E(G))&&(J.value=(J.__value=E(G))==null?"":E(G)),se(Te,E(G))}),Ie(S,J)}),f(te),f(ve);var pe=p(ve,2),re=d(pe),D=d(re);M(D),Oe(),f(re),f(pe);var ne=p(pe,2),Ae=d(ne);Ae.__click=[El,s],f(ne),f(Q),f(y),f(k),He(()=>{I(w,"title",T.quality),se($,s().quality??50),I(z,"title",T.lossless),I(g,"title",T.preset),I(X,"title",T.tune),I(be,"title",T.tuIntraDepth),se($e,s().tuIntraDepth),I(_e,"title",T.complexity),se(W,s().complexity),I(ie,"title",T.chroma),I(re,"title",T.sharpYUV)}),ce(A,()=>s().quality,S=>s(s().quality=S,!0)),Ne(le,()=>s().lossless,S=>s(s().lossless=S,!0)),ot(q,()=>s().preset,S=>s(s().preset=S,!0)),ot(O,()=>s().tune,S=>s(s().tune=S,!0)),ce(de,()=>s().tuIntraDepth,S=>s(s().tuIntraDepth=S,!0)),ce(xe,()=>s().complexity,S=>s(s().complexity=S,!0)),ot(te,()=>s().chroma,S=>s(s().chroma=S,!0)),Ne(D,()=>s().sharpYUV,S=>s(s().sharpYUV=S,!0)),Ie(l,k),cr()}fr(["click"]);function jl(l,_){_({..._i})}var Ll=Me("<option> </option>"),zl=Me("<option> </option>"),Dl=Me(`<div class="card svelte-1c6geua" aria-label="WebP Encoder Options"><div class="grid svelte-1c6geua"><div class="row svelte-1c6geua"><strong>WebP Encoder Options</strong></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input name="webp-lossless" type="checkbox"> Lossless</label> <span class="muted svelte-1c6geua">(may change transparent pixels)</span></div> <div class="row svelte-1c6geua"><div style="flex:1"><label for="webp-nearLossless" class="small svelte-1c6geua">nearLossless: <span class="muted svelte-1c6geua"> </span></label> <input type="range" id="webp-nearLossless" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label for="webp-quality" class="small svelte-1c6geua">quality</label> <input class="num svelte-1c6geua" type="number" min="0" id="webp-quality" max="100"></div></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua" for="webp-alphaQuality">alphaQuality: <span class="muted svelte-1c6geua"> </span></label> <input type="range" id="webp-alphaQuality" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label for="webp-method" class="small svelte-1c6geua">method</label> <input class="num svelte-1c6geua" id="webp-method" type="number" min="0" max="6"></div></div> <div class="row svelte-1c6geua"><label for="webp-snsStrength" class="small svelte-1c6geua"> </label> <input type="range" id="webp-snsStrength" min="0" max="100" class="svelte-1c6geua"></div> <div class="row svelte-1c6geua"><label for="webp-filterStrength" class="small svelte-1c6geua"> </label> <input type="range" id="webp-filterStrength" min="0" max="100" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-filterSharpness" class="small svelte-1c6geua"> </label> <input type="range" id="webp-filterSharpness" min="0" max="7" class="svelte-1c6geua"></div> <div style="width:160px"><label class="svelte-1c6geua"><input name="webp-filterType" type="checkbox"> filterType
                    (strong)</label></div></div> <div class="row svelte-1c6geua"><label for="webp-segments" class="small svelte-1c6geua"> </label> <input id="webp-segments" type="range" min="1" max="4" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-preprocessing" class="svelte-1c6geua">preprocessing</label> <select id="webp-preprocessing"></select></div> <div style="width:160px"><label class="svelte-1c6geua"><input name="webp-autofilter" type="checkbox"> autofilter</label></div></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-partitionLimit" class="small svelte-1c6geua"> </label> <input type="range" id="webp-partitionLimit" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:160px"><label for="webp-pass" class="small svelte-1c6geua"> </label> <input class="num svelte-1c6geua" id="webp-pass" type="number" min="1" max="10"></div></div> <div class="row two svelte-1c6geua"><div><label for="webp-alphaCompression" class="svelte-1c6geua">alphaCompression</label> <select id="webp-alphaCompression"><option>0 (none)</option><option>1 (webp lossless)</option></select></div> <div><label for="webp-alphaFiltering" class="svelte-1c6geua">alphaFiltering</label> <select id="webp-alphaFiltering"></select></div></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input name="webp-sharpYUV" type="checkbox"> sharpYUV</label> <label style="margin-left:12px" class="svelte-1c6geua"><input name="webp-exact" type="checkbox"> exact (preserve
                RGB in transparent)</label></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-targetSize" class="svelte-1c6geua">targetSize (bytes)</label> <input id="webp-targetSize" type="number" min="0"></div> <div style="width:160px"><label for="webp-targetPSNR" class="svelte-1c6geua">targetPSNR (dB)</label> <input class="num svelte-1c6geua" id="webp-targetPSNR" type="number" min="0"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua"><input name="webp-lowMemory" type="checkbox"> lowMemory</label></div> <div><label class="svelte-1c6geua"><input name="webp-emulateJpegSize" type="checkbox"> emulateJpegSize</label></div></div> <div class="actions svelte-1c6geua"><button type="button">Reset</button></div></div></div>`);function Ol(l,_){vr(_,!0);let s=Nr(_,"value",15);const T=Object.values(ur).filter(b=>typeof b=="number").map(b=>({label:Pt[b],v:b})),k=Object.values(Pt).filter(b=>typeof b=="number").map(b=>({label:Pt[b],v:b})),y={lossless:`/**
    * Encode the image without any loss (pixel values of fully transparent area may different).
    *
    * @default false
    */`,nearLossless:`/**
    * Specify the level of near-lossless image preprocessing. This option adjusts pixel values
    * to help compressibility, but has minimal impact on the visual quality.
    * It triggers lossless compression mode automatically.
    *
    * The range is 0 (maximum preprocessing) to 100 (no preprocessing).
    * The typical value is around 60. Note that lossy with -q 100 can at times yield better results.
    *
    * @default 100
    */`,quality:`/**
    * Specify the compression factor for RGB channels between 0 and 100.
    *
    * In case of lossy compression (default), a small factor produces a smaller file
    * with lower quality.  Best quality is achieved by using a value of 100.
    *
    * In case of lossless compression, a small factor enables faster compression speed,
    * but produces a larger file. Maximum compression is achieved by using a value of 100.
    *
    * @default 75
    */`,alphaQuality:`/**
    * Specify the compression factor for alpha compression between 0 and 100.
    * Lossless compression of alpha is achieved using a value of 100, while the lower
    * values result in a lossy compression. The default is 100.
    *
    * @default 100
    */`,method:`/**
    * Specify the compression method to use. This parameter controls the trade off between
    * encoding speed and the compressed file size and quality.
    *
    * Possible values range from 0 to 6. When higher values are used, the encoder will spend more
    * time inspecting additional encoding possibilities and decide on the quality gain.
    *
    * Lower value can result in faster processing at the expense of larger file size and lower quality.
    *
    * @default 4
    */`,snsStrength:`/**
    * Specify the amplitude of the spatial noise shaping. Spatial noise shaping (or sns for short)
    * refers to a general collection of built-in algorithms used to decide which area of the
    * picture should use relatively less bits, and where else to better transfer these bits.
    *
    * The possible range goes from 0 (algorithm is off) to 100 (the maximal effect).
    *
    * @default 50
    */`,filterStrength:`/**
    * Specify the strength of the deblocking filter, between 0 (no filtering) and 100 (maximum filtering).
    * A value of 0 will turn off any filtering. Higher value will increase the strength of the filtering
    * process applied after decoding the picture. The higher the value the smoother the picture will appear.
    *
    * @default 60
    */`,filterSharpness:`/**
    * Specify the sharpness of the filtering (if used). Range is 0 (sharpest) to 7 (least sharp).
    *
    * @default 0
    */`,filterType:`/**
    * Use strong filtering (if filtering is being used thanks to the \`filter_strength\`).
    *
    * @default true
    */`,segments:`/**
    * Change the number of partitions to use during the segmentation of the sns algorithm.
    * Range [1, 4], this option has no effect for methods 3 and up, unless \`low_memory\` is used.
    *
    * @default 4
    */`,preprocessing:`/**
    * Specify some pre-processing steps. Using a value of 2 will trigger quality-dependent pseudo-random
    * dithering during RGBA->YUVA conversion (lossy compression only).
    *
    * @default Preprocess.None
    */`,autofilter:`/**
    * Turns auto-filter on. This algorithm will spend additional time optimizing the
    * filtering strength to reach a well-balanced quality.
    *
    * @default 0
    */`,partitionLimit:`/**
    * Degrade quality by limiting the number of bits used by some macroblocks.
    * Range is 0 (no degradation, the default) to 100 (full degradation).
    * Useful values are usually around 30-70 for moderately large images.
    *
    * In the VP8 format, the so-called control partition has a limit of 512k and is used to store
    * the following information: whether the macroblock is skipped, which segment it belongs to,
    * whether it is coded as intra 4x4 or intra 16x16 mode, and finally the prediction modes to use
    * for each of the sub-blocks.
    *
    * For a very large image, 512k only leaves room for a few bits per 16x16 macroblock.
    * The absolute minimum is 4 bits per macroblock. Skip, segment, and mode information can use up almost
    * all these 4 bits (although the case is unlikely), which is problematic for very large images.
    *
    * \`partitionLimit\` controls how frequently the most bit-costly mode (intra 4x4) will be used.
    * This is useful in case the 512k limit is reached.
    *
    * If using -partition_limit is not enough to meet the 512k constraint, one should use less segments
    * in order to save more header bits per macroblock. See the \`segments\` option.
    *
    * Note the -m and -q options also influence the encoder's decisions and ability to hit this limit.
    *
    * @default 0
    */`,alphaCompression:`/**
    * Specify the algorithm used for alpha compression: 0 or 1.
    * Algorithm 0 denotes no compression, 1 uses WebP lossless format for compression.
    *
    * @default 1
    */`,alphaFiltering:`/**
    * Specify the predictive filtering method for the alpha plane. One of none,
    * fast or best, in increasing complexity and slowness order.
    *
    * Internally, alpha filtering is performed using four possible predictions (none, horizontal, vertical, gradient).
    * The best mode will try each mode in turn and pick the one which gives the smaller size.
    *
    * The fast mode will just try to form an a priori guess without testing all modes.
    *
    * @default AlphaFiltering.Fast
    */`,sharpYUV:`/**
    * Use more accurate and sharper RGB->YUV conversion if needed.
    * Note that this process is slower than the default conversion.
    *
    * @default false
    */`,exact:`/**
    * Preserve RGB values in transparent area. The default is off, to help compressibility.
    */`,targetSize:"/**\n    * Specify a target size (in bytes) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",targetPSNR:"/**\n    * Specify a target PSNR (in dB) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",pass:"/**\n    * Set a maximum number of passes to use during the dichotomy used by `target_size` or `target_PSNR`.\n    *\n    * Maximum value is 10. If options `target_size` or `target_PSNR` were used, but `pass` wasn't specified,\n    * a default value of '6' passes will be used. If `pass` is specified,\n    * but neither `target_size` nor `target_PSNR` are, a target PSNR of 40dB will be used.\n    *\n    * @default 1\n    */",lowMemory:`/**
    * Reduce memory usage of lossy encoding by saving four times the compressed size (typically).
    * This will make the encoding slower and the output slightly different in size and distortion.
    *
    * This flag is only effective for methods 3 and up, and is off by default.
    *
    * Note that leaving this flag off will have some side effects on the bitstream:
    * it forces certain bitstream features like number of partitions (forced to 1).
    *
    * @default false
    */`,emulateJpegSize:`/**
    * Change the internal parameter mapping to better match the expected size of JPEG compression.
    *
    * This flag will generally produce an output file of similar size to its JPEG equivalent
    * (for the same \`quality\` setting), but with less visual distortion.
    *
    * @default false
    */`};var L=Dl(),R=d(L),w=p(d(R),2),V=d(w),$=d(V);M($),Oe(),f(V),Oe(2),f(w);var c=p(w,2),A=d(c),U=d(A),z=p(d(U)),le=d(z,!0);f(z),f(U);var B=p(U,2);M(B),f(A);var g=p(A,2),q=p(d(g),2);M(q),f(g),f(c);var ue=p(c,2),X=d(ue),O=d(X),ke=p(d(O)),be=d(ke,!0);f(ke),f(O);var he=p(O,2);M(he),f(X);var $e=p(X,2),K=p(d($e),2);M(K),f($e),f(ue);var de=p(ue,2),Q=d(de),Ue=d(Q);f(Q);var _e=p(Q,2);M(_e),f(de);var C=p(de,2),W=d(C),we=d(W);f(W);var xe=p(W,2);M(xe),f(C);var ve=p(C,2),ie=d(ve),te=d(ie),pe=d(te);f(te);var re=p(te,2);M(re),f(ie);var D=p(ie,2),ne=d(D),Ae=d(ne);M(Ae),Oe(),f(ne),f(D),f(ve);var S=p(ve,2),G=d(S),J=d(G);f(G);var me=p(G,2);M(me),f(S);var Te=p(S,2),ge=d(Te),ee=p(d(ge),2);ht(ee,21,()=>T,pt,(b,N)=>{var ze=Ll(),Xe={},Ft=d(ze,!0);f(ze),He(()=>{Xe!==(Xe=E(N).v)&&(ze.value=(ze.__value=E(N).v)==null?"":E(N).v),se(Ft,E(N).label)}),Ie(b,ze)}),f(ee),f(ge);var Fe=p(ge,2),ut=d(Fe),_t=d(ut);M(_t),Oe(),f(ut),f(Fe),f(Te);var je=p(Te,2),We=d(je),Ye=d(We),Ke=d(Ye);f(Ye);var Be=p(Ye,2);M(Be),f(We);var st=p(We,2),Qe=d(st),Et=d(Qe);f(Qe);var P=p(Qe,2);M(P),f(st),f(je);var Se=p(je,2),Ce=d(Se),Ve=p(d(Ce),2),Ze=d(Ve);Ze.value=(Ze.__value=0)==null?"":0;var Rt=p(Ze);Rt.value=(Rt.__value=1)==null?"":1,f(Ve),f(Ce);var Wt=p(Ce,2),mt=p(d(Wt),2);ht(mt,21,()=>k,pt,(b,N)=>{var ze=zl(),Xe={},Ft=d(ze,!0);f(ze),He(()=>{Xe!==(Xe=E(N).v)&&(ze.value=(ze.__value=E(N).v)==null?"":E(N).v),se(Ft,E(N).label)}),Ie(b,ze)}),f(mt),f(Wt),f(Se);var gt=p(Se,2),vt=d(gt),It=d(vt);M(It),Oe(),f(vt);var nt=p(vt,2),yt=d(nt);M(yt),Oe(),f(nt),f(gt);var ae=p(gt,2),Z=d(ae),Bt=p(d(Z),2);M(Bt),f(Z);var Ut=p(Z,2),fe=p(d(Ut),2);M(fe),f(Ut),f(ae);var ct=p(ae,2),bt=d(ct),wt=d(bt),qt=d(wt);M(qt),Oe(),f(wt),f(bt);var Tt=p(bt,2),F=d(Tt),Ct=d(F);M(Ct),Oe(),f(F),f(Tt),f(ct);var Gt=p(ct,2),$t=d(Gt);$t.__click=[jl,s],f(Gt),f(R),f(L),He(()=>{I(V,"title",y.lossless),I(A,"title",y.nearLossless),se(le,s().nearLossless),I(g,"title",y.quality),I(X,"title",y.alphaQuality),se(be,s().alphaQuality),I($e,"title",y.method),I(de,"title",y.snsStrength),se(Ue,`snsStrength: ${s().snsStrength??""}`),I(C,"title",y.filterStrength),se(we,`filterStrength: ${s().filterStrength??""}`),I(ie,"title",y.filterSharpness),se(pe,`filterSharpness: ${s().filterSharpness??""}`),I(D,"title",y.filterType),I(S,"title",y.segments),se(J,`segments: ${s().segments??""}`),I(ge,"title",y.preprocessing),I(Fe,"title",y.autofilter),I(We,"title",y.partitionLimit),se(Ke,`partitionLimit: ${s().partitionLimit??""}`),I(st,"title",y.pass),se(Et,`pass: ${s().pass??""}`),I(Ce,"title",y.alphaCompression),I(Wt,"title",y.alphaFiltering),I(vt,"title",y.sharpYUV),I(nt,"title",y.exact),I(Z,"title",y.targetSize),I(Ut,"title",y.targetPSNR),I(wt,"title",y.lowMemory),I(F,"title",y.emulateJpegSize)}),Ne($,()=>s().lossless,b=>s(s().lossless=b,!0)),ce(B,()=>s().nearLossless,b=>s(s().nearLossless=b,!0)),ce(q,()=>s().quality,b=>s(s().quality=b,!0)),ce(he,()=>s().alphaQuality,b=>s(s().alphaQuality=b,!0)),ce(K,()=>s().method,b=>s(s().method=b,!0)),ce(_e,()=>s().snsStrength,b=>s(s().snsStrength=b,!0)),ce(xe,()=>s().filterStrength,b=>s(s().filterStrength=b,!0)),ce(re,()=>s().filterSharpness,b=>s(s().filterSharpness=b,!0)),Ne(Ae,()=>s().filterType,b=>s(s().filterType=b,!0)),ce(me,()=>s().segments,b=>s(s().segments=b,!0)),ot(ee,()=>s().preprocessing,b=>s(s().preprocessing=b,!0)),Ne(_t,()=>s().autofilter,b=>s(s().autofilter=b,!0)),ce(Be,()=>s().partitionLimit,b=>s(s().partitionLimit=b,!0)),ce(P,()=>s().pass,b=>s(s().pass=b,!0)),ot(Ve,()=>s().alphaCompression,b=>s(s().alphaCompression=b,!0)),ot(mt,()=>s().alphaFiltering,b=>s(s().alphaFiltering=b,!0)),Ne(It,()=>s().sharpYUV,b=>s(s().sharpYUV=b,!0)),Ne(yt,()=>s().exact,b=>s(s().exact=b,!0)),ce(Bt,()=>s().targetSize,b=>s(s().targetSize=b,!0)),ce(fe,()=>s().targetPSNR,b=>s(s().targetPSNR=b,!0)),Ne(qt,()=>s().lowMemory,b=>s(s().lowMemory=b,!0)),Ne(Ct,()=>s().emulateJpegSize,b=>s(s().emulateJpegSize=b,!0)),Ie(l,L),cr()}fr(["click"]);function Ml(l,_){_({...hi})}var Vl=Me("<option> </option>"),Nl=Me("<option> </option>"),Hl=Me('<div class="card svelte-1iuoinz" aria-label="AVIF Encoder Options"><div class="title" style="font-weight:600; margin-bottom:8px">AVIF Options</div> <div class="grid svelte-1iuoinz"><div><div class="row svelte-1iuoinz"><label for="avif-quality" class="svelte-1iuoinz">Quality <span class="muted svelte-1iuoinz"> </span></label></div> <div class="row svelte-1iuoinz"><input id="avif-quality" type="range" min="0" max="100" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-qualityAlpha" class="svelte-1iuoinz">Quality Alpha <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-qualityAlpha" class="num svelte-1iuoinz" type="number" min="-1" max="100"></div> <div class="row svelte-1iuoinz"><label for="avif-speed" class="svelte-1iuoinz">Speed <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-speed" type="range" min="-1" max="10" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-subsample" class="svelte-1iuoinz">Subsample</label> <select id="avif-subsample"></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-autoTiling" type="checkbox"> Auto Tiling</label></div> <div class="row svelte-1iuoinz"><label for="avif-tileRowsLog2" class="svelte-1iuoinz">TileRows (log2) <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-tileRowsLog2" type="range" min="0" max="6" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-tileColsLog2" class="svelte-1iuoinz">TileCols (log2) <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-tileColsLog2" type="range" min="0" max="6" class="svelte-1iuoinz"></div></div> <div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-chromaDeltaQ" type="checkbox"> Chroma Delta Q</label></div> <div class="row svelte-1iuoinz"><label for="avif-sharpness" class="svelte-1iuoinz">Sharpness <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-sharpness" type="range" min="0" max="7" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-denoiseLevel" class="svelte-1iuoinz">Denoise Level <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-denoiseLevel" type="range" min="0" max="50" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-tune" class="svelte-1iuoinz">Tune</label> <select id="avif-tune"></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-sharpYUV" type="checkbox"> Sharp YUV</label></div> <div class="actions svelte-1iuoinz"><button type="button">Reset</button></div></div></div></div>');function Yl(l,_){vr(_,!0);let s=Nr(_,"value",15);const T=Object.values(Ht).filter(P=>typeof P=="number").map(P=>({label:Ht[P],v:P})),k=Object.values(Yt).filter(P=>typeof P=="number").map(P=>({label:Yt[P],v:P})),y={quality:`/**
 * [0 - 100], 0 = worst quality, 100 = lossless
 *
 * @default 50
 */`,qualityAlpha:`/**
 * As above, but -1 means 'use quality'
 *
 * @default -1
 */`,speed:`/**
 * Range: [-1, 10], 0 = slowest, 10 = fastest, slower should make for a better quality image in less bytes.
 * A combination of settings are tweaked to simulate this speed range.
 *
 * @default 6
 */`,subsample:`/**
 * Chrome subsampling type.
 *
 * @default YUV420
 */`,autoTiling:"/**\n * If true, ignores `tileRowsLog2` and `tileColsLog2` and automatically chooses suitable tiling values.\n *\n * @default false\n */",tileColsLog2:`/**
 * [0 - 6], Creates 2^n tiles in that dimension
 *
 * @default 0
 */`,chromaDeltaQ:`/**
 * Extra chroma compression, cannot be used in lossless mode.
 *
 * @default false
 */`,sharpness:`/**
 * Bias towards block sharpness in rate-distortion optimization of transform coefficients [0, 7]
 *
 * @default 0
 */`,denoiseLevel:`/**
 * Amount of noise (from 0 = don't denoise, to 50)
 *
 * @default 0
 */`,tune:`/**
 * Distortion metric tuned with.
 *
 * @default AVIFTune.Auto
 */`,sharpYUV:`/**
 * Use libsharpyuv for RGB->YUV conversion if needed.
 *
 * @default false
 */`};var L=Hl(),R=p(d(L),2),w=d(R),V=d(w),$=d(V),c=p(d($)),A=d(c,!0);f(c),f($),f(V);var U=p(V,2),z=d(U);M(z),f(U);var le=p(U,2),B=d(le),g=p(d(B)),q=d(g,!0);f(g),f(B);var ue=p(B,2);M(ue),f(le);var X=p(le,2),O=d(X),ke=p(d(O)),be=d(ke,!0);f(ke),f(O);var he=p(O,2);M(he),f(X);var $e=p(X,2),K=p(d($e),2);ht(K,21,()=>T,pt,(P,Se)=>{var Ce=Vl(),Ve={},Ze=d(Ce,!0);f(Ce),He(()=>{Ve!==(Ve=E(Se).v)&&(Ce.value=(Ce.__value=E(Se).v)==null?"":E(Se).v),se(Ze,E(Se).label)}),Ie(P,Ce)}),f(K),f($e);var de=p($e,2),Q=d(de),Ue=d(Q);M(Ue),Oe(),f(Q),f(de);var _e=p(de,2),C=d(_e),W=p(d(C)),we=d(W,!0);f(W),f(C);var xe=p(C,2);M(xe),f(_e);var ve=p(_e,2),ie=d(ve),te=p(d(ie)),pe=d(te,!0);f(te),f(ie);var re=p(ie,2);M(re),f(ve),f(w);var D=p(w,2),ne=d(D),Ae=d(ne),S=d(Ae);M(S),Oe(),f(Ae),f(ne);var G=p(ne,2),J=d(G),me=p(d(J)),Te=d(me,!0);f(me),f(J);var ge=p(J,2);M(ge),f(G);var ee=p(G,2),Fe=d(ee),ut=p(d(Fe)),_t=d(ut,!0);f(ut),f(Fe);var je=p(Fe,2);M(je),f(ee);var We=p(ee,2),Ye=p(d(We),2);ht(Ye,21,()=>k,pt,(P,Se)=>{var Ce=Nl(),Ve={},Ze=d(Ce,!0);f(Ce),He(()=>{Ve!==(Ve=E(Se).v)&&(Ce.value=(Ce.__value=E(Se).v)==null?"":E(Se).v),se(Ze,E(Se).label)}),Ie(P,Ce)}),f(Ye),f(We);var Ke=p(We,2),Be=d(Ke),st=d(Be);M(st),Oe(),f(Be),f(Ke);var Qe=p(Ke,2),Et=d(Qe);Et.__click=[Ml,s],f(Qe),f(D),f(R),f(L),He(()=>{I(V,"title",y.quality),se(A,s().quality),I(le,"title",y.qualityAlpha),se(q,s().qualityAlpha),I(X,"title",y.speed),se(be,s().speed),I($e,"title",y.subsample),I(de,"title",y.autoTiling),I(_e,"title",y.tileColsLog2),se(we,s().tileRowsLog2),I(ve,"title",y.tileColsLog2),se(pe,s().tileColsLog2),I(ne,"title",y.chromaDeltaQ),I(G,"title",y.sharpness),se(Te,s().sharpness),I(ee,"title",y.denoiseLevel),se(_t,s().denoiseLevel),I(We,"title",y.tune),I(Ke,"title",y.sharpYUV)}),ce(z,()=>s().quality,P=>s(s().quality=P,!0)),ce(ue,()=>s().qualityAlpha,P=>s(s().qualityAlpha=P,!0)),ce(he,()=>s().speed,P=>s(s().speed=P,!0)),ot(K,()=>s().subsample,P=>s(s().subsample=P,!0)),Ne(Ue,()=>s().autoTiling,P=>s(s().autoTiling=P,!0)),ce(xe,()=>s().tileRowsLog2,P=>s(s().tileRowsLog2=P,!0)),ce(re,()=>s().tileColsLog2,P=>s(s().tileColsLog2=P,!0)),Ne(S,()=>s().chromaDeltaQ,P=>s(s().chromaDeltaQ=P,!0)),ce(ge,()=>s().sharpness,P=>s(s().sharpness=P,!0)),ce(je,()=>s().denoiseLevel,P=>s(s().denoiseLevel=P,!0)),ot(Ye,()=>s().tune,P=>s(s().tune=P,!0)),Ne(st,()=>s().sharpYUV,P=>s(s().sharpYUV=P,!0)),Ie(l,L),cr()}fr(["click"]);const Bl="icodec_encoder_options";async function ql(l,_,s){const T=Array.from(l.currentTarget.files??[]),k=async function*(){for(const y of T)yield{file:y,fullPath:y.name}}();try{St(_,!0),await s(k)}finally{St(_,!1)}}function Gl(l,_){window.localStorage.setItem("icodec_encoder_options",JSON.stringify(fi(E(_))))}var Jl=Me('<meta name="description" content="Converter for heif">'),Kl=Me(`<div class="section svelte-l4mzdf">crossOriginIsolation not validated, HEIC encoding won't work, plz refresh the page</div>`),Ql=Me('<div class="container svelte-l4mzdf"><div class="section svelte-l4mzdf"><!></div> <!> <div class="drop-zone svelte-l4mzdf" role="region" aria-label="file-drop-zone"></div> <div class="section svelte-l4mzdf"><div class="field svelte-l4mzdf"><label for="icodec-images">images</label> <input type="file" id="icodec-images" multiple accept="image/png, image/jpeg"></div></div> <div class="section svelte-l4mzdf"><details class="svelte-l4mzdf"><summary class="svelte-l4mzdf">WEBP</summary> <div class="body svelte-l4mzdf"><!></div></details> <details class="svelte-l4mzdf"><summary class="svelte-l4mzdf">HEIC</summary> <div class="body svelte-l4mzdf"><!></div></details> <details class="svelte-l4mzdf"><summary class="svelte-l4mzdf">AVIF</summary> <div class="body svelte-l4mzdf"><!></div></details></div> <div class="section svelte-l4mzdf"><button class="svelte-l4mzdf">save config in local</button></div></div>');function ho(l,_){vr(_,!0);let s=Fr(!1),T=Fr(pl({webp:{..._i},avif:{...hi},heic:{...mi}}));ai(()=>{let C=window.localStorage.getItem(Bl);C&&St(T,JSON.parse(C),!0)});let k=Fr(!1);ai(()=>{St(k,window.crossOriginIsolated,!0)});async function y(C){let W=new Worker(si,{type:"module"});const we=4,xe=[];xe.push(W);const ve=[];ve.push(jr(W));const ie=[];jr(W);const te=new gl,pe=te.folder("heic"),re=te.folder("webp"),D=te.folder("avif");let ne=[],Ae=0;try{for await(const S of C){Ae+=1;const G=Ae;if(ie.length>=we){const Te=await Promise.race(ie.map(ee=>ee.promise)),ge=ie.findIndex(ee=>ee.id===Te.idx);ge!=-1&&ie.splice(ge,1),ve.push(Te.worker)}else ie.length<we&&ve.length===0&&(W=new Worker(si,{type:"module"}),xe.push(W),ve.push(jr(W)));let J=ve.pop();const me=Promise.try(async()=>{let Te=S.file;try{let ge=await createImageBitmap(Te);const ee=await J.encodeBitmap(ml(ge,[ge]),fi(E(T))),Fe=S.fullPath.replace(/\.[^/.]+$/,"");ee.avif.status==="fulfilled"?D==null||D.file(Fe+".avif",ee.avif.value):(console.error(ee.avif.reason),ne.push({type:"avif",reason:ee.avif.reason,fileName:S.fullPath})),ee.heic.status==="fulfilled"?pe==null||pe.file(Fe+".heic",ee.heic.value):(console.error(ee.heic.reason),ne.push({type:"heic",reason:ee.heic.reason,fileName:S.fullPath})),ee.webp.status==="fulfilled"?re==null||re.file(Fe+".webp",ee.webp.value):(console.error(ee.webp.reason),ne.push({type:"webp",reason:ee.webp.reason,fileName:S.fullPath}))}catch(ge){console.error(ge),ne.push({reason:ge,fileName:S.fullPath})}return{idx:G,worker:J}});ie.push({id:G,promise:me})}await Promise.allSettled(ie.map(S=>S.promise))}finally{for(const S of xe)S.terminate()}if(Ae!=0){const S=await te.generateAsync({type:"blob"});yl(S,"converted_images.zip")}ne.length>0&&alert(JSON.stringify(ne))}function L(C){var W;!E(s)&&((W=C.dataTransfer)==null?void 0:W.dropEffect)==="copy"&&C.dataTransfer.types.length>0&&C.dataTransfer.types[0]==="Files"&&C.preventDefault()}async function R(C){var ie;const W=(ie=C.dataTransfer)==null?void 0:ie.items;if(!W||W.length==0||E(s))return;C.preventDefault();let we=[];const xe=async function*(){for(let te=0;te<W.length;te++){const re=W[te].webkitGetAsEntry();re&&(re.isDirectory?we.push(re):re.isFile&&(yield re))}for(;we.length>0;){let pe=we.pop().createReader();const re=await new Promise((D,ne)=>{pe.readEntries(D,ne)});for(const D of re){const ne=D.isDirectory;D.isFile===!0?yield D:ne===!0&&we.push(D)}}}(),ve=async function*(){for await(const te of xe){const pe=await new Promise((re,D)=>{te.file(re,D)});pe.type.startsWith("image/")&&(yield{fullPath:te.fullPath.substring(1),file:pe})}}();St(s,!0);try{await y(ve)}finally{St(s,!1)}}var w=Ql();_l(C=>{var W=Jl();hl.title="About",Ie(C,W)});var V=d(w),$=d(V);{var c=C=>{var W=Qa("Processing");Ie(C,W)},A=C=>{var W=Qa("âš ï¸ This is pretty slow");Ie(C,W)};ri($,C=>{E(s)?C(c):C(A,!1)})}f(V);var U=p(V,2);{var z=C=>{var W=Kl();Ie(C,W)};ri(U,C=>{E(k)||C(z)})}var le=p(U,2),B=p(le,2),g=d(B),q=p(d(g),2);q.__change=[ql,s,y],f(g),f(B);var ue=p(B,2),X=d(ue),O=p(d(X),2),ke=d(O);Ol(ke,{get value(){return E(T).webp},set value(C){E(T).webp=C}}),f(O),f(X);var be=p(X,2),he=p(d(be),2),$e=d(he);Fl($e,{get value(){return E(T).heic},set value(C){E(T).heic=C}}),f(he),f(be);var K=p(be,2),de=p(d(K),2),Q=d(de);Yl(Q,{get value(){return E(T).avif},set value(C){E(T).avif=C}}),f(de),f(K),f(ue);var Ue=p(ue,2),_e=d(Ue);_e.__click=[Gl,T],f(Ue),f(w),He(()=>{q.disabled=E(s),_e.disabled=E(s)}),ti("drop",le,R),ti("dragover",le,L),Ie(l,w),cr()}fr(["change","click"]);export{ho as component};
