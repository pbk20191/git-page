import{t as C,a as E}from"../chunks/Vtcb0IN9.js";import"../chunks/D6_ci8D8.js";import{z as F,a4 as H,h as I,a5 as P,p as Q,B as a,a as Z,$ as G,c as m,s as p,a6 as z,r as f,a7 as k,a8 as g,t as A}from"../chunks/B5YdkP5L.js";import{s as K}from"../chunks/S9dd4ZV-.js";import{i as B}from"../chunks/D9Wxw-7o.js";import{h as T}from"../chunks/TcEYv9AF.js";import{r as U,s as X}from"../chunks/DXwZSGSS.js";import{l as D,e as ee}from"../chunks/BJE6mK62.js";import{i as ae}from"../chunks/8k2UvVOC.js";import{w as re,J as te}from"../chunks/YPpMm3tu.js";function oe(e,r,c=r){var v=P();D(e,"input",n=>{var i=n?e.defaultValue:e.value;if(i=S(e)?V(i):i,c(i),v&&i!==(i=r())){var d=e.selectionStart,w=e.selectionEnd;e.value=i??"",w!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(w,e.value.length))}}),(I&&e.defaultValue!==e.value||F(r)==null&&e.value)&&c(S(e)?V(e.value):e.value),H(()=>{var n=r();S(e)&&n===V(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function R(e,r,c=r){D(e,"change",v=>{var n=v?e.defaultChecked:e.checked;c(n)}),(I&&e.defaultChecked!==e.checked||F(r)==null)&&c(e.checked),H(()=>{var v=r();e.checked=!!v})}function S(e){var r=e.type;return r==="number"||r==="range"}function V(e){return e===""?null:+e}const le=""+new URL("../workers/heic-CY6iNvqH.js",import.meta.url).href;var ne=C('<meta name="description" content="Converter for heif">'),se=C('<div class="encoding-options"><label>Quality: <input type="range" min="0" max="100"> <span> </span></label> <label><input type="checkbox"> Lossless</label> <label><input type="checkbox"> SharpYUV</label></div>'),ie=C('<p><a download="converted.zip">Download zip</a></p>'),ce=C('<div class="text-column"><label><input type="checkbox"> 기본 옵션 사용</label> <!>  <br> <input type="file" multiple accept="image/*"> <!></div>');function ke(e,r){Q(r,!1);let c=k(!0),v=k(80),n=k(!1),i=k(!1),d=k(void 0);function w(){if(!a(c))return{quality:a(v),lossless:a(n),sharpYUV:a(i)}}async function J(t){const s=Array.from(t.target.files??[]);if(!s.length)return;const u=new Worker(le,{type:"module"}),b=re(u),x=s.map(async o=>{try{if(o.type==="image/heic"||o.type==="image/heif")return console.warn(`Skipping ${o.name} as it is already in HEIC format.`),o;const l=await b.jsEncodeImages(o,w());if(l.error)throw console.error(`Error encoding ${o.name}`,l.error),l.error;const h=o.name.replace(/\.[^/.]+$/,"")+".heic";return new File([l.data],h,{type:"image/heic"})}catch(l){throw console.error(`Error processing file ${o.name}:`,l),l}});try{const o=new te;await Promise.all(x).then(h=>{h.forEach(_=>{_ instanceof File&&o.file(_.name,_)})});const l=await o.generateAsync({type:"blob"});a(d)&&URL.revokeObjectURL(a(d)),g(d,URL.createObjectURL(l))}finally{u.terminate()}}ae();var L=ce();T(t=>{var s=ne();G.title="About",E(t,s)});var $=m(L),j=m($);U(j),z(),f($);var O=p($,2);{var M=t=>{var s=se(),u=m(s),b=p(m(u));U(b);var x=p(b,2),o=m(x,!0);f(x),f(u);var l=p(u,2),h=m(l);U(h),z(),f(l);var _=p(l,2),q=m(_);U(q),z(),f(_),f(s),A(()=>K(o,a(v))),oe(b,()=>a(v),y=>g(v,y)),R(h,()=>a(n),y=>g(n,y)),R(q,()=>a(i),y=>g(i,y)),E(t,s)};B(O,t=>{a(c)||t(M)})}var Y=p(O,4),N=p(Y,2);{var W=t=>{var s=ie(),u=m(s);f(s),A(()=>X(u,"href",a(d))),E(t,s)};B(N,t=>{a(d)&&t(W)})}f(L),R(j,()=>a(c),t=>g(c,t)),ee("change",Y,J),E(e,L),Z()}export{ke as component};
