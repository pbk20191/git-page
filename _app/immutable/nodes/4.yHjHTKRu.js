var zn=Object.defineProperty;var Nn=(n,h,s)=>h in n?zn(n,h,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[h]=s;var At=(n,h,s)=>Nn(n,typeof h!="symbol"?h+"":h,s);import{t as Le,a as Fe}from"../chunks/C40Lt10h.js";import{ak as ii,I as Hn,az as Yn,o as Bn,b as qn,i as Wr,h as dt,v as Gn,d as Jn,C as I,Y as Kn,e as Qn,g as Ka,j as Ur,n as zt,a7 as Zn,k as si,l as ni,m as Xn,aA as Ir,ab as li,ad as Qa,aB as el,O as tl,aC as Za,aD as rl,aE as al,aa as il,aF as sl,au as nl,aG as ll,aH as ol,u as ul,p as vr,c as d,t as Je,a as cr,s as p,r as f,M as We,aw as vl,R as Xa,$ as cl,P as fl}from"../chunks/DDedSiM2.js";import{d as fr}from"../chunks/B0CZYdza.js";import{h as dl}from"../chunks/FuLw09dS.js";import{o as pl}from"../chunks/C-CQWCQ7.js";import{w as hl,t as _l}from"../chunks/4eif3qM-.js";import{a as se,b as je,J as ml}from"../chunks/Cg_NRMVG.js";import{b as ot,s as gl}from"../chunks/Bk6w-FME.js";import{s as X}from"../chunks/BFNVwhcV.js";import{r as D,s as P}from"../chunks/B1B_G-Wy.js";import{p as zr}from"../chunks/BWdiOV1v.js";const yl=[];function oi(n,h=!1){return or(n,new Map,"",yl)}function or(n,h,s,T,$=null){if(typeof n=="object"&&n!==null){var g=h.get(n);if(g!==void 0)return g;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(ii(n)){var C=Array(n.length);h.set(n,C),$!==null&&h.set($,C);for(var x=0;x<n.length;x+=1){var b=n[x];x in n&&(C[x]=or(b,h,s,T))}return C}if(Hn(n)===Yn){C={},h.set(n,C),$!==null&&h.set($,C);for(var O in n)C[O]=or(n[O],h,s,T);return C}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return or(n.toJSON(),h,s,T,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function pt(n,h){return h}function bl(n,h,s,T){for(var $=[],g=h.length,C=0;C<g;C++)al(h[C].e,$,!0);var x=g>0&&$.length===0&&s!==null;if(x){var b=s.parentNode;il(b),b.append(s),T.clear(),lt(n,h[0].prev,h[g-1].next)}sl($,()=>{for(var O=0;O<g;O++){var k=h[O];x||(T.delete(k.k),lt(n,k.prev,k.next)),nl(k.e,!x)}})}function ht(n,h,s,T,$,g=null){var C=n,x={flags:h,items:new Map,first:null};{var b=n;C=dt?Wr(Gn(b)):b.appendChild(Bn())}dt&&Jn();var O=null,k=!1,c=Kn(()=>{var A=s();return ii(A)?A:A==null?[]:li(A)});qn(()=>{var A=I(c),R=A.length;if(k&&R===0)return;k=R===0;let F=!1;if(dt){var re=C.data===Qn;re!==(R===0)&&(C=Ka(),Wr(C),Ur(!1),F=!0)}if(dt){for(var q=null,y,Y=0;Y<R;Y++){if(zt.nodeType===8&&zt.data===Zn){C=zt,F=!0,Ur(!1);break}var oe=A[Y],j=T(oe,Y);y=ui(zt,x,q,null,oe,j,Y,$,h,s),x.items.set(j,y),q=y}R>0&&Wr(Ka())}dt||wl(A,x,C,$,h,T,s),g!==null&&(R===0?O?si(O):O=ni(()=>g(C)):O!==null&&Xn(O,()=>{O=null})),F&&Ur(!0),I(c)}),dt&&(C=zt)}function wl(n,h,s,T,$,g,C){var x=n.length,b=h.items,O=h.first,k=O,c,A=null,R=[],F=[],re,q,y,Y;for(Y=0;Y<x;Y+=1){if(re=n[Y],q=g(re,Y),y=b.get(q),y===void 0){var oe=k?k.e.nodes_start:s;A=ui(oe,h,A,A===null?h.first:A.next,re,q,Y,T,$,C),b.set(q,A),R=[],F=[],k=A.next;continue}if(Tl(y,re,Y),(y.e.f&Ir)!==0&&si(y.e),y!==k){if(c!==void 0&&c.has(y)){if(R.length<F.length){var j=F[0],L;A=j.prev;var he=R[0],ve=R[R.length-1];for(L=0;L<R.length;L+=1)ei(R[L],j,s);for(L=0;L<F.length;L+=1)c.delete(F[L]);lt(h,he.prev,ve.next),lt(h,A,he),lt(h,ve,j),k=j,A=ve,Y-=1,R=[],F=[]}else c.delete(y),ei(y,k,s),lt(h,y.prev,y.next),lt(h,y,A===null?h.first:A.next),lt(h,A,y),A=y;continue}for(R=[],F=[];k!==null&&k.k!==q;)(k.e.f&Ir)===0&&(c??(c=new Set)).add(k),F.push(k),k=k.next;if(k===null)continue;y=k}R.push(y),A=y,k=y.next}if(k!==null||c!==void 0){for(var ue=c===void 0?[]:li(c);k!==null;)(k.e.f&Ir)===0&&ue.push(k),k=k.next;var ce=ue.length;if(ce>0){var B=x===0?s:null;bl(h,ue,B,b)}}Qa.first=h.first&&h.first.e,Qa.last=A&&A.e}function Tl(n,h,s,T){el(n.v,h),n.i=s}function ui(n,h,s,T,$,g,C,x,b,O){var k=(b&ll)!==0,c=(b&ol)===0,A=k?c?tl($):Za($):$,R=(b&rl)===0?C:Za(C),F={i:R,v:A,k:g,a:null,e:null,prev:s,next:T};try{return F.e=ni(()=>x(n,A,R,O),dt),F.e.prev=s&&s.e,F.e.next=T&&T.e,s===null?h.first=F:(s.next=F,s.e.next=F.e),T!==null&&(T.prev=F,T.e.prev=F.e),F}finally{}}function ei(n,h,s){for(var T=n.next?n.next.e.nodes_start:s,$=h?h.e.nodes_start:s,g=n.e.nodes_start;g!==T;){var C=ul(g);$.before(g),g=C}}function lt(n,h,s){h===null?n.first=s:(h.next=s,h.e.next=s&&s.e),s!==null&&(s.prev=h,s.e.prev=h&&h.e)}const $l=""+new URL("../workers/icodecs-Dx2CCgwP.js",import.meta.url).href;class vi{constructor(h,s,T,$=8){At(this,"data");At(this,"width");At(this,"height");At(this,"depth");this.data=h,this.width=s,this.height=T,this.depth=$}}vi.prototype.colorSpace="srgb";var Nt;(function(n){n[n.YUV444=1]="YUV444",n[n.YUV422=2]="YUV422",n[n.YUV420=3]="YUV420",n[n.YUV400=4]="YUV400"})(Nt||(Nt={}));var Ht;(function(n){n[n.Auto=0]="Auto",n[n.PSNR=1]="PSNR",n[n.SSIM=2]="SSIM"})(Ht||(Ht={}));const Fr={quality:50,qualityAlpha:-1,speed:6,subsample:Nt.YUV420,autoTiling:!1,tileColsLog2:0,tileRowsLog2:0,chromaDeltaQ:!1,sharpness:0,denoiseLevel:0,tune:Ht.Auto,sharpYUV:!1},Cl=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Cl.decode();const jr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};jr.encodeInto;var Lr;(function(n){n[n.GRAYSCALE=1]="GRAYSCALE",n[n.RGB=2]="RGB",n[n.YCbCr=3]="YCbCr"})(Lr||(Lr={}));var Or;(function(n){n[n.JPEG_Annex_K=0]="JPEG_Annex_K",n[n.Flat=1]="Flat",n[n.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",n[n.ImageMagick=3]="ImageMagick",n[n.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",n[n.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",n[n.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",n[n.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",n[n.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Or||(Or={}));Lr.YCbCr,Or.ImageMagick;var ti;(function(n){n[n.Default=-1]="Default",n[n.False=0]="False",n[n.True=1]="True"})(ti||(ti={}));var Dr;(function(n){n[n.Default=-1]="Default",n[n.Zero=0]="Zero",n[n.Left=1]="Left",n[n.Top=2]="Top",n[n.Average0=3]="Average0",n[n.Select=4]="Select",n[n.Gradient=5]="Gradient",n[n.Weighted=6]="Weighted",n[n.TopRight=7]="TopRight",n[n.TopLeft=8]="TopLeft",n[n.LeftLeft=9]="LeftLeft",n[n.Average1=10]="Average1",n[n.Average2=11]="Average2",n[n.Average3=12]="Average3",n[n.Average4=13]="Average4",n[n.Best=14]="Best",n[n.Variable=15]="Variable"})(Dr||(Dr={}));Dr.Default;var ur;(function(n){n[n.None=0]="None",n[n.SegmentSmooth=1]="SegmentSmooth",n[n.Dithering=2]="Dithering"})(ur||(ur={}));var St;(function(n){n[n.None=0]="None",n[n.Fast=1]="Fast",n[n.Best=2]="Best"})(St||(St={}));const ci={lossless:!1,nearLossless:100,quality:75,targetSize:0,targetPSNR:0,method:4,snsStrength:50,filterStrength:60,filterSharpness:0,filterType:!0,segments:4,pass:1,sharpYUV:!1,preprocessing:ur.None,autofilter:!1,partitionLimit:0,alphaCompression:1,alphaFiltering:St.Fast,alphaQuality:100,exact:!1,emulateJpegSize:!1,lowMemory:!1,partitions:0,showCompressed:0,imageHint:0,threadLevel:0,useDeltaPalette:0};var xl=(()=>{var n=import.meta.url;return function(h={}){var Ya;var s;function T(){return G.buffer!=M.buffer&&ie(),M}function $(){return G.buffer!=M.buffer&&ie(),we}function g(){return G.buffer!=M.buffer&&ie(),Oe}function C(){return G.buffer!=M.buffer&&ie(),Te}function x(){return G.buffer!=M.buffer&&ie(),$e}function b(){return G.buffer!=M.buffer&&ie(),Ae}function O(){return G.buffer!=M.buffer&&ie(),Me}function k(){return G.buffer!=M.buffer&&ie(),Ue}var c=h,A,R,F=new Promise((e,t)=>{A=e,R=t}),re=typeof window=="object",q=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var y=q&&((Ya=self.name)==null?void 0:Ya.startsWith("em-pthread")),Y=Object.assign({},c),oe="./this.program",j=(e,t)=>{throw t},L="";function he(e){return c.locateFile?c.locateFile(e,L):L+e}var ve,ue;(re||q)&&(q?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),n&&(L=n),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),q&&(ue=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ve=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var ce=c.print||console.log.bind(console),B=c.printErr||console.error.bind(console);Object.assign(c,Y),Y=null,c.arguments&&c.arguments,c.thisProgram&&(oe=c.thisProgram);var ee=c.wasmBinary,G,ke,ae=!1,ne,M,we,Oe,Te,$e,Ae,Me,Ue;function ie(){var e=G.buffer;c.HEAP8=M=new Int8Array(e),c.HEAP16=Oe=new Int16Array(e),c.HEAPU8=we=new Uint8Array(e),c.HEAPU16=Te=new Uint16Array(e),c.HEAP32=$e=new Int32Array(e),c.HEAPU32=Ae=new Uint32Array(e),c.HEAPF32=Me=new Float32Array(e),c.HEAPF64=Ue=new Float64Array(e)}if(y){let e=function(...a){var i=a.join(" ");console.error(i)},t=function(...a){var i=a.join(" ");postMessage({cmd:"alert",text:i,threadId:nr()})},r=function(a){try{var i=a.data,l=i.cmd;if(l==="load"){let u=[];self.onmessage=o=>u.push(o),self.startWorker=o=>{postMessage({cmd:"loaded"});for(let v of u)r(v);self.onmessage=r};for(const o of i.handlers)(!c[o]||c[o].proxy)&&(c[o]=(...v)=>{postMessage({cmd:"callHandler",handler:o,args:v})},o=="print"&&(ce=c[o]),o=="printErr"&&(B=c[o]));G=i.wasmMemory,ie(),Se(i.wasmModule)}else if(l==="run"){qt(i.pthread_ptr),Er(i.pthread_ptr,0,0,1,0,0),W.receiveObjectTransfer(i),W.threadInitTLS(),Cr(i.pthread_ptr),De||(ka(),De=!0);try{Pe(i.start_routine,i.arg)}catch(u){if(u!="unwind")throw u}}else i.target==="setimmediate"||(l==="checkMailbox"?De&&ir():l&&(B(`worker: received unknown command ${l}`),B(i)))}catch(u){throw Aa(),u}};var Se,De=!1;c.printErr||(B=e),self.alert=t,c.instantiateWasm=(a,i)=>new Promise((l,u)=>{Se=o=>{var v=new WebAssembly.Instance(o,Pt());i(v),l()}}),self.onunhandledrejection=a=>{throw a.reason||a},self.onmessage=r}if(!y){if(c.wasmMemory)G=c.wasmMemory;else{var H=c.INITIAL_MEMORY||16777216;G=new WebAssembly.Memory({initial:H/65536,maximum:32768,shared:!0})}ie()}var K=[],Q=[],pe=[];function Ee(){var e=c.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Ne)),$t(K)}function Ve(){y||$t(Q)}function ze(){if(!y){var e=c.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(_t)),$t(pe)}}function Ne(e){K.unshift(e)}function ut(e){Q.unshift(e)}function _t(e){pe.unshift(e)}var Ce=0,be=null;function He(e){var t;Ce++,(t=c.monitorRunDependencies)==null||t.call(c,Ce)}function Ke(e){var r;if(Ce--,(r=c.monitorRunDependencies)==null||r.call(c,Ce),Ce==0&&be){var t=be;be=null,t()}}function Ye(e){var r;(r=c.onAbort)==null||r.call(c,e),e="Aborted("+e+")",B(e),ae=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw R(t),t}var st="data:application/octet-stream;base64,",Qe=e=>e.startsWith(st);function Et(){if(c.locateFile){var e="heic-enc.wasm";return Qe(e)?e:he(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var E;function _e(e){if(e==E&&ee)return new Uint8Array(ee);if(ue)return ue(e);throw"both async and sync fetching of the wasm failed"}function de(e){return ee?Promise.resolve().then(()=>_e(e)):ve(e).then(t=>new Uint8Array(t),()=>_e(e))}function Ie(e,t,r){return de(e).then(a=>WebAssembly.instantiate(a,t)).then(r,a=>{B(`failed to asynchronously prepare wasm: ${a}`),Ye(a)})}function Ze(e,t,r,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Qe(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var l=WebAssembly.instantiateStreaming(i,r);return l.then(a,function(u){return B(`wasm streaming compile failed: ${u}`),B("falling back to ArrayBuffer instantiation"),Ie(t,r,a)})}):Ie(t,r,a)}function Pt(){return yn(),{a:Ca}}function Rt(){var e=Pt();function t(a,i){return U=a.exports,It(U.Wa),w=U.Va,ut(U.Pa),ke=i,Ke(),U}He();function r(a){t(a.instance,a.module)}if(c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(a){B(`Module.instantiateWasm callback failed with error: ${a}`),R(a)}return E??(E=Et()),Ze(ee,E,e,r).catch(R),{}}function mt(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var gt=e=>{e.terminate(),e.onmessage=t=>{}},vt=e=>{var t=W.pthreads[e];W.returnWorkerToPool(t)},Wt=e=>{var t=W.getNewWorker();if(!t)return 6;W.runningWorkers.push(t),W.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.postMessage(r,e.transferList),0},nt=0,yt=()=>Xe||nt>0,Z=()=>Fa(),J=e=>Ia(e),Yt=e=>ja(e),Ut=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN,le=(e,t,r,...a)=>{for(var i=a.length,l=Z(),u=Yt(i*8),o=u>>3,v=0;v<a.length;v++){var _=a[v];k()[o+v]=_}var m=Sa(e,t,i,u,r);return J(l),m};function ct(e){var t;if(y)return le(0,0,1,e);ne=e,yt()||(W.terminateAllThreads(),(t=c.onExit)==null||t.call(c,e),ae=!0),j(e,new mt(e))}var bt=e=>{if(e instanceof mt||e=="unwind")return ne;j(1,e)};function wt(e){if(y)return le(1,0,0,e);Tt(e)}var Bt=(e,t)=>{if(ne=e,y)throw wt(e),"unwind";ct(e)},Tt=Bt,W={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){y||W.initMainThread()},initMainThread(){for(var e=2;e--;)W.allocateUnusedWorker();Ne(()=>{He(),W.loadWasmModuleToAllWorkers(()=>Ke())})},terminateAllThreads:()=>{for(var e of W.runningWorkers)gt(e);for(var e of W.unusedWorkers)gt(e);W.unusedWorkers=[],W.runningWorkers=[],W.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete W.pthreads[t],W.unusedWorkers.push(e),W.runningWorkers.splice(W.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ea(t)},receiveObjectTransfer(e){},threadInitTLS(){W.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(t=>{e.onmessage=l=>{var u=l.data,o=u.cmd;if(u.targetThread&&u.targetThread!=nr()){var v=W.pthreads[u.targetThread];v?v.postMessage(u,u.transferList):B(`Internal error! Worker sent a message "${o}" to target pthread ${u.targetThread}, but that thread no longer exists!`);return}o==="checkMailbox"?ir():o==="spawnThread"?Wt(u):o==="cleanupThread"?vt(u.thread):o==="loaded"?(e.loaded=!0,t(e)):o==="alert"?alert(`Thread ${u.threadId}: ${u.text}`):u.target==="setimmediate"?e.postMessage(u):o==="callHandler"?c[u.handler](...u.args):o&&B(`worker sent an unknown command ${o}`)},e.onerror=l=>{var u="worker sent an error!";throw B(`${u} ${l.filename}:${l.lineno}: ${l.message}`),l};var r=[],a=["onExit","onAbort","print","printErr"];for(var i of a)c.propertyIsEnumerable(i)&&r.push(i);e.postMessage({cmd:"load",handlers:r,wasmMemory:G,wasmModule:ke})}),loadWasmModuleToAllWorkers(e){if(y)return e();Promise.all(W.unusedWorkers.map(W.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),W.unusedWorkers.push(e)},getNewWorker(){return W.unusedWorkers.length==0&&(W.allocateUnusedWorker(),W.loadWasmModuleToWorker(W.unusedWorkers[0])),W.unusedWorkers.pop()}},$t=e=>{e.forEach(t=>t(c))},qt=e=>{ie();var t=b()[e+52>>2],r=b()[e+56>>2],a=t-r;Ua(t,a),J(t)},Ct=[],w,V=e=>{var t=Ct[e];return t||(e>=Ct.length&&(Ct.length=e+1),Ct[e]=t=w.get(e)),t},Pe=(e,t)=>{nt=0,Xe=0;var r=V(e)(t);function a(i){yt()?ne=i:Pr(i)}a(r)},Xe=c.noExitRuntime||!0,It=e=>W.tlsInitFunctions.push(e),Nr=new TextDecoder,Gt=(e,t)=>{if(!e)return"";for(var r=e+t,a=e;!(a>=r)&&$()[a];)++a;return Nr.decode($().slice(e,a))},di=(e,t,r,a)=>{Ye(`Assertion failed: ${Gt(e)}, at: `+[t?Gt(t):"unknown filename",r,a?Gt(a):"unknown function"])},Jt=[],Kt=0,pi=e=>{var t=new dr(e);return t.get_caught()||(t.set_caught(!0),Kt--),t.set_rethrown(!1),Jt.push(t),Oa(e),Ma(e)},et=0,hi=()=>{te(0,0);var e=Jt.pop();La(e.excPtr),et=0};class dr{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){b()[this.ptr+4>>2]=t}get_type(){return b()[this.ptr+4>>2]}set_destructor(t){b()[this.ptr+8>>2]=t}get_destructor(){return b()[this.ptr+8>>2]}set_caught(t){t=t?1:0,T()[this.ptr+12]=t}get_caught(){return T()[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,T()[this.ptr+13]=t}get_rethrown(){return T()[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){b()[this.ptr+16>>2]=t}get_adjusted_ptr(){return b()[this.ptr+16>>2]}}var _i=e=>{throw et||(et=e),et},Qt=e=>Wa(e),Hr=e=>{var t=et;if(!t)return Qt(0),0;var r=new dr(t);r.set_adjusted_ptr(t);var a=r.get_type();if(!a)return Qt(0),t;for(var i of e){if(i===0||i===a)break;var l=r.ptr+16;if(Da(i,a,l))return Qt(i),t}return Qt(a),t},mi=()=>Hr([]),gi=e=>Hr([e]),yi=()=>{var e=Jt.pop();e||Ye("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Jt.push(e),e.set_rethrown(!0),e.set_caught(!1),Kt++),et=t,et},bi=(e,t,r)=>{var a=new dr(e);throw a.init(t,r),et=e,Kt++,et},wi=()=>Kt;function Yr(e,t,r,a){return y?le(2,0,1,e,t,r,a):Br(e,t,r,a)}var Ti=()=>typeof SharedArrayBuffer<"u",Br=(e,t,r,a)=>{if(!Ti())return 6;var i=[],l=0;if(y&&(i.length===0||l))return Yr(e,t,r,a);var u={startRoutine:r,pthread_ptr:e,arg:a,transferList:i};return y?(u.cmd="spawnThread",postMessage(u,i),0):Wt(u)};function qr(e,t,r){return y?le(3,0,1,e,t,r):0}var $i=(e,t,r,a)=>{if(!(a>0))return 0;for(var i=r,l=r+a-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343){var v=e.charCodeAt(++u);o=65536+((o&1023)<<10)|v&1023}if(o<=127){if(r>=l)break;t[r++]=o}else if(o<=2047){if(r+1>=l)break;t[r++]=192|o>>6,t[r++]=128|o&63}else if(o<=65535){if(r+2>=l)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|o&63}else{if(r+3>=l)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|o&63}}return t[r]=0,r-i},jt=(e,t,r)=>$i(e,$(),t,r);function Gr(e,t,r){if(y)return le(4,0,1,e,t,r)}function Jr(e,t,r){return y?le(5,0,1,e,t,r):0}function Kr(e,t,r,a){if(y)return le(6,0,1,e,t,r,a)}function Qr(e,t,r,a){if(y)return le(7,0,1,e,t,r,a)}function Zr(e,t,r){if(y)return le(8,0,1,e,t,r)}var Ci=()=>{Ye("")},Zt={},pr=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Ft(e){return this.fromWireType(b()[e>>2])}var xt={},ft={},Xt={},Xr,er=e=>{throw new Xr(e)},hr=(e,t,r)=>{e.forEach(o=>Xt[o]=t);function a(o){var v=r(o);v.length!==e.length&&er("Mismatched type converter count");for(var _=0;_<e.length;++_)Be(e[_],v[_])}var i=new Array(t.length),l=[],u=0;t.forEach((o,v)=>{ft.hasOwnProperty(o)?i[v]=ft[o]:(l.push(o),xt.hasOwnProperty(o)||(xt[o]=[]),xt[o].push(()=>{i[v]=ft[o],++u,u===l.length&&a(i)}))}),l.length===0&&a(i)},xi=e=>{var t=Zt[e];delete Zt[e];var r=t.rawConstructor,a=t.rawDestructor,i=t.fields,l=i.map(u=>u.getterReturnType).concat(i.map(u=>u.setterArgumentType));hr([e],l,u=>{var o={};return i.forEach((v,_)=>{var m=v.fieldName,S=u[_],N=v.getter,fe=v.getterContext,ye=u[_+i.length],Ge=v.setter,it=v.setterContext;o[m]={read:xe=>S.fromWireType(N(fe,xe)),write:(xe,Vt)=>{var Re=[];Ge(it,xe,ye.toWireType(Re,Vt)),pr(Re)}}}),[{name:t.name,fromWireType:v=>{var _={};for(var m in o)_[m]=o[m].read(v);return a(v),_},toWireType:(v,_)=>{for(var m in o)if(!(m in _))throw new TypeError(`Missing field: "${m}"`);var S=r();for(m in o)o[m].write(S,_[m]);return v!==null&&v.push(a,S),S},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction:a}]})},ki=(e,t,r,a,i)=>{},Ai=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ea=e},ea,me=e=>{for(var t="",r=e;$()[r];)t+=ea[$()[r++]];return t},Lt,z=e=>{throw new Lt(e)};function Si(e,t,r={}){var a=t.name;if(e||z(`type "${a}" must have a positive integer typeid pointer`),ft.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;z(`Cannot register type '${a}' twice`)}if(ft[e]=t,delete Xt[e],xt.hasOwnProperty(e)){var i=xt[e];delete xt[e],i.forEach(l=>l())}}function Be(e,t,r={}){return Si(e,t,r)}var qe=8,Ei=(e,t,r,a)=>{t=me(t),Be(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,l){return l?r:a},argPackAdvance:qe,readValueFromPointer:function(i){return this.fromWireType($()[i])},destructorFunction:null})},Pi=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),_r=e=>{function t(r){return r.$$.ptrType.registeredClass.name}z(t(e)+" instance already deleted")},mr=!1,ta=e=>{},Ri=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},ra=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ri(e)},aa=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var a=aa(e,t,r.baseClass);return a===null?null:r.downcast(a)},ia={},Wi={},Ui=(e,t)=>{for(t===void 0&&z("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Ii=(e,t)=>(t=Ui(e,t),Wi[t]),tr=(e,t)=>{(!t.ptrType||!t.ptr)&&er("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,a=!!t.smartPtr;return r!==a&&er("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ot(Object.create(e,{$$:{value:t,writable:!0}}))};function ji(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Ii(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var a=r.clone();return this.destructor(e),a}function i(){return this.isSmartPointer?tr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):tr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),u=ia[l];if(!u)return i.call(this);var o;this.isConst?o=u.constPointerType:o=u.pointerType;var v=aa(t,this.registeredClass,o.registeredClass);return v===null?i.call(this):this.isSmartPointer?tr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v,smartPtrType:this,smartPtr:e}):tr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v})}var Ot=e=>typeof FinalizationRegistry>"u"?(Ot=t=>t,e):(mr=new FinalizationRegistry(t=>{ra(t.$$)}),Ot=t=>{var r=t.$$,a=!!r.smartPtr;if(a){var i={$$:r};mr.register(t,i,t)}return t},ta=t=>mr.unregister(t),Ot(e)),Fi=()=>{Object.assign(rr.prototype,{isAliasOf(e){if(!(this instanceof rr)||!(e instanceof rr))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var a=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;a.baseClass;)i=a.upcast(i),a=a.baseClass;return t===a&&r===i},clone(){if(this.$$.ptr||_r(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Ot(Object.create(Object.getPrototypeOf(this),{$$:{value:Pi(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),ta(this),ra(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&z("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function rr(){}var kt=(e,t)=>Object.defineProperty(t,"name",{value:e}),Li=(e,t,r)=>{if(e[t].overloadTable===void 0){var a=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||z(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}},gr=(e,t,r)=>{c.hasOwnProperty(e)?((r===void 0||c[e].overloadTable!==void 0&&c[e].overloadTable[r]!==void 0)&&z(`Cannot register public name '${e}' twice`),Li(c,e,e),c.hasOwnProperty(r)&&z(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),c[e].overloadTable[r]=t):(c[e]=t,r!==void 0&&(c[e].numArguments=r))},Oi=48,Di=57,Mi=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Oi&&t<=Di?`_${e}`:e};function Vi(e,t,r,a,i,l,u,o){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=a,this.baseClass=i,this.getActualType=l,this.upcast=u,this.downcast=o,this.pureVirtualFunctions=[]}var yr=(e,t,r)=>{for(;t!==r;)t.upcast||z(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function zi(e,t){if(t===null)return this.isReference&&z(`null is not a valid ${this.name}`),0;t.$$||z(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}function Ni(e,t){var r;if(t===null)return this.isReference&&z(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&z(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&z(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var a=t.$$.ptrType.registeredClass;if(r=yr(t.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&z("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:z(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,ge.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:z("Unsupporting sharing policy")}return r}function Hi(e,t){if(t===null)return this.isReference&&z(`null is not a valid ${this.name}`),0;t.$$||z(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||z(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&z(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}var Yi=()=>{Object.assign(ar.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)==null||t.call(this,e)},argPackAdvance:qe,readValueFromPointer:Ft,fromWireType:ji})};function ar(e,t,r,a,i,l,u,o,v,_,m){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=a,this.isSmartPointer=i,this.pointeeType=l,this.sharingPolicy=u,this.rawGetPointee=o,this.rawConstructor=v,this.rawShare=_,this.rawDestructor=m,!i&&t.baseClass===void 0?a?(this.toWireType=zi,this.destructorFunction=null):(this.toWireType=Hi,this.destructorFunction=null):this.toWireType=Ni}var sa=(e,t,r)=>{c.hasOwnProperty(e)||er("Replacing nonexistent public symbol"),c[e].overloadTable!==void 0&&r!==void 0?c[e].overloadTable[r]=t:(c[e]=t,c[e].argCount=r)},Bi=(e,t,r)=>{e=e.replace(/p/g,"i");var a=c["dynCall_"+e];return a(t,...r)},qi=(e,t,r=[])=>{if(e.includes("j"))return Bi(e,t,r);var a=V(t)(...r);return a},Gi=(e,t)=>(...r)=>qi(e,t,r),tt=(e,t)=>{e=me(e);function r(){return e.includes("j")?Gi(e,t):V(t)}var a=r();return typeof a!="function"&&z(`unknown function pointer with signature ${e}: ${t}`),a},Ji=(e,t)=>{var r=kt(t,function(a){this.name=t,this.message=a;var i=new Error(a).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},na,la=e=>{var t=xa(e),r=me(t);return at(t),r},oa=(e,t)=>{var r=[],a={};function i(l){if(!a[l]&&!ft[l]){if(Xt[l]){Xt[l].forEach(i);return}r.push(l),a[l]=!0}}throw t.forEach(i),new na(`${e}: `+r.map(la).join([", "]))},Ki=(e,t,r,a,i,l,u,o,v,_,m,S,N)=>{m=me(m),l=tt(i,l),o&&(o=tt(u,o)),_&&(_=tt(v,_)),N=tt(S,N);var fe=Mi(m);gr(fe,function(){oa(`Cannot construct ${m} due to unbound types`,[a])}),hr([e,t,r],a?[a]:[],ye=>{var Ga;ye=ye[0];var Ge,it;a?(Ge=ye.registeredClass,it=Ge.instancePrototype):it=rr.prototype;var xe=kt(m,function(...Rr){if(Object.getPrototypeOf(this)!==Vt)throw new Lt("Use 'new' to construct "+m);if(Re.constructor_body===void 0)throw new Lt(m+" has no accessible constructor");var Ja=Re.constructor_body[Rr.length];if(Ja===void 0)throw new Lt(`Tried to invoke ctor of ${m} with invalid number of parameters (${Rr.length}) - expected (${Object.keys(Re.constructor_body).toString()}) parameters instead!`);return Ja.apply(this,Rr)}),Vt=Object.create(it,{constructor:{value:xe}});xe.prototype=Vt;var Re=new Vi(m,xe,Vt,N,Ge,l,o,_);Re.baseClass&&((Ga=Re.baseClass).__derivedClasses??(Ga.__derivedClasses=[]),Re.baseClass.__derivedClasses.push(Re));var Vn=new ar(m,Re,!0,!1,!1),Ba=new ar(m+"*",Re,!1,!1,!1),qa=new ar(m+" const*",Re,!1,!0,!1);return ia[e]={pointerType:Ba,constPointerType:qa},sa(fe,xe),[Vn,Ba,qa]})},br=[],rt=[],wr=e=>{e>9&&--rt[e+1]===0&&(rt[e]=void 0,br.push(e))},Qi=()=>rt.length/2-5-br.length,Zi=()=>{rt.push(0,1,void 0,1,null,1,!0,1,!1,1),c.count_emval_handles=Qi},ge={toValue:e=>(e||z("Cannot use deleted val. handle = "+e),rt[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=br.pop()||rt.length;return rt[t]=e,rt[t+1]=1,t}}}},Xi={name:"emscripten::val",fromWireType:e=>{var t=ge.toValue(e);return wr(e),t},toWireType:(e,t)=>ge.toHandle(t),argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction:null},es=e=>Be(e,Xi),ts=(e,t,r)=>{switch(t){case 1:return r?function(a){return this.fromWireType(T()[a])}:function(a){return this.fromWireType($()[a])};case 2:return r?function(a){return this.fromWireType(g()[a>>1])}:function(a){return this.fromWireType(C()[a>>1])};case 4:return r?function(a){return this.fromWireType(x()[a>>2])}:function(a){return this.fromWireType(b()[a>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},rs=(e,t,r,a)=>{t=me(t);function i(){}i.values={},Be(e,{name:t,constructor:i,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,u)=>u.value,argPackAdvance:qe,readValueFromPointer:ts(t,r,a),destructorFunction:null}),gr(t,i)},Tr=(e,t)=>{var r=ft[e];return r===void 0&&z(`${t} has unknown type ${la(e)}`),r},as=(e,t,r)=>{var a=Tr(e,"enum");t=me(t);var i=a.constructor,l=Object.create(a.constructor.prototype,{value:{value:r},constructor:{value:kt(`${a.name}_${t}`,function(){})}});i.values[r]=l,i[t]=l},$r=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},is=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(O()[r>>2])};case 8:return function(r){return this.fromWireType(k()[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},ss=(e,t,r)=>{t=me(t),Be(e,{name:t,fromWireType:a=>a,toWireType:(a,i)=>i,argPackAdvance:qe,readValueFromPointer:is(t,r),destructorFunction:null})};function ua(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function va(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=kt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var a=new r,i=e.apply(a,t);return i instanceof Object?i:a}function ns(e,t,r,a){for(var i=ua(e),l=e.length-2,u=[],o=["fn"],v=0;v<l;++v)u.push(`arg${v}`),o.push(`arg${v}Wired`);u=u.join(","),o=o.join(",");var _=`return function (${u}) {
`;i&&(_+=`var destructors = [];
`);for(var m=i?"destructors":"null",S=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=0;v<l;++v)_+=`var arg${v}Wired = argType${v}['toWireType'](${m}, arg${v});
`,S.push(`argType${v}`);if(_+=(r||a?"var rv = ":"")+`invoker(${o});
`,i)_+=`runDestructors(destructors);
`;else for(var v=2;v<e.length;++v){var N=v===1?"thisWired":"arg"+(v-2)+"Wired";e[v].destructorFunction!==null&&(_+=`${N}_dtor(${N});
`,S.push(`${N}_dtor`))}return r&&(_+=`var ret = retType['fromWireType'](rv);
return ret;
`),_+=`}
`,[S,_]}function ls(e,t,r,a,i,l){var u=t.length;u<2&&z("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=t[1]!==null&&r!==null,v=ua(t),_=t[0].name!=="void",m=[e,z,a,i,pr,t[0],t[1]],S=0;S<u-2;++S)m.push(t[S+2]);if(!v)for(var S=2;S<t.length;++S)t[S].destructorFunction!==null&&m.push(t[S].destructorFunction);let[N,fe]=ns(t,o,_,l);N.push(fe);var ye=va(Function,N)(...m);return kt(e,ye)}var os=(e,t)=>{for(var r=[],a=0;a<e;a++)r.push(b()[t+a*4>>2]);return r},us=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},vs=(e,t,r,a,i,l,u,o)=>{var v=os(t,r);e=me(e),e=us(e),i=tt(a,i),gr(e,function(){oa(`Cannot call ${e} due to unbound types`,v)},t-1),hr([],v,_=>{var m=[_[0],null].concat(_.slice(1));return sa(e,ls(e,m,null,i,l,u),t-1),[]})},cs=(e,t,r)=>{switch(t){case 1:return r?a=>T()[a]:a=>$()[a];case 2:return r?a=>g()[a>>1]:a=>C()[a>>1];case 4:return r?a=>x()[a>>2]:a=>b()[a>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},fs=(e,t,r,a,i)=>{t=me(t);var l=m=>m;if(a===0){var u=32-8*r;l=m=>m<<u>>>u}var o=t.includes("unsigned"),v=(m,S)=>{},_;o?_=function(m,S){return v(S,this.name),S>>>0}:_=function(m,S){return v(S,this.name),S},Be(e,{name:t,fromWireType:l,toWireType:_,argPackAdvance:qe,readValueFromPointer:cs(t,r,a!==0),destructorFunction:null})},ds=(e,t,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=a[t];function l(u){var o=b()[u>>2],v=b()[u+4>>2];return new i(T().buffer,v,o)}r=me(r),Be(e,{name:r,fromWireType:l,argPackAdvance:qe,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},ps=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3}return t},hs=(e,t)=>{t=me(t);var r=t==="std::string";Be(e,{name:t,fromWireType(a){var i=b()[a>>2],l=a+4,u;if(r)for(var o=l,v=0;v<=i;++v){var _=l+v;if(v==i||$()[_]==0){var m=_-o,S=Gt(o,m);u===void 0?u=S:(u+="\0",u+=S),o=_+1}}else{for(var N=new Array(i),v=0;v<i;++v)N[v]=String.fromCharCode($()[l+v]);u=N.join("")}return at(a),u},toWireType(a,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var l,u=typeof i=="string";u||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||z("Cannot pass non-string to std::string"),r&&u?l=ps(i):l=i.length;var o=Sr(4+l+1),v=o+4;if(b()[o>>2]=l,r&&u)jt(i,v,l+1);else if(u)for(var _=0;_<l;++_){var m=i.charCodeAt(_);m>255&&(at(v),z("String has UTF-16 code units that do not fit in 8 bits")),$()[v+_]=m}else for(var _=0;_<l;++_)$()[v+_]=i[_];return a!==null&&a.push(at,o),o},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction(a){at(a)}})},_s=new TextDecoder("utf-16le"),ms=(e,t)=>{for(var r=e,a=r>>1,i=a+t/2;!(a>=i)&&C()[a];)++a;return r=a<<1,_s.decode($().slice(e,r))},gs=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;r-=2;for(var a=t,i=r<e.length*2?r/2:e.length,l=0;l<i;++l){var u=e.charCodeAt(l);g()[t>>1]=u,t+=2}return g()[t>>1]=0,t-a},ys=e=>e.length*2,bs=(e,t)=>{for(var r=0,a="";!(r>=t/4);){var i=x()[e+r*4>>2];if(i==0)break;if(++r,i>=65536){var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}else a+=String.fromCharCode(i)}return a},ws=(e,t,r)=>{if(r??(r=2147483647),r<4)return 0;for(var a=t,i=a+r-4,l=0;l<e.length;++l){var u=e.charCodeAt(l);if(u>=55296&&u<=57343){var o=e.charCodeAt(++l);u=65536+((u&1023)<<10)|o&1023}if(x()[t>>2]=u,t+=4,t+4>i)break}return x()[t>>2]=0,t-a},Ts=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&++r,t+=4}return t},$s=(e,t,r)=>{r=me(r);var a,i,l,u;t===2?(a=ms,i=gs,u=ys,l=o=>C()[o>>1]):t===4&&(a=bs,i=ws,u=Ts,l=o=>b()[o>>2]),Be(e,{name:r,fromWireType:o=>{for(var v=b()[o>>2],_,m=o+4,S=0;S<=v;++S){var N=o+4+S*t;if(S==v||l(N)==0){var fe=N-m,ye=a(m,fe);_===void 0?_=ye:(_+="\0",_+=ye),m=N+t}}return at(o),_},toWireType:(o,v)=>{typeof v!="string"&&z(`Cannot pass non-string to C++ string type ${r}`);var _=u(v),m=Sr(4+_+t);return b()[m>>2]=_/t,i(v,m+4,_+t),o!==null&&o.push(at,m),m},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction(o){at(o)}})},Cs=(e,t,r,a,i,l)=>{Zt[e]={name:me(t),rawConstructor:tt(r,a),rawDestructor:tt(i,l),fields:[]}},xs=(e,t,r,a,i,l,u,o,v,_)=>{Zt[e].fields.push({fieldName:me(t),getterReturnType:r,getter:tt(a,i),getterContext:l,setterArgumentType:u,setter:tt(o,v),setterContext:_})},ks=(e,t)=>{t=me(t),Be(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,a)=>{}})},As=1,Ss=()=>As,Es=e=>{Er(e,!q,1,!re,2097152,!1),W.threadInitTLS()},Ps=()=>{if(!yt())try{y?Pr(ne):Tt(ne)}catch(e){bt(e)}},ca=e=>{if(!ae)try{e(),Ps()}catch(t){bt(t)}},Cr=e=>{if(typeof Atomics.waitAsync=="function"){var t=Atomics.waitAsync(x(),e>>2,e);t.value.then(ir);var r=e+128;Atomics.store(x(),r>>2,1)}},ir=()=>{var e=nr();e&&(Cr(e),ca(Ra))},Rs=(e,t)=>{if(e==t)setTimeout(ir);else if(y)postMessage({targetThread:e,cmd:"checkMailbox"});else{var r=W.pthreads[e];if(!r)return;r.postMessage({cmd:"checkMailbox"})}},xr=[],Ws=(e,t,r,a,i)=>{xr.length=a;for(var l=i>>3,u=0;u<a;u++)xr[u]=k()[l+u];var o=gn[e];W.currentProxiedOperationCallerThread=r;var v=o(...xr);return W.currentProxiedOperationCallerThread=0,v},Us=()=>{Xe=!1,nt=0},Is=e=>{y?postMessage({cmd:"cleanupThread",thread:e}):vt(e)},js=e=>{},sr=[],Fs=(e,t,r,a)=>(e=sr[e],t=ge.toValue(t),e(null,t,r,a)),Ls={},kr=e=>{var t=Ls[e];return t===void 0?me(e):t},Os=(e,t,r,a,i)=>(e=sr[e],t=ge.toValue(t),r=kr(r),e(t,t[r],a,i)),fa=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Ds=e=>e===0?ge.toHandle(fa()):(e=kr(e),ge.toHandle(fa()[e])),Ms=e=>{var t=sr.length;return sr.push(e),t},Vs=(e,t)=>{for(var r=new Array(e),a=0;a<e;++a)r[a]=Tr(b()[t+a*4>>2],"parameter "+a);return r},zs=(e,t,r)=>{var a=[],i=e.toWireType(a,r);return a.length&&(b()[t>>2]=ge.toHandle(a)),i},Ns=(e,t,r)=>{var a=Vs(e,t),i=a.shift();e--;var l=`return function (obj, func, destructorsRef, args) {
`,u=0,o=[];r===0&&o.push("obj");for(var v=["retType"],_=[i],m=0;m<e;++m)o.push("arg"+m),v.push("argType"+m),_.push(a[m]),l+=`  var arg${m} = argType${m}.readValueFromPointer(args${u?"+"+u:""});
`,u+=a[m].argPackAdvance;var S=r===1?"new func":"func.call";l+=`  var rv = ${S}(${o.join(", ")});
`,i.isVoid||(v.push("emval_returnValue"),_.push(zs),l+=`  return emval_returnValue(retType, destructorsRef, rv);
`),l+=`};
`,v.push(l);var N=va(Function,v)(..._),fe=`methodCaller<(${a.map(ye=>ye.name).join(", ")}) => ${i.name}>`;return Ms(kt(fe,N))},Hs=e=>{e>9&&(rt[e+1]+=1)},Ys=()=>ge.toHandle([]),Bs=e=>ge.toHandle(kr(e)),qs=()=>ge.toHandle({}),Gs=e=>{var t=ge.toValue(e);pr(t),wr(e)},Js=(e,t,r)=>{e=ge.toValue(e),t=ge.toValue(t),r=ge.toValue(r),e[t]=r},Ks=(e,t)=>{e=Tr(e,"_emval_take_value");var r=e.readValueFromPointer(t);return ge.toHandle(r)},Qs=e=>e%4===0&&(e%100!==0||e%400===0),Zs=[0,31,60,91,121,152,182,213,244,274,305,335],Xs=[0,31,59,90,120,151,181,212,243,273,304,334],en=e=>{var t=Qs(e.getFullYear()),r=t?Zs:Xs,a=r[e.getMonth()]+e.getDate()-1;return a};function tn(e,t,r){var a=Ut(e,t),i=new Date(a*1e3);x()[r>>2]=i.getSeconds(),x()[r+4>>2]=i.getMinutes(),x()[r+8>>2]=i.getHours(),x()[r+12>>2]=i.getDate(),x()[r+16>>2]=i.getMonth(),x()[r+20>>2]=i.getFullYear()-1900,x()[r+24>>2]=i.getDay();var l=en(i)|0;x()[r+28>>2]=l,x()[r+36>>2]=-(i.getTimezoneOffset()*60);var u=new Date(i.getFullYear(),0,1),o=new Date(i.getFullYear(),6,1).getTimezoneOffset(),v=u.getTimezoneOffset(),_=(o!=v&&i.getTimezoneOffset()==Math.min(v,o))|0;x()[r+32>>2]=_}function da(e,t,r,a,i,l,u,o){return y?le(9,0,1,e,t,r,a,i,l,u,o):-52}function pa(e,t,r,a,i,l,u){if(y)return le(10,0,1,e,t,r,a,i,l,u)}var Dt={},ha=()=>performance.timeOrigin+performance.now();function _a(e,t){if(y)return le(11,0,1,e,t);if(Dt[e]&&(clearTimeout(Dt[e].id),delete Dt[e]),!t)return 0;var r=setTimeout(()=>{delete Dt[e],ca(()=>Pa(e,ha()))},t);return Dt[e]={id:r,timeout_ms:t},0}var rn=(e,t,r,a)=>{var i=new Date().getFullYear(),l=new Date(i,0,1),u=new Date(i,6,1),o=l.getTimezoneOffset(),v=u.getTimezoneOffset(),_=Math.max(o,v);b()[e>>2]=_*60,x()[t>>2]=+(o!=v);var m=fe=>{var ye=fe>=0?"-":"+",Ge=Math.abs(fe),it=String(Math.floor(Ge/60)).padStart(2,"0"),xe=String(Ge%60).padStart(2,"0");return`UTC${ye}${it}${xe}`},S=m(o),N=m(v);v<o?(jt(S,r,17),jt(N,a,17)):(jt(S,a,17),jt(N,r,17))},an=()=>{},sn=()=>Date.now(),nn=()=>{nt+=1},ln=()=>{throw nn(),"unwind"},ma=()=>2147483648,on=()=>ma(),un=()=>1,vn=(e,t)=>Math.ceil(e/t)*t,cn=e=>{var t=G.buffer,r=(e-t.byteLength+65535)/65536|0;try{return G.grow(r),ie(),1}catch{}},fn=e=>{var t=$().length;if(e>>>=0,e<=t)return!1;var r=ma();if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var l=Math.min(r,vn(Math.max(e,i),65536)),u=cn(l);if(u)return!0}return!1},Ar={},dn=()=>oe||"./this.program",Mt=()=>{if(!Mt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:dn()};for(var r in Ar)Ar[r]===void 0?delete t[r]:t[r]=Ar[r];var a=[];for(var r in t)a.push(`${r}=${t[r]}`);Mt.strings=a}return Mt.strings},pn=(e,t)=>{for(var r=0;r<e.length;++r)T()[t++]=e.charCodeAt(r);T()[t]=0},ga=function(e,t){if(y)return le(12,0,1,e,t);var r=0;return Mt().forEach((a,i)=>{var l=t+r;b()[e+i*4>>2]=l,pn(a,l),r+=a.length+1}),0},ya=function(e,t){if(y)return le(13,0,1,e,t);var r=Mt();b()[e>>2]=r.length;var a=0;return r.forEach(i=>a+=i.length+1),b()[t>>2]=a,0};function ba(e){return y?le(14,0,1,e):52}function wa(e,t,r,a){return y?le(15,0,1,e,t,r,a):52}function Ta(e,t,r,a,i){return y?le(16,0,1,e,t,r,a,i):70}var hn=[null,[],[]],_n=(e,t=0,r=NaN)=>{for(var a=t+r,i=t;e[i]&&!(i>=a);)++i;return Nr.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(t,i):e.subarray(t,i):new Uint8Array(e.slice(t,i)))},mn=(e,t)=>{var r=hn[e];t===0||t===10?((e===1?ce:B)(_n(r)),r.length=0):r.push(t)};function $a(e,t,r,a){if(y)return le(17,0,1,e,t,r,a);for(var i=0,l=0;l<r;l++){var u=b()[t>>2],o=b()[t+4>>2];t+=8;for(var v=0;v<o;v++)mn(e,$()[u+v]);i+=o}return b()[a>>2]=i,0}W.init(),Xr=c.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Ai(),Lt=c.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Fi(),Yi(),na=c.UnboundTypeError=Ji(Error,"UnboundTypeError"),Zi();var gn=[ct,wt,Yr,qr,Gr,Jr,Kr,Qr,Zr,da,pa,_a,ga,ya,ba,wa,Ta,$a],Ca;function yn(){Ca={$:di,r:pi,x:hi,b:mi,i:gi,U:yi,w:bi,pa:wi,ya:Br,e:_i,X:qr,wa:Gr,Fa:Jr,Y:Kr,va:Qr,ra:Zr,Ja:Ci,da:xi,ka:ki,Ma:Ei,L:Ki,La:es,z:rs,d:as,_:ss,p:vs,A:fs,n:ds,aa:hs,M:$s,O:Cs,G:xs,Na:ks,Ia:Ss,Ca:Es,sa:Rs,za:Ws,na:Us,S:Is,Ba:Cr,Ha:js,Oa:Fs,Ka:Os,l:wr,N:Ds,ca:Ns,R:Hs,Z:Ys,v:Bs,F:qs,ba:Gs,t:Js,o:Ks,ia:tn,ga:da,ha:pa,oa:_a,Aa:rn,T:an,K:sn,Ga:ln,ta:on,y:ha,ua:un,qa:fn,Da:ga,Ea:ya,xa:Tt,E:ba,W:wa,ja:Ta,V:$a,I:Pn,c:bn,f:An,u:En,la:Un,H:Wn,B:Fn,P:In,D:Ln,fa:Dn,ea:Mn,h:Sn,k:Tn,g:Rn,m:$n,j:xn,J:Cn,Q:kn,s:jn,q:wn,C:On,a:G,ma:ct}}var U=Rt(),nr=()=>(nr=U.Qa)(),Sr=e=>(Sr=U.Ra)(e),xa=e=>(xa=U.Sa)(e),ka=()=>(ka=U.Ta)(),at=e=>(at=U.Ua)(e),Er=(e,t,r,a,i,l)=>(Er=U.Xa)(e,t,r,a,i,l),Aa=()=>(Aa=U.Ya)(),Sa=(e,t,r,a,i)=>(Sa=U.Za)(e,t,r,a,i),Ea=e=>(Ea=U._a)(e),Pr=e=>(Pr=U.$a)(e),Pa=(e,t)=>(Pa=U.ab)(e,t),Ra=()=>(Ra=U.bb)(),te=(e,t)=>(te=U.cb)(e,t),Wa=e=>(Wa=U.db)(e),Ua=(e,t)=>(Ua=U.eb)(e,t),Ia=e=>(Ia=U.fb)(e),ja=e=>(ja=U.gb)(e),Fa=()=>(Fa=U.hb)(),La=e=>(La=U.ib)(e),Oa=e=>(Oa=U.jb)(e),Da=(e,t,r)=>(Da=U.kb)(e,t,r),Ma=e=>(Ma=U.lb)(e);c.dynCall_ji=(e,t)=>(c.dynCall_ji=U.mb)(e,t);var Va=c.dynCall_iij=(e,t,r,a)=>(Va=c.dynCall_iij=U.nb)(e,t,r,a);c.dynCall_jijj=(e,t,r,a,i,l)=>(c.dynCall_jijj=U.ob)(e,t,r,a,i,l),c.dynCall_vijj=(e,t,r,a,i,l)=>(c.dynCall_vijj=U.pb)(e,t,r,a,i,l),c.dynCall_jiiiii=(e,t,r,a,i,l)=>(c.dynCall_jiiiii=U.qb)(e,t,r,a,i,l),c.dynCall_jii=(e,t,r)=>(c.dynCall_jii=U.rb)(e,t,r),c.dynCall_jiiii=(e,t,r,a,i)=>(c.dynCall_jiiii=U.sb)(e,t,r,a,i),c.dynCall_jiji=(e,t,r,a,i)=>(c.dynCall_jiji=U.tb)(e,t,r,a,i);var za=c.dynCall_iiiiij=(e,t,r,a,i,l,u)=>(za=c.dynCall_iiiiij=U.ub)(e,t,r,a,i,l,u);c.dynCall_viijii=(e,t,r,a,i,l,u)=>(c.dynCall_viijii=U.vb)(e,t,r,a,i,l,u),c.dynCall_iiiiijj=(e,t,r,a,i,l,u,o,v)=>(c.dynCall_iiiiijj=U.wb)(e,t,r,a,i,l,u,o,v),c.dynCall_iiiiiijj=(e,t,r,a,i,l,u,o,v,_)=>(c.dynCall_iiiiiijj=U.xb)(e,t,r,a,i,l,u,o,v,_);function bn(e,t){var r=Z();try{return V(e)(t)}catch(a){if(J(r),a!==a+0)throw a;te(1,0)}}function wn(e,t,r,a,i,l,u,o,v,_,m){var S=Z();try{V(e)(t,r,a,i,l,u,o,v,_,m)}catch(N){if(J(S),N!==N+0)throw N;te(1,0)}}function Tn(e,t){var r=Z();try{V(e)(t)}catch(a){if(J(r),a!==a+0)throw a;te(1,0)}}function $n(e,t,r,a){var i=Z();try{V(e)(t,r,a)}catch(l){if(J(i),l!==l+0)throw l;te(1,0)}}function Cn(e,t,r,a,i,l){var u=Z();try{V(e)(t,r,a,i,l)}catch(o){if(J(u),o!==o+0)throw o;te(1,0)}}function xn(e,t,r,a,i){var l=Z();try{V(e)(t,r,a,i)}catch(u){if(J(l),u!==u+0)throw u;te(1,0)}}function kn(e,t,r,a,i,l,u){var o=Z();try{V(e)(t,r,a,i,l,u)}catch(v){if(J(o),v!==v+0)throw v;te(1,0)}}function An(e,t,r){var a=Z();try{return V(e)(t,r)}catch(i){if(J(a),i!==i+0)throw i;te(1,0)}}function Sn(e){var t=Z();try{V(e)()}catch(r){if(J(t),r!==r+0)throw r;te(1,0)}}function En(e,t,r,a){var i=Z();try{return V(e)(t,r,a)}catch(l){if(J(i),l!==l+0)throw l;te(1,0)}}function Pn(e){var t=Z();try{return V(e)()}catch(r){if(J(t),r!==r+0)throw r;te(1,0)}}function Rn(e,t,r){var a=Z();try{V(e)(t,r)}catch(i){if(J(a),i!==i+0)throw i;te(1,0)}}function Wn(e,t,r,a,i,l){var u=Z();try{return V(e)(t,r,a,i,l)}catch(o){if(J(u),o!==o+0)throw o;te(1,0)}}function Un(e,t,r,a,i,l){var u=Z();try{return V(e)(t,r,a,i,l)}catch(o){if(J(u),o!==o+0)throw o;te(1,0)}}function In(e,t,r,a,i,l,u,o){var v=Z();try{return V(e)(t,r,a,i,l,u,o)}catch(_){if(J(v),_!==_+0)throw _;te(1,0)}}function jn(e,t,r,a,i,l,u,o){var v=Z();try{V(e)(t,r,a,i,l,u,o)}catch(_){if(J(v),_!==_+0)throw _;te(1,0)}}function Fn(e,t,r,a,i,l,u){var o=Z();try{return V(e)(t,r,a,i,l,u)}catch(v){if(J(o),v!==v+0)throw v;te(1,0)}}function Ln(e,t,r,a,i,l,u,o,v,_,m,S){var N=Z();try{return V(e)(t,r,a,i,l,u,o,v,_,m,S)}catch(fe){if(J(N),fe!==fe+0)throw fe;te(1,0)}}function On(e,t,r,a,i,l,u,o,v,_,m,S,N,fe,ye,Ge){var it=Z();try{V(e)(t,r,a,i,l,u,o,v,_,m,S,N,fe,ye,Ge)}catch(xe){if(J(it),xe!==xe+0)throw xe;te(1,0)}}function Dn(e,t,r,a,i,l,u){var o=Z();try{return za(e,t,r,a,i,l,u)}catch(v){if(J(o),v!==v+0)throw v;te(1,0)}}function Mn(e,t,r,a){var i=Z();try{return Va(e,t,r,a)}catch(l){if(J(i),l!==l+0)throw l;te(1,0)}}var lr,Na;be=function e(){lr||Ha(),lr||(be=e)};function Ha(){if(Ce>0)return;if(y){A(c),Ve(),startWorker(c);return}if(!Na&&(Na=1,Ee(),Ce>0))return;function e(){var t;lr||(lr=1,c.calledRun=1,!ae&&(Ve(),A(c),(t=c.onRuntimeInitialized)==null||t.call(c),ze()))}c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),e()},1)):e()}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return Ha(),s=F,s}})(),ri,ai,kl=(ai=(ri=globalThis.self)==null?void 0:ri.name)==null?void 0:ai.startsWith("em-pthread");kl&&xl();const Al=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"],Sl=["420","422","444"],El=["psnr","ssim","grain","fastdecode"],fi={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};var Mr;(function(n){n[n.UVAdapt=0]="UVAdapt",n[n.UV420=1]="UV420",n[n.UV444=2]="UV444",n[n.UVAuto=3]="UVAuto"})(Mr||(Mr={}));var Vr;(function(n){n[n.YCoCg=0]="YCoCg",n[n.YCbCr=1]="YCbCr",n[n.Custom=2]="Custom",n[n.YIQ=3]="YIQ"})(Vr||(Vr={}));Mr.UVAuto,Vr.YCoCg;globalThis._icodec_ImageData=(n,h,s,T)=>T===8?new Pl(n,h,s):new vi(n,h,s,T);class Pl extends ImageData{constructor(){super(...arguments);At(this,"depth",8)}}function Rl(n,h){h({...fi})}var Wl=Le("<option> </option>"),Ul=Le("<option> </option>"),Il=Le("<option> </option>"),jl=Le('<div class="card svelte-1dgh8ms"><div class="title svelte-1dgh8ms">HEIC  (x265,HEVC) Options</div> <div class="grid svelte-1dgh8ms"><div><div class="row svelte-1dgh8ms"><label for="heic-quality">Quality <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-quality" type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label><input name="heic-lossless" type="checkbox"> Lossless</label></div> <div class="row svelte-1dgh8ms"><label for="heic-preset">Preset</label> <select id="heic-preset"></select></div> <div class="row svelte-1dgh8ms"><label for="heic-tune">Tune</label> <select id="heic-tune"></select></div> <div class="row svelte-1dgh8ms"><label for="heic-tuIntraDepth">TU Intra Depth <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-tuIntraDepth" type="range" min="1" max="4"></div></div> <div><div class="row svelte-1dgh8ms"><label for="heic-complexity">Complexity <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input id="heic-complexity" type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label for="heic-chroma">Chroma</label> <select id="heic-chroma"></select></div> <div class="row svelte-1dgh8ms"><label><input name="heic-sharpYUV" type="checkbox"> Sharp YUV</label></div> <div class="row svelte-1dgh8ms"><button>Reset</button></div></div></div></div>');function Fl(n,h){vr(h,!0);let s=zr(h,"value",15);const T={quality:`
    /**
     * Quality-based VBR [0, 100], it will map to \`--crf\` parameter of x265.
     * quality=0   -> crf=50
     * quality=50  -> crf=25
     * quality=100 -> crf=0
     *
     * @default 50
     */
    `,lossless:`
        /**
     * If true, Bypass transform, quant and loop filters.
     *
     * Note: it does not bypass chroma subsampling, you need
     *       also to set \`chroma\` to "444" for exact lossless.
     *
     * @default false
     */
    `,preset:`
        /**
     * Trade off performance for compression efficiency.
     *
     * @default "slow"
     */
    `,tune:`    /**
     * Tune the settings for a particular type of source or situation.
     *
     * @default "ssim"
     */`,tuIntraDepth:`    /**
     * Max TU recursive depth for intra CUsã€‚
     *
     * [1, 4], default 2.
     */`,complexity:`    /**
     * CPU effort, larger value increases encode time.
     * Range is [0, 100], but only changes at a few values.
     *
     * @default 50
     */`,chroma:`    /**
     * Specify chroma subsampling method.
     *
     * @default "420"
     */`,sharpYUV:`    /**
     * Use more accurate and sharper RGB->YUV conversion if needed.
     *
     * @default false
     */`};var $=jl(),g=p(d($),2),C=d(g),x=d(C),b=d(x),O=p(d(b)),k=d(O,!0);f(O),f(b),f(x);var c=p(x,2),A=d(c);D(A),f(c);var R=p(c,2),F=d(R),re=d(F);D(re),We(),f(F),f(R);var q=p(R,2),y=d(q),Y=p(y,2);ht(Y,21,()=>Al,pt,(H,K)=>{var Q=Wl(),pe={},Ee=d(Q,!0);f(Q),Je(()=>{pe!==(pe=I(K))&&(Q.value=(Q.__value=I(K))==null?"":I(K)),X(Ee,I(K))}),Fe(H,Q)}),f(Y),f(q);var oe=p(q,2),j=d(oe),L=p(j,2);ht(L,21,()=>El,pt,(H,K)=>{var Q=Ul(),pe={},Ee=d(Q,!0);f(Q),Je(()=>{pe!==(pe=I(K))&&(Q.value=(Q.__value=I(K))==null?"":I(K)),X(Ee,I(K))}),Fe(H,Q)}),f(L),f(oe);var he=p(oe,2),ve=d(he),ue=p(d(ve)),ce=d(ue,!0);f(ue),f(ve),f(he);var B=p(he,2),ee=d(B);D(ee),f(B),f(C);var G=p(C,2),ke=d(G),ae=d(ke),ne=p(d(ae)),M=d(ne,!0);f(ne),f(ae),f(ke);var we=p(ke,2),Oe=d(we);D(Oe),f(we);var Te=p(we,2),$e=d(Te),Ae=p($e,2);ht(Ae,21,()=>Sl,pt,(H,K)=>{var Q=Il(),pe={},Ee=d(Q,!0);f(Q),Je(()=>{pe!==(pe=I(K))&&(Q.value=(Q.__value=I(K))==null?"":I(K)),X(Ee,I(K))}),Fe(H,Q)}),f(Ae),f(Te);var Me=p(Te,2),Ue=d(Me),ie=d(Ue);D(ie),We(),f(Ue),f(Me);var Se=p(Me,2),De=d(Se);De.__click=[Rl,s],f(Se),f(G),f(g),f($),Je(()=>{P(b,"title",T.quality),X(k,s().quality??50),P(F,"title",T.lossless),P(y,"title",T.preset),P(j,"title",T.tune),P(ve,"title",T.tuIntraDepth),X(ce,s().tuIntraDepth),P(ae,"title",T.complexity),X(M,s().complexity),P($e,"title",T.chroma),P(Ue,"title",T.sharpYUV)}),se(A,()=>s().quality,H=>s(s().quality=H,!0)),je(re,()=>s().lossless,H=>s(s().lossless=H,!0)),ot(Y,()=>s().preset,H=>s(s().preset=H,!0)),ot(L,()=>s().tune,H=>s(s().tune=H,!0)),se(ee,()=>s().tuIntraDepth,H=>s(s().tuIntraDepth=H,!0)),se(Oe,()=>s().complexity,H=>s(s().complexity=H,!0)),ot(Ae,()=>s().chroma,H=>s(s().chroma=H,!0)),je(ie,()=>s().sharpYUV,H=>s(s().sharpYUV=H,!0)),Fe(n,$),cr()}fr(["click"]);function Ll(n,h){h({...ci})}var Ol=Le("<option> </option>"),Dl=Le("<option> </option>"),Ml=Le(`<div class="card svelte-1c6geua" aria-label="WebP Encoder Options"><div class="grid svelte-1c6geua"><div class="row svelte-1c6geua"><strong>WebP Encoder Options</strong></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input name="webp-lossless" type="checkbox"> Lossless</label> <span class="muted svelte-1c6geua">(may change transparent pixels)</span></div> <div class="row svelte-1c6geua"><div style="flex:1"><label for="webp-nearLossless" class="small svelte-1c6geua">nearLossless: <span class="muted svelte-1c6geua"> </span></label> <input type="range" id="webp-nearLossless" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label for="webp-quality" class="small svelte-1c6geua">quality</label> <input class="num svelte-1c6geua" type="number" min="0" id="webp-quality" max="100"></div></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua" for="webp-alphaQuality">alphaQuality: <span class="muted svelte-1c6geua"> </span></label> <input type="range" id="webp-alphaQuality" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label for="webp-method" class="small svelte-1c6geua">method</label> <input class="num svelte-1c6geua" id="webp-method" type="number" min="0" max="6"></div></div> <div class="row svelte-1c6geua"><label for="webp-snsStrength" class="small svelte-1c6geua"> </label> <input type="range" id="webp-snsStrength" min="0" max="100" class="svelte-1c6geua"></div> <div class="row svelte-1c6geua"><label for="webp-filterStrength" class="small svelte-1c6geua"> </label> <input type="range" id="webp-filterStrength" min="0" max="100" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-filterSharpness" class="small svelte-1c6geua"> </label> <input type="range" id="webp-filterSharpness" min="0" max="7" class="svelte-1c6geua"></div> <div style="width:160px"><label class="svelte-1c6geua"><input name="webp-filterType" type="checkbox"> filterType
                    (strong)</label></div></div> <div class="row svelte-1c6geua"><label for="webp-segments" class="small svelte-1c6geua"> </label> <input id="webp-segments" type="range" min="1" max="4" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-preprocessing" class="svelte-1c6geua">preprocessing</label> <select id="webp-preprocessing"></select></div> <div style="width:160px"><label class="svelte-1c6geua"><input name="webp-autofilter" type="checkbox"> autofilter</label></div></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-partitionLimit" class="small svelte-1c6geua"> </label> <input type="range" id="webp-partitionLimit" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:160px"><label for="webp-pass" class="small svelte-1c6geua"> </label> <input class="num svelte-1c6geua" id="webp-pass" type="number" min="1" max="10"></div></div> <div class="row two svelte-1c6geua"><div><label for="webp-alphaCompression" class="svelte-1c6geua">alphaCompression</label> <select id="webp-alphaCompression"><option>0 (none)</option><option>1 (webp lossless)</option></select></div> <div><label for="webp-alphaFiltering" class="svelte-1c6geua">alphaFiltering</label> <select id="webp-alphaFiltering"></select></div></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input name="webp-sharpYUV" type="checkbox"> sharpYUV</label> <label style="margin-left:12px" class="svelte-1c6geua"><input name="webp-exact" type="checkbox"> exact (preserve
                RGB in transparent)</label></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label for="webp-targetSize" class="svelte-1c6geua">targetSize (bytes)</label> <input id="webp-targetSize" type="number" min="0"></div> <div style="width:160px"><label for="webp-targetPSNR" class="svelte-1c6geua">targetPSNR (dB)</label> <input class="num svelte-1c6geua" id="webp-targetPSNR" type="number" min="0"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua"><input name="webp-lowMemory" type="checkbox"> lowMemory</label></div> <div><label class="svelte-1c6geua"><input name="webp-emulateJpegSize" type="checkbox"> emulateJpegSize</label></div></div> <div class="actions svelte-1c6geua"><button type="button">Reset</button></div></div></div>`);function Vl(n,h){vr(h,!0);let s=zr(h,"value",15);const T=Object.values(ur).filter(w=>typeof w=="number").map(w=>({label:St[w],v:w})),$=Object.values(St).filter(w=>typeof w=="number").map(w=>({label:St[w],v:w})),g={lossless:`/**
    * Encode the image without any loss (pixel values of fully transparent area may different).
    *
    * @default false
    */`,nearLossless:`/**
    * Specify the level of near-lossless image preprocessing. This option adjusts pixel values
    * to help compressibility, but has minimal impact on the visual quality.
    * It triggers lossless compression mode automatically.
    *
    * The range is 0 (maximum preprocessing) to 100 (no preprocessing).
    * The typical value is around 60. Note that lossy with -q 100 can at times yield better results.
    *
    * @default 100
    */`,quality:`/**
    * Specify the compression factor for RGB channels between 0 and 100.
    *
    * In case of lossy compression (default), a small factor produces a smaller file
    * with lower quality.  Best quality is achieved by using a value of 100.
    *
    * In case of lossless compression, a small factor enables faster compression speed,
    * but produces a larger file. Maximum compression is achieved by using a value of 100.
    *
    * @default 75
    */`,alphaQuality:`/**
    * Specify the compression factor for alpha compression between 0 and 100.
    * Lossless compression of alpha is achieved using a value of 100, while the lower
    * values result in a lossy compression. The default is 100.
    *
    * @default 100
    */`,method:`/**
    * Specify the compression method to use. This parameter controls the trade off between
    * encoding speed and the compressed file size and quality.
    *
    * Possible values range from 0 to 6. When higher values are used, the encoder will spend more
    * time inspecting additional encoding possibilities and decide on the quality gain.
    *
    * Lower value can result in faster processing at the expense of larger file size and lower quality.
    *
    * @default 4
    */`,snsStrength:`/**
    * Specify the amplitude of the spatial noise shaping. Spatial noise shaping (or sns for short)
    * refers to a general collection of built-in algorithms used to decide which area of the
    * picture should use relatively less bits, and where else to better transfer these bits.
    *
    * The possible range goes from 0 (algorithm is off) to 100 (the maximal effect).
    *
    * @default 50
    */`,filterStrength:`/**
    * Specify the strength of the deblocking filter, between 0 (no filtering) and 100 (maximum filtering).
    * A value of 0 will turn off any filtering. Higher value will increase the strength of the filtering
    * process applied after decoding the picture. The higher the value the smoother the picture will appear.
    *
    * @default 60
    */`,filterSharpness:`/**
    * Specify the sharpness of the filtering (if used). Range is 0 (sharpest) to 7 (least sharp).
    *
    * @default 0
    */`,filterType:`/**
    * Use strong filtering (if filtering is being used thanks to the \`filter_strength\`).
    *
    * @default true
    */`,segments:`/**
    * Change the number of partitions to use during the segmentation of the sns algorithm.
    * Range [1, 4], this option has no effect for methods 3 and up, unless \`low_memory\` is used.
    *
    * @default 4
    */`,preprocessing:`/**
    * Specify some pre-processing steps. Using a value of 2 will trigger quality-dependent pseudo-random
    * dithering during RGBA->YUVA conversion (lossy compression only).
    *
    * @default Preprocess.None
    */`,autofilter:`/**
    * Turns auto-filter on. This algorithm will spend additional time optimizing the
    * filtering strength to reach a well-balanced quality.
    *
    * @default 0
    */`,partitionLimit:`/**
    * Degrade quality by limiting the number of bits used by some macroblocks.
    * Range is 0 (no degradation, the default) to 100 (full degradation).
    * Useful values are usually around 30-70 for moderately large images.
    *
    * In the VP8 format, the so-called control partition has a limit of 512k and is used to store
    * the following information: whether the macroblock is skipped, which segment it belongs to,
    * whether it is coded as intra 4x4 or intra 16x16 mode, and finally the prediction modes to use
    * for each of the sub-blocks.
    *
    * For a very large image, 512k only leaves room for a few bits per 16x16 macroblock.
    * The absolute minimum is 4 bits per macroblock. Skip, segment, and mode information can use up almost
    * all these 4 bits (although the case is unlikely), which is problematic for very large images.
    *
    * \`partitionLimit\` controls how frequently the most bit-costly mode (intra 4x4) will be used.
    * This is useful in case the 512k limit is reached.
    *
    * If using -partition_limit is not enough to meet the 512k constraint, one should use less segments
    * in order to save more header bits per macroblock. See the \`segments\` option.
    *
    * Note the -m and -q options also influence the encoder's decisions and ability to hit this limit.
    *
    * @default 0
    */`,alphaCompression:`/**
    * Specify the algorithm used for alpha compression: 0 or 1.
    * Algorithm 0 denotes no compression, 1 uses WebP lossless format for compression.
    *
    * @default 1
    */`,alphaFiltering:`/**
    * Specify the predictive filtering method for the alpha plane. One of none,
    * fast or best, in increasing complexity and slowness order.
    *
    * Internally, alpha filtering is performed using four possible predictions (none, horizontal, vertical, gradient).
    * The best mode will try each mode in turn and pick the one which gives the smaller size.
    *
    * The fast mode will just try to form an a priori guess without testing all modes.
    *
    * @default AlphaFiltering.Fast
    */`,sharpYUV:`/**
    * Use more accurate and sharper RGB->YUV conversion if needed.
    * Note that this process is slower than the default conversion.
    *
    * @default false
    */`,exact:`/**
    * Preserve RGB values in transparent area. The default is off, to help compressibility.
    */`,targetSize:"/**\n    * Specify a target size (in bytes) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",targetPSNR:"/**\n    * Specify a target PSNR (in dB) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",pass:"/**\n    * Set a maximum number of passes to use during the dichotomy used by `target_size` or `target_PSNR`.\n    *\n    * Maximum value is 10. If options `target_size` or `target_PSNR` were used, but `pass` wasn't specified,\n    * a default value of '6' passes will be used. If `pass` is specified,\n    * but neither `target_size` nor `target_PSNR` are, a target PSNR of 40dB will be used.\n    *\n    * @default 1\n    */",lowMemory:`/**
    * Reduce memory usage of lossy encoding by saving four times the compressed size (typically).
    * This will make the encoding slower and the output slightly different in size and distortion.
    *
    * This flag is only effective for methods 3 and up, and is off by default.
    *
    * Note that leaving this flag off will have some side effects on the bitstream:
    * it forces certain bitstream features like number of partitions (forced to 1).
    *
    * @default false
    */`,emulateJpegSize:`/**
    * Change the internal parameter mapping to better match the expected size of JPEG compression.
    *
    * This flag will generally produce an output file of similar size to its JPEG equivalent
    * (for the same \`quality\` setting), but with less visual distortion.
    *
    * @default false
    */`};var C=Ml(),x=d(C),b=p(d(x),2),O=d(b),k=d(O);D(k),We(),f(O),We(2),f(b);var c=p(b,2),A=d(c),R=d(A),F=p(d(R)),re=d(F,!0);f(F),f(R);var q=p(R,2);D(q),f(A);var y=p(A,2),Y=p(d(y),2);D(Y),f(y),f(c);var oe=p(c,2),j=d(oe),L=d(j),he=p(d(L)),ve=d(he,!0);f(he),f(L);var ue=p(L,2);D(ue),f(j);var ce=p(j,2),B=p(d(ce),2);D(B),f(ce),f(oe);var ee=p(oe,2),G=d(ee),ke=d(G);f(G);var ae=p(G,2);D(ae),f(ee);var ne=p(ee,2),M=d(ne),we=d(M);f(M);var Oe=p(M,2);D(Oe),f(ne);var Te=p(ne,2),$e=d(Te),Ae=d($e),Me=d(Ae);f(Ae);var Ue=p(Ae,2);D(Ue),f($e);var ie=p($e,2),Se=d(ie),De=d(Se);D(De),We(),f(Se),f(ie),f(Te);var H=p(Te,2),K=d(H),Q=d(K);f(K);var pe=p(K,2);D(pe),f(H);var Ee=p(H,2),Ve=d(Ee),ze=p(d(Ve),2);ht(ze,21,()=>T,pt,(w,V)=>{var Pe=Ol(),Xe={},It=d(Pe,!0);f(Pe),Je(()=>{Xe!==(Xe=I(V).v)&&(Pe.value=(Pe.__value=I(V).v)==null?"":I(V).v),X(It,I(V).label)}),Fe(w,Pe)}),f(ze),f(Ve);var Ne=p(Ve,2),ut=d(Ne),_t=d(ut);D(_t),We(),f(ut),f(Ne),f(Ee);var Ce=p(Ee,2),be=d(Ce),He=d(be),Ke=d(He);f(He);var Ye=p(He,2);D(Ye),f(be);var st=p(be,2),Qe=d(st),Et=d(Qe);f(Qe);var E=p(Qe,2);D(E),f(st),f(Ce);var _e=p(Ce,2),de=d(_e),Ie=p(d(de),2),Ze=d(Ie);Ze.value=(Ze.__value=0)==null?"":0;var Pt=p(Ze);Pt.value=(Pt.__value=1)==null?"":1,f(Ie),f(de);var Rt=p(de,2),mt=p(d(Rt),2);ht(mt,21,()=>$,pt,(w,V)=>{var Pe=Dl(),Xe={},It=d(Pe,!0);f(Pe),Je(()=>{Xe!==(Xe=I(V).v)&&(Pe.value=(Pe.__value=I(V).v)==null?"":I(V).v),X(It,I(V).label)}),Fe(w,Pe)}),f(mt),f(Rt),f(_e);var gt=p(_e,2),vt=d(gt),Wt=d(vt);D(Wt),We(),f(vt);var nt=p(vt,2),yt=d(nt);D(yt),We(),f(nt),f(gt);var Z=p(gt,2),J=d(Z),Yt=p(d(J),2);D(Yt),f(J);var Ut=p(J,2),le=p(d(Ut),2);D(le),f(Ut),f(Z);var ct=p(Z,2),bt=d(ct),wt=d(bt),Bt=d(wt);D(Bt),We(),f(wt),f(bt);var Tt=p(bt,2),W=d(Tt),$t=d(W);D($t),We(),f(W),f(Tt),f(ct);var qt=p(ct,2),Ct=d(qt);Ct.__click=[Ll,s],f(qt),f(x),f(C),Je(()=>{P(O,"title",g.lossless),P(A,"title",g.nearLossless),X(re,s().nearLossless),P(y,"title",g.quality),P(j,"title",g.alphaQuality),X(ve,s().alphaQuality),P(ce,"title",g.method),P(ee,"title",g.snsStrength),X(ke,`snsStrength: ${s().snsStrength??""}`),P(ne,"title",g.filterStrength),X(we,`filterStrength: ${s().filterStrength??""}`),P($e,"title",g.filterSharpness),X(Me,`filterSharpness: ${s().filterSharpness??""}`),P(ie,"title",g.filterType),P(H,"title",g.segments),X(Q,`segments: ${s().segments??""}`),P(Ve,"title",g.preprocessing),P(Ne,"title",g.autofilter),P(be,"title",g.partitionLimit),X(Ke,`partitionLimit: ${s().partitionLimit??""}`),P(st,"title",g.pass),X(Et,`pass: ${s().pass??""}`),P(de,"title",g.alphaCompression),P(Rt,"title",g.alphaFiltering),P(vt,"title",g.sharpYUV),P(nt,"title",g.exact),P(J,"title",g.targetSize),P(Ut,"title",g.targetPSNR),P(wt,"title",g.lowMemory),P(W,"title",g.emulateJpegSize)}),je(k,()=>s().lossless,w=>s(s().lossless=w,!0)),se(q,()=>s().nearLossless,w=>s(s().nearLossless=w,!0)),se(Y,()=>s().quality,w=>s(s().quality=w,!0)),se(ue,()=>s().alphaQuality,w=>s(s().alphaQuality=w,!0)),se(B,()=>s().method,w=>s(s().method=w,!0)),se(ae,()=>s().snsStrength,w=>s(s().snsStrength=w,!0)),se(Oe,()=>s().filterStrength,w=>s(s().filterStrength=w,!0)),se(Ue,()=>s().filterSharpness,w=>s(s().filterSharpness=w,!0)),je(De,()=>s().filterType,w=>s(s().filterType=w,!0)),se(pe,()=>s().segments,w=>s(s().segments=w,!0)),ot(ze,()=>s().preprocessing,w=>s(s().preprocessing=w,!0)),je(_t,()=>s().autofilter,w=>s(s().autofilter=w,!0)),se(Ye,()=>s().partitionLimit,w=>s(s().partitionLimit=w,!0)),se(E,()=>s().pass,w=>s(s().pass=w,!0)),ot(Ie,()=>s().alphaCompression,w=>s(s().alphaCompression=w,!0)),ot(mt,()=>s().alphaFiltering,w=>s(s().alphaFiltering=w,!0)),je(Wt,()=>s().sharpYUV,w=>s(s().sharpYUV=w,!0)),je(yt,()=>s().exact,w=>s(s().exact=w,!0)),se(Yt,()=>s().targetSize,w=>s(s().targetSize=w,!0)),se(le,()=>s().targetPSNR,w=>s(s().targetPSNR=w,!0)),je(Bt,()=>s().lowMemory,w=>s(s().lowMemory=w,!0)),je($t,()=>s().emulateJpegSize,w=>s(s().emulateJpegSize=w,!0)),Fe(n,C),cr()}fr(["click"]);function zl(n,h){h({...Fr})}var Nl=Le("<option> </option>"),Hl=Le("<option> </option>"),Yl=Le('<div class="card svelte-1iuoinz" aria-label="AVIF Encoder Options"><div class="title" style="font-weight:600; margin-bottom:8px">AVIF Options</div> <div class="grid svelte-1iuoinz"><div><div class="row svelte-1iuoinz"><label for="avif-quality" class="svelte-1iuoinz">Quality <span class="muted svelte-1iuoinz"> </span></label></div> <div class="row svelte-1iuoinz"><input id="avif-quality" type="range" min="0" max="100" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-qualityAlpha" class="svelte-1iuoinz">Quality Alpha <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-qualityAlpha" class="num svelte-1iuoinz" type="number" min="-1" max="100"></div> <div class="row svelte-1iuoinz"><label for="avif-speed" class="svelte-1iuoinz">Speed <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-speed" type="range" min="-1" max="10" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-subsample" class="svelte-1iuoinz">Subsample</label> <select id="avif-subsample"></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-autoTiling" type="checkbox"> Auto Tiling</label></div> <div class="row svelte-1iuoinz"><label for="avif-tileRowsLog2" class="svelte-1iuoinz">TileRows (log2) <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-tileRowsLog2" type="range" min="0" max="6" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-tileColsLog2" class="svelte-1iuoinz">TileCols (log2) <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-tileColsLog2" type="range" min="0" max="6" class="svelte-1iuoinz"></div></div> <div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-chromaDeltaQ" type="checkbox"> Chroma Delta Q</label></div> <div class="row svelte-1iuoinz"><label for="avif-sharpness" class="svelte-1iuoinz">Sharpness <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-sharpness" type="range" min="0" max="7" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-denoiseLevel" class="svelte-1iuoinz">Denoise Level <span class="muted svelte-1iuoinz"> </span></label> <input id="avif-denoiseLevel" type="range" min="0" max="50" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label for="avif-tune" class="svelte-1iuoinz">Tune</label> <select id="avif-tune"></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input name="avif-sharpYUV" type="checkbox"> Sharp YUV</label></div> <div class="actions svelte-1iuoinz"><button type="button">Reset</button></div></div></div></div>');function Bl(n,h){vr(h,!0);let s=zr(h,"value",15);const T=Object.values(Nt).filter(E=>typeof E=="number").map(E=>({label:Nt[E],v:E})),$=Object.values(Ht).filter(E=>typeof E=="number").map(E=>({label:Ht[E],v:E})),g={quality:`/**
 * [0 - 100], 0 = worst quality, 100 = lossless
 *
 * @default 50
 */`,qualityAlpha:`/**
 * As above, but -1 means 'use quality'
 *
 * @default -1
 */`,speed:`/**
 * Range: [-1, 10], 0 = slowest, 10 = fastest, slower should make for a better quality image in less bytes.
 * A combination of settings are tweaked to simulate this speed range.
 *
 * @default 6
 */`,subsample:`/**
 * Chrome subsampling type.
 *
 * @default YUV420
 */`,autoTiling:"/**\n * If true, ignores `tileRowsLog2` and `tileColsLog2` and automatically chooses suitable tiling values.\n *\n * @default false\n */",tileColsLog2:`/**
 * [0 - 6], Creates 2^n tiles in that dimension
 *
 * @default 0
 */`,chromaDeltaQ:`/**
 * Extra chroma compression, cannot be used in lossless mode.
 *
 * @default false
 */`,sharpness:`/**
 * Bias towards block sharpness in rate-distortion optimization of transform coefficients [0, 7]
 *
 * @default 0
 */`,denoiseLevel:`/**
 * Amount of noise (from 0 = don't denoise, to 50)
 *
 * @default 0
 */`,tune:`/**
 * Distortion metric tuned with.
 *
 * @default AVIFTune.Auto
 */`,sharpYUV:`/**
 * Use libsharpyuv for RGB->YUV conversion if needed.
 *
 * @default false
 */`};var C=Yl(),x=p(d(C),2),b=d(x),O=d(b),k=d(O),c=p(d(k)),A=d(c,!0);f(c),f(k),f(O);var R=p(O,2),F=d(R);D(F),f(R);var re=p(R,2),q=d(re),y=p(d(q)),Y=d(y,!0);f(y),f(q);var oe=p(q,2);D(oe),f(re);var j=p(re,2),L=d(j),he=p(d(L)),ve=d(he,!0);f(he),f(L);var ue=p(L,2);D(ue),f(j);var ce=p(j,2),B=p(d(ce),2);ht(B,21,()=>T,pt,(E,_e)=>{var de=Nl(),Ie={},Ze=d(de,!0);f(de),Je(()=>{Ie!==(Ie=I(_e).v)&&(de.value=(de.__value=I(_e).v)==null?"":I(_e).v),X(Ze,I(_e).label)}),Fe(E,de)}),f(B),f(ce);var ee=p(ce,2),G=d(ee),ke=d(G);D(ke),We(),f(G),f(ee);var ae=p(ee,2),ne=d(ae),M=p(d(ne)),we=d(M,!0);f(M),f(ne);var Oe=p(ne,2);D(Oe),f(ae);var Te=p(ae,2),$e=d(Te),Ae=p(d($e)),Me=d(Ae,!0);f(Ae),f($e);var Ue=p($e,2);D(Ue),f(Te),f(b);var ie=p(b,2),Se=d(ie),De=d(Se),H=d(De);D(H),We(),f(De),f(Se);var K=p(Se,2),Q=d(K),pe=p(d(Q)),Ee=d(pe,!0);f(pe),f(Q);var Ve=p(Q,2);D(Ve),f(K);var ze=p(K,2),Ne=d(ze),ut=p(d(Ne)),_t=d(ut,!0);f(ut),f(Ne);var Ce=p(Ne,2);D(Ce),f(ze);var be=p(ze,2),He=p(d(be),2);ht(He,21,()=>$,pt,(E,_e)=>{var de=Hl(),Ie={},Ze=d(de,!0);f(de),Je(()=>{Ie!==(Ie=I(_e).v)&&(de.value=(de.__value=I(_e).v)==null?"":I(_e).v),X(Ze,I(_e).label)}),Fe(E,de)}),f(He),f(be);var Ke=p(be,2),Ye=d(Ke),st=d(Ye);D(st),We(),f(Ye),f(Ke);var Qe=p(Ke,2),Et=d(Qe);Et.__click=[zl,s],f(Qe),f(ie),f(x),f(C),Je(()=>{P(O,"title",g.quality),X(A,s().quality),P(re,"title",g.qualityAlpha),X(Y,s().qualityAlpha),P(j,"title",g.speed),X(ve,s().speed),P(ce,"title",g.subsample),P(ee,"title",g.autoTiling),P(ae,"title",g.tileColsLog2),X(we,s().tileRowsLog2),P(Te,"title",g.tileColsLog2),X(Me,s().tileColsLog2),P(Se,"title",g.chromaDeltaQ),P(K,"title",g.sharpness),X(Ee,s().sharpness),P(ze,"title",g.denoiseLevel),X(_t,s().denoiseLevel),P(be,"title",g.tune),P(Ke,"title",g.sharpYUV)}),se(F,()=>s().quality,E=>s(s().quality=E,!0)),se(oe,()=>s().qualityAlpha,E=>s(s().qualityAlpha=E,!0)),se(ue,()=>s().speed,E=>s(s().speed=E,!0)),ot(B,()=>s().subsample,E=>s(s().subsample=E,!0)),je(ke,()=>s().autoTiling,E=>s(s().autoTiling=E,!0)),se(Oe,()=>s().tileRowsLog2,E=>s(s().tileRowsLog2=E,!0)),se(Ue,()=>s().tileColsLog2,E=>s(s().tileColsLog2=E,!0)),je(H,()=>s().chromaDeltaQ,E=>s(s().chromaDeltaQ=E,!0)),se(Ve,()=>s().sharpness,E=>s(s().sharpness=E,!0)),se(Ce,()=>s().denoiseLevel,E=>s(s().denoiseLevel=E,!0)),ot(He,()=>s().tune,E=>s(s().tune=E,!0)),je(st,()=>s().sharpYUV,E=>s(s().sharpYUV=E,!0)),Fe(n,C),cr()}fr(["click"]);const ql="icodec_encoder_options";async function Gl(n,h){const s=Array.from(n.currentTarget.files??[]);h(s)}function Jl(n,h){window.localStorage.setItem("icodec_encoder_options",JSON.stringify(oi(I(h))))}var Kl=Le('<meta name="description" content="Converter for heif">'),Ql=Le('<div class="container svelte-drub0"><div class="section svelte-drub0">âš ï¸ ìƒë‹¹ížˆ ëŠë¦½ë‹ˆë‹¤.</div> <div class="section svelte-drub0"><div class="field svelte-drub0"><label for="icodec-images">images</label> <input type="file" id="icodec-images" multiple accept="image/png, image/jpeg"></div></div> <div class="section svelte-drub0"><details class="svelte-drub0"><summary class="svelte-drub0">WEBP</summary> <div class="body svelte-drub0"><!></div></details> <details class="svelte-drub0"><summary class="svelte-drub0">HEIC</summary> <div class="body svelte-drub0"><!></div></details> <details class="svelte-drub0"><summary class="svelte-drub0">AVIF</summary> <div class="body svelte-drub0"><!></div></details></div> <div class="section svelte-drub0"><button class="svelte-drub0">save config in local</button></div></div>');function fo(n,h){vr(h,!0);let s=vl(Xa({webp:{...ci},avif:{...Fr},heic:{...fi}}));pl(()=>{let j=window.localStorage.getItem(ql);j&&fl(s,JSON.parse(j),!0)});async function T(j){if(!j.length)return;const L=new Worker($l,{type:"module"}),he=hl(L),ve=new ml,ue=ve.folder("heic"),ce=ve.folder("webp"),B=ve.folder("avif");let ee=[];try{const G=j.map(async ae=>{let ne=await createImageBitmap(ae);const M=await he.encodeBitmap(_l(ne,[ne]),oi(I(s))),we=ae.name.replace(/\.[^/.]+$/,"");M.avif.status==="fulfilled"?B==null||B.file(we+".avif",M.avif.value):(console.error(M.avif.reason),ee.push({type:"avif",reason:M.avif.reason,fileName:ae.name})),M.heic.status==="fulfilled"?ue==null||ue.file(we+".heic",M.heic.value):(console.error(M.heic.reason),ee.push({type:"heic",reason:M.heic.reason,fileName:ae.name})),M.webp.status==="fulfilled"?ce==null||ce.file(we+".webp",M.webp.value):(console.error(M.webp.reason),ee.push({type:"webp",reason:M.webp.reason,fileName:ae.name}))});await Promise.all(G);const ke=await ve.generateAsync({type:"blob"});gl(ke,"converted_images.zip")}finally{L.terminate()}ee.length>0&&alert(JSON.stringify(ee))}Xa({...Fr});var $=Ql();dl(j=>{var L=Kl();cl.title="About",Fe(j,L)});var g=p(d($),2),C=d(g),x=p(d(C),2);x.__change=[Gl,T],f(C),f(g);var b=p(g,2),O=d(b),k=p(d(O),2),c=d(k);Vl(c,{get value(){return I(s).webp},set value(j){I(s).webp=j}}),f(k),f(O);var A=p(O,2),R=p(d(A),2),F=d(R);Fl(F,{get value(){return I(s).heic},set value(j){I(s).heic=j}}),f(R),f(A);var re=p(A,2),q=p(d(re),2),y=d(q);Bl(y,{get value(){return I(s).avif},set value(j){I(s).avif=j}}),f(q),f(re),f(b);var Y=p(b,2),oe=d(Y);oe.__click=[Jl,s],f(Y),f($),Fe(n,$),cr()}fr(["change","click"]);export{fo as component};
