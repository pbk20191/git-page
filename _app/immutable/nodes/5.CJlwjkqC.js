var Zs=Object.defineProperty;var Xs=(o,y,w)=>y in o?Zs(o,y,{enumerable:!0,configurable:!0,writable:!0,value:w}):o[y]=w;var zt=(o,y,w)=>Xs(o,typeof y!="symbol"?y+"":y,w);import{t as Xe,a as Qe}from"../chunks/BG7Uk98R.js";import"../chunks/iFwKHc4I.js";import{F as eo,b as to,i as Br,h as Pt,J as ro,d as ao,y as s,T as io,e as no,g as vi,j as Hr,n as ir,af as so,k as bi,l as wi,m as oo,az as Yr,aj as Ti,a8 as ci,aA as lo,P as lr,ax as fi,ac as uo,aB as vo,aC as co,ai as fo,aD as po,aw as ho,aE as _o,aF as mo,I as go,aq as xi,aG as yo,p as Cr,aH as ta,aI as ra,t as me,a as Ar,s as h,c as d,aJ as W,Q as Ze,z as aa,r as p,O as qe,aK as Tt,$ as bo}from"../chunks/DB4Lk07f.js";import{l as wo,e as j,s as re}from"../chunks/uKYrbfZO.js";import{h as To}from"../chunks/BQ1BFapl.js";import{i as kr}from"../chunks/JpWhb4AA.js";import{c as wr,g as xo,a as ce,b as Ke,w as Co,J as Ao,t as Gr}from"../chunks/DbXxs98E.js";import{r as B,s as F}from"../chunks/Co-tNn5r.js";import{p as dt}from"../chunks/BkQHANyH.js";function jt(o,y){return y}function ko(o,y,w,P){for(var k=[],n=y.length,$=0;$<n;$++)co(y[$].e,k,!0);var m=n>0&&k.length===0&&w!==null;if(m){var E=w.parentNode;fo(E),E.append(w),P.clear(),wt(o,y[0].prev,y[n-1].next)}po(k,()=>{for(var R=0;R<n;R++){var T=y[R];m||(P.delete(T.k),wt(o,T.prev,T.next)),ho(T.e,!m)}})}function Ut(o,y,w,P,k,n=null){var $=o,m={flags:y,items:new Map,first:null};{var E=o;$=Pt?Br(ro(E)):E.appendChild(eo())}Pt&&ao();var R=null,T=!1,c=io(()=>{var _=w();return uo(_)?_:_==null?[]:Ti(_)});to(()=>{var _=s(c),b=_.length;if(T&&b===0)return;T=b===0;let O=!1;if(Pt){var Z=$.data===no;Z!==(b===0)&&($=vi(),Br($),Hr(!1),O=!0)}if(Pt){for(var N=null,C,V=0;V<b;V++){if(ir.nodeType===8&&ir.data===so){$=ir,O=!0,Hr(!1);break}var ee=_[V],ie=P(ee,V);C=Ci(ir,m,N,null,ee,ie,V,k,y,w),m.items.set(ie,C),N=C}b>0&&Br(vi())}Pt||$o(_,m,$,k,y,P,w),n!==null&&(b===0?R?bi(R):R=wi(()=>n($)):R!==null&&oo(R,()=>{R=null})),O&&Hr(!0),s(c)}),Pt&&($=ir)}function $o(o,y,w,P,k,n,$){var m=o.length,E=y.items,R=y.first,T=R,c,_=null,b=[],O=[],Z,N,C,V;for(V=0;V<m;V+=1){if(Z=o[V],N=n(Z,V),C=E.get(N),C===void 0){var ee=T?T.e.nodes_start:w;_=Ci(ee,y,_,_===null?y.first:_.next,Z,N,V,P,k,$),E.set(N,_),b=[],O=[],T=_.next;continue}if(So(C,Z,V),(C.e.f&Yr)!==0&&bi(C.e),C!==T){if(c!==void 0&&c.has(C)){if(b.length<O.length){var ie=O[0],z;_=ie.prev;var he=b[0],ne=b[b.length-1];for(z=0;z<b.length;z+=1)pi(b[z],ie,w);for(z=0;z<O.length;z+=1)c.delete(O[z]);wt(y,he.prev,ne.next),wt(y,_,he),wt(y,ne,ie),T=ie,_=ne,V-=1,b=[],O=[]}else c.delete(C),pi(C,T,w),wt(y,C.prev,C.next),wt(y,C,_===null?y.first:_.next),wt(y,_,C),_=C;continue}for(b=[],O=[];T!==null&&T.k!==N;)(T.e.f&Yr)===0&&(c??(c=new Set)).add(T),O.push(T),T=T.next;if(T===null)continue;C=T}b.push(C),_=C,T=C.next}if(T!==null||c!==void 0){for(var se=c===void 0?[]:Ti(c);T!==null;)(T.e.f&Yr)===0&&se.push(T),T=T.next;var ge=se.length;if(ge>0){var J=m===0?w:null;ko(y,se,J,E)}}ci.first=y.first&&y.first.e,ci.last=_&&_.e}function So(o,y,w,P){lo(o.v,y),o.i=w}function Ci(o,y,w,P,k,n,$,m,E,R){var T=(E&_o)!==0,c=(E&mo)===0,_=T?c?lr(k):fi(k):k,b=(E&vo)===0?$:fi($),O={i:b,v:_,k:n,a:null,e:null,prev:w,next:P};try{return O.e=wi(()=>m(o,_,b,R),Pt),O.e.prev=w&&w.e,O.e.next=P&&P.e,w===null?y.first=O:(w.next=O,w.e.next=O.e),P!==null&&(P.prev=O,P.e.prev=O.e),O}finally{}}function pi(o,y,w){for(var P=o.next?o.next.e.nodes_start:w,k=y?y.e.nodes_start:w,n=o.e.nodes_start;n!==P;){var $=go(n);k.before(n),n=$}}function wt(o,y,w){y===null?o.first=w:(y.next=w,y.e.next=w&&w.e),w!==null&&(w.prev=y,w.e.prev=y&&y.e)}function Ai(o,y,w){if(o.multiple)return Ro(o,y);for(var P of o.options){var k=nr(P);if(yo(k,y)){P.selected=!0;return}}(!w||y!==void 0)&&(o.selectedIndex=-1)}function Eo(o,y){xi(()=>{var w=new MutationObserver(()=>{var P=o.__value;Ai(o,P)});return w.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{w.disconnect()}})}function xt(o,y,w=y){var P=!0;wo(o,"change",k=>{var n=k?"[selected]":":checked",$;if(o.multiple)$=[].map.call(o.querySelectorAll(n),nr);else{var m=o.querySelector(n)??o.querySelector("option:not([disabled])");$=m&&nr(m)}w($)}),xi(()=>{var k=y();if(Ai(o,k,P),P&&k===void 0){var n=o.querySelector(":checked");n!==null&&(k=nr(n),w(k))}o.__value=k,P=!1}),Eo(o)}function Ro(o,y){for(var w of o.options)w.selected=~y.indexOf(nr(w))}function nr(o){return"__value"in o?o.__value:o.value}const Po=""+new URL("../workers/icodecs-BK2ByZZL.js",import.meta.url).href;var Tr={exports:{}},jo=Tr.exports,di;function Uo(){return di||(di=1,function(o,y){(function(w,P){P()})(jo,function(){function w(R,T){return typeof T>"u"?T={autoBom:!1}:typeof T!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(R.type)?new Blob(["\uFEFF",R],{type:R.type}):R}function P(R,T,c){var _=new XMLHttpRequest;_.open("GET",R),_.responseType="blob",_.onload=function(){E(_.response,T,c)},_.onerror=function(){console.error("could not download file")},_.send()}function k(R){var T=new XMLHttpRequest;T.open("HEAD",R,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function n(R){try{R.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(T)}}var $=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof wr=="object"&&wr.global===wr?wr:void 0,m=$.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=$.saveAs||(typeof window!="object"||window!==$?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(R,T,c){var _=$.URL||$.webkitURL,b=document.createElement("a");T=T||R.name||"download",b.download=T,b.rel="noopener",typeof R=="string"?(b.href=R,b.origin===location.origin?n(b):k(b.href)?P(R,T,c):n(b,b.target="_blank")):(b.href=_.createObjectURL(R),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){n(b)},0))}:"msSaveOrOpenBlob"in navigator?function(R,T,c){if(T=T||R.name||"download",typeof R!="string")navigator.msSaveOrOpenBlob(w(R,c),T);else if(k(R))P(R,T,c);else{var _=document.createElement("a");_.href=R,_.target="_blank",setTimeout(function(){n(_)})}}:function(R,T,c,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof R=="string")return P(R,T,c);var b=R.type==="application/octet-stream",O=/constructor/i.test($.HTMLElement)||$.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||b&&O||m)&&typeof FileReader<"u"){var N=new FileReader;N.onloadend=function(){var ee=N.result;ee=Z?ee:ee.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=ee:location=ee,_=null},N.readAsDataURL(R)}else{var C=$.URL||$.webkitURL,V=C.createObjectURL(R);_?_.location=V:location.href=V,_=null,setTimeout(function(){C.revokeObjectURL(V)},4e4)}});$.saveAs=E.saveAs=E,o.exports=E})}(Tr)),Tr.exports}var Lo=Uo();const Wo=xo(Lo);class ki{constructor(y,w,P,k=8){zt(this,"data");zt(this,"width");zt(this,"height");zt(this,"depth");this.data=y,this.width=w,this.height=P,this.depth=k}}ki.prototype.colorSpace="srgb";var sr;(function(o){o[o.YUV444=1]="YUV444",o[o.YUV422=2]="YUV422",o[o.YUV420=3]="YUV420",o[o.YUV400=4]="YUV400"})(sr||(sr={}));var or;(function(o){o[o.Auto=0]="Auto",o[o.PSNR=1]="PSNR",o[o.SSIM=2]="SSIM"})(or||(or={}));const hi={quality:50,qualityAlpha:-1,speed:6,subsample:sr.YUV420,autoTiling:!1,tileColsLog2:0,tileRowsLog2:0,chromaDeltaQ:!1,sharpness:0,denoiseLevel:0,tune:or.Auto,sharpYUV:!1},Oo=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Oo.decode();const Jr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Jr.encodeInto;var Kr;(function(o){o[o.GRAYSCALE=1]="GRAYSCALE",o[o.RGB=2]="RGB",o[o.YCbCr=3]="YCbCr"})(Kr||(Kr={}));var Qr;(function(o){o[o.JPEG_Annex_K=0]="JPEG_Annex_K",o[o.Flat=1]="Flat",o[o.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",o[o.ImageMagick=3]="ImageMagick",o[o.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",o[o.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",o[o.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",o[o.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",o[o.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Qr||(Qr={}));Kr.YCbCr,Qr.ImageMagick;var _i;(function(o){o[o.Default=-1]="Default",o[o.False=0]="False",o[o.True=1]="True"})(_i||(_i={}));var Zr;(function(o){o[o.Default=-1]="Default",o[o.Zero=0]="Zero",o[o.Left=1]="Left",o[o.Top=2]="Top",o[o.Average0=3]="Average0",o[o.Select=4]="Select",o[o.Gradient=5]="Gradient",o[o.Weighted=6]="Weighted",o[o.TopRight=7]="TopRight",o[o.TopLeft=8]="TopLeft",o[o.LeftLeft=9]="LeftLeft",o[o.Average1=10]="Average1",o[o.Average2=11]="Average2",o[o.Average3=12]="Average3",o[o.Average4=13]="Average4",o[o.Best=14]="Best",o[o.Variable=15]="Variable"})(Zr||(Zr={}));Zr.Default;var xr;(function(o){o[o.None=0]="None",o[o.SegmentSmooth=1]="SegmentSmooth",o[o.Dithering=2]="Dithering"})(xr||(xr={}));var qt;(function(o){o[o.None=0]="None",o[o.Fast=1]="Fast",o[o.Best=2]="Best"})(qt||(qt={}));const mi={lossless:!1,nearLossless:100,quality:75,targetSize:0,targetPSNR:0,method:4,snsStrength:50,filterStrength:60,filterSharpness:0,filterType:!0,segments:4,pass:1,sharpYUV:!1,preprocessing:xr.None,autofilter:!1,partitionLimit:0,alphaCompression:1,alphaFiltering:qt.Fast,alphaQuality:100,exact:!1,emulateJpegSize:!1,lowMemory:!1,partitions:0,showCompressed:0,imageHint:0,threadLevel:0,useDeltaPalette:0};var Fo=(()=>{var o=import.meta.url;return function(y={}){var ni;var w;function P(){return K.buffer!=fe.buffer&&pe(),fe}function k(){return K.buffer!=fe.buffer&&pe(),Fe}function n(){return K.buffer!=fe.buffer&&pe(),je}function $(){return K.buffer!=fe.buffer&&pe(),be}function m(){return K.buffer!=fe.buffer&&pe(),Be}function E(){return K.buffer!=fe.buffer&&pe(),He}function R(){return K.buffer!=fe.buffer&&pe(),Ae}function T(){return K.buffer!=fe.buffer&&pe(),Ue}var c=y,_,b,O=new Promise((e,t)=>{_=e,b=t}),Z=typeof window=="object",N=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var C=N&&((ni=self.name)==null?void 0:ni.startsWith("em-pthread")),V=Object.assign({},c),ee="./this.program",ie=(e,t)=>{throw t},z="";function he(e){return c.locateFile?c.locateFile(e,z):z+e}var ne,se;(Z||N)&&(N?z=self.location.href:typeof document<"u"&&document.currentScript&&(z=document.currentScript.src),o&&(z=o),z.startsWith("blob:")?z="":z=z.substr(0,z.replace(/[?#].*/,"").lastIndexOf("/")+1),N&&(se=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ne=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var ge=c.print||console.log.bind(console),J=c.printErr||console.error.bind(console);Object.assign(c,V),V=null,c.arguments&&c.arguments,c.thisProgram&&(ee=c.thisProgram);var ye=c.wasmBinary,K,Ce,Re=!1,Pe,fe,Fe,je,be,Be,He,Ae,Ue;function pe(){var e=K.buffer;c.HEAP8=fe=new Int8Array(e),c.HEAP16=je=new Int16Array(e),c.HEAPU8=Fe=new Uint8Array(e),c.HEAPU16=be=new Uint16Array(e),c.HEAP32=Be=new Int32Array(e),c.HEAPU32=He=new Uint32Array(e),c.HEAPF32=Ae=new Float32Array(e),c.HEAPF64=Ue=new Float64Array(e)}if(C){let e=function(...a){var i=a.join(" ");console.error(i)},t=function(...a){var i=a.join(" ");postMessage({cmd:"alert",text:i,threadId:yr()})},r=function(a){try{var i=a.data,l=i.cmd;if(l==="load"){let v=[];self.onmessage=u=>v.push(u),self.startWorker=u=>{postMessage({cmd:"loaded"});for(let f of v)r(f);self.onmessage=r};for(const u of i.handlers)(!c[u]||c[u].proxy)&&(c[u]=(...f)=>{postMessage({cmd:"callHandler",handler:u,args:f})},u=="print"&&(ge=c[u]),u=="printErr"&&(J=c[u]));K=i.wasmMemory,pe(),tt(i.wasmModule)}else if(l==="run"){Yt(i.pthread_ptr),Vr(i.pthread_ptr,0,0,1,0,0),I.receiveObjectTransfer(i),I.threadInitTLS(),Fr(i.pthread_ptr),ke||(Da(),ke=!0);try{Gt(i.start_routine,i.arg)}catch(v){if(v!="unwind")throw v}}else i.target==="setimmediate"||(l==="checkMailbox"?ke&&mr():l&&(J(`worker: received unknown command ${l}`),J(i)))}catch(v){throw Na(),v}};var tt,ke=!1;c.printErr||(J=e),self.alert=t,c.instantiateWasm=(a,i)=>new Promise((l,v)=>{tt=u=>{var f=new WebAssembly.Instance(u,it());i(f),l()}}),self.onunhandledrejection=a=>{throw a.reason||a},self.onmessage=r}if(!C){if(c.wasmMemory)K=c.wasmMemory;else{var Ie=c.INITIAL_MEMORY||16777216;K=new WebAssembly.Memory({initial:Ie/65536,maximum:32768,shared:!0})}pe()}var Le=[],We=[],rt=[];function Me(){var e=c.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Ye)),$t(Le)}function De(){C||$t(We)}function Ne(){if(!C){var e=c.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Ve)),$t(rt)}}function Ye(e){Le.unshift(e)}function Ge(e){We.unshift(e)}function Ve(e){rt.unshift(e)}var $e=0,U=null;function X(e){var t;$e++,(t=c.monitorRunDependencies)==null||t.call(c,$e)}function q(e){var r;if($e--,(r=c.monitorRunDependencies)==null||r.call(c,$e),$e==0&&U){var t=U;U=null,t()}}function Q(e){var r;(r=c.onAbort)==null||r.call(c,e),e="Aborted("+e+")",J(e),Re=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw b(t),t}var Se="data:application/octet-stream;base64,",ht=e=>e.startsWith(Se);function Ct(){if(c.locateFile){var e="heic-enc.wasm";return ht(e)?e:he(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var et;function Je(e){if(e==et&&ye)return new Uint8Array(ye);if(se)return se(e);throw"both async and sync fetching of the wasm failed"}function at(e){return ye?Promise.resolve().then(()=>Je(e)):ne(e).then(t=>new Uint8Array(t),()=>Je(e))}function lt(e,t,r){return at(e).then(a=>WebAssembly.instantiate(a,t)).then(r,a=>{J(`failed to asynchronously prepare wasm: ${a}`),Q(a)})}function _t(e,t,r,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!ht(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var l=WebAssembly.instantiateStreaming(i,r);return l.then(a,function(v){return J(`wasm streaming compile failed: ${v}`),J("falling back to ArrayBuffer instantiation"),lt(t,r,a)})}):lt(t,r,a)}function it(){return Es(),{a:Ia}}function mt(){var e=it();function t(a,i){return M=a.exports,Jt(M.Wa),Ft=M.Va,Ge(M.Pa),Ce=i,q(),M}X();function r(a){t(a.instance,a.module)}if(c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(a){J(`Module.instantiateWasm callback failed with error: ${a}`),b(a)}return et??(et=Ct()),_t(ye,et,e,r).catch(b),{}}function At(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var ut=e=>{e.terminate(),e.onmessage=t=>{}},gt=e=>{var t=I.pthreads[e];I.returnWorkerToPool(t)},S=e=>{var t=I.getNewWorker();if(!t)return 6;I.runningWorkers.push(t),I.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.postMessage(r,e.transferList),0},oe=0,ae=()=>It||oe>0,D=()=>Ka(),G=e=>Ga(e),Lt=e=>Ja(e),Bt=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN,le=(e,t,r,...a)=>{for(var i=a.length,l=D(),v=Lt(i*8),u=v>>3,f=0;f<a.length;f++){var g=a[f];T()[u+f]=g}var x=Va(e,t,i,v,r);return G(l),x};function kt(e){var t;if(C)return le(0,0,1,e);Pe=e,ae()||(I.terminateAllThreads(),(t=c.onExit)==null||t.call(c,e),Re=!0),ie(e,new At(e))}var Wt=e=>{if(e instanceof At||e=="unwind")return Pe;ie(1,e)};function Ot(e){if(C)return le(1,0,0,e);yt(e)}var Ht=(e,t)=>{if(Pe=e,C)throw Ot(e),"unwind";kt(e)},yt=Ht,I={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){C||I.initMainThread()},initMainThread(){for(var e=2;e--;)I.allocateUnusedWorker();Ye(()=>{X(),I.loadWasmModuleToAllWorkers(()=>q())})},terminateAllThreads:()=>{for(var e of I.runningWorkers)ut(e);for(var e of I.unusedWorkers)ut(e);I.unusedWorkers=[],I.runningWorkers=[],I.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete I.pthreads[t],I.unusedWorkers.push(e),I.runningWorkers.splice(I.runningWorkers.indexOf(e),1),e.pthread_ptr=0,za(t)},receiveObjectTransfer(e){},threadInitTLS(){I.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(t=>{e.onmessage=l=>{var v=l.data,u=v.cmd;if(v.targetThread&&v.targetThread!=yr()){var f=I.pthreads[v.targetThread];f?f.postMessage(v,v.transferList):J(`Internal error! Worker sent a message "${u}" to target pthread ${v.targetThread}, but that thread no longer exists!`);return}u==="checkMailbox"?mr():u==="spawnThread"?S(v):u==="cleanupThread"?gt(v.thread):u==="loaded"?(e.loaded=!0,t(e)):u==="alert"?alert(`Thread ${v.threadId}: ${v.text}`):v.target==="setimmediate"?e.postMessage(v):u==="callHandler"?c[v.handler](...v.args):u&&J(`worker sent an unknown command ${u}`)},e.onerror=l=>{var v="worker sent an error!";throw J(`${v} ${l.filename}:${l.lineno}: ${l.message}`),l};var r=[],a=["onExit","onAbort","print","printErr"];for(var i of a)c.propertyIsEnumerable(i)&&r.push(i);e.postMessage({cmd:"load",handlers:r,wasmMemory:K,wasmModule:Ce})}),loadWasmModuleToAllWorkers(e){if(C)return e();Promise.all(I.unusedWorkers.map(I.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),I.unusedWorkers.push(e)},getNewWorker(){return I.unusedWorkers.length==0&&(I.allocateUnusedWorker(),I.loadWasmModuleToWorker(I.unusedWorkers[0])),I.unusedWorkers.pop()}},$t=e=>{e.forEach(t=>t(c))},Yt=e=>{pe();var t=E()[e+52>>2],r=E()[e+56>>2],a=t-r;Ya(t,a),G(t)},bt=[],Ft,te=e=>{var t=bt[e];return t||(e>=bt.length&&(bt.length=e+1),bt[e]=t=Ft.get(e)),t},Gt=(e,t)=>{oe=0,It=0;var r=te(e)(t);function a(i){ae()?Pe=i:zr(i)}a(r)},It=c.noExitRuntime||!0,Jt=e=>I.tlsInitFunctions.push(e),Mt=new TextDecoder,St=(e,t)=>{if(!e)return"";for(var r=e+t,a=e;!(a>=r)&&k()[a];)++a;return Mt.decode(k().slice(e,a))},ur=(e,t,r,a)=>{Q(`Assertion failed: ${St(e)}, at: `+[t?St(t):"unknown filename",r,a?St(a):"unknown function"])},Et=[],Dt=0,A=e=>{var t=new Ee(e);return t.get_caught()||(t.set_caught(!0),Dt--),t.set_rethrown(!1),Et.push(t),Za(e),ei(e)},ue=0,_e=()=>{ve(0,0);var e=Et.pop();Qa(e.excPtr),ue=0};class Ee{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){E()[this.ptr+4>>2]=t}get_type(){return E()[this.ptr+4>>2]}set_destructor(t){E()[this.ptr+8>>2]=t}get_destructor(){return E()[this.ptr+8>>2]}set_caught(t){t=t?1:0,P()[this.ptr+12]=t}get_caught(){return P()[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,P()[this.ptr+13]=t}get_rethrown(){return P()[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){E()[this.ptr+16>>2]=t}get_adjusted_ptr(){return E()[this.ptr+16>>2]}}var Kt=e=>{throw ue||(ue=e),ue},vr=e=>Ha(e),ia=e=>{var t=ue;if(!t)return vr(0),0;var r=new Ee(t);r.set_adjusted_ptr(t);var a=r.get_type();if(!a)return vr(0),t;for(var i of e){if(i===0||i===a)break;var l=r.ptr+16;if(Xa(i,a,l))return vr(i),t}return vr(a),t},$i=()=>ia([]),Si=e=>ia([e]),Ei=()=>{var e=Et.pop();e||Q("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Et.push(e),e.set_rethrown(!0),e.set_caught(!1),Dt++),ue=t,ue},Ri=(e,t,r)=>{var a=new Ee(e);throw a.init(t,r),ue=e,Dt++,ue},Pi=()=>Dt;function na(e,t,r,a){return C?le(2,0,1,e,t,r,a):sa(e,t,r,a)}var ji=()=>typeof SharedArrayBuffer<"u",sa=(e,t,r,a)=>{if(!ji())return 6;var i=[],l=0;if(C&&(i.length===0||l))return na(e,t,r,a);var v={startRoutine:r,pthread_ptr:e,arg:a,transferList:i};return C?(v.cmd="spawnThread",postMessage(v,i),0):S(v)};function oa(e,t,r){return C?le(3,0,1,e,t,r):0}var Ui=(e,t,r,a)=>{if(!(a>0))return 0;for(var i=r,l=r+a-1,v=0;v<e.length;++v){var u=e.charCodeAt(v);if(u>=55296&&u<=57343){var f=e.charCodeAt(++v);u=65536+((u&1023)<<10)|f&1023}if(u<=127){if(r>=l)break;t[r++]=u}else if(u<=2047){if(r+1>=l)break;t[r++]=192|u>>6,t[r++]=128|u&63}else if(u<=65535){if(r+2>=l)break;t[r++]=224|u>>12,t[r++]=128|u>>6&63,t[r++]=128|u&63}else{if(r+3>=l)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63,t[r++]=128|u>>6&63,t[r++]=128|u&63}}return t[r]=0,r-i},Qt=(e,t,r)=>Ui(e,k(),t,r);function la(e,t,r){if(C)return le(4,0,1,e,t,r)}function ua(e,t,r){return C?le(5,0,1,e,t,r):0}function va(e,t,r,a){if(C)return le(6,0,1,e,t,r,a)}function ca(e,t,r,a){if(C)return le(7,0,1,e,t,r,a)}function fa(e,t,r){if(C)return le(8,0,1,e,t,r)}var Li=()=>{Q("")},cr={},$r=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Zt(e){return this.fromWireType(E()[e>>2])}var Nt={},Rt={},fr={},pa,pr=e=>{throw new pa(e)},Sr=(e,t,r)=>{e.forEach(u=>fr[u]=t);function a(u){var f=r(u);f.length!==e.length&&pr("Mismatched type converter count");for(var g=0;g<e.length;++g)nt(e[g],f[g])}var i=new Array(t.length),l=[],v=0;t.forEach((u,f)=>{Rt.hasOwnProperty(u)?i[f]=Rt[u]:(l.push(u),Nt.hasOwnProperty(u)||(Nt[u]=[]),Nt[u].push(()=>{i[f]=Rt[u],++v,v===l.length&&a(i)}))}),l.length===0&&a(i)},Wi=e=>{var t=cr[e];delete cr[e];var r=t.rawConstructor,a=t.rawDestructor,i=t.fields,l=i.map(v=>v.getterReturnType).concat(i.map(v=>v.setterArgumentType));Sr([e],l,v=>{var u={};return i.forEach((f,g)=>{var x=f.fieldName,L=v[g],Y=f.getter,de=f.getterContext,xe=v[g+i.length],ot=f.setter,pt=f.setterContext;u[x]={read:Oe=>L.fromWireType(Y(de,Oe)),write:(Oe,ar)=>{var ze=[];ot(pt,Oe,xe.toWireType(ze,ar)),$r(ze)}}}),[{name:t.name,fromWireType:f=>{var g={};for(var x in u)g[x]=u[x].read(f);return a(f),g},toWireType:(f,g)=>{for(var x in u)if(!(x in g))throw new TypeError(`Missing field: "${x}"`);var L=r();for(x in u)u[x].write(L,g[x]);return f!==null&&f.push(a,L),L},argPackAdvance:st,readValueFromPointer:Zt,destructorFunction:a}]})},Oi=(e,t,r,a,i)=>{},Fi=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);da=e},da,we=e=>{for(var t="",r=e;k()[r];)t+=da[k()[r++]];return t},Xt,H=e=>{throw new Xt(e)};function Ii(e,t,r={}){var a=t.name;if(e||H(`type "${a}" must have a positive integer typeid pointer`),Rt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;H(`Cannot register type '${a}' twice`)}if(Rt[e]=t,delete fr[e],Nt.hasOwnProperty(e)){var i=Nt[e];delete Nt[e],i.forEach(l=>l())}}function nt(e,t,r={}){return Ii(e,t,r)}var st=8,Mi=(e,t,r,a)=>{t=we(t),nt(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,l){return l?r:a},argPackAdvance:st,readValueFromPointer:function(i){return this.fromWireType(k()[i])},destructorFunction:null})},Di=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Er=e=>{function t(r){return r.$$.ptrType.registeredClass.name}H(t(e)+" instance already deleted")},Rr=!1,ha=e=>{},Ni=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},_a=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ni(e)},ma=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var a=ma(e,t,r.baseClass);return a===null?null:r.downcast(a)},ga={},Vi={},zi=(e,t)=>{for(t===void 0&&H("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},qi=(e,t)=>(t=zi(e,t),Vi[t]),dr=(e,t)=>{(!t.ptrType||!t.ptr)&&pr("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,a=!!t.smartPtr;return r!==a&&pr("Both smartPtrType and smartPtr must be specified"),t.count={value:1},er(Object.create(e,{$$:{value:t,writable:!0}}))};function Bi(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=qi(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var a=r.clone();return this.destructor(e),a}function i(){return this.isSmartPointer?dr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):dr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),v=ga[l];if(!v)return i.call(this);var u;this.isConst?u=v.constPointerType:u=v.pointerType;var f=ma(t,this.registeredClass,u.registeredClass);return f===null?i.call(this):this.isSmartPointer?dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:f,smartPtrType:this,smartPtr:e}):dr(u.registeredClass.instancePrototype,{ptrType:u,ptr:f})}var er=e=>typeof FinalizationRegistry>"u"?(er=t=>t,e):(Rr=new FinalizationRegistry(t=>{_a(t.$$)}),er=t=>{var r=t.$$,a=!!r.smartPtr;if(a){var i={$$:r};Rr.register(t,i,t)}return t},ha=t=>Rr.unregister(t),er(e)),Hi=()=>{Object.assign(hr.prototype,{isAliasOf(e){if(!(this instanceof hr)||!(e instanceof hr))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var a=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;a.baseClass;)i=a.upcast(i),a=a.baseClass;return t===a&&r===i},clone(){if(this.$$.ptr||Er(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=er(Object.create(Object.getPrototypeOf(this),{$$:{value:Di(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Er(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&H("Object already scheduled for deletion"),ha(this),_a(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Er(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&H("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function hr(){}var Vt=(e,t)=>Object.defineProperty(t,"name",{value:e}),Yi=(e,t,r)=>{if(e[t].overloadTable===void 0){var a=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||H(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}},Pr=(e,t,r)=>{c.hasOwnProperty(e)?((r===void 0||c[e].overloadTable!==void 0&&c[e].overloadTable[r]!==void 0)&&H(`Cannot register public name '${e}' twice`),Yi(c,e,e),c.hasOwnProperty(r)&&H(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),c[e].overloadTable[r]=t):(c[e]=t,r!==void 0&&(c[e].numArguments=r))},Gi=48,Ji=57,Ki=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Gi&&t<=Ji?`_${e}`:e};function Qi(e,t,r,a,i,l,v,u){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=a,this.baseClass=i,this.getActualType=l,this.upcast=v,this.downcast=u,this.pureVirtualFunctions=[]}var jr=(e,t,r)=>{for(;t!==r;)t.upcast||H(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Zi(e,t){if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),0;t.$$||H(`Cannot pass "${Or(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=jr(t.$$.ptr,r,this.registeredClass);return a}function Xi(e,t){var r;if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&H(`Cannot pass "${Or(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&H(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var a=t.$$.ptrType.registeredClass;if(r=jr(t.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&H("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:H(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,Te.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:H("Unsupporting sharing policy")}return r}function en(e,t){if(t===null)return this.isReference&&H(`null is not a valid ${this.name}`),0;t.$$||H(`Cannot pass "${Or(t)}" as a ${this.name}`),t.$$.ptr||H(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&H(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=jr(t.$$.ptr,r,this.registeredClass);return a}var tn=()=>{Object.assign(_r.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)==null||t.call(this,e)},argPackAdvance:st,readValueFromPointer:Zt,fromWireType:Bi})};function _r(e,t,r,a,i,l,v,u,f,g,x){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=a,this.isSmartPointer=i,this.pointeeType=l,this.sharingPolicy=v,this.rawGetPointee=u,this.rawConstructor=f,this.rawShare=g,this.rawDestructor=x,!i&&t.baseClass===void 0?a?(this.toWireType=Zi,this.destructorFunction=null):(this.toWireType=en,this.destructorFunction=null):this.toWireType=Xi}var ya=(e,t,r)=>{c.hasOwnProperty(e)||pr("Replacing nonexistent public symbol"),c[e].overloadTable!==void 0&&r!==void 0?c[e].overloadTable[r]=t:(c[e]=t,c[e].argCount=r)},rn=(e,t,r)=>{e=e.replace(/p/g,"i");var a=c["dynCall_"+e];return a(t,...r)},an=(e,t,r=[])=>{if(e.includes("j"))return rn(e,t,r);var a=te(t)(...r);return a},nn=(e,t)=>(...r)=>an(e,t,r),vt=(e,t)=>{e=we(e);function r(){return e.includes("j")?nn(e,t):te(t)}var a=r();return typeof a!="function"&&H(`unknown function pointer with signature ${e}: ${t}`),a},sn=(e,t)=>{var r=Vt(t,function(a){this.name=t,this.message=a;var i=new Error(a).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},ba,wa=e=>{var t=Ma(e),r=we(t);return ft(t),r},Ta=(e,t)=>{var r=[],a={};function i(l){if(!a[l]&&!Rt[l]){if(fr[l]){fr[l].forEach(i);return}r.push(l),a[l]=!0}}throw t.forEach(i),new ba(`${e}: `+r.map(wa).join([", "]))},on=(e,t,r,a,i,l,v,u,f,g,x,L,Y)=>{x=we(x),l=vt(i,l),u&&(u=vt(v,u)),g&&(g=vt(f,g)),Y=vt(L,Y);var de=Ki(x);Pr(de,function(){Ta(`Cannot construct ${x} due to unbound types`,[a])}),Sr([e,t,r],a?[a]:[],xe=>{var li;xe=xe[0];var ot,pt;a?(ot=xe.registeredClass,pt=ot.instancePrototype):pt=hr.prototype;var Oe=Vt(x,function(...qr){if(Object.getPrototypeOf(this)!==ar)throw new Xt("Use 'new' to construct "+x);if(ze.constructor_body===void 0)throw new Xt(x+" has no accessible constructor");var ui=ze.constructor_body[qr.length];if(ui===void 0)throw new Xt(`Tried to invoke ctor of ${x} with invalid number of parameters (${qr.length}) - expected (${Object.keys(ze.constructor_body).toString()}) parameters instead!`);return ui.apply(this,qr)}),ar=Object.create(pt,{constructor:{value:Oe}});Oe.prototype=ar;var ze=new Qi(x,Oe,ar,Y,ot,l,u,g);ze.baseClass&&((li=ze.baseClass).__derivedClasses??(li.__derivedClasses=[]),ze.baseClass.__derivedClasses.push(ze));var Qs=new _r(x,ze,!0,!1,!1),si=new _r(x+"*",ze,!1,!1,!1),oi=new _r(x+" const*",ze,!1,!0,!1);return ga[e]={pointerType:si,constPointerType:oi},ya(de,Oe),[Qs,si,oi]})},Ur=[],ct=[],Lr=e=>{e>9&&--ct[e+1]===0&&(ct[e]=void 0,Ur.push(e))},ln=()=>ct.length/2-5-Ur.length,un=()=>{ct.push(0,1,void 0,1,null,1,!0,1,!1,1),c.count_emval_handles=ln},Te={toValue:e=>(e||H("Cannot use deleted val. handle = "+e),ct[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=Ur.pop()||ct.length;return ct[t]=e,ct[t+1]=1,t}}}},vn={name:"emscripten::val",fromWireType:e=>{var t=Te.toValue(e);return Lr(e),t},toWireType:(e,t)=>Te.toHandle(t),argPackAdvance:st,readValueFromPointer:Zt,destructorFunction:null},cn=e=>nt(e,vn),fn=(e,t,r)=>{switch(t){case 1:return r?function(a){return this.fromWireType(P()[a])}:function(a){return this.fromWireType(k()[a])};case 2:return r?function(a){return this.fromWireType(n()[a>>1])}:function(a){return this.fromWireType($()[a>>1])};case 4:return r?function(a){return this.fromWireType(m()[a>>2])}:function(a){return this.fromWireType(E()[a>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},pn=(e,t,r,a)=>{t=we(t);function i(){}i.values={},nt(e,{name:t,constructor:i,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,v)=>v.value,argPackAdvance:st,readValueFromPointer:fn(t,r,a),destructorFunction:null}),Pr(t,i)},Wr=(e,t)=>{var r=Rt[e];return r===void 0&&H(`${t} has unknown type ${wa(e)}`),r},dn=(e,t,r)=>{var a=Wr(e,"enum");t=we(t);var i=a.constructor,l=Object.create(a.constructor.prototype,{value:{value:r},constructor:{value:Vt(`${a.name}_${t}`,function(){})}});i.values[r]=l,i[t]=l},Or=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},hn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(R()[r>>2])};case 8:return function(r){return this.fromWireType(T()[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},_n=(e,t,r)=>{t=we(t),nt(e,{name:t,fromWireType:a=>a,toWireType:(a,i)=>i,argPackAdvance:st,readValueFromPointer:hn(t,r),destructorFunction:null})};function xa(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function Ca(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=Vt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var a=new r,i=e.apply(a,t);return i instanceof Object?i:a}function mn(e,t,r,a){for(var i=xa(e),l=e.length-2,v=[],u=["fn"],f=0;f<l;++f)v.push(`arg${f}`),u.push(`arg${f}Wired`);v=v.join(","),u=u.join(",");var g=`return function (${v}) {
`;i&&(g+=`var destructors = [];
`);for(var x=i?"destructors":"null",L=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],f=0;f<l;++f)g+=`var arg${f}Wired = argType${f}['toWireType'](${x}, arg${f});
`,L.push(`argType${f}`);if(g+=(r||a?"var rv = ":"")+`invoker(${u});
`,i)g+=`runDestructors(destructors);
`;else for(var f=2;f<e.length;++f){var Y=f===1?"thisWired":"arg"+(f-2)+"Wired";e[f].destructorFunction!==null&&(g+=`${Y}_dtor(${Y});
`,L.push(`${Y}_dtor`))}return r&&(g+=`var ret = retType['fromWireType'](rv);
return ret;
`),g+=`}
`,[L,g]}function gn(e,t,r,a,i,l){var v=t.length;v<2&&H("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=t[1]!==null&&r!==null,f=xa(t),g=t[0].name!=="void",x=[e,H,a,i,$r,t[0],t[1]],L=0;L<v-2;++L)x.push(t[L+2]);if(!f)for(var L=2;L<t.length;++L)t[L].destructorFunction!==null&&x.push(t[L].destructorFunction);let[Y,de]=mn(t,u,g,l);Y.push(de);var xe=Ca(Function,Y)(...x);return Vt(e,xe)}var yn=(e,t)=>{for(var r=[],a=0;a<e;a++)r.push(E()[t+a*4>>2]);return r},bn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},wn=(e,t,r,a,i,l,v,u)=>{var f=yn(t,r);e=we(e),e=bn(e),i=vt(a,i),Pr(e,function(){Ta(`Cannot call ${e} due to unbound types`,f)},t-1),Sr([],f,g=>{var x=[g[0],null].concat(g.slice(1));return ya(e,gn(e,x,null,i,l,v),t-1),[]})},Tn=(e,t,r)=>{switch(t){case 1:return r?a=>P()[a]:a=>k()[a];case 2:return r?a=>n()[a>>1]:a=>$()[a>>1];case 4:return r?a=>m()[a>>2]:a=>E()[a>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},xn=(e,t,r,a,i)=>{t=we(t);var l=x=>x;if(a===0){var v=32-8*r;l=x=>x<<v>>>v}var u=t.includes("unsigned"),f=(x,L)=>{},g;u?g=function(x,L){return f(L,this.name),L>>>0}:g=function(x,L){return f(L,this.name),L},nt(e,{name:t,fromWireType:l,toWireType:g,argPackAdvance:st,readValueFromPointer:Tn(t,r,a!==0),destructorFunction:null})},Cn=(e,t,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=a[t];function l(v){var u=E()[v>>2],f=E()[v+4>>2];return new i(P().buffer,f,u)}r=we(r),nt(e,{name:r,fromWireType:l,argPackAdvance:st,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},An=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3}return t},kn=(e,t)=>{t=we(t);var r=t==="std::string";nt(e,{name:t,fromWireType(a){var i=E()[a>>2],l=a+4,v;if(r)for(var u=l,f=0;f<=i;++f){var g=l+f;if(f==i||k()[g]==0){var x=g-u,L=St(u,x);v===void 0?v=L:(v+="\0",v+=L),u=g+1}}else{for(var Y=new Array(i),f=0;f<i;++f)Y[f]=String.fromCharCode(k()[l+f]);v=Y.join("")}return ft(a),v},toWireType(a,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var l,v=typeof i=="string";v||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||H("Cannot pass non-string to std::string"),r&&v?l=An(i):l=i.length;var u=Nr(4+l+1),f=u+4;if(E()[u>>2]=l,r&&v)Qt(i,f,l+1);else if(v)for(var g=0;g<l;++g){var x=i.charCodeAt(g);x>255&&(ft(f),H("String has UTF-16 code units that do not fit in 8 bits")),k()[f+g]=x}else for(var g=0;g<l;++g)k()[f+g]=i[g];return a!==null&&a.push(ft,u),u},argPackAdvance:st,readValueFromPointer:Zt,destructorFunction(a){ft(a)}})},$n=new TextDecoder("utf-16le"),Sn=(e,t)=>{for(var r=e,a=r>>1,i=a+t/2;!(a>=i)&&$()[a];)++a;return r=a<<1,$n.decode(k().slice(e,r))},En=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;r-=2;for(var a=t,i=r<e.length*2?r/2:e.length,l=0;l<i;++l){var v=e.charCodeAt(l);n()[t>>1]=v,t+=2}return n()[t>>1]=0,t-a},Rn=e=>e.length*2,Pn=(e,t)=>{for(var r=0,a="";!(r>=t/4);){var i=m()[e+r*4>>2];if(i==0)break;if(++r,i>=65536){var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}else a+=String.fromCharCode(i)}return a},jn=(e,t,r)=>{if(r??(r=2147483647),r<4)return 0;for(var a=t,i=a+r-4,l=0;l<e.length;++l){var v=e.charCodeAt(l);if(v>=55296&&v<=57343){var u=e.charCodeAt(++l);v=65536+((v&1023)<<10)|u&1023}if(m()[t>>2]=v,t+=4,t+4>i)break}return m()[t>>2]=0,t-a},Un=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&++r,t+=4}return t},Ln=(e,t,r)=>{r=we(r);var a,i,l,v;t===2?(a=Sn,i=En,v=Rn,l=u=>$()[u>>1]):t===4&&(a=Pn,i=jn,v=Un,l=u=>E()[u>>2]),nt(e,{name:r,fromWireType:u=>{for(var f=E()[u>>2],g,x=u+4,L=0;L<=f;++L){var Y=u+4+L*t;if(L==f||l(Y)==0){var de=Y-x,xe=a(x,de);g===void 0?g=xe:(g+="\0",g+=xe),x=Y+t}}return ft(u),g},toWireType:(u,f)=>{typeof f!="string"&&H(`Cannot pass non-string to C++ string type ${r}`);var g=v(f),x=Nr(4+g+t);return E()[x>>2]=g/t,i(f,x+4,g+t),u!==null&&u.push(ft,x),x},argPackAdvance:st,readValueFromPointer:Zt,destructorFunction(u){ft(u)}})},Wn=(e,t,r,a,i,l)=>{cr[e]={name:we(t),rawConstructor:vt(r,a),rawDestructor:vt(i,l),fields:[]}},On=(e,t,r,a,i,l,v,u,f,g)=>{cr[e].fields.push({fieldName:we(t),getterReturnType:r,getter:vt(a,i),getterContext:l,setterArgumentType:v,setter:vt(u,f),setterContext:g})},Fn=(e,t)=>{t=we(t),nt(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,a)=>{}})},In=1,Mn=()=>In,Dn=e=>{Vr(e,!N,1,!Z,2097152,!1),I.threadInitTLS()},Nn=()=>{if(!ae())try{C?zr(Pe):yt(Pe)}catch(e){Wt(e)}},Aa=e=>{if(!Re)try{e(),Nn()}catch(t){Wt(t)}},Fr=e=>{if(typeof Atomics.waitAsync=="function"){var t=Atomics.waitAsync(m(),e>>2,e);t.value.then(mr);var r=e+128;Atomics.store(m(),r>>2,1)}},mr=()=>{var e=yr();e&&(Fr(e),Aa(Ba))},Vn=(e,t)=>{if(e==t)setTimeout(mr);else if(C)postMessage({targetThread:e,cmd:"checkMailbox"});else{var r=I.pthreads[e];if(!r)return;r.postMessage({cmd:"checkMailbox"})}},Ir=[],zn=(e,t,r,a,i)=>{Ir.length=a;for(var l=i>>3,v=0;v<a;v++)Ir[v]=T()[l+v];var u=Ss[e];I.currentProxiedOperationCallerThread=r;var f=u(...Ir);return I.currentProxiedOperationCallerThread=0,f},qn=()=>{It=!1,oe=0},Bn=e=>{C?postMessage({cmd:"cleanupThread",thread:e}):gt(e)},Hn=e=>{},gr=[],Yn=(e,t,r,a)=>(e=gr[e],t=Te.toValue(t),e(null,t,r,a)),Gn={},Mr=e=>{var t=Gn[e];return t===void 0?we(e):t},Jn=(e,t,r,a,i)=>(e=gr[e],t=Te.toValue(t),r=Mr(r),e(t,t[r],a,i)),ka=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Kn=e=>e===0?Te.toHandle(ka()):(e=Mr(e),Te.toHandle(ka()[e])),Qn=e=>{var t=gr.length;return gr.push(e),t},Zn=(e,t)=>{for(var r=new Array(e),a=0;a<e;++a)r[a]=Wr(E()[t+a*4>>2],"parameter "+a);return r},Xn=(e,t,r)=>{var a=[],i=e.toWireType(a,r);return a.length&&(E()[t>>2]=Te.toHandle(a)),i},es=(e,t,r)=>{var a=Zn(e,t),i=a.shift();e--;var l=`return function (obj, func, destructorsRef, args) {
`,v=0,u=[];r===0&&u.push("obj");for(var f=["retType"],g=[i],x=0;x<e;++x)u.push("arg"+x),f.push("argType"+x),g.push(a[x]),l+=`  var arg${x} = argType${x}.readValueFromPointer(args${v?"+"+v:""});
`,v+=a[x].argPackAdvance;var L=r===1?"new func":"func.call";l+=`  var rv = ${L}(${u.join(", ")});
`,i.isVoid||(f.push("emval_returnValue"),g.push(Xn),l+=`  return emval_returnValue(retType, destructorsRef, rv);
`),l+=`};
`,f.push(l);var Y=Ca(Function,f)(...g),de=`methodCaller<(${a.map(xe=>xe.name).join(", ")}) => ${i.name}>`;return Qn(Vt(de,Y))},ts=e=>{e>9&&(ct[e+1]+=1)},rs=()=>Te.toHandle([]),as=e=>Te.toHandle(Mr(e)),is=()=>Te.toHandle({}),ns=e=>{var t=Te.toValue(e);$r(t),Lr(e)},ss=(e,t,r)=>{e=Te.toValue(e),t=Te.toValue(t),r=Te.toValue(r),e[t]=r},os=(e,t)=>{e=Wr(e,"_emval_take_value");var r=e.readValueFromPointer(t);return Te.toHandle(r)},ls=e=>e%4===0&&(e%100!==0||e%400===0),us=[0,31,60,91,121,152,182,213,244,274,305,335],vs=[0,31,59,90,120,151,181,212,243,273,304,334],cs=e=>{var t=ls(e.getFullYear()),r=t?us:vs,a=r[e.getMonth()]+e.getDate()-1;return a};function fs(e,t,r){var a=Bt(e,t),i=new Date(a*1e3);m()[r>>2]=i.getSeconds(),m()[r+4>>2]=i.getMinutes(),m()[r+8>>2]=i.getHours(),m()[r+12>>2]=i.getDate(),m()[r+16>>2]=i.getMonth(),m()[r+20>>2]=i.getFullYear()-1900,m()[r+24>>2]=i.getDay();var l=cs(i)|0;m()[r+28>>2]=l,m()[r+36>>2]=-(i.getTimezoneOffset()*60);var v=new Date(i.getFullYear(),0,1),u=new Date(i.getFullYear(),6,1).getTimezoneOffset(),f=v.getTimezoneOffset(),g=(u!=f&&i.getTimezoneOffset()==Math.min(f,u))|0;m()[r+32>>2]=g}function $a(e,t,r,a,i,l,v,u){return C?le(9,0,1,e,t,r,a,i,l,v,u):-52}function Sa(e,t,r,a,i,l,v){if(C)return le(10,0,1,e,t,r,a,i,l,v)}var tr={},Ea=()=>performance.timeOrigin+performance.now();function Ra(e,t){if(C)return le(11,0,1,e,t);if(tr[e]&&(clearTimeout(tr[e].id),delete tr[e]),!t)return 0;var r=setTimeout(()=>{delete tr[e],Aa(()=>qa(e,Ea()))},t);return tr[e]={id:r,timeout_ms:t},0}var ps=(e,t,r,a)=>{var i=new Date().getFullYear(),l=new Date(i,0,1),v=new Date(i,6,1),u=l.getTimezoneOffset(),f=v.getTimezoneOffset(),g=Math.max(u,f);E()[e>>2]=g*60,m()[t>>2]=+(u!=f);var x=de=>{var xe=de>=0?"-":"+",ot=Math.abs(de),pt=String(Math.floor(ot/60)).padStart(2,"0"),Oe=String(ot%60).padStart(2,"0");return`UTC${xe}${pt}${Oe}`},L=x(u),Y=x(f);f<u?(Qt(L,r,17),Qt(Y,a,17)):(Qt(L,a,17),Qt(Y,r,17))},ds=()=>{},hs=()=>Date.now(),_s=()=>{oe+=1},ms=()=>{throw _s(),"unwind"},Pa=()=>2147483648,gs=()=>Pa(),ys=()=>1,bs=(e,t)=>Math.ceil(e/t)*t,ws=e=>{var t=K.buffer,r=(e-t.byteLength+65535)/65536|0;try{return K.grow(r),pe(),1}catch{}},Ts=e=>{var t=k().length;if(e>>>=0,e<=t)return!1;var r=Pa();if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var l=Math.min(r,bs(Math.max(e,i),65536)),v=ws(l);if(v)return!0}return!1},Dr={},xs=()=>ee||"./this.program",rr=()=>{if(!rr.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:xs()};for(var r in Dr)Dr[r]===void 0?delete t[r]:t[r]=Dr[r];var a=[];for(var r in t)a.push(`${r}=${t[r]}`);rr.strings=a}return rr.strings},Cs=(e,t)=>{for(var r=0;r<e.length;++r)P()[t++]=e.charCodeAt(r);P()[t]=0},ja=function(e,t){if(C)return le(12,0,1,e,t);var r=0;return rr().forEach((a,i)=>{var l=t+r;E()[e+i*4>>2]=l,Cs(a,l),r+=a.length+1}),0},Ua=function(e,t){if(C)return le(13,0,1,e,t);var r=rr();E()[e>>2]=r.length;var a=0;return r.forEach(i=>a+=i.length+1),E()[t>>2]=a,0};function La(e){return C?le(14,0,1,e):52}function Wa(e,t,r,a){return C?le(15,0,1,e,t,r,a):52}function Oa(e,t,r,a,i){return C?le(16,0,1,e,t,r,a,i):70}var As=[null,[],[]],ks=(e,t=0,r=NaN)=>{for(var a=t+r,i=t;e[i]&&!(i>=a);)++i;return Mt.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(t,i):e.subarray(t,i):new Uint8Array(e.slice(t,i)))},$s=(e,t)=>{var r=As[e];t===0||t===10?((e===1?ge:J)(ks(r)),r.length=0):r.push(t)};function Fa(e,t,r,a){if(C)return le(17,0,1,e,t,r,a);for(var i=0,l=0;l<r;l++){var v=E()[t>>2],u=E()[t+4>>2];t+=8;for(var f=0;f<u;f++)$s(e,k()[v+f]);i+=u}return E()[a>>2]=i,0}I.init(),pa=c.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Fi(),Xt=c.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Hi(),tn(),ba=c.UnboundTypeError=sn(Error,"UnboundTypeError"),un();var Ss=[kt,Ot,na,oa,la,ua,va,ca,fa,$a,Sa,Ra,ja,Ua,La,Wa,Oa,Fa],Ia;function Es(){Ia={$:ur,r:A,x:_e,b:$i,i:Si,U:Ei,w:Ri,pa:Pi,ya:sa,e:Kt,X:oa,wa:la,Fa:ua,Y:va,va:ca,ra:fa,Ja:Li,da:Wi,ka:Oi,Ma:Mi,L:on,La:cn,z:pn,d:dn,_:_n,p:wn,A:xn,n:Cn,aa:kn,M:Ln,O:Wn,G:On,Na:Fn,Ia:Mn,Ca:Dn,sa:Vn,za:zn,na:qn,S:Bn,Ba:Fr,Ha:Hn,Oa:Yn,Ka:Jn,l:Lr,N:Kn,ca:es,R:ts,Z:rs,v:as,F:is,ba:ns,t:ss,o:os,ia:fs,ga:$a,ha:Sa,oa:Ra,Aa:ps,T:ds,K:hs,Ga:ms,ta:gs,y:Ea,ua:ys,qa:Ts,Da:ja,Ea:Ua,xa:yt,E:La,W:Wa,ja:Oa,V:Fa,I:Ds,c:Rs,f:Fs,u:Ms,la:zs,H:Vs,B:Hs,P:qs,D:Ys,fa:Js,ea:Ks,h:Is,k:js,g:Ns,m:Us,j:Ws,J:Ls,Q:Os,s:Bs,q:Ps,C:Gs,a:K,ma:kt}}var M=mt(),yr=()=>(yr=M.Qa)(),Nr=e=>(Nr=M.Ra)(e),Ma=e=>(Ma=M.Sa)(e),Da=()=>(Da=M.Ta)(),ft=e=>(ft=M.Ua)(e),Vr=(e,t,r,a,i,l)=>(Vr=M.Xa)(e,t,r,a,i,l),Na=()=>(Na=M.Ya)(),Va=(e,t,r,a,i)=>(Va=M.Za)(e,t,r,a,i),za=e=>(za=M._a)(e),zr=e=>(zr=M.$a)(e),qa=(e,t)=>(qa=M.ab)(e,t),Ba=()=>(Ba=M.bb)(),ve=(e,t)=>(ve=M.cb)(e,t),Ha=e=>(Ha=M.db)(e),Ya=(e,t)=>(Ya=M.eb)(e,t),Ga=e=>(Ga=M.fb)(e),Ja=e=>(Ja=M.gb)(e),Ka=()=>(Ka=M.hb)(),Qa=e=>(Qa=M.ib)(e),Za=e=>(Za=M.jb)(e),Xa=(e,t,r)=>(Xa=M.kb)(e,t,r),ei=e=>(ei=M.lb)(e);c.dynCall_ji=(e,t)=>(c.dynCall_ji=M.mb)(e,t);var ti=c.dynCall_iij=(e,t,r,a)=>(ti=c.dynCall_iij=M.nb)(e,t,r,a);c.dynCall_jijj=(e,t,r,a,i,l)=>(c.dynCall_jijj=M.ob)(e,t,r,a,i,l),c.dynCall_vijj=(e,t,r,a,i,l)=>(c.dynCall_vijj=M.pb)(e,t,r,a,i,l),c.dynCall_jiiiii=(e,t,r,a,i,l)=>(c.dynCall_jiiiii=M.qb)(e,t,r,a,i,l),c.dynCall_jii=(e,t,r)=>(c.dynCall_jii=M.rb)(e,t,r),c.dynCall_jiiii=(e,t,r,a,i)=>(c.dynCall_jiiii=M.sb)(e,t,r,a,i),c.dynCall_jiji=(e,t,r,a,i)=>(c.dynCall_jiji=M.tb)(e,t,r,a,i);var ri=c.dynCall_iiiiij=(e,t,r,a,i,l,v)=>(ri=c.dynCall_iiiiij=M.ub)(e,t,r,a,i,l,v);c.dynCall_viijii=(e,t,r,a,i,l,v)=>(c.dynCall_viijii=M.vb)(e,t,r,a,i,l,v),c.dynCall_iiiiijj=(e,t,r,a,i,l,v,u,f)=>(c.dynCall_iiiiijj=M.wb)(e,t,r,a,i,l,v,u,f),c.dynCall_iiiiiijj=(e,t,r,a,i,l,v,u,f,g)=>(c.dynCall_iiiiiijj=M.xb)(e,t,r,a,i,l,v,u,f,g);function Rs(e,t){var r=D();try{return te(e)(t)}catch(a){if(G(r),a!==a+0)throw a;ve(1,0)}}function Ps(e,t,r,a,i,l,v,u,f,g,x){var L=D();try{te(e)(t,r,a,i,l,v,u,f,g,x)}catch(Y){if(G(L),Y!==Y+0)throw Y;ve(1,0)}}function js(e,t){var r=D();try{te(e)(t)}catch(a){if(G(r),a!==a+0)throw a;ve(1,0)}}function Us(e,t,r,a){var i=D();try{te(e)(t,r,a)}catch(l){if(G(i),l!==l+0)throw l;ve(1,0)}}function Ls(e,t,r,a,i,l){var v=D();try{te(e)(t,r,a,i,l)}catch(u){if(G(v),u!==u+0)throw u;ve(1,0)}}function Ws(e,t,r,a,i){var l=D();try{te(e)(t,r,a,i)}catch(v){if(G(l),v!==v+0)throw v;ve(1,0)}}function Os(e,t,r,a,i,l,v){var u=D();try{te(e)(t,r,a,i,l,v)}catch(f){if(G(u),f!==f+0)throw f;ve(1,0)}}function Fs(e,t,r){var a=D();try{return te(e)(t,r)}catch(i){if(G(a),i!==i+0)throw i;ve(1,0)}}function Is(e){var t=D();try{te(e)()}catch(r){if(G(t),r!==r+0)throw r;ve(1,0)}}function Ms(e,t,r,a){var i=D();try{return te(e)(t,r,a)}catch(l){if(G(i),l!==l+0)throw l;ve(1,0)}}function Ds(e){var t=D();try{return te(e)()}catch(r){if(G(t),r!==r+0)throw r;ve(1,0)}}function Ns(e,t,r){var a=D();try{te(e)(t,r)}catch(i){if(G(a),i!==i+0)throw i;ve(1,0)}}function Vs(e,t,r,a,i,l){var v=D();try{return te(e)(t,r,a,i,l)}catch(u){if(G(v),u!==u+0)throw u;ve(1,0)}}function zs(e,t,r,a,i,l){var v=D();try{return te(e)(t,r,a,i,l)}catch(u){if(G(v),u!==u+0)throw u;ve(1,0)}}function qs(e,t,r,a,i,l,v,u){var f=D();try{return te(e)(t,r,a,i,l,v,u)}catch(g){if(G(f),g!==g+0)throw g;ve(1,0)}}function Bs(e,t,r,a,i,l,v,u){var f=D();try{te(e)(t,r,a,i,l,v,u)}catch(g){if(G(f),g!==g+0)throw g;ve(1,0)}}function Hs(e,t,r,a,i,l,v){var u=D();try{return te(e)(t,r,a,i,l,v)}catch(f){if(G(u),f!==f+0)throw f;ve(1,0)}}function Ys(e,t,r,a,i,l,v,u,f,g,x,L){var Y=D();try{return te(e)(t,r,a,i,l,v,u,f,g,x,L)}catch(de){if(G(Y),de!==de+0)throw de;ve(1,0)}}function Gs(e,t,r,a,i,l,v,u,f,g,x,L,Y,de,xe,ot){var pt=D();try{te(e)(t,r,a,i,l,v,u,f,g,x,L,Y,de,xe,ot)}catch(Oe){if(G(pt),Oe!==Oe+0)throw Oe;ve(1,0)}}function Js(e,t,r,a,i,l,v){var u=D();try{return ri(e,t,r,a,i,l,v)}catch(f){if(G(u),f!==f+0)throw f;ve(1,0)}}function Ks(e,t,r,a){var i=D();try{return ti(e,t,r,a)}catch(l){if(G(i),l!==l+0)throw l;ve(1,0)}}var br,ai;U=function e(){br||ii(),br||(U=e)};function ii(){if($e>0)return;if(C){_(c),De(),startWorker(c);return}if(!ai&&(ai=1,Me(),$e>0))return;function e(){var t;br||(br=1,c.calledRun=1,!Re&&(De(),_(c),(t=c.onRuntimeInitialized)==null||t.call(c),Ne()))}c.setStatus?(c.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>c.setStatus(""),1),e()},1)):e()}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return ii(),w=O,w}})(),gi,yi,Io=(yi=(gi=globalThis.self)==null?void 0:gi.name)==null?void 0:yi.startsWith("em-pthread");Io&&Fo();const Mo=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"],Do=["420","422","444"],No=["psnr","ssim","grain","fastdecode"],Vo={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};var Xr;(function(o){o[o.UVAdapt=0]="UVAdapt",o[o.UV420=1]="UV420",o[o.UV444=2]="UV444",o[o.UVAuto=3]="UVAuto"})(Xr||(Xr={}));var ea;(function(o){o[o.YCoCg=0]="YCoCg",o[o.YCbCr=1]="YCbCr",o[o.Custom=2]="Custom",o[o.YIQ=3]="YIQ"})(ea||(ea={}));Xr.UVAuto,ea.YCoCg;globalThis._icodec_ImageData=(o,y,w,P)=>P===8?new zo(o,y,w):new ki(o,y,w,P);class zo extends ImageData{constructor(){super(...arguments);zt(this,"depth",8)}}var qo=Xe("<option> </option>"),Bo=Xe("<option> </option>"),Ho=Xe("<option> </option>"),Yo=Xe('<div class="card svelte-1dgh8ms"><div class="title svelte-1dgh8ms">x265 (HEVC) Options</div> <div class="grid svelte-1dgh8ms"><div><div class="row svelte-1dgh8ms"><label>Quality <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label><input type="checkbox"> Lossless</label></div> <div class="row svelte-1dgh8ms"><label>Preset</label> <select></select></div> <div class="row svelte-1dgh8ms"><label>Tune</label> <select></select></div> <div class="row svelte-1dgh8ms"><label>TU Intra Depth <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="1" max="4"></div></div> <div><div class="row svelte-1dgh8ms"><label>Complexity <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label>Chroma</label> <select></select></div> <div class="row svelte-1dgh8ms"><label><input type="checkbox"> Sharp YUV</label></div> <div class="row svelte-1dgh8ms"><button>Reset</button> <div style="flex:1"></div> <button>Export</button></div> <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:8px;"><button>Apply</button></div></div></div></div>');function Go(o,y){Cr(y,!1);let w=dt(y,"onChange",8),P=dt(y,"onApply",8),k=dt(y,"value",8,void 0),n=lr({...Vo});function $(U,X,q,Q){return U===void 0||Number.isNaN(U)?Q:Math.max(X,Math.min(q,U))}function m(){var U;Ze(n,{...s(n),quality:$(s(n).quality,0,100,50),tuIntraDepth:$(s(n).tuIntraDepth,1,4,2),complexity:$(s(n).complexity,0,100,50)}),(U=w())==null||U({...s(n)})}function E(){var U;(U=P())==null||U({...s(n)})}function R(){Ze(n,{quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1}),m()}function T(){const U=JSON.stringify(s(n),null,2),X=new Blob([U],{type:"application/json"}),q=URL.createObjectURL(X),Q=document.createElement("a");Q.href=q,Q.download="x265-options.json",Q.click(),URL.revokeObjectURL(q)}const c={quality:`
    /**
     * Quality-based VBR [0, 100], it will map to \`--crf\` parameter of x265.
     * quality=0   -> crf=50
     * quality=50  -> crf=25
     * quality=100 -> crf=0
     *
     * @default 50
     */
    `,lossless:`
        /**
     * If true, Bypass transform, quant and loop filters.
     *
     * Note: it does not bypass chroma subsampling, you need
     *       also to set \`chroma\` to "444" for exact lossless.
     *
     * @default false
     */
    `,preset:`
        /**
     * Trade off performance for compression efficiency.
     *
     * @default "slow"
     */
    `,tune:`    /**
     * Tune the settings for a particular type of source or situation.
     *
     * @default "ssim"
     */`,tuIntraDepth:`    /**
     * Max TU recursive depth for intra CUs
     *
     * [1, 4], default 2.
     */`,complexity:`    /**
     * CPU effort, larger value increases encode time.
     * Range is [0, 100], but only changes at a few values.
     *
     * @default 50
     */`,chroma:`    /**
     * Specify chroma subsampling method.
     *
     * @default "420"
     */`,sharpYUV:`    /**
     * Use more accurate and sharper RGB->YUV conversion if needed.
     *
     * @default false
     */`};ta(()=>(aa(k()),s(n)),()=>{if(k())try{JSON.stringify(k())!==JSON.stringify(s(n))&&Ze(n,{...k()})}catch{Ze(n,{...k()})}}),ra(),kr();var _=Yo(),b=h(d(_),2),O=d(b),Z=d(O),N=d(Z),C=h(d(N)),V=d(C,!0);p(C),p(N),p(Z);var ee=h(Z,2),ie=d(ee);B(ie),p(ee);var z=h(ee,2),he=d(z),ne=d(he);B(ne),qe(),p(he),p(z);var se=h(z,2),ge=d(se),J=h(ge,2);me(()=>{s(n),Tt(()=>{})}),Ut(J,5,()=>Mo,jt,(U,X)=>{var q=qo(),Q={},Se=d(q,!0);p(q),me(()=>{Q!==(Q=s(X))&&(q.value=(q.__value=s(X))==null?"":s(X)),re(Se,s(X))}),Qe(U,q)}),p(J),p(se);var ye=h(se,2),K=d(ye),Ce=h(K,2);me(()=>{s(n),Tt(()=>{})}),Ut(Ce,5,()=>No,jt,(U,X)=>{var q=Bo(),Q={},Se=d(q,!0);p(q),me(()=>{Q!==(Q=s(X))&&(q.value=(q.__value=s(X))==null?"":s(X)),re(Se,s(X))}),Qe(U,q)}),p(Ce),p(ye);var Re=h(ye,2),Pe=d(Re),fe=h(d(Pe)),Fe=d(fe,!0);p(fe),p(Pe),p(Re);var je=h(Re,2),be=d(je);B(be),p(je),p(O);var Be=h(O,2),He=d(Be),Ae=d(He),Ue=h(d(Ae)),pe=d(Ue,!0);p(Ue),p(Ae),p(He);var tt=h(He,2),ke=d(tt);B(ke),p(tt);var Ie=h(tt,2),Le=d(Ie),We=h(Le,2);me(()=>{s(n),Tt(()=>{})}),Ut(We,5,()=>Do,jt,(U,X)=>{var q=Ho(),Q={},Se=d(q,!0);p(q),me(()=>{Q!==(Q=s(X))&&(q.value=(q.__value=s(X))==null?"":s(X)),re(Se,s(X))}),Qe(U,q)}),p(We),p(Ie);var rt=h(Ie,2),Me=d(rt),De=d(Me);B(De),qe(),p(Me),p(rt);var Ne=h(rt,2),Ye=d(Ne),Ge=h(Ye,4);p(Ne);var Ve=h(Ne,2),$e=d(Ve);p(Ve),p(Be),p(b),p(_),me(()=>{F(N,"title",c.quality),re(V,s(n).quality??50),F(he,"title",c.lossless),F(ge,"title",c.preset),F(K,"title",c.tune),F(Pe,"title",c.tuIntraDepth),re(Fe,s(n).tuIntraDepth),F(Ae,"title",c.complexity),re(pe,s(n).complexity),F(Le,"title",c.chroma),F(Me,"title",c.sharpYUV)}),ce(ie,()=>s(n).quality,U=>W(n,s(n).quality=U)),j("input",ie,m),Ke(ne,()=>s(n).lossless,U=>W(n,s(n).lossless=U)),j("change",ne,m),xt(J,()=>s(n).preset,U=>W(n,s(n).preset=U)),j("change",J,m),xt(Ce,()=>s(n).tune,U=>W(n,s(n).tune=U)),j("change",Ce,m),ce(be,()=>s(n).tuIntraDepth,U=>W(n,s(n).tuIntraDepth=U)),j("input",be,m),ce(ke,()=>s(n).complexity,U=>W(n,s(n).complexity=U)),j("input",ke,m),xt(We,()=>s(n).chroma,U=>W(n,s(n).chroma=U)),j("change",We,m),Ke(De,()=>s(n).sharpYUV,U=>W(n,s(n).sharpYUV=U)),j("change",De,m),j("click",Ye,R),j("click",Ge,T),j("click",$e,E),Qe(o,_),Ar()}var Jo=Xe("<option> </option>"),Ko=Xe("<option> </option>"),Qo=Xe('<div class="card svelte-1c6geua" aria-label="WebP Encoder Options"><div class="grid svelte-1c6geua"><div class="row svelte-1c6geua"><strong>WebP Encoder Options</strong></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input type="checkbox"> Lossless</label> <span class="muted svelte-1c6geua">(may change transparent pixels)</span></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua">nearLossless: <span class="muted svelte-1c6geua"> </span></label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label class="small svelte-1c6geua">quality</label> <input class="num svelte-1c6geua" type="number" min="0" max="100"></div></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua">alphaQuality: <span class="muted svelte-1c6geua"> </span></label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label class="small svelte-1c6geua">method</label> <input class="num svelte-1c6geua" type="number" min="0" max="6"></div></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="7" class="svelte-1c6geua"></div> <div style="width:160px"><label class="svelte-1c6geua"><input type="checkbox"> filterType (strong)</label></div></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="1" max="4" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="svelte-1c6geua">preprocessing</label> <select></select></div> <div style="width:160px"><label class="svelte-1c6geua"><input type="checkbox"> autofilter</label></div></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:160px"><label class="small svelte-1c6geua"> </label> <input class="num svelte-1c6geua" type="number" min="1" max="10"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua">alphaCompression</label> <select><option>0 (none)</option><option>1 (webp lossless)</option></select></div> <div><label class="svelte-1c6geua">alphaFiltering</label> <select></select></div></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input type="checkbox"> sharpYUV</label> <label style="margin-left:12px" class="svelte-1c6geua"><input type="checkbox"> exact (preserve RGB in transparent)</label></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="svelte-1c6geua">targetSize (bytes)</label> <input type="number" min="0"></div> <div style="width:160px"><label class="svelte-1c6geua">targetPSNR (dB)</label> <input class="num svelte-1c6geua" type="number" min="0"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua"><input type="checkbox"> lowMemory</label></div> <div><label class="svelte-1c6geua"><input type="checkbox"> emulateJpegSize</label></div></div> <div class="actions svelte-1c6geua"><button type="button">Reset</button> <button type="button">Export JSON</button> <button type="button">Apply</button></div></div></div>');function Zo(o,y){Cr(y,!1);let w=dt(y,"onChange",8),P=dt(y,"onApply",8),k=dt(y,"value",8,void 0),n=lr({...mi});function $(A,ue,_e,Ee){return A==null||Number.isNaN(A)?Ee:Math.max(ue,Math.min(_e,A))}function m(){var A;Ze(n,{...s(n),nearLossless:$(s(n).nearLossless,0,100,100),quality:$(s(n).quality,0,100,75),alphaQuality:$(s(n).alphaQuality,0,100,100),method:$(s(n).method,0,6,4),snsStrength:$(s(n).snsStrength,0,100,50),filterStrength:$(s(n).filterStrength,0,100,60),filterSharpness:$(s(n).filterSharpness,0,7,0),segments:$(s(n).segments,1,4,4),partitionLimit:$(s(n).partitionLimit,0,100,0),pass:$(s(n).pass,1,10,1)}),(A=w())==null||A({...s(n)})}function E(){var A;(A=P())==null||A({...s(n)})}function R(){Ze(n,{...mi}),m()}function T(){const A=JSON.stringify(s(n),null,2),ue=new Blob([A],{type:"application/json"}),_e=URL.createObjectURL(ue),Ee=document.createElement("a");Ee.href=_e,Ee.download="webp-options.json",Ee.click(),URL.revokeObjectURL(_e)}const c=Object.values(xr).filter(A=>typeof A=="number").map(A=>({label:qt[A],v:A})),_=Object.values(qt).filter(A=>typeof A=="number").map(A=>({label:qt[A],v:A})),b={lossless:`/**
    * Encode the image without any loss (pixel values of fully transparent area may different).
    *
    * @default false
    */`,nearLossless:`/**
    * Specify the level of near-lossless image preprocessing. This option adjusts pixel values
    * to help compressibility, but has minimal impact on the visual quality.
    * It triggers lossless compression mode automatically.
    *
    * The range is 0 (maximum preprocessing) to 100 (no preprocessing).
    * The typical value is around 60. Note that lossy with -q 100 can at times yield better results.
    *
    * @default 100
    */`,quality:`/**
    * Specify the compression factor for RGB channels between 0 and 100.
    *
    * In case of lossy compression (default), a small factor produces a smaller file
    * with lower quality.  Best quality is achieved by using a value of 100.
    *
    * In case of lossless compression, a small factor enables faster compression speed,
    * but produces a larger file. Maximum compression is achieved by using a value of 100.
    *
    * @default 75
    */`,alphaQuality:`/**
    * Specify the compression factor for alpha compression between 0 and 100.
    * Lossless compression of alpha is achieved using a value of 100, while the lower
    * values result in a lossy compression. The default is 100.
    *
    * @default 100
    */`,method:`/**
    * Specify the compression method to use. This parameter controls the trade off between
    * encoding speed and the compressed file size and quality.
    *
    * Possible values range from 0 to 6. When higher values are used, the encoder will spend more
    * time inspecting additional encoding possibilities and decide on the quality gain.
    *
    * Lower value can result in faster processing at the expense of larger file size and lower quality.
    *
    * @default 4
    */`,snsStrength:`/**
    * Specify the amplitude of the spatial noise shaping. Spatial noise shaping (or sns for short)
    * refers to a general collection of built-in algorithms used to decide which area of the
    * picture should use relatively less bits, and where else to better transfer these bits.
    *
    * The possible range goes from 0 (algorithm is off) to 100 (the maximal effect).
    *
    * @default 50
    */`,filterStrength:`/**
    * Specify the strength of the deblocking filter, between 0 (no filtering) and 100 (maximum filtering).
    * A value of 0 will turn off any filtering. Higher value will increase the strength of the filtering
    * process applied after decoding the picture. The higher the value the smoother the picture will appear.
    *
    * @default 60
    */`,filterSharpness:`/**
    * Specify the sharpness of the filtering (if used). Range is 0 (sharpest) to 7 (least sharp).
    *
    * @default 0
    */`,filterType:`/**
    * Use strong filtering (if filtering is being used thanks to the \`filter_strength\`).
    *
    * @default true
    */`,segments:`/**
    * Change the number of partitions to use during the segmentation of the sns algorithm.
    * Range [1, 4], this option has no effect for methods 3 and up, unless \`low_memory\` is used.
    *
    * @default 4
    */`,preprocessing:`/**
    * Specify some pre-processing steps. Using a value of 2 will trigger quality-dependent pseudo-random
    * dithering during RGBA->YUVA conversion (lossy compression only).
    *
    * @default Preprocess.None
    */`,autofilter:`/**
    * Turns auto-filter on. This algorithm will spend additional time optimizing the
    * filtering strength to reach a well-balanced quality.
    *
    * @default 0
    */`,partitionLimit:`/**
    * Degrade quality by limiting the number of bits used by some macroblocks.
    * Range is 0 (no degradation, the default) to 100 (full degradation).
    * Useful values are usually around 30-70 for moderately large images.
    *
    * In the VP8 format, the so-called control partition has a limit of 512k and is used to store
    * the following information: whether the macroblock is skipped, which segment it belongs to,
    * whether it is coded as intra 4x4 or intra 16x16 mode, and finally the prediction modes to use
    * for each of the sub-blocks.
    *
    * For a very large image, 512k only leaves room for a few bits per 16x16 macroblock.
    * The absolute minimum is 4 bits per macroblock. Skip, segment, and mode information can use up almost
    * all these 4 bits (although the case is unlikely), which is problematic for very large images.
    *
    * \`partitionLimit\` controls how frequently the most bit-costly mode (intra 4x4) will be used.
    * This is useful in case the 512k limit is reached.
    *
    * If using -partition_limit is not enough to meet the 512k constraint, one should use less segments
    * in order to save more header bits per macroblock. See the \`segments\` option.
    *
    * Note the -m and -q options also influence the encoder's decisions and ability to hit this limit.
    *
    * @default 0
    */`,alphaCompression:`/**
    * Specify the algorithm used for alpha compression: 0 or 1.
    * Algorithm 0 denotes no compression, 1 uses WebP lossless format for compression.
    *
    * @default 1
    */`,alphaFiltering:`/**
    * Specify the predictive filtering method for the alpha plane. One of none,
    * fast or best, in increasing complexity and slowness order.
    *
    * Internally, alpha filtering is performed using four possible predictions (none, horizontal, vertical, gradient).
    * The best mode will try each mode in turn and pick the one which gives the smaller size.
    *
    * The fast mode will just try to form an a priori guess without testing all modes.
    *
    * @default AlphaFiltering.Fast
    */`,sharpYUV:`/**
    * Use more accurate and sharper RGB->YUV conversion if needed.
    * Note that this process is slower than the default conversion.
    *
    * @default false
    */`,exact:`/**
    * Preserve RGB values in transparent area. The default is off, to help compressibility.
    */`,targetSize:"/**\n    * Specify a target size (in bytes) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",targetPSNR:"/**\n    * Specify a target PSNR (in dB) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",pass:"/**\n    * Set a maximum number of passes to use during the dichotomy used by `target_size` or `target_PSNR`.\n    *\n    * Maximum value is 10. If options `target_size` or `target_PSNR` were used, but `pass` wasn't specified,\n    * a default value of '6' passes will be used. If `pass` is specified,\n    * but neither `target_size` nor `target_PSNR` are, a target PSNR of 40dB will be used.\n    *\n    * @default 1\n    */",lowMemory:`/**
    * Reduce memory usage of lossy encoding by saving four times the compressed size (typically).
    * This will make the encoding slower and the output slightly different in size and distortion.
    *
    * This flag is only effective for methods 3 and up, and is off by default.
    *
    * Note that leaving this flag off will have some side effects on the bitstream:
    * it forces certain bitstream features like number of partitions (forced to 1).
    *
    * @default false
    */`,emulateJpegSize:`/**
    * Change the internal parameter mapping to better match the expected size of JPEG compression.
    *
    * This flag will generally produce an output file of similar size to its JPEG equivalent
    * (for the same \`quality\` setting), but with less visual distortion.
    *
    * @default false
    */`};ta(()=>(aa(k()),s(n)),()=>{if(k())try{JSON.stringify(k())!==JSON.stringify(s(n))&&Ze(n,{...s(n),...k()})}catch{Ze(n,{...s(n),...k()})}}),ra(),kr();var O=Qo(),Z=d(O),N=h(d(Z),2),C=d(N),V=d(C);B(V),qe(),p(C),qe(2),p(N);var ee=h(N,2),ie=d(ee),z=d(ie),he=h(d(z)),ne=d(he,!0);p(he),p(z);var se=h(z,2);B(se),p(ie);var ge=h(ie,2),J=h(d(ge),2);B(J),p(ge),p(ee);var ye=h(ee,2),K=d(ye),Ce=d(K),Re=h(d(Ce)),Pe=d(Re,!0);p(Re),p(Ce);var fe=h(Ce,2);B(fe),p(K);var Fe=h(K,2),je=h(d(Fe),2);B(je),p(Fe),p(ye);var be=h(ye,2),Be=d(be),He=d(Be);p(Be);var Ae=h(Be,2);B(Ae),p(be);var Ue=h(be,2),pe=d(Ue),tt=d(pe);p(pe);var ke=h(pe,2);B(ke),p(Ue);var Ie=h(Ue,2),Le=d(Ie),We=d(Le),rt=d(We);p(We);var Me=h(We,2);B(Me),p(Le);var De=h(Le,2),Ne=d(De),Ye=d(Ne);B(Ye),qe(),p(Ne),p(De),p(Ie);var Ge=h(Ie,2),Ve=d(Ge),$e=d(Ve);p(Ve);var U=h(Ve,2);B(U),p(Ge);var X=h(Ge,2),q=d(X),Q=h(d(q),2);me(()=>{s(n),Tt(()=>{})}),Ut(Q,5,()=>c,jt,(A,ue)=>{var _e=Jo(),Ee={},Kt=d(_e,!0);p(_e),me(()=>{Ee!==(Ee=s(ue).v)&&(_e.value=(_e.__value=s(ue).v)==null?"":s(ue).v),re(Kt,s(ue).label)}),Qe(A,_e)}),p(Q),p(q);var Se=h(q,2),ht=d(Se),Ct=d(ht);B(Ct),qe(),p(ht),p(Se),p(X);var et=h(X,2),Je=d(et),at=d(Je),lt=d(at);p(at);var _t=h(at,2);B(_t),p(Je);var it=h(Je,2),mt=d(it),At=d(mt);p(mt);var ut=h(mt,2);B(ut),p(it),p(et);var gt=h(et,2),S=d(gt),oe=h(d(S),2);me(()=>{s(n),Tt(()=>{})});var ae=d(oe);ae.value=(ae.__value=0)==null?"":0;var D=h(ae);D.value=(D.__value=1)==null?"":1,p(oe),p(S);var G=h(S,2),Lt=h(d(G),2);me(()=>{s(n),Tt(()=>{})}),Ut(Lt,5,()=>_,jt,(A,ue)=>{var _e=Ko(),Ee={},Kt=d(_e,!0);p(_e),me(()=>{Ee!==(Ee=s(ue).v)&&(_e.value=(_e.__value=s(ue).v)==null?"":s(ue).v),re(Kt,s(ue).label)}),Qe(A,_e)}),p(Lt),p(G),p(gt);var Bt=h(gt,2),le=d(Bt),kt=d(le);B(kt),qe(),p(le);var Wt=h(le,2),Ot=d(Wt);B(Ot),qe(),p(Wt),p(Bt);var Ht=h(Bt,2),yt=d(Ht),I=h(d(yt),2);B(I),p(yt);var $t=h(yt,2),Yt=h(d($t),2);B(Yt),p($t),p(Ht);var bt=h(Ht,2),Ft=d(bt),te=d(Ft),Gt=d(te);B(Gt),qe(),p(te),p(Ft);var It=h(Ft,2),Jt=d(It),Mt=d(Jt);B(Mt),qe(),p(Jt),p(It),p(bt);var St=h(bt,2),ur=d(St),Et=h(ur,2),Dt=h(Et,2);p(St),p(Z),p(O),me(()=>{F(C,"title",b.lossless),F(ie,"title",b.nearLossless),re(ne,s(n).nearLossless),F(ge,"title",b.quality),F(K,"title",b.alphaQuality),re(Pe,s(n).alphaQuality),F(Fe,"title",b.method),F(be,"title",b.snsStrength),re(He,`snsStrength: ${s(n).snsStrength??""}`),F(Ue,"title",b.filterStrength),re(tt,`filterStrength: ${s(n).filterStrength??""}`),F(Le,"title",b.filterSharpness),re(rt,`filterSharpness: ${s(n).filterSharpness??""}`),F(De,"title",b.filterType),F(Ge,"title",b.segments),re($e,`segments: ${s(n).segments??""}`),F(q,"title",b.preprocessing),F(Se,"title",b.autofilter),F(Je,"title",b.partitionLimit),re(lt,`partitionLimit: ${s(n).partitionLimit??""}`),F(it,"title",b.pass),re(At,`pass: ${s(n).pass??""}`),F(S,"title",b.alphaCompression),F(G,"title",b.alphaFiltering),F(le,"title",b.sharpYUV),F(Wt,"title",b.exact),F(yt,"title",b.targetSize),F($t,"title",b.targetPSNR),F(te,"title",b.lowMemory),F(Jt,"title",b.emulateJpegSize)}),Ke(V,()=>s(n).lossless,A=>W(n,s(n).lossless=A)),j("change",V,m),ce(se,()=>s(n).nearLossless,A=>W(n,s(n).nearLossless=A)),j("input",se,m),ce(J,()=>s(n).quality,A=>W(n,s(n).quality=A)),j("input",J,m),ce(fe,()=>s(n).alphaQuality,A=>W(n,s(n).alphaQuality=A)),j("input",fe,m),ce(je,()=>s(n).method,A=>W(n,s(n).method=A)),j("input",je,m),ce(Ae,()=>s(n).snsStrength,A=>W(n,s(n).snsStrength=A)),j("input",Ae,m),ce(ke,()=>s(n).filterStrength,A=>W(n,s(n).filterStrength=A)),j("input",ke,m),ce(Me,()=>s(n).filterSharpness,A=>W(n,s(n).filterSharpness=A)),j("input",Me,m),Ke(Ye,()=>s(n).filterType,A=>W(n,s(n).filterType=A)),j("change",Ye,m),ce(U,()=>s(n).segments,A=>W(n,s(n).segments=A)),j("input",U,m),xt(Q,()=>s(n).preprocessing,A=>W(n,s(n).preprocessing=A)),j("change",Q,m),Ke(Ct,()=>s(n).autofilter,A=>W(n,s(n).autofilter=A)),j("change",Ct,m),ce(_t,()=>s(n).partitionLimit,A=>W(n,s(n).partitionLimit=A)),j("input",_t,m),ce(ut,()=>s(n).pass,A=>W(n,s(n).pass=A)),j("input",ut,m),xt(oe,()=>s(n).alphaCompression,A=>W(n,s(n).alphaCompression=A)),j("change",oe,m),xt(Lt,()=>s(n).alphaFiltering,A=>W(n,s(n).alphaFiltering=A)),j("change",Lt,m),Ke(kt,()=>s(n).sharpYUV,A=>W(n,s(n).sharpYUV=A)),j("change",kt,m),Ke(Ot,()=>s(n).exact,A=>W(n,s(n).exact=A)),j("change",Ot,m),ce(I,()=>s(n).targetSize,A=>W(n,s(n).targetSize=A)),j("input",I,m),ce(Yt,()=>s(n).targetPSNR,A=>W(n,s(n).targetPSNR=A)),j("input",Yt,m),Ke(Gt,()=>s(n).lowMemory,A=>W(n,s(n).lowMemory=A)),j("change",Gt,m),Ke(Mt,()=>s(n).emulateJpegSize,A=>W(n,s(n).emulateJpegSize=A)),j("change",Mt,m),j("click",ur,R),j("click",Et,T),j("click",Dt,E),Qe(o,O),Ar()}var Xo=Xe("<option> </option>"),el=Xe("<option> </option>"),tl=Xe('<div class="card svelte-1iuoinz" aria-label="AVIF Encoder Options"><div class="title" style="font-weight:600; margin-bottom:8px">AVIF Options</div> <div class="grid svelte-1iuoinz"><div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Quality <span class="muted svelte-1iuoinz"> </span></label></div> <div class="row svelte-1iuoinz"><input type="range" min="0" max="100" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Quality Alpha <span class="muted svelte-1iuoinz"> </span></label> <input class="num svelte-1iuoinz" type="number" min="-1" max="100"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Speed <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="-1" max="10" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Subsample</label> <select></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Auto Tiling</label></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">TileRows (log2) <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="6" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">TileCols (log2) <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="6" class="svelte-1iuoinz"></div></div> <div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Chroma Delta Q</label></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Sharpness <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="7" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Denoise Level <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="50" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Tune</label> <select></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Sharp YUV</label></div> <div class="actions svelte-1iuoinz"><button type="button">Reset</button> <button type="button">Export</button> <button type="button">Apply</button></div></div></div></div>');function rl(o,y){Cr(y,!1);let w=dt(y,"onChange",8),P=dt(y,"onApply",8),k=dt(y,"value",8,void 0),n=lr({...hi});function $(S,oe,ae,D){return S==null||Number.isNaN(S)?D:Math.max(oe,Math.min(ae,S))}function m(){var S;Ze(n,{...s(n),quality:$(s(n).quality,0,100,50),qualityAlpha:typeof s(n).qualityAlpha=="number"?$(s(n).qualityAlpha,-1,100,-1):-1,speed:$(s(n).speed,-1,10,6),tileRowsLog2:$(s(n).tileRowsLog2,0,6,0),tileColsLog2:$(s(n).tileColsLog2,0,6,0),sharpness:$(s(n).sharpness,0,7,0),denoiseLevel:$(s(n).denoiseLevel,0,50,0)}),(S=w())==null||S({...s(n)})}function E(){var S;(S=P())==null||S({...s(n)})}function R(){Ze(n,{...hi}),m()}function T(){const S=JSON.stringify(s(n),null,2),oe=new Blob([S],{type:"application/json"}),ae=URL.createObjectURL(oe),D=document.createElement("a");D.href=ae,D.download="avif-options.json",D.click(),URL.revokeObjectURL(ae)}const c=Object.values(sr).filter(S=>typeof S=="number").map(S=>({label:sr[S],v:S})),_=Object.values(or).filter(S=>typeof S=="number").map(S=>({label:or[S],v:S})),b={quality:`/**
 * [0 - 100], 0 = worst quality, 100 = lossless
 *
 * @default 50
 */`,qualityAlpha:`/**
 * As above, but -1 means 'use quality'
 *
 * @default -1
 */`,speed:`/**
 * Range: [-1, 10], 0 = slowest, 10 = fastest, slower should make for a better quality image in less bytes.
 * A combination of settings are tweaked to simulate this speed range.
 *
 * @default 6
 */`,subsample:`/**
 * Chrome subsampling type.
 *
 * @default YUV420
 */`,autoTiling:"/**\n * If true, ignores `tileRowsLog2` and `tileColsLog2` and automatically chooses suitable tiling values.\n *\n * @default false\n */",tileColsLog2:`/**
 * [0 - 6], Creates 2^n tiles in that dimension
 *
 * @default 0
 */`,chromaDeltaQ:`/**
 * Extra chroma compression, cannot be used in lossless mode.
 *
 * @default false
 */`,sharpness:`/**
 * Bias towards block sharpness in rate-distortion optimization of transform coefficients [0, 7]
 *
 * @default 0
 */`,denoiseLevel:`/**
 * Amount of noise (from 0 = don't denoise, to 50)
 *
 * @default 0
 */`,tune:`/**
 * Distortion metric tuned with.
 *
 * @default AVIFTune.Auto
 */`,sharpYUV:`/**
 * Use libsharpyuv for RGB->YUV conversion if needed.
 *
 * @default false
 */`};ta(()=>(aa(k()),s(n)),()=>{if(k())try{JSON.stringify(k())!==JSON.stringify(s(n))&&Ze(n,{...s(n),...k()})}catch{Ze(n,{...s(n),...k()})}}),ra(),kr();var O=tl(),Z=h(d(O),2),N=d(Z),C=d(N),V=d(C),ee=h(d(V)),ie=d(ee,!0);p(ee),p(V),p(C);var z=h(C,2),he=d(z);B(he),p(z);var ne=h(z,2),se=d(ne),ge=h(d(se)),J=d(ge,!0);p(ge),p(se);var ye=h(se,2);B(ye),p(ne);var K=h(ne,2),Ce=d(K),Re=h(d(Ce)),Pe=d(Re,!0);p(Re),p(Ce);var fe=h(Ce,2);B(fe),p(K);var Fe=h(K,2),je=h(d(Fe),2);me(()=>{s(n),Tt(()=>{})}),Ut(je,5,()=>c,jt,(S,oe)=>{var ae=Xo(),D={},G=d(ae,!0);p(ae),me(()=>{D!==(D=s(oe).v)&&(ae.value=(ae.__value=s(oe).v)==null?"":s(oe).v),re(G,s(oe).label)}),Qe(S,ae)}),p(je),p(Fe);var be=h(Fe,2),Be=d(be),He=d(Be);B(He),qe(),p(Be),p(be);var Ae=h(be,2),Ue=d(Ae),pe=h(d(Ue)),tt=d(pe,!0);p(pe),p(Ue);var ke=h(Ue,2);B(ke),p(Ae);var Ie=h(Ae,2),Le=d(Ie),We=h(d(Le)),rt=d(We,!0);p(We),p(Le);var Me=h(Le,2);B(Me),p(Ie),p(N);var De=h(N,2),Ne=d(De),Ye=d(Ne),Ge=d(Ye);B(Ge),qe(),p(Ye),p(Ne);var Ve=h(Ne,2),$e=d(Ve),U=h(d($e)),X=d(U,!0);p(U),p($e);var q=h($e,2);B(q),p(Ve);var Q=h(Ve,2),Se=d(Q),ht=h(d(Se)),Ct=d(ht,!0);p(ht),p(Se);var et=h(Se,2);B(et),p(Q);var Je=h(Q,2),at=h(d(Je),2);me(()=>{s(n),Tt(()=>{})}),Ut(at,5,()=>_,jt,(S,oe)=>{var ae=el(),D={},G=d(ae,!0);p(ae),me(()=>{D!==(D=s(oe).v)&&(ae.value=(ae.__value=s(oe).v)==null?"":s(oe).v),re(G,s(oe).label)}),Qe(S,ae)}),p(at),p(Je);var lt=h(Je,2),_t=d(lt),it=d(_t);B(it),qe(),p(_t),p(lt);var mt=h(lt,2),At=d(mt),ut=h(At,2),gt=h(ut,2);p(mt),p(De),p(Z),p(O),me(()=>{F(C,"title",b.quality),re(ie,s(n).quality),F(ne,"title",b.qualityAlpha),re(J,s(n).qualityAlpha),F(K,"title",b.speed),re(Pe,s(n).speed),F(Fe,"title",b.subsample),F(be,"title",b.autoTiling),F(Ae,"title",b.tileColsLog2),re(tt,s(n).tileRowsLog2),F(Ie,"title",b.tileColsLog2),re(rt,s(n).tileColsLog2),F(Ne,"title",b.chromaDeltaQ),F(Ve,"title",b.sharpness),re(X,s(n).sharpness),F(Q,"title",b.denoiseLevel),re(Ct,s(n).denoiseLevel),F(Je,"title",b.tune),F(lt,"title",b.sharpYUV)}),ce(he,()=>s(n).quality,S=>W(n,s(n).quality=S)),j("input",he,m),ce(ye,()=>s(n).qualityAlpha,S=>W(n,s(n).qualityAlpha=S)),j("input",ye,m),ce(fe,()=>s(n).speed,S=>W(n,s(n).speed=S)),j("input",fe,m),xt(je,()=>s(n).subsample,S=>W(n,s(n).subsample=S)),j("change",je,m),Ke(He,()=>s(n).autoTiling,S=>W(n,s(n).autoTiling=S)),j("change",He,m),ce(ke,()=>s(n).tileRowsLog2,S=>W(n,s(n).tileRowsLog2=S)),j("input",ke,m),ce(Me,()=>s(n).tileColsLog2,S=>W(n,s(n).tileColsLog2=S)),j("input",Me,m),Ke(Ge,()=>s(n).chromaDeltaQ,S=>W(n,s(n).chromaDeltaQ=S)),j("change",Ge,m),ce(q,()=>s(n).sharpness,S=>W(n,s(n).sharpness=S)),j("input",q,m),ce(et,()=>s(n).denoiseLevel,S=>W(n,s(n).denoiseLevel=S)),j("input",et,m),xt(at,()=>s(n).tune,S=>W(n,s(n).tune=S)),j("change",at,m),Ke(it,()=>s(n).sharpYUV,S=>W(n,s(n).sharpYUV=S)),j("change",it,m),j("click",At,R),j("click",ut,T),j("click",gt,E),Qe(o,O),Ar()}var al=Xe('<meta name="description" content="Converter for heif">'),il=Xe('<div><!> <!> <!> <span> .</span> <label for="heic">HEIC</label> <input type="file" name="heif" multiple accept="image/png"></div>');function ml(o,y){Cr(y,!1);let w=lr({});async function P(_){if(!_.length)return;const b=new Worker(Po,{type:"module"}),O=Co(b),Z=new Ao,N=Z.folder("heic"),C=Z.folder("webp"),V=Z.folder("avif");try{const ee=_.map(async z=>{let he=await createImageBitmap(z);const ne=await O.bitmapToHEIC(Gr(he,[he]),s(w).heic),se=await O.bitmapToWEBP(Gr(ne.bitmap,[ne==null?void 0:ne.bitmap]),s(w).webp),ge=await O.bitmapToAVIF(Gr(se.bitmap,[se.bitmap]),s(w).avif),J=z.name.replace(/\.[^/.]+$/,"");N==null||N.file(J+".heic",ne.data),C==null||C.file(J+".webp",se.data),V==null||V.file(J+".avif",ge.data)});await Promise.all(ee);const ie=await Z.generateAsync({type:"blob"});Wo(ie,"converted_images.zip")}finally{b.terminate()}}async function k(_){const b=Array.from(_.target.files??[]);P(b)}function n(_){_.type==="avif"?W(w,s(w).avif=_.option):_.type==="webp"?W(w,s(w).webp=_.option):_.type==="heic"&&W(w,s(w).heic=_.option),console.log(_,s(w))}function $(_){}kr();var m=il();To(_=>{var b=al();bo.title="About",Qe(_,b)});var E=d(m);Zo(E,{get value(){return s(w).webp},onApply:_=>n({type:"webp",option:_}),onChange:_=>void 0});var R=h(E,2);Go(R,{get value(){return s(w).heic},onApply:_=>n({type:"heic",option:_}),onChange:_=>void 0});var T=h(R,2);rl(T,{get value(){return s(w).avif},onApply:_=>n({type:"avif",option:_}),onChange:_=>void 0});var c=h(T,6);p(m),j("change",c,k),Qe(o,m),Ar()}export{ml as component};
