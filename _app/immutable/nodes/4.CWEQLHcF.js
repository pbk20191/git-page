var To=Object.defineProperty;var ko=(v,q,z)=>q in v?To(v,q,{enumerable:!0,configurable:!0,writable:!0,value:z}):v[q]=z;var _t=(v,q,z)=>ko(v,typeof q!="symbol"?q+"":q,z);import{t as Hn,a as In}from"../chunks/BEr6FrAa.js";import"../chunks/DBdr0Wid.js";import{p as $o,a as Po,$ as Eo,s as Vt,c as aa,G as Fr,a5 as oa,_ as Ln,r as sa,aD as Ia,t as La}from"../chunks/CZnZ5_Fq.js";import{e as Ha,s as Co}from"../chunks/DWzxo43A.js";import{i as Na}from"../chunks/DLgU1itV.js";import{h as Ao}from"../chunks/DADB9M84.js";import{s as Oo}from"../chunks/DOjrtIhw.js";import{b as Wo}from"../chunks/BWbuDoMX.js";import{i as jo}from"../chunks/DavJ5cDe.js";function xo(v){if(Object.prototype.hasOwnProperty.call(v,"__esModule"))return v;var q=v.default;if(typeof q=="function"){var z=function _(){return this instanceof _?Reflect.construct(q,arguments,this.constructor):q.apply(this,arguments)};z.prototype=q.prototype}else z={};return Object.defineProperty(z,"__esModule",{value:!0}),Object.keys(v).forEach(function(_){var ie=Object.getOwnPropertyDescriptor(v,_);Object.defineProperty(z,_,ie.get?ie:{enumerable:!0,get:function(){return v[_]}})}),z}var Bt={exports:{}};const So={},Ro=Object.freeze(Object.defineProperty({__proto__:null,default:So},Symbol.toStringTag,{value:"Module"})),yt=xo(Ro);/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 9.2.0
 * @date    2024-10-11
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */var Fo=Bt.exports,Va;function Uo(){return Va||(Va=1,function(v,q){(function(z,_){_(q)})(Fo,function(z){var _={},ie={exports:{}};(function(b){var k=function(D){return typeof D<"u"&&D.versions!=null&&D.versions.node!=null&&D+""=="[object process]"};b.exports.isNode=k,b.exports.platform=typeof process<"u"&&k(process)?"node":"browser";var O=b.exports.platform==="node"&&yt;b.exports.isMainThread=b.exports.platform==="node"?(!O||O.isMainThread)&&!process.connected:typeof Window<"u",b.exports.cpus=b.exports.platform==="browser"?self.navigator.hardwareConcurrency:yt.cpus().length})(ie);var Ae=ie.exports,Oe={},fe;function Z(){if(fe)return Oe;fe=1;function b(D,ne){var T=this;if(!(this instanceof b))throw new SyntaxError("Constructor must be called with the new operator");if(typeof D!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var le=[],Y=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var be=function($,R){le.push($),Y.push(R)};this.then=function(A,$){return new b(function(R,L){var ee=A?k(A,R,L):R,Ee=$?k($,R,L):L;be(ee,Ee)},T)};var Pe=function($){return T.resolved=!0,T.rejected=!1,T.pending=!1,le.forEach(function(R){R($)}),be=function(L,ee){L($)},Pe=j=function(){},T},j=function($){return T.resolved=!1,T.rejected=!0,T.pending=!1,Y.forEach(function(R){R($)}),be=function(L,ee){ee($)},Pe=j=function(){},T};this.cancel=function(){return ne?ne.cancel():j(new O),T},this.timeout=function(A){if(ne)ne.timeout(A);else{var $=setTimeout(function(){j(new V("Promise timed out after "+A+" ms"))},A);T.always(function(){clearTimeout($)})}return T},D(function(A){Pe(A)},function(A){j(A)})}function k(D,ne,T){return function(le){try{var Y=D(le);Y&&typeof Y.then=="function"&&typeof Y.catch=="function"?Y.then(ne,T):ne(Y)}catch(be){T(be)}}}b.prototype.catch=function(D){return this.then(null,D)},b.prototype.always=function(D){return this.then(D,D)},b.prototype.finally=function(D){var ne=this,T=function(){return new b(function(Y){return Y()}).then(D).then(function(){return ne})};return this.then(T,T)},b.all=function(D){return new b(function(ne,T){var le=D.length,Y=[];le?D.forEach(function(be,Pe){be.then(function(j){Y[Pe]=j,le--,le==0&&ne(Y)},function(j){le=0,T(j)})}):ne(Y)})},b.defer=function(){var D={};return D.promise=new b(function(ne,T){D.resolve=ne,D.reject=T}),D};function O(D){this.message=D||"promise cancelled",this.stack=new Error().stack}O.prototype=new Error,O.prototype.constructor=Error,O.prototype.name="CancellationError",b.CancellationError=O;function V(D){this.message=D||"timeout exceeded",this.stack=new Error().stack}return V.prototype=new Error,V.prototype.constructor=Error,V.prototype.name="TimeoutError",b.TimeoutError=V,Oe.Promise=b,Oe}function $r(b,k){(k==null||k>b.length)&&(k=b.length);for(var O=0,V=Array(k);O<k;O++)V[O]=b[O];return V}function Ue(b,k){var O=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!O){if(Array.isArray(b)||(O=K(b))||k){O&&(b=O);var V=0,D=function(){};return{s:D,n:function(){return V>=b.length?{done:!0}:{done:!1,value:b[V++]}},e:function(Y){throw Y},f:D}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,T=!0,le=!1;return{s:function(){O=O.call(b)},n:function(){var Y=O.next();return T=Y.done,Y},e:function(Y){le=!0,ne=Y},f:function(){try{T||O.return==null||O.return()}finally{if(le)throw ne}}}}function w(b,k,O){return(k=sr(k))in b?Object.defineProperty(b,k,{value:O,enumerable:!0,configurable:!0,writable:!0}):b[k]=O,b}function lr(b,k){var O=Object.keys(b);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(b);k&&(V=V.filter(function(D){return Object.getOwnPropertyDescriptor(b,D).enumerable})),O.push.apply(O,V)}return O}function or(b){for(var k=1;k<arguments.length;k++){var O=arguments[k]!=null?arguments[k]:{};k%2?lr(Object(O),!0).forEach(function(V){w(b,V,O[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(O)):lr(Object(O)).forEach(function(V){Object.defineProperty(b,V,Object.getOwnPropertyDescriptor(O,V))})}return b}function Ze(b,k){if(typeof b!="object"||!b)return b;var O=b[Symbol.toPrimitive];if(O!==void 0){var V=O.call(b,k);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(b)}function sr(b){var k=Ze(b,"string");return typeof k=="symbol"?k:k+""}function xe(b){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},xe(b)}function K(b,k){if(b){if(typeof b=="string")return $r(b,k);var O={}.toString.call(b).slice(8,-1);return O==="Object"&&b.constructor&&(O=b.constructor.name),O==="Map"||O==="Set"?Array.from(b):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?$r(b,k):void 0}}var De={exports:{}},ke={},he;function J(){return he||(he=1,ke.validateOptions=function(k,O,V){if(k){var D=k?Object.keys(k):[],ne=D.find(function(le){return!O.includes(le)});if(ne)throw new Error('Object "'+V+'" contains an unknown option "'+ne+'"');var T=O.find(function(le){return Object.prototype[le]&&!D.includes(le)});if(T)throw new Error('Object "'+V+'" contains an inherited option "'+T+'" which is not defined in the object itself but in its prototype. Only plain objects are allowed. Please remove the option from the prototype or override it with a value "undefined".');return k}},ke.workerOptsNames=["credentials","name","type"],ke.forkOptsNames=["cwd","detached","env","execPath","execArgv","gid","serialization","signal","killSignal","silent","stdio","uid","windowsVerbatimArguments","timeout"],ke.workerThreadOptsNames=["argv","env","eval","execArgv","stdin","stdout","stderr","workerData","trackUnmanagedFds","transferList","resourceLimits","name"]),ke}var ce,We;function te(){return We||(We=1,ce=`!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).worker=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={};var r=function(e,n){this.message=e,this.transfer=n},o={};function i(e,n){var t=this;if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var a=function(e,n){r.push(e),o.push(n)};this.then=function(e,n){return new i((function(t,r){var o=e?u(e,t,r):t,i=n?u(n,t,r):r;a(o,i)}),t)};var f=function(e){return t.resolved=!0,t.rejected=!1,t.pending=!1,r.forEach((function(n){n(e)})),a=function(n,t){n(e)},f=d=function(){},t},d=function(e){return t.resolved=!1,t.rejected=!0,t.pending=!1,o.forEach((function(n){n(e)})),a=function(n,t){t(e)},f=d=function(){},t};this.cancel=function(){return n?n.cancel():d(new s),t},this.timeout=function(e){if(n)n.timeout(e);else{var r=setTimeout((function(){d(new c("Promise timed out after "+e+" ms"))}),e);t.always((function(){clearTimeout(r)}))}return t},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,n,t){return function(r){try{var o=e(r);o&&"function"==typeof o.then&&"function"==typeof o.catch?o.then(n,t):n(o)}catch(e){t(e)}}}function s(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function c(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.always=function(e){return this.then(e,e)},i.prototype.finally=function(e){var n=this,t=function(){return new i((function(e){return e()})).then(e).then((function(){return n}))};return this.then(t,t)},i.all=function(e){return new i((function(n,t){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&n(o)}),(function(e){r=0,t(e)}))})):n(o)}))},i.defer=function(){var e={};return e.promise=new i((function(n,t){e.resolve=n,e.reject=t})),e},s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="CancellationError",i.CancellationError=s,c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name="TimeoutError",i.TimeoutError=c,o.Promise=i,function(n){var t=r,i=o.Promise,u="__workerpool-cleanup__",s={exit:function(){}},c={addAbortListener:function(e){s.abortListeners.push(e)},emit:s.emit};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)s.on=function(e,n){addEventListener(e,(function(e){n(e.data)}))},s.send=function(e,n){n?postMessage(e,n):postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var a;try{a=require("worker_threads")}catch(n){if("object"!==e(n)||null===n||"MODULE_NOT_FOUND"!==n.code)throw n}if(a&&null!==a.parentPort){var f=a.parentPort;s.send=f.postMessage.bind(f),s.on=f.on.bind(f),s.exit=process.exit.bind(process)}else s.on=process.on.bind(process),s.send=function(e){process.send(e)},s.on("disconnect",(function(){process.exit(1)})),s.exit=process.exit.bind(process)}function d(e){return Object.getOwnPropertyNames(e).reduce((function(n,t){return Object.defineProperty(n,t,{value:e[t],enumerable:!0})}),{})}function l(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}s.methods={},s.methods.run=function(e,n){var t=new Function("return ("+e+").apply(this, arguments);");return t.worker=c,t.apply(t,n)},s.methods.methods=function(){return Object.keys(s.methods)},s.terminationHandler=void 0,s.abortListenerTimeout=1e3,s.abortListeners=[],s.terminateAndExit=function(e){var n=function(){s.exit(e)};if(!s.terminationHandler)return n();var t=s.terminationHandler(e);return l(t)?(t.then(n,n),t):(n(),new i((function(e,n){n(new Error("Worker terminating"))})))},s.cleanup=function(e){if(!s.abortListeners.length)return s.send({id:e,method:u,error:d(new Error("Worker terminating"))}),new i((function(e){e()}));var n,t=s.abortListeners.map((function(e){return e()})),r=new i((function(e,t){n=setTimeout((function(){t(new Error("Timeout occured waiting for abort handler, killing worker"))}),s.abortListenerTimeout)})),o=i.all(t).then((function(){clearTimeout(n),s.abortListeners.length||(s.abortListeners=[])}),(function(){clearTimeout(n),s.exit()}));return i.all([o,r]).then((function(){s.send({id:e,method:u,error:null})}),(function(n){s.send({id:e,method:u,error:n?d(n):null})}))};var p=null;s.on("message",(function(e){if("__workerpool-terminate__"===e)return s.terminateAndExit(0);if(e.method===u)return s.cleanup(e.id);try{var n=s.methods[e.method];if(!n)throw new Error('Unknown method "'+e.method+'"');p=e.id;var r=n.apply(n,e.params);l(r)?r.then((function(n){n instanceof t?s.send({id:e.id,result:n.message,error:null},n.transfer):s.send({id:e.id,result:n,error:null}),p=null})).catch((function(n){s.send({id:e.id,result:null,error:d(n)}),p=null})):(r instanceof t?s.send({id:e.id,result:r.message,error:null},r.transfer):s.send({id:e.id,result:r,error:null}),p=null)}catch(n){s.send({id:e.id,result:null,error:d(n)})}})),s.register=function(e,n){if(e)for(var t in e)e.hasOwnProperty(t)&&(s.methods[t]=e[t],s.methods[t].worker=c);n&&(s.terminationHandler=n.onTerminate,s.abortListenerTimeout=n.abortListenerTimeout||1e3),s.send("ready")},s.emit=function(e){if(p){if(e instanceof t)return void s.send({id:p,isEvent:!0,payload:e.message},e.transfer);s.send({id:p,isEvent:!0,payload:e})}},n.add=s.register,n.emit=s.emit}(t),n(t)}));
//# sourceMappingURL=worker.min.js.map
`),ce}var Je;function $e(){if(Je)return De.exports;Je=1;var b=Z(),k=b.Promise,O=Ae,V=J(),D=V.validateOptions,ne=V.forkOptsNames,T=V.workerThreadOptsNames,le=V.workerOptsNames,Y="__workerpool-terminate__",be="__workerpool-cleanup__";function Pe(){var M=A();if(!M)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return M}function j(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":xe(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function A(){try{return yt}catch(M){if(xe(M)==="object"&&M!==null&&M.code==="MODULE_NOT_FOUND")return null;throw M}}function $(){if(O.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var M=new Blob([te()],{type:"text/javascript"});return window.URL.createObjectURL(M)}else return __dirname+"/worker.js"}function R(M,F){if(F.workerType==="web")return j(),L(M,F.workerOpts,Worker);if(F.workerType==="thread")return E=Pe(),ee(M,E,F);if(F.workerType==="process"||!F.workerType)return Ee(M,je(F),yt);if(O.platform==="browser")return j(),L(M,F.workerOpts,Worker);var E=A();return E?ee(M,E,F):Ee(M,je(F),yt)}function L(M,F,E){D(F,le,"workerOpts");var I=new E(M,F);return I.isBrowserWorker=!0,I.on=function(B,X){this.addEventListener(B,function(Q){X(Q.data)})},I.send=function(B,X){this.postMessage(B,X)},I}function ee(M,F,E){var I,B;D(E==null?void 0:E.workerThreadOpts,T,"workerThreadOpts");var X=new F.Worker(M,or({stdout:(I=E==null?void 0:E.emitStdStreams)!==null&&I!==void 0?I:!1,stderr:(B=E==null?void 0:E.emitStdStreams)!==null&&B!==void 0?B:!1},E==null?void 0:E.workerThreadOpts));return X.isWorkerThread=!0,X.send=function(Q,W){this.postMessage(Q,W)},X.kill=function(){return this.terminate(),!0},X.disconnect=function(){this.terminate()},E!=null&&E.emitStdStreams&&(X.stdout.on("data",function(Q){return X.emit("stdout",Q)}),X.stderr.on("data",function(Q){return X.emit("stderr",Q)})),X}function Ee(M,F,E){D(F.forkOpts,ne,"forkOpts");var I=E.fork(M,F.forkArgs,F.forkOpts),B=I.send;return I.send=function(X){return B.call(I,X)},F.emitStdStreams&&(I.stdout.on("data",function(X){return I.emit("stdout",X)}),I.stderr.on("data",function(X){return I.emit("stderr",X)})),I.isChildProcess=!0,I}function je(M){M=M||{};var F=process.execArgv.join(" "),E=F.indexOf("--inspect")!==-1,I=F.indexOf("--debug-brk")!==-1,B=[];return E&&(B.push("--inspect="+M.debugPort),I&&B.push("--debug-brk")),process.execArgv.forEach(function(X){X.indexOf("--max-old-space-size")>-1&&B.push(X)}),Object.assign({},M,{forkArgs:M.forkArgs,forkOpts:Object.assign({},M.forkOpts,{execArgv:(M.forkOpts&&M.forkOpts.execArgv||[]).concat(B),stdio:M.emitStdStreams?"pipe":void 0})})}function re(M){for(var F=new Error(""),E=Object.keys(M),I=0;I<E.length;I++)F[E[I]]=M[E[I]];return F}function G(M,F){if(Object.keys(M.processing).length===1){var E=Object.values(M.processing)[0];E.options&&typeof E.options.on=="function"&&E.options.on(F)}}function ur(M,F){var E=this,I=F||{};this.script=M||$(),this.worker=R(this.script,I),this.debugPort=I.debugPort,this.forkOpts=I.forkOpts,this.forkArgs=I.forkArgs,this.workerOpts=I.workerOpts,this.workerThreadOpts=I.workerThreadOpts,this.workerTerminateTimeout=I.workerTerminateTimeout,M||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("stdout",function(W){G(E,{stdout:W.toString()})}),this.worker.on("stderr",function(W){G(E,{stderr:W.toString()})}),this.worker.on("message",function(W){if(!E.terminated)if(typeof W=="string"&&W==="ready")E.worker.ready=!0,X();else{var _e=W.id,pe=E.processing[_e];if(pe!==void 0&&(W.isEvent?pe.options&&typeof pe.options.on=="function"&&pe.options.on(W.payload):(delete E.processing[_e],E.terminating===!0&&E.terminate(),W.error?pe.resolver.reject(re(W.error)):pe.resolver.resolve(W.result))),W.method===be){var ye=E.tracking[W.id];ye!==void 0&&(W.error?(clearTimeout(ye.timeoutId),ye.resolver.reject(re(W.error))):(E.tracking&&clearTimeout(ye.timeoutId),ye.resolver.resolve(ye.result))),delete E.tracking[_e]}}});function B(W){E.terminated=!0;for(var _e in E.processing)E.processing[_e]!==void 0&&E.processing[_e].resolver.reject(W);E.processing=Object.create(null)}function X(){var W=Ue(E.requestQueue.splice(0)),_e;try{for(W.s();!(_e=W.n()).done;){var pe=_e.value;E.worker.send(pe.message,pe.transfer)}}catch(ye){W.e(ye)}finally{W.f()}}var Q=this.worker;this.worker.on("error",B),this.worker.on("exit",function(W,_e){var pe=`Workerpool Worker terminated Unexpectedly
`;pe+="    exitCode: `"+W+"`\n",pe+="    signalCode: `"+_e+"`\n",pe+="    workerpool.script: `"+E.script+"`\n",pe+="    spawnArgs: `"+Q.spawnargs+"`\n",pe+="    spawnfile: `"+Q.spawnfile+"`\n",pe+="    stdout: `"+Q.stdout+"`\n",pe+="    stderr: `"+Q.stderr+"`\n",B(new Error(pe))}),this.processing=Object.create(null),this.tracking=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}return ur.prototype.methods=function(){return this.exec("methods")},ur.prototype.exec=function(M,F,E,I){E||(E=k.defer());var B=++this.lastId;this.processing[B]={id:B,resolver:E,options:I};var X={message:{id:B,method:M,params:F},transfer:I&&I.transfer};this.terminated?E.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(X.message,X.transfer):this.requestQueue.push(X);var Q=this;return E.promise.catch(function(W){if(W instanceof k.CancellationError||W instanceof k.TimeoutError)return Q.tracking[B]={id:B,resolver:k.defer()},delete Q.processing[B],Q.tracking[B].resolver.promise=Q.tracking[B].resolver.promise.catch(function(_e){delete Q.tracking[B];var pe=Q.terminateAndNotify(!0).then(function(){throw _e},function(ye){throw ye});return pe}),Q.worker.send({id:B,method:be}),Q.tracking[B].timeoutId=setTimeout(function(){Q.tracking[B].resolver.reject(W)},Q.workerTerminateTimeout),Q.tracking[B].resolver.promise;throw W})},ur.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},ur.prototype.terminate=function(M,F){var E=this;if(M){for(var I in this.processing)this.processing[I]!==void 0&&this.processing[I].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}for(var B=0,X=Object.values(E.tracking);B<X.length;B++){var Q=X[B];clearTimeout(Q.timeoutId),Q.resolver.reject(new Error("Worker Terminating"))}if(E.tracking=Object.create(null),typeof F=="function"&&(this.terminationHandler=F),this.busy())this.terminating=!0;else{var W=function(ye){if(E.terminated=!0,E.cleaning=!1,E.worker!=null&&E.worker.removeAllListeners&&E.worker.removeAllListeners("message"),E.worker=null,E.terminating=!1,E.terminationHandler)E.terminationHandler(ye,E);else if(ye)throw ye};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){W(new Error("worker already killed!"));return}var _e=setTimeout(function(){E.worker&&E.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(_e),E.worker&&(E.worker.killed=!0),W()}),this.worker.ready?this.worker.send(Y):this.requestQueue.push({message:Y}),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");W()}},ur.prototype.terminateAndNotify=function(M,F){var E=k.defer();return F&&E.promise.timeout(F),this.terminate(M,function(I,B){I?E.reject(I):E.resolve(B)}),E.promise},De.exports=ur,De.exports._tryRequireWorkerThreads=A,De.exports._setupProcessWorker=Ee,De.exports._setupBrowserWorker=L,De.exports._setupWorkerThreadWorker=ee,De.exports.ensureWorkerThreads=Pe,De.exports}var Xe,me;function yr(){if(me)return Xe;me=1;var b=65535;Xe=k;function k(){this.ports=Object.create(null),this.length=0}return k.prototype.nextAvailableStartingAt=function(O){for(;this.ports[O]===!0;)O++;if(O>=b)throw new Error("WorkerPool debug port limit reached: "+O+">= "+b);return this.ports[O]=!0,this.length++,O},k.prototype.releasePort=function(O){delete this.ports[O],this.length--},Xe}var vr,dr;function Ge(){if(dr)return vr;dr=1;var b=Z(),k=b.Promise,O=$e(),V=Ae,D=yr(),ne=new D;function T(j,A){typeof j=="string"?this.script=j||null:(this.script=null,A=j),this.workers=[],this.tasks=[],A=A||{},this.forkArgs=Object.freeze(A.forkArgs||[]),this.forkOpts=Object.freeze(A.forkOpts||{}),this.workerOpts=Object.freeze(A.workerOpts||{}),this.workerThreadOpts=Object.freeze(A.workerThreadOpts||{}),this.debugPortStart=A.debugPortStart||43210,this.nodeWorker=A.nodeWorker,this.workerType=A.workerType||A.nodeWorker||"auto",this.maxQueueSize=A.maxQueueSize||1/0,this.workerTerminateTimeout=A.workerTerminateTimeout||1e3,this.onCreateWorker=A.onCreateWorker||function(){return null},this.onTerminateWorker=A.onTerminateWorker||function(){return null},this.emitStdStreams=A.emitStdStreams||!1,A&&"maxWorkers"in A?(le(A.maxWorkers),this.maxWorkers=A.maxWorkers):this.maxWorkers=Math.max((V.cpus||4)-1,1),A&&"minWorkers"in A&&(A.minWorkers==="max"?this.minWorkers=this.maxWorkers:(Y(A.minWorkers),this.minWorkers=A.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&O.ensureWorkerThreads()}T.prototype.exec=function(j,A,$){if(A&&!Array.isArray(A))throw new TypeError('Array expected as argument "params"');if(typeof j=="string"){var R=k.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var L=this.tasks,ee={method:j,params:A,resolver:R,timeout:null,options:$};L.push(ee);var Ee=R.promise.timeout;return R.promise.timeout=function(re){return L.indexOf(ee)!==-1?(ee.timeout=re,R.promise):Ee.call(R.promise,re)},this._next(),R.promise}else{if(typeof j=="function")return this.exec("run",[String(j),A],$);throw new TypeError('Function or string expected as argument "method"')}},T.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var j=this;return this.exec("methods").then(function(A){var $={};return A.forEach(function(R){$[R]=function(){return j.exec(R,Array.prototype.slice.call(arguments))}}),$})},T.prototype._next=function(){if(this.tasks.length>0){var j=this._getWorker();if(j){var A=this,$=this.tasks.shift();if($.resolver.promise.pending){var R=j.exec($.method,$.params,$.resolver,$.options).then(A._boundNext).catch(function(){if(j.terminated)return A._removeWorker(j)}).then(function(){A._next()});typeof $.timeout=="number"&&R.timeout($.timeout)}else A._next()}}},T.prototype._getWorker=function(){for(var j=this.workers,A=0;A<j.length;A++){var $=j[A];if($.busy()===!1)return $}return j.length<this.maxWorkers?($=this._createWorkerHandler(),j.push($),$):null},T.prototype._removeWorker=function(j){var A=this;return ne.releasePort(j.debugPort),this._removeWorkerFromList(j),this._ensureMinWorkers(),new k(function($,R){j.terminate(!1,function(L){A.onTerminateWorker({forkArgs:j.forkArgs,forkOpts:j.forkOpts,workerThreadOpts:j.workerThreadOpts,script:j.script}),L?R(L):$(j)})})},T.prototype._removeWorkerFromList=function(j){var A=this.workers.indexOf(j);A!==-1&&this.workers.splice(A,1)},T.prototype.terminate=function(j,A){var $=this;this.tasks.forEach(function(je){je.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var R=function(re){ne.releasePort(re.debugPort),this._removeWorkerFromList(re)},L=R.bind(this),ee=[],Ee=this.workers.slice();return Ee.forEach(function(je){var re=je.terminateAndNotify(j,A).then(L).always(function(){$.onTerminateWorker({forkArgs:je.forkArgs,forkOpts:je.forkOpts,workerThreadOpts:je.workerThreadOpts,script:je.script})});ee.push(re)}),k.all(ee)},T.prototype.stats=function(){var j=this.workers.length,A=this.workers.filter(function($){return $.busy()}).length;return{totalWorkers:j,busyWorkers:A,idleWorkers:j-A,pendingTasks:this.tasks.length,activeTasks:A}},T.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var j=this.workers.length;j<this.minWorkers;j++)this.workers.push(this._createWorkerHandler())},T.prototype._createWorkerHandler=function(){var j=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerOpts:this.workerOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new O(j.script||this.script,{forkArgs:j.forkArgs||this.forkArgs,forkOpts:j.forkOpts||this.forkOpts,workerOpts:j.workerOpts||this.workerOpts,workerThreadOpts:j.workerThreadOpts||this.workerThreadOpts,debugPort:ne.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout,emitStdStreams:this.emitStdStreams})};function le(j){if(!be(j)||!Pe(j)||j<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function Y(j){if(!be(j)||!Pe(j)||j<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function be(j){return typeof j=="number"}function Pe(j){return Math.round(j)==j}return vr=T,vr}var Wr={},jr,Ur;function Dr(){if(Ur)return jr;Ur=1;function b(k,O){this.message=k,this.transfer=O}return jr=b,jr}var Qe;function pr(){return Qe||(Qe=1,function(b){var k=Dr(),O=Z().Promise,V="__workerpool-terminate__",D="__workerpool-cleanup__",ne=1e3,T={exit:function(){}},le={addAbortListener:function(R){T.abortListeners.push(R)},emit:T.emit};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")T.on=function($,R){addEventListener($,function(L){R(L.data)})},T.send=function($,R){R?postMessage($,R):postMessage($)};else if(typeof process<"u"){var Y;try{Y=yt}catch($){if(!(xe($)==="object"&&$!==null&&$.code==="MODULE_NOT_FOUND"))throw $}if(Y&&Y.parentPort!==null){var be=Y.parentPort;T.send=be.postMessage.bind(be),T.on=be.on.bind(be),T.exit=process.exit.bind(process)}else T.on=process.on.bind(process),T.send=function($){process.send($)},T.on("disconnect",function(){process.exit(1)}),T.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function Pe($){return Object.getOwnPropertyNames($).reduce(function(R,L){return Object.defineProperty(R,L,{value:$[L],enumerable:!0})},{})}function j($){return $&&typeof $.then=="function"&&typeof $.catch=="function"}T.methods={},T.methods.run=function(R,L){var ee=new Function("return ("+R+").apply(this, arguments);");return ee.worker=le,ee.apply(ee,L)},T.methods.methods=function(){return Object.keys(T.methods)},T.terminationHandler=void 0,T.abortListenerTimeout=ne,T.abortListeners=[],T.terminateAndExit=function($){var R=function(){T.exit($)};if(!T.terminationHandler)return R();var L=T.terminationHandler($);return j(L)?(L.then(R,R),L):(R(),new O(function(ee,Ee){Ee(new Error("Worker terminating"))}))},T.cleanup=function($){if(!T.abortListeners.length)return T.send({id:$,method:D,error:Pe(new Error("Worker terminating"))}),new O(function(G){G()});var R=function(){T.exit()},L=function(){T.abortListeners.length||(T.abortListeners=[])},ee=T.abortListeners.map(function(G){return G()}),Ee,je=new O(function(G,ur){Ee=setTimeout(function(){ur(new Error("Timeout occured waiting for abort handler, killing worker"))},T.abortListenerTimeout)}),re=O.all(ee).then(function(){clearTimeout(Ee),L()},function(){clearTimeout(Ee),R()});return O.all([re,je]).then(function(){T.send({id:$,method:D,error:null})},function(G){T.send({id:$,method:D,error:G?Pe(G):null})})};var A=null;T.on("message",function($){if($===V)return T.terminateAndExit(0);if($.method===D)return T.cleanup($.id);try{var R=T.methods[$.method];if(R){A=$.id;var L=R.apply(R,$.params);j(L)?L.then(function(ee){ee instanceof k?T.send({id:$.id,result:ee.message,error:null},ee.transfer):T.send({id:$.id,result:ee,error:null}),A=null}).catch(function(ee){T.send({id:$.id,result:null,error:Pe(ee)}),A=null}):(L instanceof k?T.send({id:$.id,result:L.message,error:null},L.transfer):T.send({id:$.id,result:L,error:null}),A=null)}else throw new Error('Unknown method "'+$.method+'"')}catch(ee){T.send({id:$.id,result:null,error:Pe(ee)})}}),T.register=function($,R){if($)for(var L in $)$.hasOwnProperty(L)&&(T.methods[L]=$[L],T.methods[L].worker=le);R&&(T.terminationHandler=R.onTerminate,T.abortListenerTimeout=R.abortListenerTimeout||ne),T.send("ready")},T.emit=function($){if(A){if($ instanceof k){T.send({id:A,isEvent:!0,payload:$.message},$.transfer);return}T.send({id:A,isEvent:!0,payload:$})}},b.add=T.register,b.emit=T.emit}(Wr)),Wr}var Qr=Ae.platform,Ne=Ae.isMainThread,Pr=Ae.cpus;function Mr(b,k){var O=Ge();return new O(b,k)}var et=_.pool=Mr;function rt(b,k){var O=pr();O.add(b,k)}var xr=_.worker=rt;function Ir(b){var k=pr();k.emit(b)}var gt=_.workerEmit=Ir,Lr=Z(),wt=Lr.Promise,tt=_.Promise=wt,bt=_.Transfer=Dr(),nt=_.platform=Qr,er=_.isMainThread=Ne,gr=_.cpus=Pr;z.Promise=tt,z.Transfer=bt,z.cpus=gr,z.default=_,z.isMainThread=er,z.platform=nt,z.pool=et,z.worker=xr,z.workerEmit=gt,Object.defineProperty(z,"__esModule",{value:!0})})}(Bt,Bt.exports)),Bt.exports}Uo();function qa(v,q){return v(typeof q=="string"?{locateFile:()=>q}:{wasmBinary:q})}class za{constructor(q,z,_,ie=8){_t(this,"data");_t(this,"width");_t(this,"height");_t(this,"depth");this.data=q,this.width=z,this.height=_,this.depth=ie}}za.prototype.colorSpace="srgb";function Do(v,q,z,_,ie){ie={...z,...ie};const{data:Ae,width:Oe,height:fe}=_;ie.bitDepth=_.depth??8;const Z=q.encode(Ae,Oe,fe,ie);return Ka(Z,v)}function Ka(v,q){if(typeof v=="string")throw new Error(`${q}: ${v}`);if(v)return v;throw new Error(q+" failed")}var fa;(function(v){v[v.YUV444=1]="YUV444",v[v.YUV422=2]="YUV422",v[v.YUV420=3]="YUV420",v[v.YUV400=4]="YUV400"})(fa||(fa={}));var ca;(function(v){v[v.Auto=0]="Auto",v[v.PSNR=1]="PSNR",v[v.SSIM=2]="SSIM"})(ca||(ca={}));fa.YUV420,ca.Auto;const Mo=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Mo.decode();const ua=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};ua.encodeInto;var la;(function(v){v[v.GRAYSCALE=1]="GRAYSCALE",v[v.RGB=2]="RGB",v[v.YCbCr=3]="YCbCr"})(la||(la={}));var va;(function(v){v[v.JPEG_Annex_K=0]="JPEG_Annex_K",v[v.Flat=1]="Flat",v[v.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",v[v.ImageMagick=3]="ImageMagick",v[v.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",v[v.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",v[v.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",v[v.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",v[v.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(va||(va={}));la.YCbCr,va.ImageMagick;var Ba;(function(v){v[v.Default=-1]="Default",v[v.False=0]="False",v[v.True=1]="True"})(Ba||(Ba={}));var da;(function(v){v[v.Default=-1]="Default",v[v.Zero=0]="Zero",v[v.Left=1]="Left",v[v.Top=2]="Top",v[v.Average0=3]="Average0",v[v.Select=4]="Select",v[v.Gradient=5]="Gradient",v[v.Weighted=6]="Weighted",v[v.TopRight=7]="TopRight",v[v.TopLeft=8]="TopLeft",v[v.LeftLeft=9]="LeftLeft",v[v.Average1=10]="Average1",v[v.Average2=11]="Average2",v[v.Average3=12]="Average3",v[v.Average4=13]="Average4",v[v.Best=14]="Best",v[v.Variable=15]="Variable"})(da||(da={}));da.Default;var pa;(function(v){v[v.None=0]="None",v[v.SegmentSmooth=1]="SegmentSmooth",v[v.Dithering=2]="Dithering"})(pa||(pa={}));var ha;(function(v){v[v.None=0]="None",v[v.Fast=1]="Fast",v[v.Best=2]="Best"})(ha||(ha={}));pa.None,ha.Fast;var Za=(()=>{var v=import.meta.url;return function(q={}){var Ra;var z;function _(){return me.buffer!=Ge.buffer&&Ne(),Ge}function ie(){return me.buffer!=Ge.buffer&&Ne(),Wr}function Ae(){return me.buffer!=Ge.buffer&&Ne(),jr}function Oe(){return me.buffer!=Ge.buffer&&Ne(),Ur}function fe(){return me.buffer!=Ge.buffer&&Ne(),Dr}function Z(){return me.buffer!=Ge.buffer&&Ne(),Qe}function $r(){return me.buffer!=Ge.buffer&&Ne(),pr}function Ue(){return me.buffer!=Ge.buffer&&Ne(),Qr}var w=q,lr,or,Ze=new Promise((e,r)=>{lr=e,or=r}),sr=typeof window=="object",xe=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var K=xe&&((Ra=self.name)==null?void 0:Ra.startsWith("em-pthread")),De=Object.assign({},w),ke="./this.program",he=(e,r)=>{throw r},J="";function ce(e){return w.locateFile?w.locateFile(e,J):J+e}var We,te;(sr||xe)&&(xe?J=self.location.href:typeof document<"u"&&document.currentScript&&(J=document.currentScript.src),v&&(J=v),J.startsWith("blob:")?J="":J=J.substr(0,J.replace(/[?#].*/,"").lastIndexOf("/")+1),xe&&(te=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),We=e=>fetch(e,{credentials:"same-origin"}).then(r=>r.ok?r.arrayBuffer():Promise.reject(new Error(r.status+" : "+r.url))));var Je=w.print||console.log.bind(console),$e=w.printErr||console.error.bind(console);Object.assign(w,De),De=null,w.arguments&&w.arguments,w.thisProgram&&(ke=w.thisProgram);var Xe=w.wasmBinary,me,yr,vr=!1,dr,Ge,Wr,jr,Ur,Dr,Qe,pr,Qr;function Ne(){var e=me.buffer;w.HEAP8=Ge=new Int8Array(e),w.HEAP16=jr=new Int16Array(e),w.HEAPU8=Wr=new Uint8Array(e),w.HEAPU16=Ur=new Uint16Array(e),w.HEAP32=Dr=new Int32Array(e),w.HEAPU32=Qe=new Uint32Array(e),w.HEAPF32=pr=new Float32Array(e),w.HEAPF64=Qr=new Float64Array(e)}if(K){let e=function(...o){var u=o.join(" ");console.error(u)},r=function(...o){var u=o.join(" ");postMessage({cmd:"alert",text:u,threadId:Tr()})},i=function(o){try{var u=o.data,c=u.cmd;if(c==="load"){let d=[];self.onmessage=l=>d.push(l),self.startWorker=l=>{postMessage({cmd:"loaded"});for(let m of d)i(m);self.onmessage=i};for(const l of u.handlers)(!w[l]||w[l].proxy)&&(w[l]=(...m)=>{postMessage({cmd:"callHandler",handler:l,args:m})},l=="print"&&(Je=w[l]),l=="printErr"&&($e=w[l]));me=u.wasmMemory,Ne(),Pr(u.wasmModule)}else if(c==="run"){pe(u.pthread_ptr),ht(u.pthread_ptr,0,0,1,0,0),W.receiveObjectTransfer(u),W.threadInitTLS(),Ut(u.pthread_ptr),Mr||(Lt(),Mr=!0);try{Nn(u.start_routine,u.arg)}catch(d){if(d!="unwind")throw d}}else u.target==="setimmediate"||(c==="checkMailbox"?Mr&&dt():c&&($e(`worker: received unknown command ${c}`),$e(u)))}catch(d){throw mt(),d}};var Pr,Mr=!1;w.printErr||($e=e),self.alert=r,w.instantiateWasm=(o,u)=>new Promise((c,d)=>{Pr=l=>{var m=new WebAssembly.Instance(l,j());u(m),c()}}),self.onunhandledrejection=o=>{throw o.reason||o},self.onmessage=i}if(!K){if(w.wasmMemory)me=w.wasmMemory;else{var et=w.INITIAL_MEMORY||16777216;me=new WebAssembly.Memory({initial:et/65536,maximum:32768,shared:!0})}Ne()}var rt=[],xr=[],Ir=[];function gt(){var e=w.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(tt)),_e(rt)}function Lr(){K||_e(xr)}function wt(){if(!K){var e=w.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(nt)),_e(Ir)}}function tt(e){rt.unshift(e)}function bt(e){xr.unshift(e)}function nt(e){Ir.unshift(e)}var er=0,gr=null;function b(e){var r;er++,(r=w.monitorRunDependencies)==null||r.call(w,er)}function k(e){var i;if(er--,(i=w.monitorRunDependencies)==null||i.call(w,er),er==0&&gr){var r=gr;gr=null,r()}}function O(e){var i;(i=w.onAbort)==null||i.call(w,e),e="Aborted("+e+")",$e(e),vr=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw or(r),r}var V="data:application/octet-stream;base64,",D=e=>e.startsWith(V);function ne(){if(w.locateFile){var e="heic-enc.wasm";return D(e)?e:ce(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var T;function le(e){if(e==T&&Xe)return new Uint8Array(Xe);if(te)return te(e);throw"both async and sync fetching of the wasm failed"}function Y(e){return Xe?Promise.resolve().then(()=>le(e)):We(e).then(r=>new Uint8Array(r),()=>le(e))}function be(e,r,i){return Y(e).then(o=>WebAssembly.instantiate(o,r)).then(i,o=>{$e(`failed to asynchronously prepare wasm: ${o}`),O(o)})}function Pe(e,r,i,o){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!D(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(u=>{var c=WebAssembly.instantiateStreaming(u,i);return c.then(o,function(d){return $e(`wasm streaming compile failed: ${d}`),$e("falling back to ArrayBuffer instantiation"),be(r,i,o)})}):be(r,i,o)}function j(){return _r(),{a:ir}}function A(){var e=j();function r(o,u){return U=o.exports,Yt(U.Wa),it=U.Va,bt(U.Pa),yr=u,k(),U}b();function i(o){r(o.instance,o.module)}if(w.instantiateWasm)try{return w.instantiateWasm(e,r)}catch(o){$e(`Module.instantiateWasm callback failed with error: ${o}`),or(o)}return T??(T=ne()),Pe(Xe,T,e,i).catch(or),{}}function $(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var R=e=>{e.terminate(),e.onmessage=r=>{}},L=e=>{var r=W.pthreads[e];W.returnWorkerToPool(r)},ee=e=>{var r=W.getNewWorker();if(!r)return 6;W.runningWorkers.push(r),W.pthreads[e.pthread_ptr]=r,r.pthread_ptr=e.pthread_ptr;var i={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return r.postMessage(i,e.transferList),0},Ee=0,je=()=>Tt||Ee>0,re=()=>Pa(),G=e=>ka(e),ur=e=>$a(e),M=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN,F=(e,r,i,...o)=>{for(var u=o.length,c=re(),d=ur(u*8),l=d>>3,m=0;m<o.length;m++){var P=o[m];Ue()[l+m]=P}var S=Ht(e,r,u,d,i);return G(c),S};function E(e){var r;if(K)return F(0,0,1,e);dr=e,je()||(W.terminateAllThreads(),(r=w.onExit)==null||r.call(w,e),vr=!0),he(e,new $(e))}var I=e=>{if(e instanceof $||e=="unwind")return dr;he(1,e)};function B(e){if(K)return F(1,0,0,e);Q(e)}var X=(e,r)=>{if(dr=e,K)throw B(e),"unwind";E(e)},Q=X,W={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){K||W.initMainThread()},initMainThread(){for(var e=2;e--;)W.allocateUnusedWorker();tt(()=>{b(),W.loadWasmModuleToAllWorkers(()=>k())})},terminateAllThreads:()=>{for(var e of W.runningWorkers)R(e);for(var e of W.unusedWorkers)R(e);W.unusedWorkers=[],W.runningWorkers=[],W.pthreads=[]},returnWorkerToPool:e=>{var r=e.pthread_ptr;delete W.pthreads[r],W.unusedWorkers.push(e),W.runningWorkers.splice(W.runningWorkers.indexOf(e),1),e.pthread_ptr=0,ya(r)},receiveObjectTransfer(e){},threadInitTLS(){W.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(r=>{e.onmessage=c=>{var d=c.data,l=d.cmd;if(d.targetThread&&d.targetThread!=Tr()){var m=W.pthreads[d.targetThread];m?m.postMessage(d,d.transferList):$e(`Internal error! Worker sent a message "${l}" to target pthread ${d.targetThread}, but that thread no longer exists!`);return}l==="checkMailbox"?dt():l==="spawnThread"?ee(d):l==="cleanupThread"?L(d.thread):l==="loaded"?(e.loaded=!0,r(e)):l==="alert"?alert(`Thread ${d.threadId}: ${d.text}`):d.target==="setimmediate"?e.postMessage(d):l==="callHandler"?w[d.handler](...d.args):l&&$e(`worker sent an unknown command ${l}`)},e.onerror=c=>{var d="worker sent an error!";throw $e(`${d} ${c.filename}:${c.lineno}: ${c.message}`),c};var i=[],o=["onExit","onAbort","print","printErr"];for(var u of o)w.propertyIsEnumerable(u)&&i.push(u);e.postMessage({cmd:"load",handlers:i,wasmMemory:me,wasmModule:yr})}),loadWasmModuleToAllWorkers(e){if(K)return e();Promise.all(W.unusedWorkers.map(W.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-nk-Udw7s.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),W.unusedWorkers.push(e)},getNewWorker(){return W.unusedWorkers.length==0&&(W.allocateUnusedWorker(),W.loadWasmModuleToWorker(W.unusedWorkers[0])),W.unusedWorkers.pop()}},_e=e=>{e.forEach(r=>r(w))},pe=e=>{Ne();var r=Z()[e+52>>2],i=Z()[e+56>>2],o=r-i;Ta(r,o),G(r)},ye=[],it,ge=e=>{var r=ye[e];return r||(e>=ye.length&&(ye.length=e+1),ye[e]=r=it.get(e)),r},Nn=(e,r)=>{Ee=0,Tt=0;var i=ge(e)(r);function o(u){je()?dr=u:na(u)}o(i)},Tt=w.noExitRuntime||!0,Yt=e=>W.tlsInitFunctions.push(e),Se=new TextDecoder,wr=(e,r)=>{if(!e)return"";for(var i=e+r,o=e;!(o>=i)&&ie()[o];)++o;return Se.decode(ie().slice(e,o))},ae=(e,r,i,o)=>{O(`Assertion failed: ${wr(e)}, at: `+[r?wr(r):"unknown filename",i,o?wr(o):"unknown function"])},at=[],Be=0,fr=e=>{var r=new Hr(e);return r.get_caught()||(r.set_caught(!0),Be--),r.set_rethrown(!1),at.push(r),Ca(e),Oa(e)},hr=0,Vn=()=>{Te(0,0);var e=at.pop();Ea(e.excPtr),hr=0};class Hr{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){Z()[this.ptr+4>>2]=r}get_type(){return Z()[this.ptr+4>>2]}set_destructor(r){Z()[this.ptr+8>>2]=r}get_destructor(){return Z()[this.ptr+8>>2]}set_caught(r){r=r?1:0,_()[this.ptr+12]=r}get_caught(){return _()[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,_()[this.ptr+13]=r}get_rethrown(){return _()[this.ptr+13]!=0}init(r,i){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(i)}set_adjusted_ptr(r){Z()[this.ptr+16>>2]=r}get_adjusted_ptr(){return Z()[this.ptr+16>>2]}}var kt=e=>{throw hr||(hr=e),hr},Nr=e=>ba(e),Gt=e=>{var r=hr;if(!r)return Nr(0),0;var i=new Hr(r);i.set_adjusted_ptr(r);var o=i.get_type();if(!o)return Nr(0),r;for(var u of e){if(u===0||u===o)break;var c=i.ptr+16;if(Aa(u,o,c))return Nr(u),r}return Nr(o),r},qt=()=>Gt([]),zt=e=>Gt([e]),Kt=()=>{var e=at.pop();e||O("no exception to throw");var r=e.excPtr;throw e.get_rethrown()||(at.push(e),e.set_rethrown(!0),e.set_caught(!1),Be++),hr=r,hr},Bn=(e,r,i)=>{var o=new Hr(e);throw o.init(r,i),hr=e,Be++,hr},Yn=()=>Be;function Zt(e,r,i,o){return K?F(2,0,1,e,r,i,o):Jt(e,r,i,o)}var ot=()=>typeof SharedArrayBuffer<"u",Jt=(e,r,i,o)=>{if(!ot())return 6;var u=[],c=0;if(K&&(u.length===0||c))return Zt(e,r,i,o);var d={startRoutine:i,pthread_ptr:e,arg:o,transferList:u};return K?(d.cmd="spawnThread",postMessage(d,u),0):ee(d)};function Sr(e,r,i){return K?F(3,0,1,e,r,i):0}var Gn=(e,r,i,o)=>{if(!(o>0))return 0;for(var u=i,c=i+o-1,d=0;d<e.length;++d){var l=e.charCodeAt(d);if(l>=55296&&l<=57343){var m=e.charCodeAt(++d);l=65536+((l&1023)<<10)|m&1023}if(l<=127){if(i>=c)break;r[i++]=l}else if(l<=2047){if(i+1>=c)break;r[i++]=192|l>>6,r[i++]=128|l&63}else if(l<=65535){if(i+2>=c)break;r[i++]=224|l>>12,r[i++]=128|l>>6&63,r[i++]=128|l&63}else{if(i+3>=c)break;r[i++]=240|l>>18,r[i++]=128|l>>12&63,r[i++]=128|l>>6&63,r[i++]=128|l&63}}return r[i]=0,i-u},br=(e,r,i)=>Gn(e,ie(),r,i);function Er(e,r,i){if(K)return F(4,0,1,e,r,i)}function Xt(e,r,i){return K?F(5,0,1,e,r,i):0}function st(e,r,i,o){if(K)return F(6,0,1,e,r,i,o)}function Qt(e,r,i,o){if(K)return F(7,0,1,e,r,i,o)}function en(e,r,i){if(K)return F(8,0,1,e,r,i)}var qn=()=>{O("")},ut={},Vr=e=>{for(;e.length;){var r=e.pop(),i=e.pop();i(r)}};function Br(e){return this.fromWireType(Z()[e>>2])}var Rr={},Cr={},ft={},Yr,Gr=e=>{throw new Yr(e)},$t=(e,r,i)=>{e.forEach(l=>ft[l]=r);function o(l){var m=i(l);m.length!==e.length&&Gr("Mismatched type converter count");for(var P=0;P<e.length;++P)rr(e[P],m[P])}var u=new Array(r.length),c=[],d=0;r.forEach((l,m)=>{Cr.hasOwnProperty(l)?u[m]=Cr[l]:(c.push(l),Rr.hasOwnProperty(l)||(Rr[l]=[]),Rr[l].push(()=>{u[m]=Cr[l],++d,d===c.length&&o(u)}))}),c.length===0&&o(u)},ct=e=>{var r=ut[e];delete ut[e];var i=r.rawConstructor,o=r.rawDestructor,u=r.fields,c=u.map(d=>d.getterReturnType).concat(u.map(d=>d.setterArgumentType));$t([e],c,d=>{var l={};return u.forEach((m,P)=>{var S=m.fieldName,N=d[P],ue=m.getter,Fe=m.getterContext,Ve=d[P+u.length],kr=m.setter,Or=m.setterContext;l[S]={read:Ke=>N.fromWireType(ue(Fe,Ke)),write:(Ke,Nt)=>{var ar=[];kr(Or,Ke,Ve.toWireType(ar,Nt)),Vr(ar)}}}),[{name:r.name,fromWireType:m=>{var P={};for(var S in l)P[S]=l[S].read(m);return o(m),P},toWireType:(m,P)=>{for(var S in l)if(!(S in P))throw new TypeError(`Missing field: "${S}"`);var N=i();for(S in l)l[S].write(N,P[S]);return m!==null&&m.push(o,N),N},argPackAdvance:tr,readValueFromPointer:Br,destructorFunction:o}]})},rn=(e,r,i,o,u)=>{},we=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);tn=e},tn,Me=e=>{for(var r="",i=e;ie()[i];)r+=tn[ie()[i++]];return r},Ye,oe=e=>{throw new Ye(e)};function nn(e,r,i={}){var o=r.name;if(e||oe(`type "${o}" must have a positive integer typeid pointer`),Cr.hasOwnProperty(e)){if(i.ignoreDuplicateRegistrations)return;oe(`Cannot register type '${o}' twice`)}if(Cr[e]=r,delete ft[e],Rr.hasOwnProperty(e)){var u=Rr[e];delete Rr[e],u.forEach(c=>c())}}function rr(e,r,i={}){return nn(e,r,i)}var tr=8,zn=(e,r,i,o)=>{r=Me(r),rr(e,{name:r,fromWireType:function(u){return!!u},toWireType:function(u,c){return c?i:o},argPackAdvance:tr,readValueFromPointer:function(u){return this.fromWireType(ie()[u])},destructorFunction:null})},Pt=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),nr=e=>{function r(i){return i.$$.ptrType.registeredClass.name}oe(r(e)+" instance already deleted")},qr=!1,an=e=>{},Kn=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},Re=e=>{e.count.value-=1;var r=e.count.value===0;r&&Kn(e)},on=(e,r,i)=>{if(r===i)return e;if(i.baseClass===void 0)return null;var o=on(e,r,i.baseClass);return o===null?null:i.downcast(o)},sn={},Zn={},Jn=(e,r)=>{for(r===void 0&&oe("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},Et=(e,r)=>(r=Jn(e,r),Zn[r]),lt=(e,r)=>{(!r.ptrType||!r.ptr)&&Gr("makeClassHandle requires ptr and ptrType");var i=!!r.smartPtrType,o=!!r.smartPtr;return i!==o&&Gr("Both smartPtrType and smartPtr must be specified"),r.count={value:1},zr(Object.create(e,{$$:{value:r,writable:!0}}))};function Ct(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var i=Et(this.registeredClass,r);if(i!==void 0){if(i.$$.count.value===0)return i.$$.ptr=r,i.$$.smartPtr=e,i.clone();var o=i.clone();return this.destructor(e),o}function u(){return this.isSmartPointer?lt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):lt(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(r),d=sn[c];if(!d)return u.call(this);var l;this.isConst?l=d.constPointerType:l=d.pointerType;var m=on(r,this.registeredClass,l.registeredClass);return m===null?u.call(this):this.isSmartPointer?lt(l.registeredClass.instancePrototype,{ptrType:l,ptr:m,smartPtrType:this,smartPtr:e}):lt(l.registeredClass.instancePrototype,{ptrType:l,ptr:m})}var zr=e=>typeof FinalizationRegistry>"u"?(zr=r=>r,e):(qr=new FinalizationRegistry(r=>{Re(r.$$)}),zr=r=>{var i=r.$$,o=!!i.smartPtr;if(o){var u={$$:i};qr.register(r,u,r)}return r},an=r=>qr.unregister(r),zr(e)),Xn=()=>{Object.assign(Kr.prototype,{isAliasOf(e){if(!(this instanceof Kr)||!(e instanceof Kr))return!1;var r=this.$$.ptrType.registeredClass,i=this.$$.ptr;e.$$=e.$$;for(var o=e.$$.ptrType.registeredClass,u=e.$$.ptr;r.baseClass;)i=r.upcast(i),r=r.baseClass;for(;o.baseClass;)u=o.upcast(u),o=o.baseClass;return r===o&&i===u},clone(){if(this.$$.ptr||nr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=zr(Object.create(Object.getPrototypeOf(this),{$$:{value:Pt(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&oe("Object already scheduled for deletion"),an(this),Re(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||nr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&oe("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Kr(){}var Ar=(e,r)=>Object.defineProperty(r,"name",{value:e}),Qn=(e,r,i)=>{if(e[r].overloadTable===void 0){var o=e[r];e[r]=function(...u){return e[r].overloadTable.hasOwnProperty(u.length)||oe(`Function '${i}' called with an invalid number of arguments (${u.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[u.length].apply(this,u)},e[r].overloadTable=[],e[r].overloadTable[o.argCount]=o}},At=(e,r,i)=>{w.hasOwnProperty(e)?((i===void 0||w[e].overloadTable!==void 0&&w[e].overloadTable[i]!==void 0)&&oe(`Cannot register public name '${e}' twice`),Qn(w,e,e),w.hasOwnProperty(i)&&oe(`Cannot register multiple overloads of a function with the same number of arguments (${i})!`),w[e].overloadTable[i]=r):(w[e]=r,i!==void 0&&(w[e].numArguments=i))},ei=48,ri=57,ti=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=ei&&r<=ri?`_${e}`:e};function ni(e,r,i,o,u,c,d,l){this.name=e,this.constructor=r,this.instancePrototype=i,this.rawDestructor=o,this.baseClass=u,this.getActualType=c,this.upcast=d,this.downcast=l,this.pureVirtualFunctions=[]}var Ot=(e,r,i)=>{for(;r!==i;)r.upcast||oe(`Expected null or instance of ${i.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function ii(e,r){if(r===null)return this.isReference&&oe(`null is not a valid ${this.name}`),0;r.$$||oe(`Cannot pass "${Rt(r)}" as a ${this.name}`),r.$$.ptr||oe(`Cannot pass deleted object as a pointer of type ${this.name}`);var i=r.$$.ptrType.registeredClass,o=Ot(r.$$.ptr,i,this.registeredClass);return o}function ai(e,r){var i;if(r===null)return this.isReference&&oe(`null is not a valid ${this.name}`),this.isSmartPointer?(i=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,i),i):0;(!r||!r.$$)&&oe(`Cannot pass "${Rt(r)}" as a ${this.name}`),r.$$.ptr||oe(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&oe(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var o=r.$$.ptrType.registeredClass;if(i=Ot(r.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&oe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?i=r.$$.smartPtr:oe(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:i=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)i=r.$$.smartPtr;else{var u=r.clone();i=this.rawShare(i,Ie.toHandle(()=>u.delete())),e!==null&&e.push(this.rawDestructor,i)}break;default:oe("Unsupporting sharing policy")}return i}function oi(e,r){if(r===null)return this.isReference&&oe(`null is not a valid ${this.name}`),0;r.$$||oe(`Cannot pass "${Rt(r)}" as a ${this.name}`),r.$$.ptr||oe(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&oe(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var i=r.$$.ptrType.registeredClass,o=Ot(r.$$.ptr,i,this.registeredClass);return o}var si=()=>{Object.assign(vt.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var r;(r=this.rawDestructor)==null||r.call(this,e)},argPackAdvance:tr,readValueFromPointer:Br,fromWireType:Ct})};function vt(e,r,i,o,u,c,d,l,m,P,S){this.name=e,this.registeredClass=r,this.isReference=i,this.isConst=o,this.isSmartPointer=u,this.pointeeType=c,this.sharingPolicy=d,this.rawGetPointee=l,this.rawConstructor=m,this.rawShare=P,this.rawDestructor=S,!u&&r.baseClass===void 0?o?(this.toWireType=ii,this.destructorFunction=null):(this.toWireType=oi,this.destructorFunction=null):this.toWireType=ai}var un=(e,r,i)=>{w.hasOwnProperty(e)||Gr("Replacing nonexistent public symbol"),w[e].overloadTable!==void 0&&i!==void 0?w[e].overloadTable[i]=r:(w[e]=r,w[e].argCount=i)},ui=(e,r,i)=>{e=e.replace(/p/g,"i");var o=w["dynCall_"+e];return o(r,...i)},fi=(e,r,i=[])=>{if(e.includes("j"))return ui(e,r,i);var o=ge(r)(...i);return o},ci=(e,r)=>(...i)=>fi(e,r,i),mr=(e,r)=>{e=Me(e);function i(){return e.includes("j")?ci(e,r):ge(r)}var o=i();return typeof o!="function"&&oe(`unknown function pointer with signature ${e}: ${r}`),o},li=(e,r)=>{var i=Ar(r,function(o){this.name=r,this.message=o;var u=new Error(o).stack;u!==void 0&&(this.stack=this.toString()+`
`+u.replace(/^Error(:[^\n]*)?\n/,""))});return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},i},fn,cn=e=>{var r=Dn(e),i=Me(r);return cr(r),i},ln=(e,r)=>{var i=[],o={};function u(c){if(!o[c]&&!Cr[c]){if(ft[c]){ft[c].forEach(u);return}i.push(c),o[c]=!0}}throw r.forEach(u),new fn(`${e}: `+i.map(cn).join([", "]))},vi=(e,r,i,o,u,c,d,l,m,P,S,N,ue)=>{S=Me(S),c=mr(u,c),l&&(l=mr(d,l)),P&&(P=mr(m,P)),ue=mr(N,ue);var Fe=ti(S);At(Fe,function(){ln(`Cannot construct ${S} due to unbound types`,[o])}),$t([e,r,i],o?[o]:[],Ve=>{var Da;Ve=Ve[0];var kr,Or;o?(kr=Ve.registeredClass,Or=kr.instancePrototype):Or=Kr.prototype;var Ke=Ar(S,function(...ia){if(Object.getPrototypeOf(this)!==Nt)throw new Ye("Use 'new' to construct "+S);if(ar.constructor_body===void 0)throw new Ye(S+" has no accessible constructor");var Ma=ar.constructor_body[ia.length];if(Ma===void 0)throw new Ye(`Tried to invoke ctor of ${S} with invalid number of parameters (${ia.length}) - expected (${Object.keys(ar.constructor_body).toString()}) parameters instead!`);return Ma.apply(this,ia)}),Nt=Object.create(Or,{constructor:{value:Ke}});Ke.prototype=Nt;var ar=new ni(S,Ke,Nt,ue,kr,c,l,P);ar.baseClass&&((Da=ar.baseClass).__derivedClasses??(Da.__derivedClasses=[]),ar.baseClass.__derivedClasses.push(ar));var bo=new vt(S,ar,!0,!1,!1),Fa=new vt(S+"*",ar,!1,!1,!1),Ua=new vt(S+" const*",ar,!1,!0,!1);return sn[e]={pointerType:Fa,constPointerType:Ua},un(Fe,Ke),[bo,Fa,Ua]})},Wt=[],qe=[],jt=e=>{e>9&&--qe[e+1]===0&&(qe[e]=void 0,Wt.push(e))},di=()=>qe.length/2-5-Wt.length,xt=()=>{qe.push(0,1,void 0,1,null,1,!0,1,!1,1),w.count_emval_handles=di},Ie={toValue:e=>(e||oe("Cannot use deleted val. handle = "+e),qe[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=Wt.pop()||qe.length;return qe[r]=e,qe[r+1]=1,r}}}},vn={name:"emscripten::val",fromWireType:e=>{var r=Ie.toValue(e);return jt(e),r},toWireType:(e,r)=>Ie.toHandle(r),argPackAdvance:tr,readValueFromPointer:Br,destructorFunction:null},pi=e=>rr(e,vn),hi=(e,r,i)=>{switch(r){case 1:return i?function(o){return this.fromWireType(_()[o])}:function(o){return this.fromWireType(ie()[o])};case 2:return i?function(o){return this.fromWireType(Ae()[o>>1])}:function(o){return this.fromWireType(Oe()[o>>1])};case 4:return i?function(o){return this.fromWireType(fe()[o>>2])}:function(o){return this.fromWireType(Z()[o>>2])};default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},mi=(e,r,i,o)=>{r=Me(r);function u(){}u.values={},rr(e,{name:r,constructor:u,fromWireType:function(c){return this.constructor.values[c]},toWireType:(c,d)=>d.value,argPackAdvance:tr,readValueFromPointer:hi(r,i,o),destructorFunction:null}),At(r,u)},St=(e,r)=>{var i=Cr[e];return i===void 0&&oe(`${r} has unknown type ${cn(e)}`),i},_i=(e,r,i)=>{var o=St(e,"enum");r=Me(r);var u=o.constructor,c=Object.create(o.constructor.prototype,{value:{value:i},constructor:{value:Ar(`${o.name}_${r}`,function(){})}});u.values[i]=c,u[r]=c},Rt=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},yi=(e,r)=>{switch(r){case 4:return function(i){return this.fromWireType($r()[i>>2])};case 8:return function(i){return this.fromWireType(Ue()[i>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},gi=(e,r,i)=>{r=Me(r),rr(e,{name:r,fromWireType:o=>o,toWireType:(o,u)=>u,argPackAdvance:tr,readValueFromPointer:yi(r,i),destructorFunction:null})};function dn(e){for(var r=1;r<e.length;++r)if(e[r]!==null&&e[r].destructorFunction===void 0)return!0;return!1}function pn(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var i=Ar(e.name||"unknownFunctionName",function(){});i.prototype=e.prototype;var o=new i,u=e.apply(o,r);return u instanceof Object?u:o}function wi(e,r,i,o){for(var u=dn(e),c=e.length-2,d=[],l=["fn"],m=0;m<c;++m)d.push(`arg${m}`),l.push(`arg${m}Wired`);d=d.join(","),l=l.join(",");var P=`return function (${d}) {
`;u&&(P+=`var destructors = [];
`);for(var S=u?"destructors":"null",N=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=0;m<c;++m)P+=`var arg${m}Wired = argType${m}['toWireType'](${S}, arg${m});
`,N.push(`argType${m}`);if(P+=(i||o?"var rv = ":"")+`invoker(${l});
`,u)P+=`runDestructors(destructors);
`;else for(var m=2;m<e.length;++m){var ue=m===1?"thisWired":"arg"+(m-2)+"Wired";e[m].destructorFunction!==null&&(P+=`${ue}_dtor(${ue});
`,N.push(`${ue}_dtor`))}return i&&(P+=`var ret = retType['fromWireType'](rv);
return ret;
`),P+=`}
`,[N,P]}function bi(e,r,i,o,u,c){var d=r.length;d<2&&oe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var l=r[1]!==null&&i!==null,m=dn(r),P=r[0].name!=="void",S=[e,oe,o,u,Vr,r[0],r[1]],N=0;N<d-2;++N)S.push(r[N+2]);if(!m)for(var N=2;N<r.length;++N)r[N].destructorFunction!==null&&S.push(r[N].destructorFunction);let[ue,Fe]=wi(r,l,P,c);ue.push(Fe);var Ve=pn(Function,ue)(...S);return Ar(e,Ve)}var Zr=(e,r)=>{for(var i=[],o=0;o<e;o++)i.push(Z()[r+o*4>>2]);return i},hn=e=>{e=e.trim();const r=e.indexOf("(");return r!==-1?e.substr(0,r):e},mn=(e,r,i,o,u,c,d,l)=>{var m=Zr(r,i);e=Me(e),e=hn(e),u=mr(o,u),At(e,function(){ln(`Cannot call ${e} due to unbound types`,m)},r-1),$t([],m,P=>{var S=[P[0],null].concat(P.slice(1));return un(e,bi(e,S,null,u,c,d),r-1),[]})},_n=(e,r,i)=>{switch(r){case 1:return i?o=>_()[o]:o=>ie()[o];case 2:return i?o=>Ae()[o>>1]:o=>Oe()[o>>1];case 4:return i?o=>fe()[o>>2]:o=>Z()[o>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},yn=(e,r,i,o,u)=>{r=Me(r);var c=S=>S;if(o===0){var d=32-8*i;c=S=>S<<d>>>d}var l=r.includes("unsigned"),m=(S,N)=>{},P;l?P=function(S,N){return m(N,this.name),N>>>0}:P=function(S,N){return m(N,this.name),N},rr(e,{name:r,fromWireType:c,toWireType:P,argPackAdvance:tr,readValueFromPointer:_n(r,i,o!==0),destructorFunction:null})},Ti=(e,r,i)=>{var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],u=o[r];function c(d){var l=Z()[d>>2],m=Z()[d+4>>2];return new u(_().buffer,m,l)}i=Me(i),rr(e,{name:i,fromWireType:c,argPackAdvance:tr,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})},ki=e=>{for(var r=0,i=0;i<e.length;++i){var o=e.charCodeAt(i);o<=127?r++:o<=2047?r+=2:o>=55296&&o<=57343?(r+=4,++i):r+=3}return r},$i=(e,r)=>{r=Me(r);var i=r==="std::string";rr(e,{name:r,fromWireType(o){var u=Z()[o>>2],c=o+4,d;if(i)for(var l=c,m=0;m<=u;++m){var P=c+m;if(m==u||ie()[P]==0){var S=P-l,N=wr(l,S);d===void 0?d=N:(d+="\0",d+=N),l=P+1}}else{for(var ue=new Array(u),m=0;m<u;++m)ue[m]=String.fromCharCode(ie()[c+m]);d=ue.join("")}return cr(o),d},toWireType(o,u){u instanceof ArrayBuffer&&(u=new Uint8Array(u));var c,d=typeof u=="string";d||u instanceof Uint8Array||u instanceof Uint8ClampedArray||u instanceof Int8Array||oe("Cannot pass non-string to std::string"),i&&d?c=ki(u):c=u.length;var l=He(4+c+1),m=l+4;if(Z()[l>>2]=c,i&&d)br(u,m,c+1);else if(d)for(var P=0;P<c;++P){var S=u.charCodeAt(P);S>255&&(cr(m),oe("String has UTF-16 code units that do not fit in 8 bits")),ie()[m+P]=S}else for(var P=0;P<c;++P)ie()[m+P]=u[P];return o!==null&&o.push(cr,l),l},argPackAdvance:tr,readValueFromPointer:Br,destructorFunction(o){cr(o)}})},Pi=new TextDecoder("utf-16le"),Ei=(e,r)=>{for(var i=e,o=i>>1,u=o+r/2;!(o>=u)&&Oe()[o];)++o;return i=o<<1,Pi.decode(ie().slice(e,i))},Ci=(e,r,i)=>{if(i??(i=2147483647),i<2)return 0;i-=2;for(var o=r,u=i<e.length*2?i/2:e.length,c=0;c<u;++c){var d=e.charCodeAt(c);Ae()[r>>1]=d,r+=2}return Ae()[r>>1]=0,r-o},Ai=e=>e.length*2,Oi=(e,r)=>{for(var i=0,o="";!(i>=r/4);){var u=fe()[e+i*4>>2];if(u==0)break;if(++i,u>=65536){var c=u-65536;o+=String.fromCharCode(55296|c>>10,56320|c&1023)}else o+=String.fromCharCode(u)}return o},Wi=(e,r,i)=>{if(i??(i=2147483647),i<4)return 0;for(var o=r,u=o+i-4,c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d>=55296&&d<=57343){var l=e.charCodeAt(++c);d=65536+((d&1023)<<10)|l&1023}if(fe()[r>>2]=d,r+=4,r+4>u)break}return fe()[r>>2]=0,r-o},ji=e=>{for(var r=0,i=0;i<e.length;++i){var o=e.charCodeAt(i);o>=55296&&o<=57343&&++i,r+=4}return r},xi=(e,r,i)=>{i=Me(i);var o,u,c,d;r===2?(o=Ei,u=Ci,d=Ai,c=l=>Oe()[l>>1]):r===4&&(o=Oi,u=Wi,d=ji,c=l=>Z()[l>>2]),rr(e,{name:i,fromWireType:l=>{for(var m=Z()[l>>2],P,S=l+4,N=0;N<=m;++N){var ue=l+4+N*r;if(N==m||c(ue)==0){var Fe=ue-S,Ve=o(S,Fe);P===void 0?P=Ve:(P+="\0",P+=Ve),S=ue+r}}return cr(l),P},toWireType:(l,m)=>{typeof m!="string"&&oe(`Cannot pass non-string to C++ string type ${i}`);var P=d(m),S=He(4+P+r);return Z()[S>>2]=P/r,u(m,S+4,P+r),l!==null&&l.push(cr,S),S},argPackAdvance:tr,readValueFromPointer:Br,destructorFunction(l){cr(l)}})},Ft=(e,r,i,o,u,c)=>{ut[e]={name:Me(r),rawConstructor:mr(i,o),rawDestructor:mr(u,c),fields:[]}},Si=(e,r,i,o,u,c,d,l,m,P)=>{ut[e].fields.push({fieldName:Me(r),getterReturnType:i,getter:mr(o,u),getterContext:c,setterArgumentType:d,setter:mr(l,m),setterContext:P})},Jr=(e,r)=>{r=Me(r),rr(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(i,o)=>{}})},Ri=1,Fi=()=>Ri,Ui=e=>{ht(e,!xe,1,!sr,2097152,!1),W.threadInitTLS()},Di=()=>{if(!je())try{K?na(dr):Q(dr)}catch(e){I(e)}},gn=e=>{if(!vr)try{e(),Di()}catch(r){I(r)}},Ut=e=>{if(typeof Atomics.waitAsync=="function"){var r=Atomics.waitAsync(fe(),e>>2,e);r.value.then(dt);var i=e+128;Atomics.store(fe(),i>>2,1)}},dt=()=>{var e=Tr();e&&(Ut(e),gn(wa))},Mi=(e,r)=>{if(e==r)setTimeout(dt);else if(K)postMessage({targetThread:e,cmd:"checkMailbox"});else{var i=W.pthreads[e];if(!i)return;i.postMessage({cmd:"checkMailbox"})}},Dt=[],Ii=(e,r,i,o,u)=>{Dt.length=o;for(var c=u>>3,d=0;d<o;d++)Dt[d]=Ue()[c+d];var l=Le[e];W.currentProxiedOperationCallerThread=i;var m=l(...Dt);return W.currentProxiedOperationCallerThread=0,m},Li=()=>{Tt=!1,Ee=0},ve=e=>{K?postMessage({cmd:"cleanupThread",thread:e}):L(e)},wn=e=>{},ze=[],Mt=(e,r,i,o)=>(e=ze[e],r=Ie.toValue(r),e(null,r,i,o)),bn={},de=e=>{var r=bn[e];return r===void 0?Me(e):r},Tn=(e,r,i,o,u)=>(e=ze[e],r=Ie.toValue(r),i=de(i),e(r,r[i],o,u)),It=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),kn=e=>e===0?Ie.toHandle(It()):(e=de(e),Ie.toHandle(It()[e])),$n=e=>{var r=ze.length;return ze.push(e),r},Pn=(e,r)=>{for(var i=new Array(e),o=0;o<e;++o)i[o]=St(Z()[r+o*4>>2],"parameter "+o);return i},En=(e,r,i)=>{var o=[],u=e.toWireType(o,i);return o.length&&(Z()[r>>2]=Ie.toHandle(o)),u},Cn=(e,r,i)=>{var o=Pn(e,r),u=o.shift();e--;var c=`return function (obj, func, destructorsRef, args) {
`,d=0,l=[];i===0&&l.push("obj");for(var m=["retType"],P=[u],S=0;S<e;++S)l.push("arg"+S),m.push("argType"+S),P.push(o[S]),c+=`  var arg${S} = argType${S}.readValueFromPointer(args${d?"+"+d:""});
`,d+=o[S].argPackAdvance;var N=i===1?"new func":"func.call";c+=`  var rv = ${N}(${l.join(", ")});
`,u.isVoid||(m.push("emval_returnValue"),P.push(En),c+=`  return emval_returnValue(retType, destructorsRef, rv);
`),c+=`};
`,m.push(c);var ue=pn(Function,m)(...P),Fe=`methodCaller<(${o.map(Ve=>Ve.name).join(", ")}) => ${u.name}>`;return $n(Ar(Fe,ue))},An=e=>{e>9&&(qe[e+1]+=1)},On=()=>Ie.toHandle([]),Hi=e=>Ie.toHandle(de(e)),Ni=()=>Ie.toHandle({}),Vi=e=>{var r=Ie.toValue(e);Vr(r),jt(e)},Bi=(e,r,i)=>{e=Ie.toValue(e),r=Ie.toValue(r),i=Ie.toValue(i),e[r]=i},Yi=(e,r)=>{e=St(e,"_emval_take_value");var i=e.readValueFromPointer(r);return Ie.toHandle(i)},Gi=e=>e%4===0&&(e%100!==0||e%400===0),qi=[0,31,60,91,121,152,182,213,244,274,305,335],zi=[0,31,59,90,120,151,181,212,243,273,304,334],Ki=e=>{var r=Gi(e.getFullYear()),i=r?qi:zi,o=i[e.getMonth()]+e.getDate()-1;return o};function Zi(e,r,i){var o=M(e,r),u=new Date(o*1e3);fe()[i>>2]=u.getSeconds(),fe()[i+4>>2]=u.getMinutes(),fe()[i+8>>2]=u.getHours(),fe()[i+12>>2]=u.getDate(),fe()[i+16>>2]=u.getMonth(),fe()[i+20>>2]=u.getFullYear()-1900,fe()[i+24>>2]=u.getDay();var c=Ki(u)|0;fe()[i+28>>2]=c,fe()[i+36>>2]=-(u.getTimezoneOffset()*60);var d=new Date(u.getFullYear(),0,1),l=new Date(u.getFullYear(),6,1).getTimezoneOffset(),m=d.getTimezoneOffset(),P=(l!=m&&u.getTimezoneOffset()==Math.min(m,l))|0;fe()[i+32>>2]=P}function Wn(e,r,i,o,u,c,d,l){return K?F(9,0,1,e,r,i,o,u,c,d,l):-52}function jn(e,r,i,o,u,c,d){if(K)return F(10,0,1,e,r,i,o,u,c,d)}var Xr={},xn=()=>performance.timeOrigin+performance.now();function Sn(e,r){if(K)return F(11,0,1,e,r);if(Xr[e]&&(clearTimeout(Xr[e].id),delete Xr[e]),!r)return 0;var i=setTimeout(()=>{delete Xr[e],gn(()=>ga(e,xn()))},r);return Xr[e]={id:i,timeout_ms:r},0}var Ji=(e,r,i,o)=>{var u=new Date().getFullYear(),c=new Date(u,0,1),d=new Date(u,6,1),l=c.getTimezoneOffset(),m=d.getTimezoneOffset(),P=Math.max(l,m);Z()[e>>2]=P*60,fe()[r>>2]=+(l!=m);var S=Fe=>{var Ve=Fe>=0?"-":"+",kr=Math.abs(Fe),Or=String(Math.floor(kr/60)).padStart(2,"0"),Ke=String(kr%60).padStart(2,"0");return`UTC${Ve}${Or}${Ke}`},N=S(l),ue=S(m);m<l?(br(N,i,17),br(ue,o,17)):(br(N,o,17),br(ue,i,17))},Xi=()=>{},Qi=()=>Date.now(),ea=()=>{Ee+=1},ra=()=>{throw ea(),"unwind"},Rn=()=>2147483648,ta=()=>Rn(),pt=()=>1,Fn=(e,r)=>Math.ceil(e/r)*r,Un=e=>{var r=me.buffer,i=(e-r.byteLength+65535)/65536|0;try{return me.grow(i),Ne(),1}catch{}},t=e=>{var r=ie().length;if(e>>>=0,e<=r)return!1;var i=Rn();if(e>i)return!1;for(var o=1;o<=4;o*=2){var u=r*(1+.2/o);u=Math.min(u,e+100663296);var c=Math.min(i,Fn(Math.max(e,u),65536)),d=Un(c);if(d)return!0}return!1},n={},a=()=>ke||"./this.program",s=()=>{if(!s.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:a()};for(var i in n)n[i]===void 0?delete r[i]:r[i]=n[i];var o=[];for(var i in r)o.push(`${i}=${r[i]}`);s.strings=o}return s.strings},f=(e,r)=>{for(var i=0;i<e.length;++i)_()[r++]=e.charCodeAt(i);_()[r]=0},p=function(e,r){if(K)return F(12,0,1,e,r);var i=0;return s().forEach((o,u)=>{var c=r+i;Z()[e+u*4>>2]=c,f(o,c),i+=o.length+1}),0},g=function(e,r){if(K)return F(13,0,1,e,r);var i=s();Z()[e>>2]=i.length;var o=0;return i.forEach(u=>o+=u.length+1),Z()[r>>2]=o,0};function h(e){return K?F(14,0,1,e):52}function y(e,r,i,o){return K?F(15,0,1,e,r,i,o):52}function C(e,r,i,o,u){return K?F(16,0,1,e,r,i,o,u):70}var x=[null,[],[]],H=(e,r=0,i=NaN)=>{for(var o=r+i,u=r;e[u]&&!(u>=o);)++u;return Se.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(r,u):e.subarray(r,u):new Uint8Array(e.slice(r,u)))},se=(e,r)=>{var i=x[e];r===0||r===10?((e===1?Je:$e)(H(i)),i.length=0):i.push(r)};function Ce(e,r,i,o){if(K)return F(17,0,1,e,r,i,o);for(var u=0,c=0;c<i;c++){var d=Z()[r>>2],l=Z()[r+4>>2];r+=8;for(var m=0;m<l;m++)se(e,ie()[d+m]);u+=l}return Z()[o>>2]=u,0}W.init(),Yr=w.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},we(),Ye=w.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},Xn(),si(),fn=w.UnboundTypeError=li(Error,"UnboundTypeError"),xt();var Le=[E,B,Zt,Sr,Er,Xt,st,Qt,en,Wn,jn,Sn,p,g,h,y,C,Ce],ir;function _r(){ir={$:ae,r:fr,x:Vn,b:qt,i:zt,U:Kt,w:Bn,pa:Yn,ya:Jt,e:kt,X:Sr,wa:Er,Fa:Xt,Y:st,va:Qt,ra:en,Ja:qn,da:ct,ka:rn,Ma:zn,L:vi,La:pi,z:mi,d:_i,_:gi,p:mn,A:yn,n:Ti,aa:$i,M:xi,O:Ft,G:Si,Na:Jr,Ia:Fi,Ca:Ui,sa:Mi,za:Ii,na:Li,S:ve,Ba:Ut,Ha:wn,Oa:Mt,Ka:Tn,l:jt,N:kn,ca:Cn,R:An,Z:On,v:Hi,F:Ni,ba:Vi,t:Bi,o:Yi,ia:Zi,ga:Wn,ha:jn,oa:Sn,Aa:Ji,T:Xi,K:Qi,Ga:ra,ta,y:xn,ua:pt,qa:t,Da:p,Ea:g,xa:Q,E:h,W:y,ja:C,V:Ce,I:fo,c:Qa,f:oo,u:uo,la:vo,H:lo,B:mo,P:po,D:_o,fa:go,ea:wo,h:so,k:ro,g:co,m:to,j:io,J:no,Q:ao,s:ho,q:eo,C:yo,a:me,ma:E}}var U=A(),Tr=()=>(Tr=U.Qa)(),He=e=>(He=U.Ra)(e),Dn=e=>(Dn=U.Sa)(e),Lt=()=>(Lt=U.Ta)(),cr=e=>(cr=U.Ua)(e),ht=(e,r,i,o,u,c)=>(ht=U.Xa)(e,r,i,o,u,c),mt=()=>(mt=U.Ya)(),Ht=(e,r,i,o,u)=>(Ht=U.Za)(e,r,i,o,u),ya=e=>(ya=U._a)(e),na=e=>(na=U.$a)(e),ga=(e,r)=>(ga=U.ab)(e,r),wa=()=>(wa=U.bb)(),Te=(e,r)=>(Te=U.cb)(e,r),ba=e=>(ba=U.db)(e),Ta=(e,r)=>(Ta=U.eb)(e,r),ka=e=>(ka=U.fb)(e),$a=e=>($a=U.gb)(e),Pa=()=>(Pa=U.hb)(),Ea=e=>(Ea=U.ib)(e),Ca=e=>(Ca=U.jb)(e),Aa=(e,r,i)=>(Aa=U.kb)(e,r,i),Oa=e=>(Oa=U.lb)(e);w.dynCall_ji=(e,r)=>(w.dynCall_ji=U.mb)(e,r);var Wa=w.dynCall_iij=(e,r,i,o)=>(Wa=w.dynCall_iij=U.nb)(e,r,i,o);w.dynCall_jijj=(e,r,i,o,u,c)=>(w.dynCall_jijj=U.ob)(e,r,i,o,u,c),w.dynCall_vijj=(e,r,i,o,u,c)=>(w.dynCall_vijj=U.pb)(e,r,i,o,u,c),w.dynCall_jiiiii=(e,r,i,o,u,c)=>(w.dynCall_jiiiii=U.qb)(e,r,i,o,u,c),w.dynCall_jii=(e,r,i)=>(w.dynCall_jii=U.rb)(e,r,i),w.dynCall_jiiii=(e,r,i,o,u)=>(w.dynCall_jiiii=U.sb)(e,r,i,o,u),w.dynCall_jiji=(e,r,i,o,u)=>(w.dynCall_jiji=U.tb)(e,r,i,o,u);var ja=w.dynCall_iiiiij=(e,r,i,o,u,c,d)=>(ja=w.dynCall_iiiiij=U.ub)(e,r,i,o,u,c,d);w.dynCall_viijii=(e,r,i,o,u,c,d)=>(w.dynCall_viijii=U.vb)(e,r,i,o,u,c,d),w.dynCall_iiiiijj=(e,r,i,o,u,c,d,l,m)=>(w.dynCall_iiiiijj=U.wb)(e,r,i,o,u,c,d,l,m),w.dynCall_iiiiiijj=(e,r,i,o,u,c,d,l,m,P)=>(w.dynCall_iiiiiijj=U.xb)(e,r,i,o,u,c,d,l,m,P);function Qa(e,r){var i=re();try{return ge(e)(r)}catch(o){if(G(i),o!==o+0)throw o;Te(1,0)}}function eo(e,r,i,o,u,c,d,l,m,P,S){var N=re();try{ge(e)(r,i,o,u,c,d,l,m,P,S)}catch(ue){if(G(N),ue!==ue+0)throw ue;Te(1,0)}}function ro(e,r){var i=re();try{ge(e)(r)}catch(o){if(G(i),o!==o+0)throw o;Te(1,0)}}function to(e,r,i,o){var u=re();try{ge(e)(r,i,o)}catch(c){if(G(u),c!==c+0)throw c;Te(1,0)}}function no(e,r,i,o,u,c){var d=re();try{ge(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;Te(1,0)}}function io(e,r,i,o,u){var c=re();try{ge(e)(r,i,o,u)}catch(d){if(G(c),d!==d+0)throw d;Te(1,0)}}function ao(e,r,i,o,u,c,d){var l=re();try{ge(e)(r,i,o,u,c,d)}catch(m){if(G(l),m!==m+0)throw m;Te(1,0)}}function oo(e,r,i){var o=re();try{return ge(e)(r,i)}catch(u){if(G(o),u!==u+0)throw u;Te(1,0)}}function so(e){var r=re();try{ge(e)()}catch(i){if(G(r),i!==i+0)throw i;Te(1,0)}}function uo(e,r,i,o){var u=re();try{return ge(e)(r,i,o)}catch(c){if(G(u),c!==c+0)throw c;Te(1,0)}}function fo(e){var r=re();try{return ge(e)()}catch(i){if(G(r),i!==i+0)throw i;Te(1,0)}}function co(e,r,i){var o=re();try{ge(e)(r,i)}catch(u){if(G(o),u!==u+0)throw u;Te(1,0)}}function lo(e,r,i,o,u,c){var d=re();try{return ge(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;Te(1,0)}}function vo(e,r,i,o,u,c){var d=re();try{return ge(e)(r,i,o,u,c)}catch(l){if(G(d),l!==l+0)throw l;Te(1,0)}}function po(e,r,i,o,u,c,d,l){var m=re();try{return ge(e)(r,i,o,u,c,d,l)}catch(P){if(G(m),P!==P+0)throw P;Te(1,0)}}function ho(e,r,i,o,u,c,d,l){var m=re();try{ge(e)(r,i,o,u,c,d,l)}catch(P){if(G(m),P!==P+0)throw P;Te(1,0)}}function mo(e,r,i,o,u,c,d){var l=re();try{return ge(e)(r,i,o,u,c,d)}catch(m){if(G(l),m!==m+0)throw m;Te(1,0)}}function _o(e,r,i,o,u,c,d,l,m,P,S,N){var ue=re();try{return ge(e)(r,i,o,u,c,d,l,m,P,S,N)}catch(Fe){if(G(ue),Fe!==Fe+0)throw Fe;Te(1,0)}}function yo(e,r,i,o,u,c,d,l,m,P,S,N,ue,Fe,Ve,kr){var Or=re();try{ge(e)(r,i,o,u,c,d,l,m,P,S,N,ue,Fe,Ve,kr)}catch(Ke){if(G(Or),Ke!==Ke+0)throw Ke;Te(1,0)}}function go(e,r,i,o,u,c,d){var l=re();try{return ja(e,r,i,o,u,c,d)}catch(m){if(G(l),m!==m+0)throw m;Te(1,0)}}function wo(e,r,i,o){var u=re();try{return Wa(e,r,i,o)}catch(c){if(G(u),c!==c+0)throw c;Te(1,0)}}var Mn,xa;gr=function e(){Mn||Sa(),Mn||(gr=e)};function Sa(){if(er>0)return;if(K){lr(w),Lr(),startWorker(w);return}if(!xa&&(xa=1,gt(),er>0))return;function e(){var r;Mn||(Mn=1,w.calledRun=1,!vr&&(Lr(),lr(w),(r=w.onRuntimeInitialized)==null||r.call(w),wt()))}w.setStatus?(w.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>w.setStatus(""),1),e()},1)):e()}if(w.preInit)for(typeof w.preInit=="function"&&(w.preInit=[w.preInit]);w.preInit.length>0;)w.preInit.pop()();return Sa(),z=Ze,z}})(),Ya,Ga,Io=(Ga=(Ya=globalThis.self)==null?void 0:Ya.name)==null?void 0:Ga.startsWith("em-pthread");Io&&Za();var Lo=(()=>{var v=import.meta.url;return function(q={}){var z,_=q,ie,Ae,Oe=new Promise((t,n)=>{ie=t,Ae=n}),fe=Object.assign({},_),Z="./this.program",$r=(t,n)=>{throw n},Ue="";function w(t){return _.locateFile?_.locateFile(t,Ue):Ue+t}var lr;typeof document<"u"&&document.currentScript&&(Ue=document.currentScript.src),v&&(Ue=v),Ue.startsWith("blob:")?Ue="":Ue=Ue.substr(0,Ue.replace(/[?#].*/,"").lastIndexOf("/")+1),lr=t=>fetch(t,{credentials:"same-origin"}).then(n=>n.ok?n.arrayBuffer():Promise.reject(new Error(n.status+" : "+n.url)));var or=_.print||console.log.bind(console),Ze=_.printErr||console.error.bind(console);Object.assign(_,fe),fe=null,_.arguments&&_.arguments,_.thisProgram&&(Z=_.thisProgram);var sr=_.wasmBinary,xe,K=!1,De,ke,he,J,ce,We,te,Je,$e;function Xe(){var t=xe.buffer;_.HEAP8=ke=new Int8Array(t),_.HEAP16=J=new Int16Array(t),_.HEAPU8=he=new Uint8Array(t),_.HEAPU16=ce=new Uint16Array(t),_.HEAP32=We=new Int32Array(t),_.HEAPU32=te=new Uint32Array(t),_.HEAPF32=Je=new Float32Array(t),_.HEAPF64=$e=new Float64Array(t)}var me=[],yr=[],vr=[];function dr(){var t=_.preRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(jr)),er(me)}function Ge(){er(yr)}function Wr(){var t=_.postRun;t&&(typeof t=="function"&&(t=[t]),t.forEach(Dr)),er(vr)}function jr(t){me.unshift(t)}function Ur(t){yr.unshift(t)}function Dr(t){vr.unshift(t)}var Qe=0,pr=null;function Qr(t){var n;Qe++,(n=_.monitorRunDependencies)==null||n.call(_,Qe)}function Ne(t){var a;if(Qe--,(a=_.monitorRunDependencies)==null||a.call(_,Qe),Qe==0&&pr){var n=pr;pr=null,n()}}function Pr(t){var a;(a=_.onAbort)==null||a.call(_,t),t="Aborted("+t+")",Ze(t),K=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw Ae(n),n}var Mr="data:application/octet-stream;base64,",et=t=>t.startsWith(Mr);function rt(){if(_.locateFile){var t="heic-dec.wasm";return et(t)?t:w(t)}return new URL(""+new URL("../assets/heic-dec.DrPBZ1Ea.wasm",import.meta.url).href,import.meta.url).href}var xr;function Ir(t){if(t==xr&&sr)return new Uint8Array(sr);throw"both async and sync fetching of the wasm failed"}function gt(t){return sr?Promise.resolve().then(()=>Ir(t)):lr(t).then(n=>new Uint8Array(n),()=>Ir(t))}function Lr(t,n,a){return gt(t).then(s=>WebAssembly.instantiate(s,n)).then(a,s=>{Ze(`failed to asynchronously prepare wasm: ${s}`),Pr(s)})}function wt(t,n,a,s){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!et(n)&&typeof fetch=="function"?fetch(n,{credentials:"same-origin"}).then(f=>{var p=WebAssembly.instantiateStreaming(f,a);return p.then(s,function(g){return Ze(`wasm streaming compile failed: ${g}`),Ze("falling back to ArrayBuffer instantiation"),Lr(n,a,s)})}):Lr(n,a,s)}function tt(){return{a:Li}}function bt(){var t=tt();function n(s,f){return ve=s.exports,xe=ve.va,Xe(),rn=ve.za,Ur(ve.wa),Ne(),ve}Qr();function a(s){n(s.instance)}if(_.instantiateWasm)try{return _.instantiateWasm(t,n)}catch(s){Ze(`Module.instantiateWasm callback failed with error: ${s}`),Ae(s)}return xr??(xr=rt()),wt(sr,xr,t,a).catch(Ae),{}}function nt(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var er=t=>{t.forEach(n=>n(_))},gr=_.noExitRuntime||!0,b=t=>It(t),k=()=>kn(),O=new TextDecoder,V=(t,n)=>{if(!t)return"";for(var a=t+n,s=t;!(s>=a)&&he[s];)++s;return O.decode(he.subarray(t,s))},D=(t,n,a,s)=>{Pr(`Assertion failed: ${V(t)}, at: `+[n?V(n):"unknown filename",a,s?V(s):"unknown function"])},ne=[],T=0,le=t=>{var n=new Pe(t);return n.get_caught()||(n.set_caught(!0),T--),n.set_rethrown(!1),ne.push(n),Pn(t),Cn(t)},Y=0,be=()=>{de(0,0);var t=ne.pop();$n(t.excPtr),Y=0};class Pe{constructor(n){this.excPtr=n,this.ptr=n-24}set_type(n){te[this.ptr+4>>2]=n}get_type(){return te[this.ptr+4>>2]}set_destructor(n){te[this.ptr+8>>2]=n}get_destructor(){return te[this.ptr+8>>2]}set_caught(n){n=n?1:0,ke[this.ptr+12]=n}get_caught(){return ke[this.ptr+12]!=0}set_rethrown(n){n=n?1:0,ke[this.ptr+13]=n}get_rethrown(){return ke[this.ptr+13]!=0}init(n,a){this.set_adjusted_ptr(0),this.set_type(n),this.set_destructor(a)}set_adjusted_ptr(n){te[this.ptr+16>>2]=n}get_adjusted_ptr(){return te[this.ptr+16>>2]}}var j=t=>{throw Y||(Y=t),Y},A=t=>Tn(t),$=t=>{var n=Y;if(!n)return A(0),0;var a=new Pe(n);a.set_adjusted_ptr(n);var s=a.get_type();if(!s)return A(0),n;for(var f of t){if(f===0||f===s)break;var p=a.ptr+16;if(En(f,s,p))return A(f),n}return A(s),n},R=()=>$([]),L=t=>$([t]),ee=()=>{var t=ne.pop();t||Pr("no exception to throw");var n=t.excPtr;throw t.get_rethrown()||(ne.push(t),t.set_rethrown(!0),t.set_caught(!1),T++),Y=n,Y},Ee=(t,n,a)=>{var s=new Pe(t);throw s.init(n,a),Y=t,T++,Y},je=()=>T,re=(t,n,a,s)=>{if(!(s>0))return 0;for(var f=a,p=a+s-1,g=0;g<t.length;++g){var h=t.charCodeAt(g);if(h>=55296&&h<=57343){var y=t.charCodeAt(++g);h=65536+((h&1023)<<10)|y&1023}if(h<=127){if(a>=p)break;n[a++]=h}else if(h<=2047){if(a+1>=p)break;n[a++]=192|h>>6,n[a++]=128|h&63}else if(h<=65535){if(a+2>=p)break;n[a++]=224|h>>12,n[a++]=128|h>>6&63,n[a++]=128|h&63}else{if(a+3>=p)break;n[a++]=240|h>>18,n[a++]=128|h>>12&63,n[a++]=128|h>>6&63,n[a++]=128|h&63}}return n[a]=0,a-f},G=(t,n,a)=>re(t,he,n,a),ur=(t,n,a)=>{};function M(t,n,a,s){}var F=(t,n,a)=>{},E=()=>{Pr("")},I={},B=t=>{for(;t.length;){var n=t.pop(),a=t.pop();a(n)}};function X(t){return this.fromWireType(te[t>>2])}var Q={},W={},_e={},pe,ye=t=>{throw new pe(t)},it=(t,n,a)=>{t.forEach(h=>_e[h]=n);function s(h){var y=a(h);y.length!==t.length&&ye("Mismatched type converter count");for(var C=0;C<t.length;++C)Be(t[C],y[C])}var f=new Array(n.length),p=[],g=0;n.forEach((h,y)=>{W.hasOwnProperty(h)?f[y]=W[h]:(p.push(h),Q.hasOwnProperty(h)||(Q[h]=[]),Q[h].push(()=>{f[y]=W[h],++g,g===p.length&&s(f)}))}),p.length===0&&s(f)},ge=t=>{var n=I[t];delete I[t];var a=n.rawConstructor,s=n.rawDestructor,f=n.fields,p=f.map(g=>g.getterReturnType).concat(f.map(g=>g.setterArgumentType));it([t],p,g=>{var h={};return f.forEach((y,C)=>{var x=y.fieldName,H=g[C],se=y.getter,Ce=y.getterContext,Le=g[C+f.length],ir=y.setter,_r=y.setterContext;h[x]={read:U=>H.fromWireType(se(Ce,U)),write:(U,Tr)=>{var He=[];ir(_r,U,Le.toWireType(He,Tr)),B(He)}}}),[{name:n.name,fromWireType:y=>{var C={};for(var x in h)C[x]=h[x].read(y);return s(y),C},toWireType:(y,C)=>{for(var x in h)if(!(x in C))throw new TypeError(`Missing field: "${x}"`);var H=a();for(x in h)h[x].write(H,C[x]);return y!==null&&y.push(s,H),H},argPackAdvance:fr,readValueFromPointer:X,destructorFunction:s}]})},Nn=(t,n,a,s,f)=>{},Tt=()=>{for(var t=new Array(256),n=0;n<256;++n)t[n]=String.fromCharCode(n);Yt=t},Yt,Se=t=>{for(var n="",a=t;he[a];)n+=Yt[he[a++]];return n},wr,ae=t=>{throw new wr(t)};function at(t,n,a={}){var s=n.name;if(t||ae(`type "${s}" must have a positive integer typeid pointer`),W.hasOwnProperty(t)){if(a.ignoreDuplicateRegistrations)return;ae(`Cannot register type '${s}' twice`)}if(W[t]=n,delete _e[t],Q.hasOwnProperty(t)){var f=Q[t];delete Q[t],f.forEach(p=>p())}}function Be(t,n,a={}){return at(t,n,a)}var fr=8,hr=(t,n,a,s)=>{n=Se(n),Be(t,{name:n,fromWireType:function(f){return!!f},toWireType:function(f,p){return p?a:s},argPackAdvance:fr,readValueFromPointer:function(f){return this.fromWireType(he[f])},destructorFunction:null})},Vn=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),Hr=t=>{function n(a){return a.$$.ptrType.registeredClass.name}ae(n(t)+" instance already deleted")},kt=!1,Nr=t=>{},Gt=t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)},qt=t=>{t.count.value-=1;var n=t.count.value===0;n&&Gt(t)},zt=(t,n,a)=>{if(n===a)return t;if(a.baseClass===void 0)return null;var s=zt(t,n,a.baseClass);return s===null?null:a.downcast(s)},Kt={},Bn={},Yn=(t,n)=>{for(n===void 0&&ae("ptr should not be undefined");t.baseClass;)n=t.upcast(n),t=t.baseClass;return n},Zt=(t,n)=>(n=Yn(t,n),Bn[n]),ot=(t,n)=>{(!n.ptrType||!n.ptr)&&ye("makeClassHandle requires ptr and ptrType");var a=!!n.smartPtrType,s=!!n.smartPtr;return a!==s&&ye("Both smartPtrType and smartPtr must be specified"),n.count={value:1},Sr(Object.create(t,{$$:{value:n,writable:!0}}))};function Jt(t){var n=this.getPointee(t);if(!n)return this.destructor(t),null;var a=Zt(this.registeredClass,n);if(a!==void 0){if(a.$$.count.value===0)return a.$$.ptr=n,a.$$.smartPtr=t,a.clone();var s=a.clone();return this.destructor(t),s}function f(){return this.isSmartPointer?ot(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:n,smartPtrType:this,smartPtr:t}):ot(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var p=this.registeredClass.getActualType(n),g=Kt[p];if(!g)return f.call(this);var h;this.isConst?h=g.constPointerType:h=g.pointerType;var y=zt(n,this.registeredClass,h.registeredClass);return y===null?f.call(this):this.isSmartPointer?ot(h.registeredClass.instancePrototype,{ptrType:h,ptr:y,smartPtrType:this,smartPtr:t}):ot(h.registeredClass.instancePrototype,{ptrType:h,ptr:y})}var Sr=t=>typeof FinalizationRegistry>"u"?(Sr=n=>n,t):(kt=new FinalizationRegistry(n=>{qt(n.$$)}),Sr=n=>{var a=n.$$,s=!!a.smartPtr;if(s){var f={$$:a};kt.register(n,f,n)}return n},Nr=n=>kt.unregister(n),Sr(t)),Gn=()=>{Object.assign(br.prototype,{isAliasOf(t){if(!(this instanceof br)||!(t instanceof br))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;t.$$=t.$$;for(var s=t.$$.ptrType.registeredClass,f=t.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;s.baseClass;)f=s.upcast(f),s=s.baseClass;return n===s&&a===f},clone(){if(this.$$.ptr||Hr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Sr(Object.create(Object.getPrototypeOf(this),{$$:{value:Vn(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||Hr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),Nr(this),qt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Hr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ae("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function br(){}var Er=(t,n)=>Object.defineProperty(n,"name",{value:t}),Xt=(t,n,a)=>{if(t[n].overloadTable===void 0){var s=t[n];t[n]=function(...f){return t[n].overloadTable.hasOwnProperty(f.length)||ae(`Function '${a}' called with an invalid number of arguments (${f.length}) - expects one of (${t[n].overloadTable})!`),t[n].overloadTable[f.length].apply(this,f)},t[n].overloadTable=[],t[n].overloadTable[s.argCount]=s}},st=(t,n,a)=>{_.hasOwnProperty(t)?((a===void 0||_[t].overloadTable!==void 0&&_[t].overloadTable[a]!==void 0)&&ae(`Cannot register public name '${t}' twice`),Xt(_,t,t),_.hasOwnProperty(a)&&ae(`Cannot register multiple overloads of a function with the same number of arguments (${a})!`),_[t].overloadTable[a]=n):(_[t]=n,a!==void 0&&(_[t].numArguments=a))},Qt=48,en=57,qn=t=>{t=t.replace(/[^a-zA-Z0-9_]/g,"$");var n=t.charCodeAt(0);return n>=Qt&&n<=en?`_${t}`:t};function ut(t,n,a,s,f,p,g,h){this.name=t,this.constructor=n,this.instancePrototype=a,this.rawDestructor=s,this.baseClass=f,this.getActualType=p,this.upcast=g,this.downcast=h,this.pureVirtualFunctions=[]}var Vr=(t,n,a)=>{for(;n!==a;)n.upcast||ae(`Expected null or instance of ${a.name}, got an instance of ${n.name}`),t=n.upcast(t),n=n.baseClass;return t};function Br(t,n){if(n===null)return this.isReference&&ae(`null is not a valid ${this.name}`),0;n.$$||ae(`Cannot pass "${Ct(n)}" as a ${this.name}`),n.$$.ptr||ae(`Cannot pass deleted object as a pointer of type ${this.name}`);var a=n.$$.ptrType.registeredClass,s=Vr(n.$$.ptr,a,this.registeredClass);return s}function Rr(t,n){var a;if(n===null)return this.isReference&&ae(`null is not a valid ${this.name}`),this.isSmartPointer?(a=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,a),a):0;(!n||!n.$$)&&ae(`Cannot pass "${Ct(n)}" as a ${this.name}`),n.$$.ptr||ae(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&n.$$.ptrType.isConst&&ae(`Cannot convert argument of type ${n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name} to parameter type ${this.name}`);var s=n.$$.ptrType.registeredClass;if(a=Vr(n.$$.ptr,s,this.registeredClass),this.isSmartPointer)switch(n.$$.smartPtr===void 0&&ae("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:n.$$.smartPtrType===this?a=n.$$.smartPtr:ae(`Cannot convert argument of type ${n.$$.smartPtrType?n.$$.smartPtrType.name:n.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:a=n.$$.smartPtr;break;case 2:if(n.$$.smartPtrType===this)a=n.$$.smartPtr;else{var f=n.clone();a=this.rawShare(a,Re.toHandle(()=>f.delete())),t!==null&&t.push(this.rawDestructor,a)}break;default:ae("Unsupporting sharing policy")}return a}function Cr(t,n){if(n===null)return this.isReference&&ae(`null is not a valid ${this.name}`),0;n.$$||ae(`Cannot pass "${Ct(n)}" as a ${this.name}`),n.$$.ptr||ae(`Cannot pass deleted object as a pointer of type ${this.name}`),n.$$.ptrType.isConst&&ae(`Cannot convert argument of type ${n.$$.ptrType.name} to parameter type ${this.name}`);var a=n.$$.ptrType.registeredClass,s=Vr(n.$$.ptr,a,this.registeredClass);return s}var ft=()=>{Object.assign(Yr.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var n;(n=this.rawDestructor)==null||n.call(this,t)},argPackAdvance:fr,readValueFromPointer:X,fromWireType:Jt})};function Yr(t,n,a,s,f,p,g,h,y,C,x){this.name=t,this.registeredClass=n,this.isReference=a,this.isConst=s,this.isSmartPointer=f,this.pointeeType=p,this.sharingPolicy=g,this.rawGetPointee=h,this.rawConstructor=y,this.rawShare=C,this.rawDestructor=x,!f&&n.baseClass===void 0?s?(this.toWireType=Br,this.destructorFunction=null):(this.toWireType=Cr,this.destructorFunction=null):this.toWireType=Rr}var Gr=(t,n,a)=>{_.hasOwnProperty(t)||ye("Replacing nonexistent public symbol"),_[t].overloadTable!==void 0&&a!==void 0?_[t].overloadTable[a]=n:(_[t]=n,_[t].argCount=a)},$t=(t,n,a)=>{t=t.replace(/p/g,"i");var s=_["dynCall_"+t];return s(n,...a)},ct=[],rn,we=t=>{var n=ct[t];return n||(t>=ct.length&&(ct.length=t+1),ct[t]=n=rn.get(t)),n},tn=(t,n,a=[])=>{if(t.includes("j"))return $t(t,n,a);var s=we(n)(...a);return s},Me=(t,n)=>(...a)=>tn(t,n,a),Ye=(t,n)=>{t=Se(t);function a(){return t.includes("j")?Me(t,n):we(n)}var s=a();return typeof s!="function"&&ae(`unknown function pointer with signature ${t}: ${n}`),s},oe=(t,n)=>{var a=Er(n,function(s){this.name=n,this.message=s;var f=new Error(s).stack;f!==void 0&&(this.stack=this.toString()+`
`+f.replace(/^Error(:[^\n]*)?\n/,""))});return a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},a},nn,rr=t=>{var n=wn(t),a=Se(n);return ze(n),a},tr=(t,n)=>{var a=[],s={};function f(p){if(!s[p]&&!W[p]){if(_e[p]){_e[p].forEach(f);return}a.push(p),s[p]=!0}}throw n.forEach(f),new nn(`${t}: `+a.map(rr).join([", "]))},zn=(t,n,a,s,f,p,g,h,y,C,x,H,se)=>{x=Se(x),p=Ye(f,p),h&&(h=Ye(g,h)),C&&(C=Ye(y,C)),se=Ye(H,se);var Ce=qn(x);st(Ce,function(){tr(`Cannot construct ${x} due to unbound types`,[s])}),it([t,n,a],s?[s]:[],Le=>{var ht;Le=Le[0];var ir,_r;s?(ir=Le.registeredClass,_r=ir.instancePrototype):_r=br.prototype;var U=Er(x,function(...mt){if(Object.getPrototypeOf(this)!==Tr)throw new wr("Use 'new' to construct "+x);if(He.constructor_body===void 0)throw new wr(x+" has no accessible constructor");var Ht=He.constructor_body[mt.length];if(Ht===void 0)throw new wr(`Tried to invoke ctor of ${x} with invalid number of parameters (${mt.length}) - expected (${Object.keys(He.constructor_body).toString()}) parameters instead!`);return Ht.apply(this,mt)}),Tr=Object.create(_r,{constructor:{value:U}});U.prototype=Tr;var He=new ut(x,U,Tr,se,ir,p,h,C);He.baseClass&&((ht=He.baseClass).__derivedClasses??(ht.__derivedClasses=[]),He.baseClass.__derivedClasses.push(He));var Dn=new Yr(x,He,!0,!1,!1),Lt=new Yr(x+"*",He,!1,!1,!1),cr=new Yr(x+" const*",He,!1,!0,!1);return Kt[t]={pointerType:Lt,constPointerType:cr},Gr(Ce,U),[Dn,Lt,cr]})},Pt=[],nr=[],qr=t=>{t>9&&--nr[t+1]===0&&(nr[t]=void 0,Pt.push(t))},an=()=>nr.length/2-5-Pt.length,Kn=()=>{nr.push(0,1,void 0,1,null,1,!0,1,!1,1),_.count_emval_handles=an},Re={toValue:t=>(t||ae("Cannot use deleted val. handle = "+t),nr[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const n=Pt.pop()||nr.length;return nr[n]=t,nr[n+1]=1,n}}}},on={name:"emscripten::val",fromWireType:t=>{var n=Re.toValue(t);return qr(t),n},toWireType:(t,n)=>Re.toHandle(n),argPackAdvance:fr,readValueFromPointer:X,destructorFunction:null},sn=t=>Be(t,on),Zn=(t,n,a)=>{switch(n){case 1:return a?function(s){return this.fromWireType(ke[s])}:function(s){return this.fromWireType(he[s])};case 2:return a?function(s){return this.fromWireType(J[s>>1])}:function(s){return this.fromWireType(ce[s>>1])};case 4:return a?function(s){return this.fromWireType(We[s>>2])}:function(s){return this.fromWireType(te[s>>2])};default:throw new TypeError(`invalid integer width (${n}): ${t}`)}},Jn=(t,n,a,s)=>{n=Se(n);function f(){}f.values={},Be(t,{name:n,constructor:f,fromWireType:function(p){return this.constructor.values[p]},toWireType:(p,g)=>g.value,argPackAdvance:fr,readValueFromPointer:Zn(n,a,s),destructorFunction:null}),st(n,f)},Et=(t,n)=>{var a=W[t];return a===void 0&&ae(`${n} has unknown type ${rr(t)}`),a},lt=(t,n,a)=>{var s=Et(t,"enum");n=Se(n);var f=s.constructor,p=Object.create(s.constructor.prototype,{value:{value:a},constructor:{value:Er(`${s.name}_${n}`,function(){})}});f.values[a]=p,f[n]=p},Ct=t=>{if(t===null)return"null";var n=typeof t;return n==="object"||n==="array"||n==="function"?t.toString():""+t},zr=(t,n)=>{switch(n){case 4:return function(a){return this.fromWireType(Je[a>>2])};case 8:return function(a){return this.fromWireType($e[a>>3])};default:throw new TypeError(`invalid float width (${n}): ${t}`)}},Xn=(t,n,a)=>{n=Se(n),Be(t,{name:n,fromWireType:s=>s,toWireType:(s,f)=>f,argPackAdvance:fr,readValueFromPointer:zr(n,a),destructorFunction:null})};function Kr(t){for(var n=1;n<t.length;++n)if(t[n]!==null&&t[n].destructorFunction===void 0)return!0;return!1}function Ar(t,n){if(!(t instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof t} which is not a function`);var a=Er(t.name||"unknownFunctionName",function(){});a.prototype=t.prototype;var s=new a,f=t.apply(s,n);return f instanceof Object?f:s}function Qn(t,n,a,s){for(var f=Kr(t),p=t.length-2,g=[],h=["fn"],y=0;y<p;++y)g.push(`arg${y}`),h.push(`arg${y}Wired`);g=g.join(","),h=h.join(",");var C=`return function (${g}) {
`;f&&(C+=`var destructors = [];
`);for(var x=f?"destructors":"null",H=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],y=0;y<p;++y)C+=`var arg${y}Wired = argType${y}['toWireType'](${x}, arg${y});
`,H.push(`argType${y}`);if(C+=(a||s?"var rv = ":"")+`invoker(${h});
`,f)C+=`runDestructors(destructors);
`;else for(var y=2;y<t.length;++y){var se=y===1?"thisWired":"arg"+(y-2)+"Wired";t[y].destructorFunction!==null&&(C+=`${se}_dtor(${se});
`,H.push(`${se}_dtor`))}return a&&(C+=`var ret = retType['fromWireType'](rv);
return ret;
`),C+=`}
`,[H,C]}function At(t,n,a,s,f,p){var g=n.length;g<2&&ae("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var h=n[1]!==null&&a!==null,y=Kr(n),C=n[0].name!=="void",x=[t,ae,s,f,B,n[0],n[1]],H=0;H<g-2;++H)x.push(n[H+2]);if(!y)for(var H=2;H<n.length;++H)n[H].destructorFunction!==null&&x.push(n[H].destructorFunction);let[se,Ce]=Qn(n,h,C,p);se.push(Ce);var Le=Ar(Function,se)(...x);return Er(t,Le)}var ei=(t,n)=>{for(var a=[],s=0;s<t;s++)a.push(te[n+s*4>>2]);return a},ri=t=>{t=t.trim();const n=t.indexOf("(");return n!==-1?t.substr(0,n):t},ti=(t,n,a,s,f,p,g,h)=>{var y=ei(n,a);t=Se(t),t=ri(t),f=Ye(s,f),st(t,function(){tr(`Cannot call ${t} due to unbound types`,y)},n-1),it([],y,C=>{var x=[C[0],null].concat(C.slice(1));return Gr(t,At(t,x,null,f,p,g),n-1),[]})},ni=(t,n,a)=>{switch(n){case 1:return a?s=>ke[s]:s=>he[s];case 2:return a?s=>J[s>>1]:s=>ce[s>>1];case 4:return a?s=>We[s>>2]:s=>te[s>>2];default:throw new TypeError(`invalid integer width (${n}): ${t}`)}},Ot=(t,n,a,s,f)=>{n=Se(n);var p=x=>x;if(s===0){var g=32-8*a;p=x=>x<<g>>>g}var h=n.includes("unsigned"),y=(x,H)=>{},C;h?C=function(x,H){return y(H,this.name),H>>>0}:C=function(x,H){return y(H,this.name),H},Be(t,{name:n,fromWireType:p,toWireType:C,argPackAdvance:fr,readValueFromPointer:ni(n,a,s!==0),destructorFunction:null})},ii=(t,n,a)=>{var s=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],f=s[n];function p(g){var h=te[g>>2],y=te[g+4>>2];return new f(ke.buffer,y,h)}a=Se(a),Be(t,{name:a,fromWireType:p,argPackAdvance:fr,readValueFromPointer:p},{ignoreDuplicateRegistrations:!0})},ai=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);s<=127?n++:s<=2047?n+=2:s>=55296&&s<=57343?(n+=4,++a):n+=3}return n},oi=(t,n)=>{n=Se(n);var a=n==="std::string";Be(t,{name:n,fromWireType(s){var f=te[s>>2],p=s+4,g;if(a)for(var h=p,y=0;y<=f;++y){var C=p+y;if(y==f||he[C]==0){var x=C-h,H=V(h,x);g===void 0?g=H:(g+="\0",g+=H),h=C+1}}else{for(var se=new Array(f),y=0;y<f;++y)se[y]=String.fromCharCode(he[p+y]);g=se.join("")}return ze(s),g},toWireType(s,f){f instanceof ArrayBuffer&&(f=new Uint8Array(f));var p,g=typeof f=="string";g||f instanceof Uint8Array||f instanceof Uint8ClampedArray||f instanceof Int8Array||ae("Cannot pass non-string to std::string"),a&&g?p=ai(f):p=f.length;var h=Mt(4+p+1),y=h+4;if(te[h>>2]=p,a&&g)G(f,y,p+1);else if(g)for(var C=0;C<p;++C){var x=f.charCodeAt(C);x>255&&(ze(y),ae("String has UTF-16 code units that do not fit in 8 bits")),he[y+C]=x}else for(var C=0;C<p;++C)he[y+C]=f[C];return s!==null&&s.push(ze,h),h},argPackAdvance:fr,readValueFromPointer:X,destructorFunction(s){ze(s)}})},si=new TextDecoder("utf-16le"),vt=(t,n)=>{for(var a=t,s=a>>1,f=s+n/2;!(s>=f)&&ce[s];)++s;return a=s<<1,si.decode(he.subarray(t,a))},un=(t,n,a)=>{if(a??(a=2147483647),a<2)return 0;a-=2;for(var s=n,f=a<t.length*2?a/2:t.length,p=0;p<f;++p){var g=t.charCodeAt(p);J[n>>1]=g,n+=2}return J[n>>1]=0,n-s},ui=t=>t.length*2,fi=(t,n)=>{for(var a=0,s="";!(a>=n/4);){var f=We[t+a*4>>2];if(f==0)break;if(++a,f>=65536){var p=f-65536;s+=String.fromCharCode(55296|p>>10,56320|p&1023)}else s+=String.fromCharCode(f)}return s},ci=(t,n,a)=>{if(a??(a=2147483647),a<4)return 0;for(var s=n,f=s+a-4,p=0;p<t.length;++p){var g=t.charCodeAt(p);if(g>=55296&&g<=57343){var h=t.charCodeAt(++p);g=65536+((g&1023)<<10)|h&1023}if(We[n>>2]=g,n+=4,n+4>f)break}return We[n>>2]=0,n-s},mr=t=>{for(var n=0,a=0;a<t.length;++a){var s=t.charCodeAt(a);s>=55296&&s<=57343&&++a,n+=4}return n},li=(t,n,a)=>{a=Se(a);var s,f,p,g;n===2?(s=vt,f=un,g=ui,p=h=>ce[h>>1]):n===4&&(s=fi,f=ci,g=mr,p=h=>te[h>>2]),Be(t,{name:a,fromWireType:h=>{for(var y=te[h>>2],C,x=h+4,H=0;H<=y;++H){var se=h+4+H*n;if(H==y||p(se)==0){var Ce=se-x,Le=s(x,Ce);C===void 0?C=Le:(C+="\0",C+=Le),x=se+n}}return ze(h),C},toWireType:(h,y)=>{typeof y!="string"&&ae(`Cannot pass non-string to C++ string type ${a}`);var C=g(y),x=Mt(4+C+n);return te[x>>2]=C/n,f(y,x+4,C+n),h!==null&&h.push(ze,x),x},argPackAdvance:fr,readValueFromPointer:X,destructorFunction(h){ze(h)}})},fn=(t,n,a,s,f,p)=>{I[t]={name:Se(n),rawConstructor:Ye(a,s),rawDestructor:Ye(f,p),fields:[]}},cn=(t,n,a,s,f,p,g,h,y,C)=>{I[t].fields.push({fieldName:Se(n),getterReturnType:a,getter:Ye(s,f),getterContext:p,setterArgumentType:g,setter:Ye(h,y),setterContext:C})},ln=(t,n)=>{n=Se(n),Be(t,{isVoid:!0,name:n,argPackAdvance:0,fromWireType:()=>{},toWireType:(a,s)=>{}})},vi=(t,n,a)=>he.copyWithin(t,n,n+a),Wt=()=>{gr=!1,mn=0},qe=[],jt=(t,n,a,s)=>(t=qe[t],n=Re.toValue(n),t(null,n,a,s)),di={},xt=t=>{var n=di[t];return n===void 0?Se(t):n},Ie=(t,n,a,s,f)=>(t=qe[t],n=Re.toValue(n),a=xt(a),t(n,n[a],s,f)),vn=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),pi=t=>t===0?Re.toHandle(vn()):(t=xt(t),Re.toHandle(vn()[t])),hi=t=>{var n=qe.length;return qe.push(t),n},mi=(t,n)=>{for(var a=new Array(t),s=0;s<t;++s)a[s]=Et(te[n+s*4>>2],"parameter "+s);return a},St=(t,n,a)=>{var s=[],f=t.toWireType(s,a);return s.length&&(te[n>>2]=Re.toHandle(s)),f},_i=(t,n,a)=>{var s=mi(t,n),f=s.shift();t--;var p=`return function (obj, func, destructorsRef, args) {
`,g=0,h=[];a===0&&h.push("obj");for(var y=["retType"],C=[f],x=0;x<t;++x)h.push("arg"+x),y.push("argType"+x),C.push(s[x]),p+=`  var arg${x} = argType${x}.readValueFromPointer(args${g?"+"+g:""});
`,g+=s[x].argPackAdvance;var H=a===1?"new func":"func.call";p+=`  var rv = ${H}(${h.join(", ")});
`,f.isVoid||(y.push("emval_returnValue"),C.push(St),p+=`  return emval_returnValue(retType, destructorsRef, rv);
`),p+=`};
`,y.push(p);var se=Ar(Function,y)(...C),Ce=`methodCaller<(${s.map(Le=>Le.name).join(", ")}) => ${f.name}>`;return hi(Er(Ce,se))},Rt=t=>{t>9&&(nr[t+1]+=1)},yi=()=>Re.toHandle([]),gi=t=>Re.toHandle(xt(t)),dn=()=>Re.toHandle({}),pn=t=>{var n=Re.toValue(t);B(n),qr(t)},wi=(t,n,a)=>{t=Re.toValue(t),n=Re.toValue(n),a=Re.toValue(a),t[n]=a},bi=(t,n)=>{t=Et(t,"_emval_take_value");var a=t.readValueFromPointer(n);return Re.toHandle(a)},Zr={},hn=t=>{if(t instanceof nt||t=="unwind")return De;$r(1,t)},mn=0,_n=()=>gr||mn>0,yn=t=>{var n;De=t,_n()||((n=_.onExit)==null||n.call(_,t),K=!0),$r(t,new nt(t))},Ti=(t,n)=>{De=t,yn(t)},ki=Ti,$i=()=>{if(!_n())try{ki(De)}catch(t){hn(t)}},Pi=t=>{if(!K)try{t(),$i()}catch(n){hn(n)}},Ei=()=>performance.now(),Ci=(t,n)=>{if(Zr[t]&&(clearTimeout(Zr[t].id),delete Zr[t]),!n)return 0;var a=setTimeout(()=>{delete Zr[t],Pi(()=>bn(t,Ei()))},n);return Zr[t]={id:a,timeout_ms:n},0},Ai=(t,n,a,s)=>{var f=new Date().getFullYear(),p=new Date(f,0,1),g=new Date(f,6,1),h=p.getTimezoneOffset(),y=g.getTimezoneOffset(),C=Math.max(h,y);te[t>>2]=C*60,We[n>>2]=+(h!=y);var x=Ce=>{var Le=Ce>=0?"-":"+",ir=Math.abs(Ce),_r=String(Math.floor(ir/60)).padStart(2,"0"),U=String(ir%60).padStart(2,"0");return`UTC${Le}${_r}${U}`},H=x(h),se=x(y);y<h?(G(H,a,17),G(se,s,17)):(G(H,s,17),G(se,a,17))},Oi=()=>2147483648,Wi=(t,n)=>Math.ceil(t/n)*n,ji=t=>{var n=xe.buffer,a=(t-n.byteLength+65535)/65536|0;try{return xe.grow(a),Xe(),1}catch{}},xi=t=>{var n=he.length;t>>>=0;var a=Oi();if(t>a)return!1;for(var s=1;s<=4;s*=2){var f=n*(1+.2/s);f=Math.min(f,t+100663296);var p=Math.min(a,Wi(Math.max(t,f),65536)),g=ji(p);if(g)return!0}return!1},Ft={},Si=()=>Z||"./this.program",Jr=()=>{if(!Jr.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:Si()};for(var a in Ft)Ft[a]===void 0?delete n[a]:n[a]=Ft[a];var s=[];for(var a in n)s.push(`${a}=${n[a]}`);Jr.strings=s}return Jr.strings},Ri=(t,n)=>{for(var a=0;a<t.length;++a)ke[n++]=t.charCodeAt(a);ke[n]=0},Fi=(t,n)=>{var a=0;return Jr().forEach((s,f)=>{var p=n+a;te[t+f*4>>2]=p,Ri(s,p),a+=s.length+1}),0},Ui=(t,n)=>{var a=Jr();te[t>>2]=a.length;var s=0;return a.forEach(f=>s+=f.length+1),te[n>>2]=s,0},Di=t=>52,gn=(t,n,a,s)=>52;function Ut(t,n,a,s,f){return 70}var dt=[null,[],[]],Mi=(t,n=0,a=NaN)=>{for(var s=n+a,f=n;t[f]&&!(f>=s);)++f;return O.decode(t.buffer?t.subarray(n,f):new Uint8Array(t.slice(n,f)))},Dt=(t,n)=>{var a=dt[t];n===0||n===10?((t===1?or:Ze)(Mi(a)),a.length=0):a.push(n)},Ii=(t,n,a,s)=>{for(var f=0,p=0;p<a;p++){var g=te[n>>2],h=te[n+4>>2];n+=8;for(var y=0;y<h;y++)Dt(t,he[g+y]);f+=h}return te[s>>2]=f,0};pe=_.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},Tt(),wr=_.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},Gn(),ft(),nn=_.UnboundTypeError=oe(Error,"UnboundTypeError"),Kn();var Li={Y:D,o:le,v:be,a:R,h:L,M:ee,u:Ee,ea:je,e:j,ia:ur,ka:M,ga:F,oa:E,qa:ge,W:Nn,ta:hr,G:zn,sa:sn,w:Jn,c:lt,O:Xn,m:ti,x:Ot,l:ii,P:oi,H:li,ra:fn,F:cn,ua:ln,na:vi,ba:Wt,S:jt,pa:Ie,i:qr,I:pi,J:_i,Q:Rt,N:yi,t:gi,C:dn,R:pn,s:wi,n:bi,ca:Ci,da:Ai,fa:xi,la:Fi,ma:Ui,E:Di,ja:gn,V:Ut,ha:Ii,L:Wn,$:Ni,b:Vi,d:jn,q:Zi,X:xn,D:Xr,y:Xi,K:Sn,B:Qi,U:Rn,T:ta,g:Yi,j:Bi,f:Hi,r:zi,k:qi,_:Gi,Z:Ki,p:Ji,z:ea,A:ra,aa:yn},ve=bt(),wn=t=>(wn=ve.xa)(t),ze=t=>(ze=ve.ya)(t),Mt=t=>(Mt=ve.Aa)(t),bn=(t,n)=>(bn=ve.Ba)(t,n),de=(t,n)=>(de=ve.Ca)(t,n),Tn=t=>(Tn=ve.Da)(t),It=t=>(It=ve.Ea)(t),kn=()=>(kn=ve.Fa)(),$n=t=>($n=ve.Ga)(t),Pn=t=>(Pn=ve.Ha)(t),En=(t,n,a)=>(En=ve.Ia)(t,n,a),Cn=t=>(Cn=ve.Ja)(t);_.dynCall_ji=(t,n)=>(_.dynCall_ji=ve.Ka)(t,n);var An=_.dynCall_iij=(t,n,a,s)=>(An=_.dynCall_iij=ve.La)(t,n,a,s);_.dynCall_jijj=(t,n,a,s,f,p)=>(_.dynCall_jijj=ve.Ma)(t,n,a,s,f,p),_.dynCall_vijj=(t,n,a,s,f,p)=>(_.dynCall_vijj=ve.Na)(t,n,a,s,f,p);var On=_.dynCall_iiiiij=(t,n,a,s,f,p,g)=>(On=_.dynCall_iiiiij=ve.Oa)(t,n,a,s,f,p,g);_.dynCall_jiji=(t,n,a,s,f)=>(_.dynCall_jiji=ve.Pa)(t,n,a,s,f),_.dynCall_viijii=(t,n,a,s,f,p,g)=>(_.dynCall_viijii=ve.Qa)(t,n,a,s,f,p,g),_.dynCall_iiiiijj=(t,n,a,s,f,p,g,h,y)=>(_.dynCall_iiiiijj=ve.Ra)(t,n,a,s,f,p,g,h,y),_.dynCall_iiiiiijj=(t,n,a,s,f,p,g,h,y,C)=>(_.dynCall_iiiiiijj=ve.Sa)(t,n,a,s,f,p,g,h,y,C);function Hi(t,n,a){var s=k();try{we(t)(n,a)}catch(f){if(b(s),f!==f+0)throw f;de(1,0)}}function Ni(t){var n=k();try{return we(t)()}catch(a){if(b(n),a!==a+0)throw a;de(1,0)}}function Vi(t,n){var a=k();try{return we(t)(n)}catch(s){if(b(a),s!==s+0)throw s;de(1,0)}}function Bi(t,n){var a=k();try{we(t)(n)}catch(s){if(b(a),s!==s+0)throw s;de(1,0)}}function Yi(t){var n=k();try{we(t)()}catch(a){if(b(n),a!==a+0)throw a;de(1,0)}}function Gi(t,n,a,s,f,p){var g=k();try{we(t)(n,a,s,f,p)}catch(h){if(b(g),h!==h+0)throw h;de(1,0)}}function qi(t,n,a,s,f){var p=k();try{we(t)(n,a,s,f)}catch(g){if(b(p),g!==g+0)throw g;de(1,0)}}function zi(t,n,a,s){var f=k();try{we(t)(n,a,s)}catch(p){if(b(f),p!==p+0)throw p;de(1,0)}}function Ki(t,n,a,s,f,p,g){var h=k();try{we(t)(n,a,s,f,p,g)}catch(y){if(b(h),y!==y+0)throw y;de(1,0)}}function Zi(t,n,a,s){var f=k();try{return we(t)(n,a,s)}catch(p){if(b(f),p!==p+0)throw p;de(1,0)}}function Wn(t,n,a,s,f){var p=k();try{return we(t)(n,a,s,f)}catch(g){if(b(p),g!==g+0)throw g;de(1,0)}}function jn(t,n,a){var s=k();try{return we(t)(n,a)}catch(f){if(b(s),f!==f+0)throw f;de(1,0)}}function Xr(t,n,a,s,f,p){var g=k();try{return we(t)(n,a,s,f,p)}catch(h){if(b(g),h!==h+0)throw h;de(1,0)}}function xn(t,n,a,s,f,p){var g=k();try{return we(t)(n,a,s,f,p)}catch(h){if(b(g),h!==h+0)throw h;de(1,0)}}function Sn(t,n,a,s,f,p,g,h){var y=k();try{return we(t)(n,a,s,f,p,g,h)}catch(C){if(b(y),C!==C+0)throw C;de(1,0)}}function Ji(t,n,a,s,f,p,g,h){var y=k();try{we(t)(n,a,s,f,p,g,h)}catch(C){if(b(y),C!==C+0)throw C;de(1,0)}}function Xi(t,n,a,s,f,p,g){var h=k();try{return we(t)(n,a,s,f,p,g)}catch(y){if(b(h),y!==y+0)throw y;de(1,0)}}function Qi(t,n,a,s,f,p,g,h,y,C,x,H){var se=k();try{return we(t)(n,a,s,f,p,g,h,y,C,x,H)}catch(Ce){if(b(se),Ce!==Ce+0)throw Ce;de(1,0)}}function ea(t,n,a,s,f,p,g,h,y,C,x){var H=k();try{we(t)(n,a,s,f,p,g,h,y,C,x)}catch(se){if(b(H),se!==se+0)throw se;de(1,0)}}function ra(t,n,a,s,f,p,g,h,y,C,x,H,se,Ce,Le,ir){var _r=k();try{we(t)(n,a,s,f,p,g,h,y,C,x,H,se,Ce,Le,ir)}catch(U){if(b(_r),U!==U+0)throw U;de(1,0)}}function Rn(t,n,a,s,f,p,g){var h=k();try{return On(t,n,a,s,f,p,g)}catch(y){if(b(h),y!==y+0)throw y;de(1,0)}}function ta(t,n,a,s){var f=k();try{return An(t,n,a,s)}catch(p){if(b(f),p!==p+0)throw p;de(1,0)}}var pt,Fn;pr=function t(){pt||Un(),pt||(pr=t)};function Un(){if(Qe>0||!Fn&&(Fn=1,dr(),Qe>0))return;function t(){var n;pt||(pt=1,_.calledRun=1,!K&&(Ge(),ie(_),(n=_.onRuntimeInitialized)==null||n.call(_),Wr()))}_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),t()},1)):t()}if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return Un(),z=Oe,z}})();const Ho={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};let Ja,Xa;async function No(v){return Ja??(Ja=await qa(Za,v))}async function Vo(v){return Xa??(Xa=await qa(Lo,v))}function Bo(v,q){return Do("HEIC Encode",Ja,Ho,v,q)}function Yo(v){return Ka(Xa.decode(v),"HEIC Decode")}var ma;(function(v){v[v.UVAdapt=0]="UVAdapt",v[v.UV420=1]="UV420",v[v.UV444=2]="UV444",v[v.UVAuto=3]="UVAuto"})(ma||(ma={}));var _a;(function(v){v[v.YCoCg=0]="YCoCg",v[v.YCbCr=1]="YCbCr",v[v.Custom=2]="Custom",v[v.YIQ=3]="YIQ"})(_a||(_a={}));ma.UVAuto,_a.YCoCg;globalThis._icodec_ImageData=(v,q,z,_)=>_===8?new Go(v,q,z):new za(v,q,z,_);class Go extends ImageData{constructor(){super(...arguments);_t(this,"depth",8)}}const qo=""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,zo=""+new URL("../assets/heic-dec.DrPBZ1Ea.wasm",import.meta.url).href;var Ko=Hn('<meta name="description" content="Converter for heif">'),Zo=Hn("<p> </p>"),Jo=Hn('<p><a download="converted.heic">Download HEIC</a></p>'),Xo=Hn('<div class="text-column"><h1>HEIC 변환기</h1> <input type="file" accept="image/*"> <button>샘플 HEIC 디코딩</button> <canvas style="border: 1px solid #ccc; margin-top: 1rem;"></canvas> <!> <!></div>');function ds(v,q){$o(q,!1);let z=!1;async function _(){z||(await Promise.all([Vo(zo),No(qo)]),z=!0)}let ie=null,Ae=oa(null),Oe=oa(),fe=oa(null);async function Z(J){return await _(),Yo(J)}async function $r(J,ce,We){return await _(),await Bo({data:J,width:ce,height:We,depth:8})}async function Ue(J){Ia(Oe,Fr(Oe).width=J.width),Ia(Oe,Fr(Oe).height=J.height),Fr(Oe).getContext("2d").putImageData(J,0,0)}async function w(J){var yr;if(ie=((yr=J.target.files)==null?void 0:yr[0])??null,!ie)return;const ce=await createImageBitmap(ie),te=new OffscreenCanvas(ce.width,ce.height).getContext("2d");te.drawImage(ce,0,0);const Je=te.getImageData(0,0,ce.width,ce.height);await Ue(Je),Ln(fe,"original");const $e=await $r(Je.data,Je.width,Je.height);console.log("received result",$e);const Xe=new Blob([$e],{type:"image/heic"});Ln(Ae,URL.createObjectURL(Xe));const me=await Z($e);await Ue(me),Ln(fe,"encoded")}async function lr(){}jo();var or=Xo();Ao(J=>{var ce=Ko();Eo.title="About",In(J,ce)});var Ze=Vt(aa(or),2),sr=Vt(Ze,2),xe=Vt(sr,2);Wo(xe,J=>Ln(Oe,J),()=>Fr(Oe));var K=Vt(xe,2);{var De=J=>{var ce=Zo(),We=aa(ce);sa(ce),La(()=>Co(We,`현재 상태: ${(Fr(fe)==="original"?"원본 이미지":"변환된 HEIC 결과")??""}`)),In(J,ce)};Na(K,J=>{Fr(fe)&&J(De)})}var ke=Vt(K,2);{var he=J=>{var ce=Jo(),We=aa(ce);sa(ce),La(()=>Oo(We,"href",Fr(Ae))),In(J,ce)};Na(ke,J=>{Fr(Ae)&&J(he)})}sa(or),Ha("change",Ze,w),Ha("click",sr,lr),In(v,or),Po()}export{ds as component};
