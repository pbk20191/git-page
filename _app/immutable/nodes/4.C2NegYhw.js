var Ns=Object.defineProperty;var zs=(s,_,n)=>_ in s?Ns(s,_,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[_]=n;var Wt=(s,_,n)=>zs(s,typeof _!="symbol"?_+"":_,n);import{t as Fe,a as je}from"../chunks/C40Lt10h.js";import{ak as ii,I as Hs,az as Bs,o as Ys,b as qs,i as Wr,h as gt,v as Gs,d as Js,C as U,Y as Ks,e as Zs,g as Ka,j as Ir,n as Nt,a7 as Qs,k as ni,l as si,m as Xs,aA as Ur,ab as li,ad as Za,aB as el,O as tl,aC as Qa,aD as rl,aE as al,aa as il,aF as nl,au as sl,aG as ll,aH as ol,u as ul,p as cr,t as Je,a as fr,s as p,c as d,r as c,M as Ee,aw as vl,R as Xa,$ as cl,P as fl}from"../chunks/DDedSiM2.js";import{e as Nr,d as dl}from"../chunks/B0CZYdza.js";import{h as pl}from"../chunks/FuLw09dS.js";import{o as hl}from"../chunks/C-CQWCQ7.js";import{w as _l,t as ml}from"../chunks/4eif3qM-.js";import{a as ae,b as Ue,J as gl}from"../chunks/Cg_NRMVG.js";import{b as lt,s as yl}from"../chunks/Bk6w-FME.js";import{s as Q}from"../chunks/BFNVwhcV.js";import{r as M,s as E}from"../chunks/B1B_G-Wy.js";import{p as zr}from"../chunks/BWdiOV1v.js";const bl=[];function oi(s,_=!1){return ur(s,new Map,"",bl)}function ur(s,_,n,A,T=null){if(typeof s=="object"&&s!==null){var F=_.get(s);if(F!==void 0)return F;if(s instanceof Map)return new Map(s);if(s instanceof Set)return new Set(s);if(ii(s)){var g=Array(s.length);_.set(s,g),T!==null&&_.set(T,g);for(var C=0;C<s.length;C+=1){var w=s[C];C in s&&(g[C]=ur(w,_,n,A))}return g}if(Hs(s)===Bs){g={},_.set(s,g),T!==null&&_.set(T,g);for(var O in s)g[O]=ur(s[O],_,n,A);return g}if(s instanceof Date)return structuredClone(s);if(typeof s.toJSON=="function")return ur(s.toJSON(),_,n,A,s)}if(s instanceof EventTarget)return s;try{return structuredClone(s)}catch{return s}}function yt(s,_){return _}function wl(s,_,n,A){for(var T=[],F=_.length,g=0;g<F;g++)al(_[g].e,T,!0);var C=F>0&&T.length===0&&n!==null;if(C){var w=n.parentNode;il(w),w.append(n),A.clear(),st(s,_[0].prev,_[F-1].next)}nl(T,()=>{for(var O=0;O<F;O++){var $=_[O];C||(A.delete($.k),st(s,$.prev,$.next)),sl($.e,!C)}})}function bt(s,_,n,A,T,F=null){var g=s,C={flags:_,items:new Map,first:null};{var w=s;g=gt?Wr(Gs(w)):w.appendChild(Ys())}gt&&Js();var O=null,$=!1,f=Ks(()=>{var x=n();return ii(x)?x:x==null?[]:li(x)});qs(()=>{var x=U(f),W=x.length;if($&&W===0)return;$=W===0;let I=!1;if(gt){var ee=g.data===Zs;ee!==(W===0)&&(g=Ka(),Wr(g),Ir(!1),I=!0)}if(gt){for(var q=null,b,B=0;B<W;B++){if(Nt.nodeType===8&&Nt.data===Qs){g=Nt,I=!0,Ir(!1);break}var ce=x[B],L=A(ce,B);b=ui(Nt,C,q,null,ce,L,B,T,_,n),C.items.set(L,b),q=b}W>0&&Wr(Ka())}gt||Tl(x,C,g,T,_,A,n),F!==null&&(W===0?O?ni(O):O=si(()=>F(g)):O!==null&&Xs(O,()=>{O=null})),I&&Ir(!0),U(f)}),gt&&(g=Nt)}function Tl(s,_,n,A,T,F,g){var C=s.length,w=_.items,O=_.first,$=O,f,x=null,W=[],I=[],ee,q,b,B;for(B=0;B<C;B+=1){if(ee=s[B],q=F(ee,B),b=w.get(q),b===void 0){var ce=$?$.e.nodes_start:n;x=ui(ce,_,x,x===null?_.first:x.next,ee,q,B,A,T,g),w.set(q,x),W=[],I=[],$=x.next;continue}if($l(b,ee,B),(b.e.f&Ur)!==0&&ni(b.e),b!==$){if(f!==void 0&&f.has(b)){if(W.length<I.length){var L=I[0],j;x=L.prev;var fe=W[0],ie=W[W.length-1];for(j=0;j<W.length;j+=1)ei(W[j],L,n);for(j=0;j<I.length;j+=1)f.delete(I[j]);st(_,fe.prev,ie.next),st(_,x,fe),st(_,ie,L),$=L,x=ie,B-=1,W=[],I=[]}else f.delete(b),ei(b,$,n),st(_,b.prev,b.next),st(_,b,x===null?_.first:x.next),st(_,x,b),x=b;continue}for(W=[],I=[];$!==null&&$.k!==q;)($.e.f&Ur)===0&&(f??(f=new Set)).add($),I.push($),$=$.next;if($===null)continue;b=$}W.push(b),x=b,$=b.next}if($!==null||f!==void 0){for(var le=f===void 0?[]:li(f);$!==null;)($.e.f&Ur)===0&&le.push($),$=$.next;var de=le.length;if(de>0){var Y=C===0?n:null;wl(_,le,Y,w)}}Za.first=_.first&&_.first.e,Za.last=x&&x.e}function $l(s,_,n,A){el(s.v,_),s.i=n}function ui(s,_,n,A,T,F,g,C,w,O){var $=(w&ll)!==0,f=(w&ol)===0,x=$?f?tl(T):Qa(T):T,W=(w&rl)===0?g:Qa(g),I={i:W,v:x,k:F,a:null,e:null,prev:n,next:A};try{return I.e=si(()=>C(s,x,W,O),gt),I.e.prev=n&&n.e,I.e.next=A&&A.e,n===null?_.first=I:(n.next=I,n.e.next=I.e),A!==null&&(A.prev=I,A.e.prev=I.e),I}finally{}}function ei(s,_,n){for(var A=s.next?s.next.e.nodes_start:n,T=_?_.e.nodes_start:n,F=s.e.nodes_start;F!==A;){var g=ul(F);T.before(F),F=g}}function st(s,_,n){_===null?s.first=n:(_.next=n,_.e.next=n&&n.e),n!==null&&(n.prev=_,n.e.prev=_&&_.e)}const Cl=""+new URL("../workers/icodecs-Dx2CCgwP.js",import.meta.url).href;class vi{constructor(_,n,A,T=8){Wt(this,"data");Wt(this,"width");Wt(this,"height");Wt(this,"depth");this.data=_,this.width=n,this.height=A,this.depth=T}}vi.prototype.colorSpace="srgb";var zt;(function(s){s[s.YUV444=1]="YUV444",s[s.YUV422=2]="YUV422",s[s.YUV420=3]="YUV420",s[s.YUV400=4]="YUV400"})(zt||(zt={}));var Ht;(function(s){s[s.Auto=0]="Auto",s[s.PSNR=1]="PSNR",s[s.SSIM=2]="SSIM"})(Ht||(Ht={}));const Fr={quality:50,qualityAlpha:-1,speed:6,subsample:zt.YUV420,autoTiling:!1,tileColsLog2:0,tileRowsLog2:0,chromaDeltaQ:!1,sharpness:0,denoiseLevel:0,tune:Ht.Auto,sharpYUV:!1},xl=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&xl.decode();const jr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};jr.encodeInto;var Or;(function(s){s[s.GRAYSCALE=1]="GRAYSCALE",s[s.RGB=2]="RGB",s[s.YCbCr=3]="YCbCr"})(Or||(Or={}));var Lr;(function(s){s[s.JPEG_Annex_K=0]="JPEG_Annex_K",s[s.Flat=1]="Flat",s[s.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",s[s.ImageMagick=3]="ImageMagick",s[s.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",s[s.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",s[s.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",s[s.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",s[s.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Lr||(Lr={}));Or.YCbCr,Lr.ImageMagick;var ti;(function(s){s[s.Default=-1]="Default",s[s.False=0]="False",s[s.True=1]="True"})(ti||(ti={}));var Dr;(function(s){s[s.Default=-1]="Default",s[s.Zero=0]="Zero",s[s.Left=1]="Left",s[s.Top=2]="Top",s[s.Average0=3]="Average0",s[s.Select=4]="Select",s[s.Gradient=5]="Gradient",s[s.Weighted=6]="Weighted",s[s.TopRight=7]="TopRight",s[s.TopLeft=8]="TopLeft",s[s.LeftLeft=9]="LeftLeft",s[s.Average1=10]="Average1",s[s.Average2=11]="Average2",s[s.Average3=12]="Average3",s[s.Average4=13]="Average4",s[s.Best=14]="Best",s[s.Variable=15]="Variable"})(Dr||(Dr={}));Dr.Default;var vr;(function(s){s[s.None=0]="None",s[s.SegmentSmooth=1]="SegmentSmooth",s[s.Dithering=2]="Dithering"})(vr||(vr={}));var It;(function(s){s[s.None=0]="None",s[s.Fast=1]="Fast",s[s.Best=2]="Best"})(It||(It={}));const ci={lossless:!1,nearLossless:100,quality:75,targetSize:0,targetPSNR:0,method:4,snsStrength:50,filterStrength:60,filterSharpness:0,filterType:!0,segments:4,pass:1,sharpYUV:!1,preprocessing:vr.None,autofilter:!1,partitionLimit:0,alphaCompression:1,alphaFiltering:It.Fast,alphaQuality:100,exact:!1,emulateJpegSize:!1,lowMemory:!1,partitions:0,showCompressed:0,imageHint:0,threadLevel:0,useDeltaPalette:0};var kl=(()=>{var s=import.meta.url;return function(_={}){var Ba;var n;function A(){return H.buffer!=D.buffer&&te(),D}function T(){return H.buffer!=D.buffer&&te(),ge}function F(){return H.buffer!=D.buffer&&te(),Ne}function g(){return H.buffer!=D.buffer&&te(),Oe}function C(){return H.buffer!=D.buffer&&te(),Te}function w(){return H.buffer!=D.buffer&&te(),$e}function O(){return H.buffer!=D.buffer&&te(),Ae}function $(){return H.buffer!=D.buffer&&te(),ze}var f=_,x,W,I=new Promise((e,t)=>{x=e,W=t}),ee=typeof window=="object",q=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var b=q&&((Ba=self.name)==null?void 0:Ba.startsWith("em-pthread")),B=Object.assign({},f),ce="./this.program",L=(e,t)=>{throw t},j="";function fe(e){return f.locateFile?f.locateFile(e,j):j+e}var ie,le;(ee||q)&&(q?j=self.location.href:typeof document<"u"&&document.currentScript&&(j=document.currentScript.src),s&&(j=s),j.startsWith("blob:")?j="":j=j.substr(0,j.replace(/[?#].*/,"").lastIndexOf("/")+1),q&&(le=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(new Error(t.status+" : "+t.url))));var de=f.print||console.log.bind(console),Y=f.printErr||console.error.bind(console);Object.assign(f,B),B=null,f.arguments&&f.arguments,f.thisProgram&&(ce=f.thisProgram);var se=f.wasmBinary,H,we,oe=!1,ne,D,ge,Ne,Oe,Te,$e,Ae,ze;function te(){var e=H.buffer;f.HEAP8=D=new Int8Array(e),f.HEAP16=Ne=new Int16Array(e),f.HEAPU8=ge=new Uint8Array(e),f.HEAPU16=Oe=new Uint16Array(e),f.HEAP32=Te=new Int32Array(e),f.HEAPU32=$e=new Uint32Array(e),f.HEAPF32=Ae=new Float32Array(e),f.HEAPF64=ze=new Float64Array(e)}if(b){let e=function(...a){var i=a.join(" ");console.error(i)},t=function(...a){var i=a.join(" ");postMessage({cmd:"alert",text:i,threadId:lr()})},r=function(a){try{var i=a.data,l=i.cmd;if(l==="load"){let u=[];self.onmessage=o=>u.push(o),self.startWorker=o=>{postMessage({cmd:"loaded"});for(let v of u)r(v);self.onmessage=r};for(const o of i.handlers)(!f[o]||f[o].proxy)&&(f[o]=(...v)=>{postMessage({cmd:"callHandler",handler:o,args:v})},o=="print"&&(de=f[o]),o=="printErr"&&(Y=f[o]));H=i.wasmMemory,te(),Pe(i.wasmModule)}else if(l==="run"){qt(i.pthread_ptr),Er(i.pthread_ptr,0,0,1,0,0),P.receiveObjectTransfer(i),P.threadInitTLS(),Cr(i.pthread_ptr),Ce||(ka(),Ce=!0);try{Ve(i.start_routine,i.arg)}catch(u){if(u!="unwind")throw u}}else i.target==="setimmediate"||(l==="checkMailbox"?Ce&&nr():l&&(Y(`worker: received unknown command ${l}`),Y(i)))}catch(u){throw Aa(),u}};var Pe,Ce=!1;f.printErr||(Y=e),self.alert=t,f.instantiateWasm=(a,i)=>new Promise((l,u)=>{Pe=o=>{var v=new WebAssembly.Instance(o,Be());i(v),l()}}),self.onunhandledrejection=a=>{throw a.reason||a},self.onmessage=r}if(!b){if(f.wasmMemory)H=f.wasmMemory;else{var Ke=f.INITIAL_MEMORY||16777216;H=new WebAssembly.Memory({initial:Ke/65536,maximum:32768,shared:!0})}te()}var V=[],J=[],K=[];function pe(){var e=f.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Le)),pt(V)}function xe(){b||pt(J)}function Ze(){if(!b){var e=f.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(ot)),pt(K)}}function Le(e){V.unshift(e)}function Qe(e){J.unshift(e)}function ot(e){K.unshift(e)}var Re=0,We=null;function Ie(e){var t;Re++,(t=f.monitorRunDependencies)==null||t.call(f,Re)}function He(e){var r;if(Re--,(r=f.monitorRunDependencies)==null||r.call(f,Re),Re==0&&We){var t=We;We=null,t()}}function De(e){var r;(r=f.onAbort)==null||r.call(f,e),e="Aborted("+e+")",Y(e),oe=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw W(t),t}var ut="data:application/octet-stream;base64,",Xe=e=>e.startsWith(ut);function nt(){if(f.locateFile){var e="heic-enc.wasm";return Xe(e)?e:fe(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var vt;function S(e){if(e==vt&&se)return new Uint8Array(se);if(le)return le(e);throw"both async and sync fetching of the wasm failed"}function ye(e){return se?Promise.resolve().then(()=>S(e)):ie(e).then(t=>new Uint8Array(t),()=>S(e))}function ue(e,t,r){return ye(e).then(a=>WebAssembly.instantiate(a,t)).then(r,a=>{Y(`failed to asynchronously prepare wasm: ${a}`),De(a)})}function Me(e,t,r,a){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Xe(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(i=>{var l=WebAssembly.instantiateStreaming(i,r);return l.then(a,function(u){return Y(`wasm streaming compile failed: ${u}`),Y("falling back to ArrayBuffer instantiation"),ue(t,r,a)})}):ue(t,r,a)}function Be(){return ys(),{a:Ca}}function Bt(){var e=Be();function t(a,i){return R=a.exports,_t(R.Wa),Gt=R.Va,Qe(R.Pa),we=i,He(),R}Ie();function r(a){t(a.instance,a.module)}if(f.instantiateWasm)try{return f.instantiateWasm(e,t)}catch(a){Y(`Module.instantiateWasm callback failed with error: ${a}`),W(a)}return vt??(vt=nt()),Me(se,vt,e,r).catch(W),{}}function wt(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Tt=e=>{e.terminate(),e.onmessage=t=>{}},$t=e=>{var t=P.pthreads[e];P.returnWorkerToPool(t)},ct=e=>{var t=P.getNewWorker();if(!t)return 6;P.runningWorkers.push(t),P.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.postMessage(r,e.transferList),0},ft=0,dt=()=>be||ft>0,Z=()=>Fa(),G=e=>Ua(e),Ct=e=>ja(e),Yt=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN,re=(e,t,r,...a)=>{for(var i=a.length,l=Z(),u=Ct(i*8),o=u>>3,v=0;v<a.length;v++){var h=a[v];$()[o+v]=h}var y=Sa(e,t,i,u,r);return G(l),y};function xt(e){var t;if(b)return re(0,0,1,e);ne=e,dt()||(P.terminateAllThreads(),(t=f.onExit)==null||t.call(f,e),oe=!0),L(e,new wt(e))}var kt=e=>{if(e instanceof wt||e=="unwind")return ne;L(1,e)};function At(e){if(b)return re(1,0,0,e);St(e)}var Ut=(e,t)=>{if(ne=e,b)throw At(e),"unwind";xt(e)},St=Ut,P={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){b||P.initMainThread()},initMainThread(){for(var e=2;e--;)P.allocateUnusedWorker();Le(()=>{Ie(),P.loadWasmModuleToAllWorkers(()=>He())})},terminateAllThreads:()=>{for(var e of P.runningWorkers)Tt(e);for(var e of P.unusedWorkers)Tt(e);P.unusedWorkers=[],P.runningWorkers=[],P.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete P.pthreads[t],P.unusedWorkers.push(e),P.runningWorkers.splice(P.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Ea(t)},receiveObjectTransfer(e){},threadInitTLS(){P.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(t=>{e.onmessage=l=>{var u=l.data,o=u.cmd;if(u.targetThread&&u.targetThread!=lr()){var v=P.pthreads[u.targetThread];v?v.postMessage(u,u.transferList):Y(`Internal error! Worker sent a message "${o}" to target pthread ${u.targetThread}, but that thread no longer exists!`);return}o==="checkMailbox"?nr():o==="spawnThread"?ct(u):o==="cleanupThread"?$t(u.thread):o==="loaded"?(e.loaded=!0,t(e)):o==="alert"?alert(`Thread ${u.threadId}: ${u.text}`):u.target==="setimmediate"?e.postMessage(u):o==="callHandler"?f[u.handler](...u.args):o&&Y(`worker sent an unknown command ${o}`)},e.onerror=l=>{var u="worker sent an error!";throw Y(`${u} ${l.filename}:${l.lineno}: ${l.message}`),l};var r=[],a=["onExit","onAbort","print","printErr"];for(var i of a)f.propertyIsEnumerable(i)&&r.push(i);e.postMessage({cmd:"load",handlers:r,wasmMemory:H,wasmModule:we})}),loadWasmModuleToAllWorkers(e){if(b)return e();Promise.all(P.unusedWorkers.map(P.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),P.unusedWorkers.push(e)},getNewWorker(){return P.unusedWorkers.length==0&&(P.allocateUnusedWorker(),P.loadWasmModuleToWorker(P.unusedWorkers[0])),P.unusedWorkers.pop()}},pt=e=>{e.forEach(t=>t(f))},qt=e=>{te();var t=w()[e+52>>2],r=w()[e+56>>2],a=t-r;Ia(t,a),G(t)},ht=[],Gt,m=e=>{var t=ht[e];return t||(e>=ht.length&&(ht.length=e+1),ht[e]=t=Gt.get(e)),t},Ve=(e,t)=>{ft=0,be=0;var r=m(e)(t);function a(i){dt()?ne=i:Pr(i)}a(r)},be=f.noExitRuntime||!0,_t=e=>P.tlsInitFunctions.push(e),Et=new TextDecoder,Jt=(e,t)=>{if(!e)return"";for(var r=e+t,a=e;!(a>=r)&&T()[a];)++a;return Et.decode(T().slice(e,a))},di=(e,t,r,a)=>{De(`Assertion failed: ${Jt(e)}, at: `+[t?Jt(t):"unknown filename",r,a?Jt(a):"unknown function"])},Kt=[],Zt=0,pi=e=>{var t=new dr(e);return t.get_caught()||(t.set_caught(!0),Zt--),t.set_rethrown(!1),Kt.push(t),La(e),Ma(e)},et=0,hi=()=>{X(0,0);var e=Kt.pop();Oa(e.excPtr),et=0};class dr{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){w()[this.ptr+4>>2]=t}get_type(){return w()[this.ptr+4>>2]}set_destructor(t){w()[this.ptr+8>>2]=t}get_destructor(){return w()[this.ptr+8>>2]}set_caught(t){t=t?1:0,A()[this.ptr+12]=t}get_caught(){return A()[this.ptr+12]!=0}set_rethrown(t){t=t?1:0,A()[this.ptr+13]=t}get_rethrown(){return A()[this.ptr+13]!=0}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){w()[this.ptr+16>>2]=t}get_adjusted_ptr(){return w()[this.ptr+16>>2]}}var _i=e=>{throw et||(et=e),et},Qt=e=>Wa(e),Hr=e=>{var t=et;if(!t)return Qt(0),0;var r=new dr(t);r.set_adjusted_ptr(t);var a=r.get_type();if(!a)return Qt(0),t;for(var i of e){if(i===0||i===a)break;var l=r.ptr+16;if(Da(i,a,l))return Qt(i),t}return Qt(a),t},mi=()=>Hr([]),gi=e=>Hr([e]),yi=()=>{var e=Kt.pop();e||De("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(Kt.push(e),e.set_rethrown(!0),e.set_caught(!1),Zt++),et=t,et},bi=(e,t,r)=>{var a=new dr(e);throw a.init(t,r),et=e,Zt++,et},wi=()=>Zt;function Br(e,t,r,a){return b?re(2,0,1,e,t,r,a):Yr(e,t,r,a)}var Ti=()=>typeof SharedArrayBuffer<"u",Yr=(e,t,r,a)=>{if(!Ti())return 6;var i=[],l=0;if(b&&(i.length===0||l))return Br(e,t,r,a);var u={startRoutine:r,pthread_ptr:e,arg:a,transferList:i};return b?(u.cmd="spawnThread",postMessage(u,i),0):ct(u)};function qr(e,t,r){return b?re(3,0,1,e,t,r):0}var $i=(e,t,r,a)=>{if(!(a>0))return 0;for(var i=r,l=r+a-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343){var v=e.charCodeAt(++u);o=65536+((o&1023)<<10)|v&1023}if(o<=127){if(r>=l)break;t[r++]=o}else if(o<=2047){if(r+1>=l)break;t[r++]=192|o>>6,t[r++]=128|o&63}else if(o<=65535){if(r+2>=l)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|o&63}else{if(r+3>=l)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|o&63}}return t[r]=0,r-i},jt=(e,t,r)=>$i(e,T(),t,r);function Gr(e,t,r){if(b)return re(4,0,1,e,t,r)}function Jr(e,t,r){return b?re(5,0,1,e,t,r):0}function Kr(e,t,r,a){if(b)return re(6,0,1,e,t,r,a)}function Zr(e,t,r,a){if(b)return re(7,0,1,e,t,r,a)}function Qr(e,t,r){if(b)return re(8,0,1,e,t,r)}var Ci=()=>{De("")},Xt={},pr=e=>{for(;e.length;){var t=e.pop(),r=e.pop();r(t)}};function Ft(e){return this.fromWireType(w()[e>>2])}var Pt={},mt={},er={},Xr,tr=e=>{throw new Xr(e)},hr=(e,t,r)=>{e.forEach(o=>er[o]=t);function a(o){var v=r(o);v.length!==e.length&&tr("Mismatched type converter count");for(var h=0;h<e.length;++h)Ye(e[h],v[h])}var i=new Array(t.length),l=[],u=0;t.forEach((o,v)=>{mt.hasOwnProperty(o)?i[v]=mt[o]:(l.push(o),Pt.hasOwnProperty(o)||(Pt[o]=[]),Pt[o].push(()=>{i[v]=mt[o],++u,u===l.length&&a(i)}))}),l.length===0&&a(i)},xi=e=>{var t=Xt[e];delete Xt[e];var r=t.rawConstructor,a=t.rawDestructor,i=t.fields,l=i.map(u=>u.getterReturnType).concat(i.map(u=>u.setterArgumentType));hr([e],l,u=>{var o={};return i.forEach((v,h)=>{var y=v.fieldName,k=u[h],z=v.getter,ve=v.getterContext,me=u[h+i.length],Ge=v.setter,it=v.setterContext;o[y]={read:ke=>k.fromWireType(z(ve,ke)),write:(ke,Vt)=>{var Se=[];Ge(it,ke,me.toWireType(Se,Vt)),pr(Se)}}}),[{name:t.name,fromWireType:v=>{var h={};for(var y in o)h[y]=o[y].read(v);return a(v),h},toWireType:(v,h)=>{for(var y in o)if(!(y in h))throw new TypeError(`Missing field: "${y}"`);var k=r();for(y in o)o[y].write(k,h[y]);return v!==null&&v.push(a,k),k},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction:a}]})},ki=(e,t,r,a,i)=>{},Ai=()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ea=e},ea,he=e=>{for(var t="",r=e;T()[r];)t+=ea[T()[r++]];return t},Ot,N=e=>{throw new Ot(e)};function Si(e,t,r={}){var a=t.name;if(e||N(`type "${a}" must have a positive integer typeid pointer`),mt.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;N(`Cannot register type '${a}' twice`)}if(mt[e]=t,delete er[e],Pt.hasOwnProperty(e)){var i=Pt[e];delete Pt[e],i.forEach(l=>l())}}function Ye(e,t,r={}){return Si(e,t,r)}var qe=8,Ei=(e,t,r,a)=>{t=he(t),Ye(e,{name:t,fromWireType:function(i){return!!i},toWireType:function(i,l){return l?r:a},argPackAdvance:qe,readValueFromPointer:function(i){return this.fromWireType(T()[i])},destructorFunction:null})},Pi=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),_r=e=>{function t(r){return r.$$.ptrType.registeredClass.name}N(t(e)+" instance already deleted")},mr=!1,ta=e=>{},Ri=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},ra=e=>{e.count.value-=1;var t=e.count.value===0;t&&Ri(e)},aa=(e,t,r)=>{if(t===r)return e;if(r.baseClass===void 0)return null;var a=aa(e,t,r.baseClass);return a===null?null:r.downcast(a)},ia={},Wi={},Ii=(e,t)=>{for(t===void 0&&N("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},Ui=(e,t)=>(t=Ii(e,t),Wi[t]),rr=(e,t)=>{(!t.ptrType||!t.ptr)&&tr("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,a=!!t.smartPtr;return r!==a&&tr("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Lt(Object.create(e,{$$:{value:t,writable:!0}}))};function ji(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Ui(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var a=r.clone();return this.destructor(e),a}function i(){return this.isSmartPointer?rr(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):rr(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var l=this.registeredClass.getActualType(t),u=ia[l];if(!u)return i.call(this);var o;this.isConst?o=u.constPointerType:o=u.pointerType;var v=aa(t,this.registeredClass,o.registeredClass);return v===null?i.call(this):this.isSmartPointer?rr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v,smartPtrType:this,smartPtr:e}):rr(o.registeredClass.instancePrototype,{ptrType:o,ptr:v})}var Lt=e=>typeof FinalizationRegistry>"u"?(Lt=t=>t,e):(mr=new FinalizationRegistry(t=>{ra(t.$$)}),Lt=t=>{var r=t.$$,a=!!r.smartPtr;if(a){var i={$$:r};mr.register(t,i,t)}return t},ta=t=>mr.unregister(t),Lt(e)),Fi=()=>{Object.assign(ar.prototype,{isAliasOf(e){if(!(this instanceof ar)||!(e instanceof ar))return!1;var t=this.$$.ptrType.registeredClass,r=this.$$.ptr;e.$$=e.$$;for(var a=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;a.baseClass;)i=a.upcast(i),a=a.baseClass;return t===a&&r===i},clone(){if(this.$$.ptr||_r(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Lt(Object.create(Object.getPrototypeOf(this),{$$:{value:Pi(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),ta(this),ra(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||_r(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&N("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function ar(){}var Rt=(e,t)=>Object.defineProperty(t,"name",{value:e}),Oi=(e,t,r)=>{if(e[t].overloadTable===void 0){var a=e[t];e[t]=function(...i){return e[t].overloadTable.hasOwnProperty(i.length)||N(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[a.argCount]=a}},gr=(e,t,r)=>{f.hasOwnProperty(e)?((r===void 0||f[e].overloadTable!==void 0&&f[e].overloadTable[r]!==void 0)&&N(`Cannot register public name '${e}' twice`),Oi(f,e,e),f.hasOwnProperty(r)&&N(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),f[e].overloadTable[r]=t):(f[e]=t,r!==void 0&&(f[e].numArguments=r))},Li=48,Di=57,Mi=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Li&&t<=Di?`_${e}`:e};function Vi(e,t,r,a,i,l,u,o){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=a,this.baseClass=i,this.getActualType=l,this.upcast=u,this.downcast=o,this.pureVirtualFunctions=[]}var yr=(e,t,r)=>{for(;t!==r;)t.upcast||N(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e};function Ni(e,t){if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;t.$$||N(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}function zi(e,t){var r;if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&N(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&N(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var a=t.$$.ptrType.registeredClass;if(r=yr(t.$$.ptr,a,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&N("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:N(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,_e.toHandle(()=>i.delete())),e!==null&&e.push(this.rawDestructor,r)}break;default:N("Unsupporting sharing policy")}return r}function Hi(e,t){if(t===null)return this.isReference&&N(`null is not a valid ${this.name}`),0;t.$$||N(`Cannot pass "${$r(t)}" as a ${this.name}`),t.$$.ptr||N(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&N(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass,a=yr(t.$$.ptr,r,this.registeredClass);return a}var Bi=()=>{Object.assign(ir.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;(t=this.rawDestructor)==null||t.call(this,e)},argPackAdvance:qe,readValueFromPointer:Ft,fromWireType:ji})};function ir(e,t,r,a,i,l,u,o,v,h,y){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=a,this.isSmartPointer=i,this.pointeeType=l,this.sharingPolicy=u,this.rawGetPointee=o,this.rawConstructor=v,this.rawShare=h,this.rawDestructor=y,!i&&t.baseClass===void 0?a?(this.toWireType=Ni,this.destructorFunction=null):(this.toWireType=Hi,this.destructorFunction=null):this.toWireType=zi}var na=(e,t,r)=>{f.hasOwnProperty(e)||tr("Replacing nonexistent public symbol"),f[e].overloadTable!==void 0&&r!==void 0?f[e].overloadTable[r]=t:(f[e]=t,f[e].argCount=r)},Yi=(e,t,r)=>{e=e.replace(/p/g,"i");var a=f["dynCall_"+e];return a(t,...r)},qi=(e,t,r=[])=>{if(e.includes("j"))return Yi(e,t,r);var a=m(t)(...r);return a},Gi=(e,t)=>(...r)=>qi(e,t,r),tt=(e,t)=>{e=he(e);function r(){return e.includes("j")?Gi(e,t):m(t)}var a=r();return typeof a!="function"&&N(`unknown function pointer with signature ${e}: ${t}`),a},Ji=(e,t)=>{var r=Rt(t,function(a){this.name=t,this.message=a;var i=new Error(a).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r},sa,la=e=>{var t=xa(e),r=he(t);return at(t),r},oa=(e,t)=>{var r=[],a={};function i(l){if(!a[l]&&!mt[l]){if(er[l]){er[l].forEach(i);return}r.push(l),a[l]=!0}}throw t.forEach(i),new sa(`${e}: `+r.map(la).join([", "]))},Ki=(e,t,r,a,i,l,u,o,v,h,y,k,z)=>{y=he(y),l=tt(i,l),o&&(o=tt(u,o)),h&&(h=tt(v,h)),z=tt(k,z);var ve=Mi(y);gr(ve,function(){oa(`Cannot construct ${y} due to unbound types`,[a])}),hr([e,t,r],a?[a]:[],me=>{var Ga;me=me[0];var Ge,it;a?(Ge=me.registeredClass,it=Ge.instancePrototype):it=ar.prototype;var ke=Rt(y,function(...Rr){if(Object.getPrototypeOf(this)!==Vt)throw new Ot("Use 'new' to construct "+y);if(Se.constructor_body===void 0)throw new Ot(y+" has no accessible constructor");var Ja=Se.constructor_body[Rr.length];if(Ja===void 0)throw new Ot(`Tried to invoke ctor of ${y} with invalid number of parameters (${Rr.length}) - expected (${Object.keys(Se.constructor_body).toString()}) parameters instead!`);return Ja.apply(this,Rr)}),Vt=Object.create(it,{constructor:{value:ke}});ke.prototype=Vt;var Se=new Vi(y,ke,Vt,z,Ge,l,o,h);Se.baseClass&&((Ga=Se.baseClass).__derivedClasses??(Ga.__derivedClasses=[]),Se.baseClass.__derivedClasses.push(Se));var Vs=new ir(y,Se,!0,!1,!1),Ya=new ir(y+"*",Se,!1,!1,!1),qa=new ir(y+" const*",Se,!1,!0,!1);return ia[e]={pointerType:Ya,constPointerType:qa},na(ve,ke),[Vs,Ya,qa]})},br=[],rt=[],wr=e=>{e>9&&--rt[e+1]===0&&(rt[e]=void 0,br.push(e))},Zi=()=>rt.length/2-5-br.length,Qi=()=>{rt.push(0,1,void 0,1,null,1,!0,1,!1,1),f.count_emval_handles=Zi},_e={toValue:e=>(e||N("Cannot use deleted val. handle = "+e),rt[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=br.pop()||rt.length;return rt[t]=e,rt[t+1]=1,t}}}},Xi={name:"emscripten::val",fromWireType:e=>{var t=_e.toValue(e);return wr(e),t},toWireType:(e,t)=>_e.toHandle(t),argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction:null},en=e=>Ye(e,Xi),tn=(e,t,r)=>{switch(t){case 1:return r?function(a){return this.fromWireType(A()[a])}:function(a){return this.fromWireType(T()[a])};case 2:return r?function(a){return this.fromWireType(F()[a>>1])}:function(a){return this.fromWireType(g()[a>>1])};case 4:return r?function(a){return this.fromWireType(C()[a>>2])}:function(a){return this.fromWireType(w()[a>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},rn=(e,t,r,a)=>{t=he(t);function i(){}i.values={},Ye(e,{name:t,constructor:i,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,u)=>u.value,argPackAdvance:qe,readValueFromPointer:tn(t,r,a),destructorFunction:null}),gr(t,i)},Tr=(e,t)=>{var r=mt[e];return r===void 0&&N(`${t} has unknown type ${la(e)}`),r},an=(e,t,r)=>{var a=Tr(e,"enum");t=he(t);var i=a.constructor,l=Object.create(a.constructor.prototype,{value:{value:r},constructor:{value:Rt(`${a.name}_${t}`,function(){})}});i.values[r]=l,i[t]=l},$r=e=>{if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},nn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(O()[r>>2])};case 8:return function(r){return this.fromWireType($()[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},sn=(e,t,r)=>{t=he(t),Ye(e,{name:t,fromWireType:a=>a,toWireType:(a,i)=>i,argPackAdvance:qe,readValueFromPointer:nn(t,r),destructorFunction:null})};function ua(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].destructorFunction===void 0)return!0;return!1}function va(e,t){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var r=Rt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var a=new r,i=e.apply(a,t);return i instanceof Object?i:a}function ln(e,t,r,a){for(var i=ua(e),l=e.length-2,u=[],o=["fn"],v=0;v<l;++v)u.push(`arg${v}`),o.push(`arg${v}Wired`);u=u.join(","),o=o.join(",");var h=`return function (${u}) {
`;i&&(h+=`var destructors = [];
`);for(var y=i?"destructors":"null",k=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=0;v<l;++v)h+=`var arg${v}Wired = argType${v}['toWireType'](${y}, arg${v});
`,k.push(`argType${v}`);if(h+=(r||a?"var rv = ":"")+`invoker(${o});
`,i)h+=`runDestructors(destructors);
`;else for(var v=2;v<e.length;++v){var z=v===1?"thisWired":"arg"+(v-2)+"Wired";e[v].destructorFunction!==null&&(h+=`${z}_dtor(${z});
`,k.push(`${z}_dtor`))}return r&&(h+=`var ret = retType['fromWireType'](rv);
return ret;
`),h+=`}
`,[k,h]}function on(e,t,r,a,i,l){var u=t.length;u<2&&N("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=t[1]!==null&&r!==null,v=ua(t),h=t[0].name!=="void",y=[e,N,a,i,pr,t[0],t[1]],k=0;k<u-2;++k)y.push(t[k+2]);if(!v)for(var k=2;k<t.length;++k)t[k].destructorFunction!==null&&y.push(t[k].destructorFunction);let[z,ve]=ln(t,o,h,l);z.push(ve);var me=va(Function,z)(...y);return Rt(e,me)}var un=(e,t)=>{for(var r=[],a=0;a<e;a++)r.push(w()[t+a*4>>2]);return r},vn=e=>{e=e.trim();const t=e.indexOf("(");return t!==-1?e.substr(0,t):e},cn=(e,t,r,a,i,l,u,o)=>{var v=un(t,r);e=he(e),e=vn(e),i=tt(a,i),gr(e,function(){oa(`Cannot call ${e} due to unbound types`,v)},t-1),hr([],v,h=>{var y=[h[0],null].concat(h.slice(1));return na(e,on(e,y,null,i,l,u),t-1),[]})},fn=(e,t,r)=>{switch(t){case 1:return r?a=>A()[a]:a=>T()[a];case 2:return r?a=>F()[a>>1]:a=>g()[a>>1];case 4:return r?a=>C()[a>>2]:a=>w()[a>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},dn=(e,t,r,a,i)=>{t=he(t);var l=y=>y;if(a===0){var u=32-8*r;l=y=>y<<u>>>u}var o=t.includes("unsigned"),v=(y,k)=>{},h;o?h=function(y,k){return v(k,this.name),k>>>0}:h=function(y,k){return v(k,this.name),k},Ye(e,{name:t,fromWireType:l,toWireType:h,argPackAdvance:qe,readValueFromPointer:fn(t,r,a!==0),destructorFunction:null})},pn=(e,t,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=a[t];function l(u){var o=w()[u>>2],v=w()[u+4>>2];return new i(A().buffer,v,o)}r=he(r),Ye(e,{name:r,fromWireType:l,argPackAdvance:qe,readValueFromPointer:l},{ignoreDuplicateRegistrations:!0})},hn=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a<=127?t++:a<=2047?t+=2:a>=55296&&a<=57343?(t+=4,++r):t+=3}return t},_n=(e,t)=>{t=he(t);var r=t==="std::string";Ye(e,{name:t,fromWireType(a){var i=w()[a>>2],l=a+4,u;if(r)for(var o=l,v=0;v<=i;++v){var h=l+v;if(v==i||T()[h]==0){var y=h-o,k=Jt(o,y);u===void 0?u=k:(u+="\0",u+=k),o=h+1}}else{for(var z=new Array(i),v=0;v<i;++v)z[v]=String.fromCharCode(T()[l+v]);u=z.join("")}return at(a),u},toWireType(a,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var l,u=typeof i=="string";u||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||N("Cannot pass non-string to std::string"),r&&u?l=hn(i):l=i.length;var o=Sr(4+l+1),v=o+4;if(w()[o>>2]=l,r&&u)jt(i,v,l+1);else if(u)for(var h=0;h<l;++h){var y=i.charCodeAt(h);y>255&&(at(v),N("String has UTF-16 code units that do not fit in 8 bits")),T()[v+h]=y}else for(var h=0;h<l;++h)T()[v+h]=i[h];return a!==null&&a.push(at,o),o},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction(a){at(a)}})},mn=new TextDecoder("utf-16le"),gn=(e,t)=>{for(var r=e,a=r>>1,i=a+t/2;!(a>=i)&&g()[a];)++a;return r=a<<1,mn.decode(T().slice(e,r))},yn=(e,t,r)=>{if(r??(r=2147483647),r<2)return 0;r-=2;for(var a=t,i=r<e.length*2?r/2:e.length,l=0;l<i;++l){var u=e.charCodeAt(l);F()[t>>1]=u,t+=2}return F()[t>>1]=0,t-a},bn=e=>e.length*2,wn=(e,t)=>{for(var r=0,a="";!(r>=t/4);){var i=C()[e+r*4>>2];if(i==0)break;if(++r,i>=65536){var l=i-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}else a+=String.fromCharCode(i)}return a},Tn=(e,t,r)=>{if(r??(r=2147483647),r<4)return 0;for(var a=t,i=a+r-4,l=0;l<e.length;++l){var u=e.charCodeAt(l);if(u>=55296&&u<=57343){var o=e.charCodeAt(++l);u=65536+((u&1023)<<10)|o&1023}if(C()[t>>2]=u,t+=4,t+4>i)break}return C()[t>>2]=0,t-a},$n=e=>{for(var t=0,r=0;r<e.length;++r){var a=e.charCodeAt(r);a>=55296&&a<=57343&&++r,t+=4}return t},Cn=(e,t,r)=>{r=he(r);var a,i,l,u;t===2?(a=gn,i=yn,u=bn,l=o=>g()[o>>1]):t===4&&(a=wn,i=Tn,u=$n,l=o=>w()[o>>2]),Ye(e,{name:r,fromWireType:o=>{for(var v=w()[o>>2],h,y=o+4,k=0;k<=v;++k){var z=o+4+k*t;if(k==v||l(z)==0){var ve=z-y,me=a(y,ve);h===void 0?h=me:(h+="\0",h+=me),y=z+t}}return at(o),h},toWireType:(o,v)=>{typeof v!="string"&&N(`Cannot pass non-string to C++ string type ${r}`);var h=u(v),y=Sr(4+h+t);return w()[y>>2]=h/t,i(v,y+4,h+t),o!==null&&o.push(at,y),y},argPackAdvance:qe,readValueFromPointer:Ft,destructorFunction(o){at(o)}})},xn=(e,t,r,a,i,l)=>{Xt[e]={name:he(t),rawConstructor:tt(r,a),rawDestructor:tt(i,l),fields:[]}},kn=(e,t,r,a,i,l,u,o,v,h)=>{Xt[e].fields.push({fieldName:he(t),getterReturnType:r,getter:tt(a,i),getterContext:l,setterArgumentType:u,setter:tt(o,v),setterContext:h})},An=(e,t)=>{t=he(t),Ye(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:(r,a)=>{}})},Sn=1,En=()=>Sn,Pn=e=>{Er(e,!q,1,!ee,2097152,!1),P.threadInitTLS()},Rn=()=>{if(!dt())try{b?Pr(ne):St(ne)}catch(e){kt(e)}},ca=e=>{if(!oe)try{e(),Rn()}catch(t){kt(t)}},Cr=e=>{if(typeof Atomics.waitAsync=="function"){var t=Atomics.waitAsync(C(),e>>2,e);t.value.then(nr);var r=e+128;Atomics.store(C(),r>>2,1)}},nr=()=>{var e=lr();e&&(Cr(e),ca(Ra))},Wn=(e,t)=>{if(e==t)setTimeout(nr);else if(b)postMessage({targetThread:e,cmd:"checkMailbox"});else{var r=P.pthreads[e];if(!r)return;r.postMessage({cmd:"checkMailbox"})}},xr=[],In=(e,t,r,a,i)=>{xr.length=a;for(var l=i>>3,u=0;u<a;u++)xr[u]=$()[l+u];var o=gs[e];P.currentProxiedOperationCallerThread=r;var v=o(...xr);return P.currentProxiedOperationCallerThread=0,v},Un=()=>{be=!1,ft=0},jn=e=>{b?postMessage({cmd:"cleanupThread",thread:e}):$t(e)},Fn=e=>{},sr=[],On=(e,t,r,a)=>(e=sr[e],t=_e.toValue(t),e(null,t,r,a)),Ln={},kr=e=>{var t=Ln[e];return t===void 0?he(e):t},Dn=(e,t,r,a,i)=>(e=sr[e],t=_e.toValue(t),r=kr(r),e(t,t[r],a,i)),fa=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),Mn=e=>e===0?_e.toHandle(fa()):(e=kr(e),_e.toHandle(fa()[e])),Vn=e=>{var t=sr.length;return sr.push(e),t},Nn=(e,t)=>{for(var r=new Array(e),a=0;a<e;++a)r[a]=Tr(w()[t+a*4>>2],"parameter "+a);return r},zn=(e,t,r)=>{var a=[],i=e.toWireType(a,r);return a.length&&(w()[t>>2]=_e.toHandle(a)),i},Hn=(e,t,r)=>{var a=Nn(e,t),i=a.shift();e--;var l=`return function (obj, func, destructorsRef, args) {
`,u=0,o=[];r===0&&o.push("obj");for(var v=["retType"],h=[i],y=0;y<e;++y)o.push("arg"+y),v.push("argType"+y),h.push(a[y]),l+=`  var arg${y} = argType${y}.readValueFromPointer(args${u?"+"+u:""});
`,u+=a[y].argPackAdvance;var k=r===1?"new func":"func.call";l+=`  var rv = ${k}(${o.join(", ")});
`,i.isVoid||(v.push("emval_returnValue"),h.push(zn),l+=`  return emval_returnValue(retType, destructorsRef, rv);
`),l+=`};
`,v.push(l);var z=va(Function,v)(...h),ve=`methodCaller<(${a.map(me=>me.name).join(", ")}) => ${i.name}>`;return Vn(Rt(ve,z))},Bn=e=>{e>9&&(rt[e+1]+=1)},Yn=()=>_e.toHandle([]),qn=e=>_e.toHandle(kr(e)),Gn=()=>_e.toHandle({}),Jn=e=>{var t=_e.toValue(e);pr(t),wr(e)},Kn=(e,t,r)=>{e=_e.toValue(e),t=_e.toValue(t),r=_e.toValue(r),e[t]=r},Zn=(e,t)=>{e=Tr(e,"_emval_take_value");var r=e.readValueFromPointer(t);return _e.toHandle(r)},Qn=e=>e%4===0&&(e%100!==0||e%400===0),Xn=[0,31,60,91,121,152,182,213,244,274,305,335],es=[0,31,59,90,120,151,181,212,243,273,304,334],ts=e=>{var t=Qn(e.getFullYear()),r=t?Xn:es,a=r[e.getMonth()]+e.getDate()-1;return a};function rs(e,t,r){var a=Yt(e,t),i=new Date(a*1e3);C()[r>>2]=i.getSeconds(),C()[r+4>>2]=i.getMinutes(),C()[r+8>>2]=i.getHours(),C()[r+12>>2]=i.getDate(),C()[r+16>>2]=i.getMonth(),C()[r+20>>2]=i.getFullYear()-1900,C()[r+24>>2]=i.getDay();var l=ts(i)|0;C()[r+28>>2]=l,C()[r+36>>2]=-(i.getTimezoneOffset()*60);var u=new Date(i.getFullYear(),0,1),o=new Date(i.getFullYear(),6,1).getTimezoneOffset(),v=u.getTimezoneOffset(),h=(o!=v&&i.getTimezoneOffset()==Math.min(v,o))|0;C()[r+32>>2]=h}function da(e,t,r,a,i,l,u,o){return b?re(9,0,1,e,t,r,a,i,l,u,o):-52}function pa(e,t,r,a,i,l,u){if(b)return re(10,0,1,e,t,r,a,i,l,u)}var Dt={},ha=()=>performance.timeOrigin+performance.now();function _a(e,t){if(b)return re(11,0,1,e,t);if(Dt[e]&&(clearTimeout(Dt[e].id),delete Dt[e]),!t)return 0;var r=setTimeout(()=>{delete Dt[e],ca(()=>Pa(e,ha()))},t);return Dt[e]={id:r,timeout_ms:t},0}var as=(e,t,r,a)=>{var i=new Date().getFullYear(),l=new Date(i,0,1),u=new Date(i,6,1),o=l.getTimezoneOffset(),v=u.getTimezoneOffset(),h=Math.max(o,v);w()[e>>2]=h*60,C()[t>>2]=+(o!=v);var y=ve=>{var me=ve>=0?"-":"+",Ge=Math.abs(ve),it=String(Math.floor(Ge/60)).padStart(2,"0"),ke=String(Ge%60).padStart(2,"0");return`UTC${me}${it}${ke}`},k=y(o),z=y(v);v<o?(jt(k,r,17),jt(z,a,17)):(jt(k,a,17),jt(z,r,17))},is=()=>{},ns=()=>Date.now(),ss=()=>{ft+=1},ls=()=>{throw ss(),"unwind"},ma=()=>2147483648,os=()=>ma(),us=()=>1,vs=(e,t)=>Math.ceil(e/t)*t,cs=e=>{var t=H.buffer,r=(e-t.byteLength+65535)/65536|0;try{return H.grow(r),te(),1}catch{}},fs=e=>{var t=T().length;if(e>>>=0,e<=t)return!1;var r=ma();if(e>r)return!1;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);i=Math.min(i,e+100663296);var l=Math.min(r,vs(Math.max(e,i),65536)),u=cs(l);if(u)return!0}return!1},Ar={},ds=()=>ce||"./this.program",Mt=()=>{if(!Mt.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:ds()};for(var r in Ar)Ar[r]===void 0?delete t[r]:t[r]=Ar[r];var a=[];for(var r in t)a.push(`${r}=${t[r]}`);Mt.strings=a}return Mt.strings},ps=(e,t)=>{for(var r=0;r<e.length;++r)A()[t++]=e.charCodeAt(r);A()[t]=0},ga=function(e,t){if(b)return re(12,0,1,e,t);var r=0;return Mt().forEach((a,i)=>{var l=t+r;w()[e+i*4>>2]=l,ps(a,l),r+=a.length+1}),0},ya=function(e,t){if(b)return re(13,0,1,e,t);var r=Mt();w()[e>>2]=r.length;var a=0;return r.forEach(i=>a+=i.length+1),w()[t>>2]=a,0};function ba(e){return b?re(14,0,1,e):52}function wa(e,t,r,a){return b?re(15,0,1,e,t,r,a):52}function Ta(e,t,r,a,i){return b?re(16,0,1,e,t,r,a,i):70}var hs=[null,[],[]],_s=(e,t=0,r=NaN)=>{for(var a=t+r,i=t;e[i]&&!(i>=a);)++i;return Et.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(t,i):e.subarray(t,i):new Uint8Array(e.slice(t,i)))},ms=(e,t)=>{var r=hs[e];t===0||t===10?((e===1?de:Y)(_s(r)),r.length=0):r.push(t)};function $a(e,t,r,a){if(b)return re(17,0,1,e,t,r,a);for(var i=0,l=0;l<r;l++){var u=w()[t>>2],o=w()[t+4>>2];t+=8;for(var v=0;v<o;v++)ms(e,T()[u+v]);i+=o}return w()[a>>2]=i,0}P.init(),Xr=f.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},Ai(),Ot=f.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Fi(),Bi(),sa=f.UnboundTypeError=Ji(Error,"UnboundTypeError"),Qi();var gs=[xt,At,Br,qr,Gr,Jr,Kr,Zr,Qr,da,pa,_a,ga,ya,ba,wa,Ta,$a],Ca;function ys(){Ca={$:di,r:pi,x:hi,b:mi,i:gi,U:yi,w:bi,pa:wi,ya:Yr,e:_i,X:qr,wa:Gr,Fa:Jr,Y:Kr,va:Zr,ra:Qr,Ja:Ci,da:xi,ka:ki,Ma:Ei,L:Ki,La:en,z:rn,d:an,_:sn,p:cn,A:dn,n:pn,aa:_n,M:Cn,O:xn,G:kn,Na:An,Ia:En,Ca:Pn,sa:Wn,za:In,na:Un,S:jn,Ba:Cr,Ha:Fn,Oa:On,Ka:Dn,l:wr,N:Mn,ca:Hn,R:Bn,Z:Yn,v:qn,F:Gn,ba:Jn,t:Kn,o:Zn,ia:rs,ga:da,ha:pa,oa:_a,Aa:as,T:is,K:ns,Ga:ls,ta:os,y:ha,ua:us,qa:fs,Da:ga,Ea:ya,xa:St,E:ba,W:wa,ja:Ta,V:$a,I:Ps,c:bs,f:As,u:Es,la:Is,H:Ws,B:Fs,P:Us,D:Os,fa:Ds,ea:Ms,h:Ss,k:Ts,g:Rs,m:$s,j:xs,J:Cs,Q:ks,s:js,q:ws,C:Ls,a:H,ma:xt}}var R=Bt(),lr=()=>(lr=R.Qa)(),Sr=e=>(Sr=R.Ra)(e),xa=e=>(xa=R.Sa)(e),ka=()=>(ka=R.Ta)(),at=e=>(at=R.Ua)(e),Er=(e,t,r,a,i,l)=>(Er=R.Xa)(e,t,r,a,i,l),Aa=()=>(Aa=R.Ya)(),Sa=(e,t,r,a,i)=>(Sa=R.Za)(e,t,r,a,i),Ea=e=>(Ea=R._a)(e),Pr=e=>(Pr=R.$a)(e),Pa=(e,t)=>(Pa=R.ab)(e,t),Ra=()=>(Ra=R.bb)(),X=(e,t)=>(X=R.cb)(e,t),Wa=e=>(Wa=R.db)(e),Ia=(e,t)=>(Ia=R.eb)(e,t),Ua=e=>(Ua=R.fb)(e),ja=e=>(ja=R.gb)(e),Fa=()=>(Fa=R.hb)(),Oa=e=>(Oa=R.ib)(e),La=e=>(La=R.jb)(e),Da=(e,t,r)=>(Da=R.kb)(e,t,r),Ma=e=>(Ma=R.lb)(e);f.dynCall_ji=(e,t)=>(f.dynCall_ji=R.mb)(e,t);var Va=f.dynCall_iij=(e,t,r,a)=>(Va=f.dynCall_iij=R.nb)(e,t,r,a);f.dynCall_jijj=(e,t,r,a,i,l)=>(f.dynCall_jijj=R.ob)(e,t,r,a,i,l),f.dynCall_vijj=(e,t,r,a,i,l)=>(f.dynCall_vijj=R.pb)(e,t,r,a,i,l),f.dynCall_jiiiii=(e,t,r,a,i,l)=>(f.dynCall_jiiiii=R.qb)(e,t,r,a,i,l),f.dynCall_jii=(e,t,r)=>(f.dynCall_jii=R.rb)(e,t,r),f.dynCall_jiiii=(e,t,r,a,i)=>(f.dynCall_jiiii=R.sb)(e,t,r,a,i),f.dynCall_jiji=(e,t,r,a,i)=>(f.dynCall_jiji=R.tb)(e,t,r,a,i);var Na=f.dynCall_iiiiij=(e,t,r,a,i,l,u)=>(Na=f.dynCall_iiiiij=R.ub)(e,t,r,a,i,l,u);f.dynCall_viijii=(e,t,r,a,i,l,u)=>(f.dynCall_viijii=R.vb)(e,t,r,a,i,l,u),f.dynCall_iiiiijj=(e,t,r,a,i,l,u,o,v)=>(f.dynCall_iiiiijj=R.wb)(e,t,r,a,i,l,u,o,v),f.dynCall_iiiiiijj=(e,t,r,a,i,l,u,o,v,h)=>(f.dynCall_iiiiiijj=R.xb)(e,t,r,a,i,l,u,o,v,h);function bs(e,t){var r=Z();try{return m(e)(t)}catch(a){if(G(r),a!==a+0)throw a;X(1,0)}}function ws(e,t,r,a,i,l,u,o,v,h,y){var k=Z();try{m(e)(t,r,a,i,l,u,o,v,h,y)}catch(z){if(G(k),z!==z+0)throw z;X(1,0)}}function Ts(e,t){var r=Z();try{m(e)(t)}catch(a){if(G(r),a!==a+0)throw a;X(1,0)}}function $s(e,t,r,a){var i=Z();try{m(e)(t,r,a)}catch(l){if(G(i),l!==l+0)throw l;X(1,0)}}function Cs(e,t,r,a,i,l){var u=Z();try{m(e)(t,r,a,i,l)}catch(o){if(G(u),o!==o+0)throw o;X(1,0)}}function xs(e,t,r,a,i){var l=Z();try{m(e)(t,r,a,i)}catch(u){if(G(l),u!==u+0)throw u;X(1,0)}}function ks(e,t,r,a,i,l,u){var o=Z();try{m(e)(t,r,a,i,l,u)}catch(v){if(G(o),v!==v+0)throw v;X(1,0)}}function As(e,t,r){var a=Z();try{return m(e)(t,r)}catch(i){if(G(a),i!==i+0)throw i;X(1,0)}}function Ss(e){var t=Z();try{m(e)()}catch(r){if(G(t),r!==r+0)throw r;X(1,0)}}function Es(e,t,r,a){var i=Z();try{return m(e)(t,r,a)}catch(l){if(G(i),l!==l+0)throw l;X(1,0)}}function Ps(e){var t=Z();try{return m(e)()}catch(r){if(G(t),r!==r+0)throw r;X(1,0)}}function Rs(e,t,r){var a=Z();try{m(e)(t,r)}catch(i){if(G(a),i!==i+0)throw i;X(1,0)}}function Ws(e,t,r,a,i,l){var u=Z();try{return m(e)(t,r,a,i,l)}catch(o){if(G(u),o!==o+0)throw o;X(1,0)}}function Is(e,t,r,a,i,l){var u=Z();try{return m(e)(t,r,a,i,l)}catch(o){if(G(u),o!==o+0)throw o;X(1,0)}}function Us(e,t,r,a,i,l,u,o){var v=Z();try{return m(e)(t,r,a,i,l,u,o)}catch(h){if(G(v),h!==h+0)throw h;X(1,0)}}function js(e,t,r,a,i,l,u,o){var v=Z();try{m(e)(t,r,a,i,l,u,o)}catch(h){if(G(v),h!==h+0)throw h;X(1,0)}}function Fs(e,t,r,a,i,l,u){var o=Z();try{return m(e)(t,r,a,i,l,u)}catch(v){if(G(o),v!==v+0)throw v;X(1,0)}}function Os(e,t,r,a,i,l,u,o,v,h,y,k){var z=Z();try{return m(e)(t,r,a,i,l,u,o,v,h,y,k)}catch(ve){if(G(z),ve!==ve+0)throw ve;X(1,0)}}function Ls(e,t,r,a,i,l,u,o,v,h,y,k,z,ve,me,Ge){var it=Z();try{m(e)(t,r,a,i,l,u,o,v,h,y,k,z,ve,me,Ge)}catch(ke){if(G(it),ke!==ke+0)throw ke;X(1,0)}}function Ds(e,t,r,a,i,l,u){var o=Z();try{return Na(e,t,r,a,i,l,u)}catch(v){if(G(o),v!==v+0)throw v;X(1,0)}}function Ms(e,t,r,a){var i=Z();try{return Va(e,t,r,a)}catch(l){if(G(i),l!==l+0)throw l;X(1,0)}}var or,za;We=function e(){or||Ha(),or||(We=e)};function Ha(){if(Re>0)return;if(b){x(f),xe(),startWorker(f);return}if(!za&&(za=1,pe(),Re>0))return;function e(){var t;or||(or=1,f.calledRun=1,!oe&&(xe(),x(f),(t=f.onRuntimeInitialized)==null||t.call(f),Ze()))}f.setStatus?(f.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>f.setStatus(""),1),e()},1)):e()}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return Ha(),n=I,n}})(),ri,ai,Al=(ai=(ri=globalThis.self)==null?void 0:ri.name)==null?void 0:ai.startsWith("em-pthread");Al&&kl();const Sl=["ultrafast","superfast","veryfast","faster","fast","medium","slow","slower","veryslow","placebo"],El=["420","422","444"],Pl=["psnr","ssim","grain","fastdecode"],fi={quality:50,lossless:!1,preset:"slow",tune:"ssim",tuIntraDepth:2,complexity:50,chroma:"420",sharpYUV:!1};var Mr;(function(s){s[s.UVAdapt=0]="UVAdapt",s[s.UV420=1]="UV420",s[s.UV444=2]="UV444",s[s.UVAuto=3]="UVAuto"})(Mr||(Mr={}));var Vr;(function(s){s[s.YCoCg=0]="YCoCg",s[s.YCbCr=1]="YCbCr",s[s.Custom=2]="Custom",s[s.YIQ=3]="YIQ"})(Vr||(Vr={}));Mr.UVAuto,Vr.YCoCg;globalThis._icodec_ImageData=(s,_,n,A)=>A===8?new Rl(s,_,n):new vi(s,_,n,A);class Rl extends ImageData{constructor(){super(...arguments);Wt(this,"depth",8)}}var Wl=Fe("<option> </option>"),Il=Fe("<option> </option>"),Ul=Fe("<option> </option>"),jl=Fe('<div class="card svelte-1dgh8ms"><div class="title svelte-1dgh8ms">HEIC  (x265,HEVC) Options</div> <div class="grid svelte-1dgh8ms"><div><div class="row svelte-1dgh8ms"><label>Quality <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label><input type="checkbox"> Lossless</label></div> <div class="row svelte-1dgh8ms"><label>Preset</label> <select></select></div> <div class="row svelte-1dgh8ms"><label>Tune</label> <select></select></div> <div class="row svelte-1dgh8ms"><label>TU Intra Depth <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="1" max="4"></div></div> <div><div class="row svelte-1dgh8ms"><label>Complexity <span class="muted svelte-1dgh8ms"> </span></label></div> <div class="row svelte-1dgh8ms"><input type="range" min="0" max="100"></div> <div class="row svelte-1dgh8ms"><label>Chroma</label> <select></select></div> <div class="row svelte-1dgh8ms"><label><input type="checkbox"> Sharp YUV</label></div> <div class="row svelte-1dgh8ms"><button>Reset</button></div></div></div></div>');function Fl(s,_){cr(_,!0);let n=zr(_,"value",15);function A(){n({...fi})}const T={quality:`
    /**
     * Quality-based VBR [0, 100], it will map to \`--crf\` parameter of x265.
     * quality=0   -> crf=50
     * quality=50  -> crf=25
     * quality=100 -> crf=0
     *
     * @default 50
     */
    `,lossless:`
        /**
     * If true, Bypass transform, quant and loop filters.
     *
     * Note: it does not bypass chroma subsampling, you need
     *       also to set \`chroma\` to "444" for exact lossless.
     *
     * @default false
     */
    `,preset:`
        /**
     * Trade off performance for compression efficiency.
     *
     * @default "slow"
     */
    `,tune:`    /**
     * Tune the settings for a particular type of source or situation.
     *
     * @default "ssim"
     */`,tuIntraDepth:`    /**
     * Max TU recursive depth for intra CUsã€‚
     *
     * [1, 4], default 2.
     */`,complexity:`    /**
     * CPU effort, larger value increases encode time.
     * Range is [0, 100], but only changes at a few values.
     *
     * @default 50
     */`,chroma:`    /**
     * Specify chroma subsampling method.
     *
     * @default "420"
     */`,sharpYUV:`    /**
     * Use more accurate and sharper RGB->YUV conversion if needed.
     *
     * @default false
     */`};var F=jl(),g=p(d(F),2),C=d(g),w=d(C),O=d(w),$=p(d(O)),f=d($,!0);c($),c(O),c(w);var x=p(w,2),W=d(x);M(W),c(x);var I=p(x,2),ee=d(I),q=d(ee);M(q),Ee(),c(ee),c(I);var b=p(I,2),B=d(b),ce=p(B,2);bt(ce,21,()=>Sl,yt,(V,J)=>{var K=Wl(),pe={},xe=d(K,!0);c(K),Je(()=>{pe!==(pe=U(J))&&(K.value=(K.__value=U(J))==null?"":U(J)),Q(xe,U(J))}),je(V,K)}),c(ce),c(b);var L=p(b,2),j=d(L),fe=p(j,2);bt(fe,21,()=>Pl,yt,(V,J)=>{var K=Il(),pe={},xe=d(K,!0);c(K),Je(()=>{pe!==(pe=U(J))&&(K.value=(K.__value=U(J))==null?"":U(J)),Q(xe,U(J))}),je(V,K)}),c(fe),c(L);var ie=p(L,2),le=d(ie),de=p(d(le)),Y=d(de,!0);c(de),c(le),c(ie);var se=p(ie,2),H=d(se);M(H),c(se),c(C);var we=p(C,2),oe=d(we),ne=d(oe),D=p(d(ne)),ge=d(D,!0);c(D),c(ne),c(oe);var Ne=p(oe,2),Oe=d(Ne);M(Oe),c(Ne);var Te=p(Ne,2),$e=d(Te),Ae=p($e,2);bt(Ae,21,()=>El,yt,(V,J)=>{var K=Ul(),pe={},xe=d(K,!0);c(K),Je(()=>{pe!==(pe=U(J))&&(K.value=(K.__value=U(J))==null?"":U(J)),Q(xe,U(J))}),je(V,K)}),c(Ae),c(Te);var ze=p(Te,2),te=d(ze),Pe=d(te);M(Pe),Ee(),c(te),c(ze);var Ce=p(ze,2),Ke=d(Ce);c(Ce),c(we),c(g),c(F),Je(()=>{E(O,"title",T.quality),Q(f,n().quality??50),E(ee,"title",T.lossless),E(B,"title",T.preset),E(j,"title",T.tune),E(le,"title",T.tuIntraDepth),Q(Y,n().tuIntraDepth),E(ne,"title",T.complexity),Q(ge,n().complexity),E($e,"title",T.chroma),E(te,"title",T.sharpYUV)}),ae(W,()=>n().quality,V=>n(n().quality=V,!0)),Ue(q,()=>n().lossless,V=>n(n().lossless=V,!0)),lt(ce,()=>n().preset,V=>n(n().preset=V,!0)),lt(fe,()=>n().tune,V=>n(n().tune=V,!0)),ae(H,()=>n().tuIntraDepth,V=>n(n().tuIntraDepth=V,!0)),ae(Oe,()=>n().complexity,V=>n(n().complexity=V,!0)),lt(Ae,()=>n().chroma,V=>n(n().chroma=V,!0)),Ue(Pe,()=>n().sharpYUV,V=>n(n().sharpYUV=V,!0)),Nr("click",Ke,A),je(s,F),fr()}var Ol=Fe("<option> </option>"),Ll=Fe("<option> </option>"),Dl=Fe(`<div class="card svelte-1c6geua" aria-label="WebP Encoder Options"><div class="grid svelte-1c6geua"><div class="row svelte-1c6geua"><strong>WebP Encoder Options</strong></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input type="checkbox"> Lossless</label> <span class="muted svelte-1c6geua">(may change transparent pixels)</span></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua">nearLossless: <span class="muted svelte-1c6geua"> </span></label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label class="small svelte-1c6geua">quality</label> <input class="num svelte-1c6geua" type="number" min="0" max="100"></div></div> <div class="row svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua">alphaQuality: <span class="muted svelte-1c6geua"> </span></label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:120px"><label class="small svelte-1c6geua">method</label> <input class="num svelte-1c6geua" type="number" min="0" max="6"></div></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="7" class="svelte-1c6geua"></div> <div style="width:160px"><label class="svelte-1c6geua"><input type="checkbox"> filterType
                    (strong)</label></div></div> <div class="row svelte-1c6geua"><label class="small svelte-1c6geua"> </label> <input type="range" min="1" max="4" class="svelte-1c6geua"></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="svelte-1c6geua">preprocessing</label> <select></select></div> <div style="width:160px"><label class="svelte-1c6geua"><input type="checkbox"> autofilter</label></div></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="small svelte-1c6geua"> </label> <input type="range" min="0" max="100" class="svelte-1c6geua"></div> <div style="width:160px"><label class="small svelte-1c6geua"> </label> <input class="num svelte-1c6geua" type="number" min="1" max="10"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua">alphaCompression</label> <select><option>0 (none)</option><option>1 (webp lossless)</option></select></div> <div><label class="svelte-1c6geua">alphaFiltering</label> <select></select></div></div> <div class="row svelte-1c6geua"><label class="svelte-1c6geua"><input type="checkbox"> sharpYUV</label> <label style="margin-left:12px" class="svelte-1c6geua"><input type="checkbox"> exact (preserve
                RGB in transparent)</label></div> <div class="row two svelte-1c6geua"><div style="flex:1"><label class="svelte-1c6geua">targetSize (bytes)</label> <input type="number" min="0"></div> <div style="width:160px"><label class="svelte-1c6geua">targetPSNR (dB)</label> <input class="num svelte-1c6geua" type="number" min="0"></div></div> <div class="row two svelte-1c6geua"><div><label class="svelte-1c6geua"><input type="checkbox"> lowMemory</label></div> <div><label class="svelte-1c6geua"><input type="checkbox"> emulateJpegSize</label></div></div> <div class="actions svelte-1c6geua"><button type="button">Reset</button></div></div></div>`);function Ml(s,_){cr(_,!0);let n=zr(_,"value",15);function A(){n({...ci})}const T=Object.values(vr).filter(m=>typeof m=="number").map(m=>({label:It[m],v:m})),F=Object.values(It).filter(m=>typeof m=="number").map(m=>({label:It[m],v:m})),g={lossless:`/**
    * Encode the image without any loss (pixel values of fully transparent area may different).
    *
    * @default false
    */`,nearLossless:`/**
    * Specify the level of near-lossless image preprocessing. This option adjusts pixel values
    * to help compressibility, but has minimal impact on the visual quality.
    * It triggers lossless compression mode automatically.
    *
    * The range is 0 (maximum preprocessing) to 100 (no preprocessing).
    * The typical value is around 60. Note that lossy with -q 100 can at times yield better results.
    *
    * @default 100
    */`,quality:`/**
    * Specify the compression factor for RGB channels between 0 and 100.
    *
    * In case of lossy compression (default), a small factor produces a smaller file
    * with lower quality.  Best quality is achieved by using a value of 100.
    *
    * In case of lossless compression, a small factor enables faster compression speed,
    * but produces a larger file. Maximum compression is achieved by using a value of 100.
    *
    * @default 75
    */`,alphaQuality:`/**
    * Specify the compression factor for alpha compression between 0 and 100.
    * Lossless compression of alpha is achieved using a value of 100, while the lower
    * values result in a lossy compression. The default is 100.
    *
    * @default 100
    */`,method:`/**
    * Specify the compression method to use. This parameter controls the trade off between
    * encoding speed and the compressed file size and quality.
    *
    * Possible values range from 0 to 6. When higher values are used, the encoder will spend more
    * time inspecting additional encoding possibilities and decide on the quality gain.
    *
    * Lower value can result in faster processing at the expense of larger file size and lower quality.
    *
    * @default 4
    */`,snsStrength:`/**
    * Specify the amplitude of the spatial noise shaping. Spatial noise shaping (or sns for short)
    * refers to a general collection of built-in algorithms used to decide which area of the
    * picture should use relatively less bits, and where else to better transfer these bits.
    *
    * The possible range goes from 0 (algorithm is off) to 100 (the maximal effect).
    *
    * @default 50
    */`,filterStrength:`/**
    * Specify the strength of the deblocking filter, between 0 (no filtering) and 100 (maximum filtering).
    * A value of 0 will turn off any filtering. Higher value will increase the strength of the filtering
    * process applied after decoding the picture. The higher the value the smoother the picture will appear.
    *
    * @default 60
    */`,filterSharpness:`/**
    * Specify the sharpness of the filtering (if used). Range is 0 (sharpest) to 7 (least sharp).
    *
    * @default 0
    */`,filterType:`/**
    * Use strong filtering (if filtering is being used thanks to the \`filter_strength\`).
    *
    * @default true
    */`,segments:`/**
    * Change the number of partitions to use during the segmentation of the sns algorithm.
    * Range [1, 4], this option has no effect for methods 3 and up, unless \`low_memory\` is used.
    *
    * @default 4
    */`,preprocessing:`/**
    * Specify some pre-processing steps. Using a value of 2 will trigger quality-dependent pseudo-random
    * dithering during RGBA->YUVA conversion (lossy compression only).
    *
    * @default Preprocess.None
    */`,autofilter:`/**
    * Turns auto-filter on. This algorithm will spend additional time optimizing the
    * filtering strength to reach a well-balanced quality.
    *
    * @default 0
    */`,partitionLimit:`/**
    * Degrade quality by limiting the number of bits used by some macroblocks.
    * Range is 0 (no degradation, the default) to 100 (full degradation).
    * Useful values are usually around 30-70 for moderately large images.
    *
    * In the VP8 format, the so-called control partition has a limit of 512k and is used to store
    * the following information: whether the macroblock is skipped, which segment it belongs to,
    * whether it is coded as intra 4x4 or intra 16x16 mode, and finally the prediction modes to use
    * for each of the sub-blocks.
    *
    * For a very large image, 512k only leaves room for a few bits per 16x16 macroblock.
    * The absolute minimum is 4 bits per macroblock. Skip, segment, and mode information can use up almost
    * all these 4 bits (although the case is unlikely), which is problematic for very large images.
    *
    * \`partitionLimit\` controls how frequently the most bit-costly mode (intra 4x4) will be used.
    * This is useful in case the 512k limit is reached.
    *
    * If using -partition_limit is not enough to meet the 512k constraint, one should use less segments
    * in order to save more header bits per macroblock. See the \`segments\` option.
    *
    * Note the -m and -q options also influence the encoder's decisions and ability to hit this limit.
    *
    * @default 0
    */`,alphaCompression:`/**
    * Specify the algorithm used for alpha compression: 0 or 1.
    * Algorithm 0 denotes no compression, 1 uses WebP lossless format for compression.
    *
    * @default 1
    */`,alphaFiltering:`/**
    * Specify the predictive filtering method for the alpha plane. One of none,
    * fast or best, in increasing complexity and slowness order.
    *
    * Internally, alpha filtering is performed using four possible predictions (none, horizontal, vertical, gradient).
    * The best mode will try each mode in turn and pick the one which gives the smaller size.
    *
    * The fast mode will just try to form an a priori guess without testing all modes.
    *
    * @default AlphaFiltering.Fast
    */`,sharpYUV:`/**
    * Use more accurate and sharper RGB->YUV conversion if needed.
    * Note that this process is slower than the default conversion.
    *
    * @default false
    */`,exact:`/**
    * Preserve RGB values in transparent area. The default is off, to help compressibility.
    */`,targetSize:"/**\n    * Specify a target size (in bytes) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",targetPSNR:"/**\n    * Specify a target PSNR (in dB) to try and reach for the compressed output.\n    * The compressor will make several passes of partial encoding in order to get as close as possible to this target.\n    * If both `target_size` and `target_PSNR` are used, `target_size` value will prevail.\n    */",pass:"/**\n    * Set a maximum number of passes to use during the dichotomy used by `target_size` or `target_PSNR`.\n    *\n    * Maximum value is 10. If options `target_size` or `target_PSNR` were used, but `pass` wasn't specified,\n    * a default value of '6' passes will be used. If `pass` is specified,\n    * but neither `target_size` nor `target_PSNR` are, a target PSNR of 40dB will be used.\n    *\n    * @default 1\n    */",lowMemory:`/**
    * Reduce memory usage of lossy encoding by saving four times the compressed size (typically).
    * This will make the encoding slower and the output slightly different in size and distortion.
    *
    * This flag is only effective for methods 3 and up, and is off by default.
    *
    * Note that leaving this flag off will have some side effects on the bitstream:
    * it forces certain bitstream features like number of partitions (forced to 1).
    *
    * @default false
    */`,emulateJpegSize:`/**
    * Change the internal parameter mapping to better match the expected size of JPEG compression.
    *
    * This flag will generally produce an output file of similar size to its JPEG equivalent
    * (for the same \`quality\` setting), but with less visual distortion.
    *
    * @default false
    */`};var C=Dl(),w=d(C),O=p(d(w),2),$=d(O),f=d($);M(f),Ee(),c($),Ee(2),c(O);var x=p(O,2),W=d(x),I=d(W),ee=p(d(I)),q=d(ee,!0);c(ee),c(I);var b=p(I,2);M(b),c(W);var B=p(W,2),ce=p(d(B),2);M(ce),c(B),c(x);var L=p(x,2),j=d(L),fe=d(j),ie=p(d(fe)),le=d(ie,!0);c(ie),c(fe);var de=p(fe,2);M(de),c(j);var Y=p(j,2),se=p(d(Y),2);M(se),c(Y),c(L);var H=p(L,2),we=d(H),oe=d(we);c(we);var ne=p(we,2);M(ne),c(H);var D=p(H,2),ge=d(D),Ne=d(ge);c(ge);var Oe=p(ge,2);M(Oe),c(D);var Te=p(D,2),$e=d(Te),Ae=d($e),ze=d(Ae);c(Ae);var te=p(Ae,2);M(te),c($e);var Pe=p($e,2),Ce=d(Pe),Ke=d(Ce);M(Ke),Ee(),c(Ce),c(Pe),c(Te);var V=p(Te,2),J=d(V),K=d(J);c(J);var pe=p(J,2);M(pe),c(V);var xe=p(V,2),Ze=d(xe),Le=p(d(Ze),2);bt(Le,21,()=>T,yt,(m,Ve)=>{var be=Ol(),_t={},Et=d(be,!0);c(be),Je(()=>{_t!==(_t=U(Ve).v)&&(be.value=(be.__value=U(Ve).v)==null?"":U(Ve).v),Q(Et,U(Ve).label)}),je(m,be)}),c(Le),c(Ze);var Qe=p(Ze,2),ot=d(Qe),Re=d(ot);M(Re),Ee(),c(ot),c(Qe),c(xe);var We=p(xe,2),Ie=d(We),He=d(Ie),De=d(He);c(He);var ut=p(He,2);M(ut),c(Ie);var Xe=p(Ie,2),nt=d(Xe),vt=d(nt);c(nt);var S=p(nt,2);M(S),c(Xe),c(We);var ye=p(We,2),ue=d(ye),Me=p(d(ue),2),Be=d(Me);Be.value=(Be.__value=0)==null?"":0;var Bt=p(Be);Bt.value=(Bt.__value=1)==null?"":1,c(Me),c(ue);var wt=p(ue,2),Tt=p(d(wt),2);bt(Tt,21,()=>F,yt,(m,Ve)=>{var be=Ll(),_t={},Et=d(be,!0);c(be),Je(()=>{_t!==(_t=U(Ve).v)&&(be.value=(be.__value=U(Ve).v)==null?"":U(Ve).v),Q(Et,U(Ve).label)}),je(m,be)}),c(Tt),c(wt),c(ye);var $t=p(ye,2),ct=d($t),ft=d(ct);M(ft),Ee(),c(ct);var dt=p(ct,2),Z=d(dt);M(Z),Ee(),c(dt),c($t);var G=p($t,2),Ct=d(G),Yt=p(d(Ct),2);M(Yt),c(Ct);var re=p(Ct,2),xt=p(d(re),2);M(xt),c(re),c(G);var kt=p(G,2),At=d(kt),Ut=d(At),St=d(Ut);M(St),Ee(),c(Ut),c(At);var P=p(At,2),pt=d(P),qt=d(pt);M(qt),Ee(),c(pt),c(P),c(kt);var ht=p(kt,2),Gt=d(ht);c(ht),c(w),c(C),Je(()=>{E($,"title",g.lossless),E(W,"title",g.nearLossless),Q(q,n().nearLossless),E(B,"title",g.quality),E(j,"title",g.alphaQuality),Q(le,n().alphaQuality),E(Y,"title",g.method),E(H,"title",g.snsStrength),Q(oe,`snsStrength: ${n().snsStrength??""}`),E(D,"title",g.filterStrength),Q(Ne,`filterStrength: ${n().filterStrength??""}`),E($e,"title",g.filterSharpness),Q(ze,`filterSharpness: ${n().filterSharpness??""}`),E(Pe,"title",g.filterType),E(V,"title",g.segments),Q(K,`segments: ${n().segments??""}`),E(Ze,"title",g.preprocessing),E(Qe,"title",g.autofilter),E(Ie,"title",g.partitionLimit),Q(De,`partitionLimit: ${n().partitionLimit??""}`),E(Xe,"title",g.pass),Q(vt,`pass: ${n().pass??""}`),E(ue,"title",g.alphaCompression),E(wt,"title",g.alphaFiltering),E(ct,"title",g.sharpYUV),E(dt,"title",g.exact),E(Ct,"title",g.targetSize),E(re,"title",g.targetPSNR),E(Ut,"title",g.lowMemory),E(pt,"title",g.emulateJpegSize)}),Ue(f,()=>n().lossless,m=>n(n().lossless=m,!0)),ae(b,()=>n().nearLossless,m=>n(n().nearLossless=m,!0)),ae(ce,()=>n().quality,m=>n(n().quality=m,!0)),ae(de,()=>n().alphaQuality,m=>n(n().alphaQuality=m,!0)),ae(se,()=>n().method,m=>n(n().method=m,!0)),ae(ne,()=>n().snsStrength,m=>n(n().snsStrength=m,!0)),ae(Oe,()=>n().filterStrength,m=>n(n().filterStrength=m,!0)),ae(te,()=>n().filterSharpness,m=>n(n().filterSharpness=m,!0)),Ue(Ke,()=>n().filterType,m=>n(n().filterType=m,!0)),ae(pe,()=>n().segments,m=>n(n().segments=m,!0)),lt(Le,()=>n().preprocessing,m=>n(n().preprocessing=m,!0)),Ue(Re,()=>n().autofilter,m=>n(n().autofilter=m,!0)),ae(ut,()=>n().partitionLimit,m=>n(n().partitionLimit=m,!0)),ae(S,()=>n().pass,m=>n(n().pass=m,!0)),lt(Me,()=>n().alphaCompression,m=>n(n().alphaCompression=m,!0)),lt(Tt,()=>n().alphaFiltering,m=>n(n().alphaFiltering=m,!0)),Ue(ft,()=>n().sharpYUV,m=>n(n().sharpYUV=m,!0)),Ue(Z,()=>n().exact,m=>n(n().exact=m,!0)),ae(Yt,()=>n().targetSize,m=>n(n().targetSize=m,!0)),ae(xt,()=>n().targetPSNR,m=>n(n().targetPSNR=m,!0)),Ue(St,()=>n().lowMemory,m=>n(n().lowMemory=m,!0)),Ue(qt,()=>n().emulateJpegSize,m=>n(n().emulateJpegSize=m,!0)),Nr("click",Gt,A),je(s,C),fr()}var Vl=Fe("<option> </option>"),Nl=Fe("<option> </option>"),zl=Fe('<div class="card svelte-1iuoinz" aria-label="AVIF Encoder Options"><div class="title" style="font-weight:600; margin-bottom:8px">AVIF Options</div> <div class="grid svelte-1iuoinz"><div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Quality <span class="muted svelte-1iuoinz"> </span></label></div> <div class="row svelte-1iuoinz"><input type="range" min="0" max="100" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Quality Alpha <span class="muted svelte-1iuoinz"> </span></label> <input class="num svelte-1iuoinz" type="number" min="-1" max="100"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Speed <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="-1" max="10" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Subsample</label> <select></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Auto Tiling</label></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">TileRows (log2) <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="6" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">TileCols (log2) <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="6" class="svelte-1iuoinz"></div></div> <div><div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Chroma Delta Q</label></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Sharpness <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="7" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Denoise Level <span class="muted svelte-1iuoinz"> </span></label> <input type="range" min="0" max="50" class="svelte-1iuoinz"></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz">Tune</label> <select></select></div> <div class="row svelte-1iuoinz"><label class="svelte-1iuoinz"><input type="checkbox"> Sharp YUV</label></div> <div class="actions svelte-1iuoinz"><button type="button">Reset</button></div></div></div></div>');function Hl(s,_){cr(_,!0);let n=zr(_,"value",15);function A(){n({...Fr})}const T=Object.values(zt).filter(S=>typeof S=="number").map(S=>({label:zt[S],v:S})),F=Object.values(Ht).filter(S=>typeof S=="number").map(S=>({label:Ht[S],v:S})),g={quality:`/**
 * [0 - 100], 0 = worst quality, 100 = lossless
 *
 * @default 50
 */`,qualityAlpha:`/**
 * As above, but -1 means 'use quality'
 *
 * @default -1
 */`,speed:`/**
 * Range: [-1, 10], 0 = slowest, 10 = fastest, slower should make for a better quality image in less bytes.
 * A combination of settings are tweaked to simulate this speed range.
 *
 * @default 6
 */`,subsample:`/**
 * Chrome subsampling type.
 *
 * @default YUV420
 */`,autoTiling:"/**\n * If true, ignores `tileRowsLog2` and `tileColsLog2` and automatically chooses suitable tiling values.\n *\n * @default false\n */",tileColsLog2:`/**
 * [0 - 6], Creates 2^n tiles in that dimension
 *
 * @default 0
 */`,chromaDeltaQ:`/**
 * Extra chroma compression, cannot be used in lossless mode.
 *
 * @default false
 */`,sharpness:`/**
 * Bias towards block sharpness in rate-distortion optimization of transform coefficients [0, 7]
 *
 * @default 0
 */`,denoiseLevel:`/**
 * Amount of noise (from 0 = don't denoise, to 50)
 *
 * @default 0
 */`,tune:`/**
 * Distortion metric tuned with.
 *
 * @default AVIFTune.Auto
 */`,sharpYUV:`/**
 * Use libsharpyuv for RGB->YUV conversion if needed.
 *
 * @default false
 */`};var C=zl(),w=p(d(C),2),O=d(w),$=d(O),f=d($),x=p(d(f)),W=d(x,!0);c(x),c(f),c($);var I=p($,2),ee=d(I);M(ee),c(I);var q=p(I,2),b=d(q),B=p(d(b)),ce=d(B,!0);c(B),c(b);var L=p(b,2);M(L),c(q);var j=p(q,2),fe=d(j),ie=p(d(fe)),le=d(ie,!0);c(ie),c(fe);var de=p(fe,2);M(de),c(j);var Y=p(j,2),se=p(d(Y),2);bt(se,21,()=>T,yt,(S,ye)=>{var ue=Vl(),Me={},Be=d(ue,!0);c(ue),Je(()=>{Me!==(Me=U(ye).v)&&(ue.value=(ue.__value=U(ye).v)==null?"":U(ye).v),Q(Be,U(ye).label)}),je(S,ue)}),c(se),c(Y);var H=p(Y,2),we=d(H),oe=d(we);M(oe),Ee(),c(we),c(H);var ne=p(H,2),D=d(ne),ge=p(d(D)),Ne=d(ge,!0);c(ge),c(D);var Oe=p(D,2);M(Oe),c(ne);var Te=p(ne,2),$e=d(Te),Ae=p(d($e)),ze=d(Ae,!0);c(Ae),c($e);var te=p($e,2);M(te),c(Te),c(O);var Pe=p(O,2),Ce=d(Pe),Ke=d(Ce),V=d(Ke);M(V),Ee(),c(Ke),c(Ce);var J=p(Ce,2),K=d(J),pe=p(d(K)),xe=d(pe,!0);c(pe),c(K);var Ze=p(K,2);M(Ze),c(J);var Le=p(J,2),Qe=d(Le),ot=p(d(Qe)),Re=d(ot,!0);c(ot),c(Qe);var We=p(Qe,2);M(We),c(Le);var Ie=p(Le,2),He=p(d(Ie),2);bt(He,21,()=>F,yt,(S,ye)=>{var ue=Nl(),Me={},Be=d(ue,!0);c(ue),Je(()=>{Me!==(Me=U(ye).v)&&(ue.value=(ue.__value=U(ye).v)==null?"":U(ye).v),Q(Be,U(ye).label)}),je(S,ue)}),c(He),c(Ie);var De=p(Ie,2),ut=d(De),Xe=d(ut);M(Xe),Ee(),c(ut),c(De);var nt=p(De,2),vt=d(nt);c(nt),c(Pe),c(w),c(C),Je(()=>{E($,"title",g.quality),Q(W,n().quality),E(q,"title",g.qualityAlpha),Q(ce,n().qualityAlpha),E(j,"title",g.speed),Q(le,n().speed),E(Y,"title",g.subsample),E(H,"title",g.autoTiling),E(ne,"title",g.tileColsLog2),Q(Ne,n().tileRowsLog2),E(Te,"title",g.tileColsLog2),Q(ze,n().tileColsLog2),E(Ce,"title",g.chromaDeltaQ),E(J,"title",g.sharpness),Q(xe,n().sharpness),E(Le,"title",g.denoiseLevel),Q(Re,n().denoiseLevel),E(Ie,"title",g.tune),E(De,"title",g.sharpYUV)}),ae(ee,()=>n().quality,S=>n(n().quality=S,!0)),ae(L,()=>n().qualityAlpha,S=>n(n().qualityAlpha=S,!0)),ae(de,()=>n().speed,S=>n(n().speed=S,!0)),lt(se,()=>n().subsample,S=>n(n().subsample=S,!0)),Ue(oe,()=>n().autoTiling,S=>n(n().autoTiling=S,!0)),ae(Oe,()=>n().tileRowsLog2,S=>n(n().tileRowsLog2=S,!0)),ae(te,()=>n().tileColsLog2,S=>n(n().tileColsLog2=S,!0)),Ue(V,()=>n().chromaDeltaQ,S=>n(n().chromaDeltaQ=S,!0)),ae(Ze,()=>n().sharpness,S=>n(n().sharpness=S,!0)),ae(We,()=>n().denoiseLevel,S=>n(n().denoiseLevel=S,!0)),lt(He,()=>n().tune,S=>n(n().tune=S,!0)),Ue(Xe,()=>n().sharpYUV,S=>n(n().sharpYUV=S,!0)),Nr("click",vt,A),je(s,C),fr()}const Bl="icodec_encoder_options";async function Yl(s,_){const n=Array.from(s.currentTarget.files??[]);_(n)}function ql(s,_){window.localStorage.setItem("icodec_encoder_options",JSON.stringify(oi(U(_))))}var Gl=Fe('<meta name="description" content="Converter for heif">'),Jl=Fe('<div class="container svelte-drub0"><div class="section svelte-drub0">âš ï¸ ìƒë‹¹ížˆ ëŠë¦½ë‹ˆë‹¤.</div> <div class="section svelte-drub0"><div class="field svelte-drub0"><label for="images">images</label> <input type="file" name="images" multiple accept="image/png, image/jpeg"></div></div> <div class="section svelte-drub0"><details class="svelte-drub0"><summary class="svelte-drub0">WEBP</summary> <div class="body svelte-drub0"><!></div></details> <details class="svelte-drub0"><summary class="svelte-drub0">HEIC</summary> <div class="body svelte-drub0"><!></div></details> <details class="svelte-drub0"><summary class="svelte-drub0">AVIF</summary> <div class="body svelte-drub0"><!></div></details></div> <div class="section svelte-drub0"><button class="svelte-drub0">save config in local</button></div></div>');function vo(s,_){cr(_,!0);let n=vl(Xa({webp:{...ci},avif:{...Fr},heic:{...fi}}));hl(()=>{let L=window.localStorage.getItem(Bl);L&&fl(n,JSON.parse(L),!0)});async function A(L){if(!L.length)return;const j=new Worker(Cl,{type:"module"}),fe=_l(j),ie=new gl,le=ie.folder("heic"),de=ie.folder("webp"),Y=ie.folder("avif");let se=[];try{const H=L.map(async oe=>{let ne=await createImageBitmap(oe);const D=await fe.encodeBitmap(ml(ne,[ne]),oi(U(n))),ge=oe.name.replace(/\.[^/.]+$/,"");D.avif.status==="fulfilled"?Y==null||Y.file(ge+".avif",D.avif.value):(console.error(D.avif.reason),se.push({type:"avif",reason:D.avif.reason,fileName:oe.name})),D.heic.status==="fulfilled"?le==null||le.file(ge+".heic",D.heic.value):(console.error(D.heic.reason),se.push({type:"heic",reason:D.heic.reason,fileName:oe.name})),D.webp.status==="fulfilled"?de==null||de.file(ge+".webp",D.webp.value):(console.error(D.webp.reason),se.push({type:"webp",reason:D.webp.reason,fileName:oe.name}))});await Promise.all(H);const we=await ie.generateAsync({type:"blob"});yl(we,"converted_images.zip")}finally{j.terminate()}se.length>0&&alert(JSON.stringify(se))}Xa({...Fr});var T=Jl();pl(L=>{var j=Gl();cl.title="About",je(L,j)});var F=p(d(T),2),g=d(F),C=p(d(g),2);C.__change=[Yl,A],c(g),c(F);var w=p(F,2),O=d(w),$=p(d(O),2),f=d($);Ml(f,{get value(){return U(n).webp},set value(L){U(n).webp=L}}),c($),c(O);var x=p(O,2),W=p(d(x),2),I=d(W);Fl(I,{get value(){return U(n).heic},set value(L){U(n).heic=L}}),c(W),c(x);var ee=p(x,2),q=p(d(ee),2),b=d(q);Hl(b,{get value(){return U(n).avif},set value(L){U(n).avif=L}}),c(q),c(ee),c(w);var B=p(w,2),ce=d(B);ce.__click=[ql,n],c(B),c(T),je(s,T),fr()}dl(["change","click"]);export{vo as component};
