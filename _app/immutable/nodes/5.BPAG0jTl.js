var po=Object.defineProperty;var _o=(u,P,F)=>P in u?po(u,P,{enumerable:!0,configurable:!0,writable:!0,value:F}):u[P]=F;var ce=(u,P,F)=>_o(u,typeof P!="symbol"?P+"":P,F);import{t as wn,a as _n}from"../chunks/Vtcb0IN9.js";import"../chunks/D6_ci8D8.js";import{p as ho,a as mo,$ as go,s as dr,c as yo,r as wo}from"../chunks/B5YdkP5L.js";import{e as _r}from"../chunks/BJE6mK62.js";import{h as bo}from"../chunks/TcEYv9AF.js";import{i as To}from"../chunks/8k2UvVOC.js";import{c as De,g as $o,w as hr,J as mr,t as gr}from"../chunks/YPpMm3tu.js";const yr=""+new URL("../workers/icodecs-DxNDWR83.js",import.meta.url).href;var Le={exports:{}},Co=Le.exports,hn;function Ao(){return hn||(hn=1,function(u,P){(function(F,W){W()})(Co,function(){function F(h,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function W(h,_,f){var w=new XMLHttpRequest;w.open("GET",h),w.responseType="blob",w.onload=function(){y(w.response,_,f)},w.onerror=function(){console.error("could not download file")},w.send()}function j(h){var _=new XMLHttpRequest;_.open("HEAD",h,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function B(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(_)}}var U=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof De=="object"&&De.global===De?De:void 0,A=U.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=U.saveAs||(typeof window!="object"||window!==U?function(){}:"download"in HTMLAnchorElement.prototype&&!A?function(h,_,f){var w=U.URL||U.webkitURL,C=document.createElement("a");_=_||h.name||"download",C.download=_,C.rel="noopener",typeof h=="string"?(C.href=h,C.origin===location.origin?B(C):j(C.href)?W(h,_,f):B(C,C.target="_blank")):(C.href=w.createObjectURL(h),setTimeout(function(){w.revokeObjectURL(C.href)},4e4),setTimeout(function(){B(C)},0))}:"msSaveOrOpenBlob"in navigator?function(h,_,f){if(_=_||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(F(h,f),_);else if(j(h))W(h,_,f);else{var w=document.createElement("a");w.href=h,w.target="_blank",setTimeout(function(){B(w)})}}:function(h,_,f,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof h=="string")return W(h,_,f);var C=h.type==="application/octet-stream",ee=/constructor/i.test(U.HTMLElement)||U.safari,q=/CriOS\/[\d]+/.test(navigator.userAgent);if((q||C&&ee||A)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var H=b.result;H=q?H:H.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=H:location=H,w=null},b.readAsDataURL(h)}else{var p=U.URL||U.webkitURL,G=p.createObjectURL(h);w?w.location=G:location.href=G,w=null,setTimeout(function(){p.revokeObjectURL(G)},4e4)}});U.saveAs=y.saveAs=y,u.exports=y})}(Le)),Le.exports}var ko=Ao();const wr=$o(ko);class bn{constructor(P,F,W,j=8){ce(this,"data");ce(this,"width");ce(this,"height");ce(this,"depth");this.data=P,this.width=F,this.height=W,this.depth=j}}bn.prototype.colorSpace="srgb";var Tr;(function(u){u[u.YUV444=1]="YUV444",u[u.YUV422=2]="YUV422",u[u.YUV420=3]="YUV420",u[u.YUV400=4]="YUV400"})(Tr||(Tr={}));var $r;(function(u){u[u.Auto=0]="Auto",u[u.PSNR=1]="PSNR",u[u.SSIM=2]="SSIM"})($r||($r={}));Tr.YUV420,$r.Auto;const Eo=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Eo.decode();const br=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};br.encodeInto;var Cr;(function(u){u[u.GRAYSCALE=1]="GRAYSCALE",u[u.RGB=2]="RGB",u[u.YCbCr=3]="YCbCr"})(Cr||(Cr={}));var Ar;(function(u){u[u.JPEG_Annex_K=0]="JPEG_Annex_K",u[u.Flat=1]="Flat",u[u.MSSIM_Tuned_Kodak=2]="MSSIM_Tuned_Kodak",u[u.ImageMagick=3]="ImageMagick",u[u.PSNR_HVS_M_Tuned_Kodak=4]="PSNR_HVS_M_Tuned_Kodak",u[u.Klein_Silverstein_Carney=5]="Klein_Silverstein_Carney",u[u.Watson_Taylor_Borthwick=6]="Watson_Taylor_Borthwick",u[u.Ahumada_Watson_Peterson=7]="Ahumada_Watson_Peterson",u[u.Peterson_Ahumada_Watson=8]="Peterson_Ahumada_Watson"})(Ar||(Ar={}));Cr.YCbCr,Ar.ImageMagick;var mn;(function(u){u[u.Default=-1]="Default",u[u.False=0]="False",u[u.True=1]="True"})(mn||(mn={}));var kr;(function(u){u[u.Default=-1]="Default",u[u.Zero=0]="Zero",u[u.Left=1]="Left",u[u.Top=2]="Top",u[u.Average0=3]="Average0",u[u.Select=4]="Select",u[u.Gradient=5]="Gradient",u[u.Weighted=6]="Weighted",u[u.TopRight=7]="TopRight",u[u.TopLeft=8]="TopLeft",u[u.LeftLeft=9]="LeftLeft",u[u.Average1=10]="Average1",u[u.Average2=11]="Average2",u[u.Average3=12]="Average3",u[u.Average4=13]="Average4",u[u.Best=14]="Best",u[u.Variable=15]="Variable"})(kr||(kr={}));kr.Default;var Er;(function(u){u[u.None=0]="None",u[u.SegmentSmooth=1]="SegmentSmooth",u[u.Dithering=2]="Dithering"})(Er||(Er={}));var Pr;(function(u){u[u.None=0]="None",u[u.Fast=1]="Fast",u[u.Best=2]="Best"})(Pr||(Pr={}));Er.None,Pr.Fast;var Po=(()=>{var u=import.meta.url;return function(P={}){var fn;var F;function W(){return M.buffer!=J.buffer&&K(),J}function j(){return M.buffer!=J.buffer&&K(),Ur}function B(){return M.buffer!=J.buffer&&K(),Or}function U(){return M.buffer!=J.buffer&&K(),Mr}function A(){return M.buffer!=J.buffer&&K(),Ir}function y(){return M.buffer!=J.buffer&&K(),Dr}function h(){return M.buffer!=J.buffer&&K(),Lr}function _(){return M.buffer!=J.buffer&&K(),Hr}var f=P,w,C,ee=new Promise((e,r)=>{w=e,C=r}),q=typeof window=="object",b=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var p=b&&((fn=self.name)==null?void 0:fn.startsWith("em-pthread")),G=Object.assign({},f),H="./this.program",Rr=(e,r)=>{throw r},z="";function Tn(e){return f.locateFile?f.locateFile(e,z):z+e}var Sr,He;(q||b)&&(b?z=self.location.href:typeof document<"u"&&document.currentScript&&(z=document.currentScript.src),u&&(z=u),z.startsWith("blob:")?z="":z=z.substr(0,z.replace(/[?#].*/,"").lastIndexOf("/")+1),b&&(He=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),Sr=e=>fetch(e,{credentials:"same-origin"}).then(r=>r.ok?r.arrayBuffer():Promise.reject(new Error(r.status+" : "+r.url))));var Fr=f.print||console.log.bind(console),N=f.printErr||console.error.bind(console);Object.assign(f,G),G=null,f.arguments&&f.arguments,f.thisProgram&&(H=f.thisProgram);var we=f.wasmBinary,M,xr,be=!1,ue,J,Ur,Or,Mr,Ir,Dr,Lr,Hr;function K(){var e=M.buffer;f.HEAP8=J=new Int8Array(e),f.HEAP16=Or=new Int16Array(e),f.HEAPU8=Ur=new Uint8Array(e),f.HEAPU16=Mr=new Uint16Array(e),f.HEAP32=Ir=new Int32Array(e),f.HEAPU32=Dr=new Uint32Array(e),f.HEAPF32=Lr=new Float32Array(e),f.HEAPF64=Hr=new Float64Array(e)}if(p){let e=function(...n){var a=n.join(" ");console.error(a)},r=function(...n){var a=n.join(" ");postMessage({cmd:"alert",text:a,threadId:Me()})},t=function(n){try{var a=n.data,i=a.cmd;if(i==="load"){let s=[];self.onmessage=o=>s.push(o),self.startWorker=o=>{postMessage({cmd:"loaded"});for(let l of s)t(l);self.onmessage=t};for(const o of a.handlers)(!f[o]||f[o].proxy)&&(f[o]=(...l)=>{postMessage({cmd:"callHandler",handler:o,args:l})},o=="print"&&(Fr=f[o]),o=="printErr"&&(N=f[o]));M=a.wasmMemory,K(),Vr(a.wasmModule)}else if(i==="run"){On(a.pthread_ptr),cr(a.pthread_ptr,0,0,1,0,0),g.receiveObjectTransfer(a),g.threadInitTLS(),or(a.pthread_ptr),Ve||(Nt(),Ve=!0);try{Mn(a.start_routine,a.arg)}catch(s){if(s!="unwind")throw s}}else a.target==="setimmediate"||(i==="checkMailbox"?Ve&&Ue():i&&(N(`worker: received unknown command ${i}`),N(a)))}catch(s){throw Yt(),s}};var Vr,Ve=!1;f.printErr||(N=e),self.alert=r,f.instantiateWasm=(n,a)=>new Promise((i,s)=>{Vr=o=>{var l=new WebAssembly.Instance(o,Qr());a(l),i()}}),self.onunhandledrejection=n=>{throw n.reason||n},self.onmessage=t}if(!p){if(f.wasmMemory)M=f.wasmMemory;else{var $n=f.INITIAL_MEMORY||16777216;M=new WebAssembly.Memory({initial:$n/65536,maximum:32768,shared:!0})}K()}var Br=[],Nr=[],Yr=[];function Cn(){var e=f.preRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(Kr)),Ke(Br)}function Gr(){p||Ke(Nr)}function An(){if(!p){var e=f.postRun;e&&(typeof e=="function"&&(e=[e]),e.forEach(En)),Ke(Yr)}}function Kr(e){Br.unshift(e)}function kn(e){Nr.unshift(e)}function En(e){Yr.unshift(e)}var oe=0,ve=null;function qr(e){var r;oe++,(r=f.monitorRunDependencies)==null||r.call(f,oe)}function zr(e){var t;if(oe--,(t=f.monitorRunDependencies)==null||t.call(f,oe),oe==0&&ve){var r=ve;ve=null,r()}}function Te(e){var t;(t=f.onAbort)==null||t.call(f,e),e="Aborted("+e+")",N(e),be=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw C(r),r}var Pn="data:application/octet-stream;base64,",Jr=e=>e.startsWith(Pn);function Wn(){if(f.locateFile){var e="heic-enc.wasm";return Jr(e)?e:Tn(e)}return new URL(""+new URL("../assets/heic-enc.BzJ-xkxZ.wasm",import.meta.url).href,import.meta.url).href}var Be;function Zr(e){if(e==Be&&we)return new Uint8Array(we);if(He)return He(e);throw"both async and sync fetching of the wasm failed"}function jn(e){return we?Promise.resolve().then(()=>Zr(e)):Sr(e).then(r=>new Uint8Array(r),()=>Zr(e))}function Xr(e,r,t){return jn(e).then(n=>WebAssembly.instantiate(n,r)).then(t,n=>{N(`failed to asynchronously prepare wasm: ${n}`),Te(n)})}function Rn(e,r,t,n){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!Jr(r)&&typeof fetch=="function"?fetch(r,{credentials:"same-origin"}).then(a=>{var i=WebAssembly.instantiateStreaming(a,t);return i.then(n,function(s){return N(`wasm streaming compile failed: ${s}`),N("falling back to ArrayBuffer instantiation"),Xr(r,t,n)})}):Xr(r,t,n)}function Qr(){return Ni(),{a:Vt}}function Sn(){var e=Qr();function r(n,a){return m=n.exports,In(m.Wa),ot=m.Va,kn(m.Pa),xr=a,zr(),m}qr();function t(n){r(n.instance,n.module)}if(f.instantiateWasm)try{return f.instantiateWasm(e,r)}catch(n){N(`Module.instantiateWasm callback failed with error: ${n}`),C(n)}return Be??(Be=Wn()),Rn(we,Be,e,t).catch(C),{}}function et(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var rt=e=>{e.terminate(),e.onmessage=r=>{}},tt=e=>{var r=g.pthreads[e];g.returnWorkerToPool(r)},nt=e=>{var r=g.getNewWorker();if(!r)return 6;g.runningWorkers.push(r),g.pthreads[e.pthread_ptr]=r,r.pthread_ptr=e.pthread_ptr;var t={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return r.postMessage(t,e.transferList),0},$e=0,Ne=()=>qe||$e>0,R=()=>en(),k=e=>Xt(e),Fn=e=>Qt(e),xn=(e,r)=>r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN,O=(e,r,t,...n)=>{for(var a=n.length,i=R(),s=Fn(a*8),o=s>>3,l=0;l<n.length;l++){var c=n[l];_()[o+l]=c}var v=Gt(e,r,a,s,t);return k(i),v};function Ye(e){var r;if(p)return O(0,0,1,e);ue=e,Ne()||(g.terminateAllThreads(),(r=f.onExit)==null||r.call(f,e),be=!0),Rr(e,new et(e))}var at=e=>{if(e instanceof et||e=="unwind")return ue;Rr(1,e)};function it(e){if(p)return O(1,0,0,e);Ge(e)}var Un=(e,r)=>{if(ue=e,p)throw it(e),"unwind";Ye(e)},Ge=Un,g={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){p||g.initMainThread()},initMainThread(){for(var e=2;e--;)g.allocateUnusedWorker();Kr(()=>{qr(),g.loadWasmModuleToAllWorkers(()=>zr())})},terminateAllThreads:()=>{for(var e of g.runningWorkers)rt(e);for(var e of g.unusedWorkers)rt(e);g.unusedWorkers=[],g.runningWorkers=[],g.pthreads=[]},returnWorkerToPool:e=>{var r=e.pthread_ptr;delete g.pthreads[r],g.unusedWorkers.push(e),g.runningWorkers.splice(g.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Kt(r)},receiveObjectTransfer(e){},threadInitTLS(){g.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:e=>new Promise(r=>{e.onmessage=i=>{var s=i.data,o=s.cmd;if(s.targetThread&&s.targetThread!=Me()){var l=g.pthreads[s.targetThread];l?l.postMessage(s,s.transferList):N(`Internal error! Worker sent a message "${o}" to target pthread ${s.targetThread}, but that thread no longer exists!`);return}o==="checkMailbox"?Ue():o==="spawnThread"?nt(s):o==="cleanupThread"?tt(s.thread):o==="loaded"?(e.loaded=!0,r(e)):o==="alert"?alert(`Thread ${s.threadId}: ${s.text}`):s.target==="setimmediate"?e.postMessage(s):o==="callHandler"?f[s.handler](...s.args):o&&N(`worker sent an unknown command ${o}`)},e.onerror=i=>{var s="worker sent an error!";throw N(`${s} ${i.filename}:${i.lineno}: ${i.message}`),i};var t=[],n=["onExit","onAbort","print","printErr"];for(var a of n)f.propertyIsEnumerable(a)&&t.push(a);e.postMessage({cmd:"load",handlers:t,wasmMemory:M,wasmModule:xr})}),loadWasmModuleToAllWorkers(e){if(p)return e();Promise.all(g.unusedWorkers.map(g.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e;e=new Worker(new URL(""+new URL("../workers/heic-enc-3oXKQfLN.js",import.meta.url).href,import.meta.url),{type:"module",name:"em-pthread"}),g.unusedWorkers.push(e)},getNewWorker(){return g.unusedWorkers.length==0&&(g.allocateUnusedWorker(),g.loadWasmModuleToWorker(g.unusedWorkers[0])),g.unusedWorkers.pop()}},Ke=e=>{e.forEach(r=>r(f))},On=e=>{K();var r=y()[e+52>>2],t=y()[e+56>>2],n=r-t;Zt(r,n),k(r)},Ce=[],ot,S=e=>{var r=Ce[e];return r||(e>=Ce.length&&(Ce.length=e+1),Ce[e]=r=ot.get(e)),r},Mn=(e,r)=>{$e=0,qe=0;var t=S(e)(r);function n(a){Ne()?ue=a:vr(a)}n(t)},qe=f.noExitRuntime||!0,In=e=>g.tlsInitFunctions.push(e),st=new TextDecoder,Ae=(e,r)=>{if(!e)return"";for(var t=e+r,n=e;!(n>=t)&&j()[n];)++n;return st.decode(j().slice(e,n))},Dn=(e,r,t,n)=>{Te(`Assertion failed: ${Ae(e)}, at: `+[r?Ae(r):"unknown filename",t,n?Ae(n):"unknown function"])},ke=[],Ee=0,Ln=e=>{var r=new ze(e);return r.get_caught()||(r.set_caught(!0),Ee--),r.set_rethrown(!1),ke.push(r),tn(e),an(e)},re=0,Hn=()=>{E(0,0);var e=ke.pop();rn(e.excPtr),re=0};class ze{constructor(r){this.excPtr=r,this.ptr=r-24}set_type(r){y()[this.ptr+4>>2]=r}get_type(){return y()[this.ptr+4>>2]}set_destructor(r){y()[this.ptr+8>>2]=r}get_destructor(){return y()[this.ptr+8>>2]}set_caught(r){r=r?1:0,W()[this.ptr+12]=r}get_caught(){return W()[this.ptr+12]!=0}set_rethrown(r){r=r?1:0,W()[this.ptr+13]=r}get_rethrown(){return W()[this.ptr+13]!=0}init(r,t){this.set_adjusted_ptr(0),this.set_type(r),this.set_destructor(t)}set_adjusted_ptr(r){y()[this.ptr+16>>2]=r}get_adjusted_ptr(){return y()[this.ptr+16>>2]}}var Vn=e=>{throw re||(re=e),re},Pe=e=>Jt(e),ut=e=>{var r=re;if(!r)return Pe(0),0;var t=new ze(r);t.set_adjusted_ptr(r);var n=t.get_type();if(!n)return Pe(0),r;for(var a of e){if(a===0||a===n)break;var i=t.ptr+16;if(nn(a,n,i))return Pe(a),r}return Pe(n),r},Bn=()=>ut([]),Nn=e=>ut([e]),Yn=()=>{var e=ke.pop();e||Te("no exception to throw");var r=e.excPtr;throw e.get_rethrown()||(ke.push(e),e.set_rethrown(!0),e.set_caught(!1),Ee++),re=r,re},Gn=(e,r,t)=>{var n=new ze(e);throw n.init(r,t),re=e,Ee++,re},Kn=()=>Ee;function lt(e,r,t,n){return p?O(2,0,1,e,r,t,n):ft(e,r,t,n)}var qn=()=>typeof SharedArrayBuffer<"u",ft=(e,r,t,n)=>{if(!qn())return 6;var a=[],i=0;if(p&&(a.length===0||i))return lt(e,r,t,n);var s={startRoutine:t,pthread_ptr:e,arg:n,transferList:a};return p?(s.cmd="spawnThread",postMessage(s,a),0):nt(s)};function ct(e,r,t){return p?O(3,0,1,e,r,t):0}var zn=(e,r,t,n)=>{if(!(n>0))return 0;for(var a=t,i=t+n-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343){var l=e.charCodeAt(++s);o=65536+((o&1023)<<10)|l&1023}if(o<=127){if(t>=i)break;r[t++]=o}else if(o<=2047){if(t+1>=i)break;r[t++]=192|o>>6,r[t++]=128|o&63}else if(o<=65535){if(t+2>=i)break;r[t++]=224|o>>12,r[t++]=128|o>>6&63,r[t++]=128|o&63}else{if(t+3>=i)break;r[t++]=240|o>>18,r[t++]=128|o>>12&63,r[t++]=128|o>>6&63,r[t++]=128|o&63}}return r[t]=0,t-a},pe=(e,r,t)=>zn(e,j(),r,t);function vt(e,r,t){if(p)return O(4,0,1,e,r,t)}function pt(e,r,t){return p?O(5,0,1,e,r,t):0}function dt(e,r,t,n){if(p)return O(6,0,1,e,r,t,n)}function _t(e,r,t,n){if(p)return O(7,0,1,e,r,t,n)}function ht(e,r,t){if(p)return O(8,0,1,e,r,t)}var Jn=()=>{Te("")},We={},Je=e=>{for(;e.length;){var r=e.pop(),t=e.pop();t(r)}};function de(e){return this.fromWireType(y()[e>>2])}var le={},se={},je={},mt,Re=e=>{throw new mt(e)},Ze=(e,r,t)=>{e.forEach(o=>je[o]=r);function n(o){var l=t(o);l.length!==e.length&&Re("Mismatched type converter count");for(var c=0;c<e.length;++c)Z(e[c],l[c])}var a=new Array(r.length),i=[],s=0;r.forEach((o,l)=>{se.hasOwnProperty(o)?a[l]=se[o]:(i.push(o),le.hasOwnProperty(o)||(le[o]=[]),le[o].push(()=>{a[l]=se[o],++s,s===i.length&&n(a)}))}),i.length===0&&n(a)},Zn=e=>{var r=We[e];delete We[e];var t=r.rawConstructor,n=r.rawDestructor,a=r.fields,i=a.map(s=>s.getterReturnType).concat(a.map(s=>s.setterArgumentType));Ze([e],i,s=>{var o={};return a.forEach((l,c)=>{var v=l.fieldName,d=s[c],$=l.getter,x=l.getterContext,L=s[c+a.length],Q=l.setter,ie=l.setterContext;o[v]={read:V=>d.fromWireType($(x,V)),write:(V,ye)=>{var Y=[];Q(ie,V,L.toWireType(Y,ye)),Je(Y)}}}),[{name:r.name,fromWireType:l=>{var c={};for(var v in o)c[v]=o[v].read(l);return n(l),c},toWireType:(l,c)=>{for(var v in o)if(!(v in c))throw new TypeError(`Missing field: "${v}"`);var d=t();for(v in o)o[v].write(d,c[v]);return l!==null&&l.push(n,d),d},argPackAdvance:X,readValueFromPointer:de,destructorFunction:n}]})},Xn=(e,r,t,n,a)=>{},Qn=()=>{for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);gt=e},gt,I=e=>{for(var r="",t=e;j()[t];)r+=gt[j()[t++]];return r},_e,T=e=>{throw new _e(e)};function ea(e,r,t={}){var n=r.name;if(e||T(`type "${n}" must have a positive integer typeid pointer`),se.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;T(`Cannot register type '${n}' twice`)}if(se[e]=r,delete je[e],le.hasOwnProperty(e)){var a=le[e];delete le[e],a.forEach(i=>i())}}function Z(e,r,t={}){return ea(e,r,t)}var X=8,ra=(e,r,t,n)=>{r=I(r),Z(e,{name:r,fromWireType:function(a){return!!a},toWireType:function(a,i){return i?t:n},argPackAdvance:X,readValueFromPointer:function(a){return this.fromWireType(j()[a])},destructorFunction:null})},ta=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Xe=e=>{function r(t){return t.$$.ptrType.registeredClass.name}T(r(e)+" instance already deleted")},Qe=!1,yt=e=>{},na=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},wt=e=>{e.count.value-=1;var r=e.count.value===0;r&&na(e)},bt=(e,r,t)=>{if(r===t)return e;if(t.baseClass===void 0)return null;var n=bt(e,r,t.baseClass);return n===null?null:t.downcast(n)},Tt={},aa={},ia=(e,r)=>{for(r===void 0&&T("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},oa=(e,r)=>(r=ia(e,r),aa[r]),Se=(e,r)=>{(!r.ptrType||!r.ptr)&&Re("makeClassHandle requires ptr and ptrType");var t=!!r.smartPtrType,n=!!r.smartPtr;return t!==n&&Re("Both smartPtrType and smartPtr must be specified"),r.count={value:1},he(Object.create(e,{$$:{value:r,writable:!0}}))};function sa(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=oa(this.registeredClass,r);if(t!==void 0){if(t.$$.count.value===0)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Se(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):Se(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i=this.registeredClass.getActualType(r),s=Tt[i];if(!s)return a.call(this);var o;this.isConst?o=s.constPointerType:o=s.pointerType;var l=bt(r,this.registeredClass,o.registeredClass);return l===null?a.call(this):this.isSmartPointer?Se(o.registeredClass.instancePrototype,{ptrType:o,ptr:l,smartPtrType:this,smartPtr:e}):Se(o.registeredClass.instancePrototype,{ptrType:o,ptr:l})}var he=e=>typeof FinalizationRegistry>"u"?(he=r=>r,e):(Qe=new FinalizationRegistry(r=>{wt(r.$$)}),he=r=>{var t=r.$$,n=!!t.smartPtr;if(n){var a={$$:t};Qe.register(r,a,r)}return r},yt=r=>Qe.unregister(r),he(e)),ua=()=>{Object.assign(Fe.prototype,{isAliasOf(e){if(!(this instanceof Fe)||!(e instanceof Fe))return!1;var r=this.$$.ptrType.registeredClass,t=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,a=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return r===n&&t===a},clone(){if(this.$$.ptr||Xe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=he(Object.create(Object.getPrototypeOf(this),{$$:{value:ta(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&T("Object already scheduled for deletion"),yt(this),wt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&T("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}})};function Fe(){}var fe=(e,r)=>Object.defineProperty(r,"name",{value:e}),la=(e,r,t)=>{if(e[r].overloadTable===void 0){var n=e[r];e[r]=function(...a){return e[r].overloadTable.hasOwnProperty(a.length)||T(`Function '${t}' called with an invalid number of arguments (${a.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[a.length].apply(this,a)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}},er=(e,r,t)=>{f.hasOwnProperty(e)?((t===void 0||f[e].overloadTable!==void 0&&f[e].overloadTable[t]!==void 0)&&T(`Cannot register public name '${e}' twice`),la(f,e,e),f.hasOwnProperty(t)&&T(`Cannot register multiple overloads of a function with the same number of arguments (${t})!`),f[e].overloadTable[t]=r):(f[e]=r,t!==void 0&&(f[e].numArguments=t))},fa=48,ca=57,va=e=>{e=e.replace(/[^a-zA-Z0-9_]/g,"$");var r=e.charCodeAt(0);return r>=fa&&r<=ca?`_${e}`:e};function pa(e,r,t,n,a,i,s,o){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}var rr=(e,r,t)=>{for(;r!==t;)r.upcast||T(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function da(e,r){if(r===null)return this.isReference&&T(`null is not a valid ${this.name}`),0;r.$$||T(`Cannot pass "${ir(r)}" as a ${this.name}`),r.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=rr(r.$$.ptr,t,this.registeredClass);return n}function _a(e,r){var t;if(r===null)return this.isReference&&T(`null is not a valid ${this.name}`),this.isSmartPointer?(t=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,t),t):0;(!r||!r.$$)&&T(`Cannot pass "${ir(r)}" as a ${this.name}`),r.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&T(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var n=r.$$.ptrType.registeredClass;if(t=rr(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(r.$$.smartPtr===void 0&&T("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:T(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var a=r.clone();t=this.rawShare(t,D.toHandle(()=>a.delete())),e!==null&&e.push(this.rawDestructor,t)}break;default:T("Unsupporting sharing policy")}return t}function ha(e,r){if(r===null)return this.isReference&&T(`null is not a valid ${this.name}`),0;r.$$||T(`Cannot pass "${ir(r)}" as a ${this.name}`),r.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&T(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass,n=rr(r.$$.ptr,t,this.registeredClass);return n}var ma=()=>{Object.assign(xe.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var r;(r=this.rawDestructor)==null||r.call(this,e)},argPackAdvance:X,readValueFromPointer:de,fromWireType:sa})};function xe(e,r,t,n,a,i,s,o,l,c,v){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=v,!a&&r.baseClass===void 0?n?(this.toWireType=da,this.destructorFunction=null):(this.toWireType=ha,this.destructorFunction=null):this.toWireType=_a}var $t=(e,r,t)=>{f.hasOwnProperty(e)||Re("Replacing nonexistent public symbol"),f[e].overloadTable!==void 0&&t!==void 0?f[e].overloadTable[t]=r:(f[e]=r,f[e].argCount=t)},ga=(e,r,t)=>{e=e.replace(/p/g,"i");var n=f["dynCall_"+e];return n(r,...t)},ya=(e,r,t=[])=>{if(e.includes("j"))return ga(e,r,t);var n=S(r)(...t);return n},wa=(e,r)=>(...t)=>ya(e,r,t),te=(e,r)=>{e=I(e);function t(){return e.includes("j")?wa(e,r):S(r)}var n=t();return typeof n!="function"&&T(`unknown function pointer with signature ${e}: ${r}`),n},ba=(e,r)=>{var t=fe(r,function(n){this.name=r,this.message=n;var a=new Error(n).stack;a!==void 0&&(this.stack=this.toString()+`
`+a.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},t},Ct,At=e=>{var r=Bt(e),t=I(r);return ae(r),t},kt=(e,r)=>{var t=[],n={};function a(i){if(!n[i]&&!se[i]){if(je[i]){je[i].forEach(a);return}t.push(i),n[i]=!0}}throw r.forEach(a),new Ct(`${e}: `+t.map(At).join([", "]))},Ta=(e,r,t,n,a,i,s,o,l,c,v,d,$)=>{v=I(v),i=te(a,i),o&&(o=te(s,o)),c&&(c=te(l,c)),$=te(d,$);var x=va(v);er(x,function(){kt(`Cannot construct ${v} due to unbound types`,[n])}),Ze([e,r,t],n?[n]:[],L=>{var pn;L=L[0];var Q,ie;n?(Q=L.registeredClass,ie=Q.instancePrototype):ie=Fe.prototype;var V=fe(v,function(...pr){if(Object.getPrototypeOf(this)!==ye)throw new _e("Use 'new' to construct "+v);if(Y.constructor_body===void 0)throw new _e(v+" has no accessible constructor");var dn=Y.constructor_body[pr.length];if(dn===void 0)throw new _e(`Tried to invoke ctor of ${v} with invalid number of parameters (${pr.length}) - expected (${Object.keys(Y.constructor_body).toString()}) parameters instead!`);return dn.apply(this,pr)}),ye=Object.create(ie,{constructor:{value:V}});V.prototype=ye;var Y=new pa(v,V,ye,$,Q,i,o,c);Y.baseClass&&((pn=Y.baseClass).__derivedClasses??(pn.__derivedClasses=[]),Y.baseClass.__derivedClasses.push(Y));var vo=new xe(v,Y,!0,!1,!1),cn=new xe(v+"*",Y,!1,!1,!1),vn=new xe(v+" const*",Y,!1,!0,!1);return Tt[e]={pointerType:cn,constPointerType:vn},$t(x,V),[vo,cn,vn]})},tr=[],ne=[],nr=e=>{e>9&&--ne[e+1]===0&&(ne[e]=void 0,tr.push(e))},$a=()=>ne.length/2-5-tr.length,Ca=()=>{ne.push(0,1,void 0,1,null,1,!0,1,!1,1),f.count_emval_handles=$a},D={toValue:e=>(e||T("Cannot use deleted val. handle = "+e),ne[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const r=tr.pop()||ne.length;return ne[r]=e,ne[r+1]=1,r}}}},Aa={name:"emscripten::val",fromWireType:e=>{var r=D.toValue(e);return nr(e),r},toWireType:(e,r)=>D.toHandle(r),argPackAdvance:X,readValueFromPointer:de,destructorFunction:null},ka=e=>Z(e,Aa),Ea=(e,r,t)=>{switch(r){case 1:return t?function(n){return this.fromWireType(W()[n])}:function(n){return this.fromWireType(j()[n])};case 2:return t?function(n){return this.fromWireType(B()[n>>1])}:function(n){return this.fromWireType(U()[n>>1])};case 4:return t?function(n){return this.fromWireType(A()[n>>2])}:function(n){return this.fromWireType(y()[n>>2])};default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},Pa=(e,r,t,n)=>{r=I(r);function a(){}a.values={},Z(e,{name:r,constructor:a,fromWireType:function(i){return this.constructor.values[i]},toWireType:(i,s)=>s.value,argPackAdvance:X,readValueFromPointer:Ea(r,t,n),destructorFunction:null}),er(r,a)},ar=(e,r)=>{var t=se[e];return t===void 0&&T(`${r} has unknown type ${At(e)}`),t},Wa=(e,r,t)=>{var n=ar(e,"enum");r=I(r);var a=n.constructor,i=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:fe(`${n.name}_${r}`,function(){})}});a.values[t]=i,a[r]=i},ir=e=>{if(e===null)return"null";var r=typeof e;return r==="object"||r==="array"||r==="function"?e.toString():""+e},ja=(e,r)=>{switch(r){case 4:return function(t){return this.fromWireType(h()[t>>2])};case 8:return function(t){return this.fromWireType(_()[t>>3])};default:throw new TypeError(`invalid float width (${r}): ${e}`)}},Ra=(e,r,t)=>{r=I(r),Z(e,{name:r,fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:X,readValueFromPointer:ja(r,t),destructorFunction:null})};function Et(e){for(var r=1;r<e.length;++r)if(e[r]!==null&&e[r].destructorFunction===void 0)return!0;return!1}function Pt(e,r){if(!(e instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof e} which is not a function`);var t=fe(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,a=e.apply(n,r);return a instanceof Object?a:n}function Sa(e,r,t,n){for(var a=Et(e),i=e.length-2,s=[],o=["fn"],l=0;l<i;++l)s.push(`arg${l}`),o.push(`arg${l}Wired`);s=s.join(","),o=o.join(",");var c=`return function (${s}) {
`;a&&(c+=`var destructors = [];
`);for(var v=a?"destructors":"null",d=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"],l=0;l<i;++l)c+=`var arg${l}Wired = argType${l}['toWireType'](${v}, arg${l});
`,d.push(`argType${l}`);if(c+=(t||n?"var rv = ":"")+`invoker(${o});
`,a)c+=`runDestructors(destructors);
`;else for(var l=2;l<e.length;++l){var $=l===1?"thisWired":"arg"+(l-2)+"Wired";e[l].destructorFunction!==null&&(c+=`${$}_dtor(${$});
`,d.push(`${$}_dtor`))}return t&&(c+=`var ret = retType['fromWireType'](rv);
return ret;
`),c+=`}
`,[d,c]}function Fa(e,r,t,n,a,i){var s=r.length;s<2&&T("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=r[1]!==null&&t!==null,l=Et(r),c=r[0].name!=="void",v=[e,T,n,a,Je,r[0],r[1]],d=0;d<s-2;++d)v.push(r[d+2]);if(!l)for(var d=2;d<r.length;++d)r[d].destructorFunction!==null&&v.push(r[d].destructorFunction);let[$,x]=Sa(r,o,c,i);$.push(x);var L=Pt(Function,$)(...v);return fe(e,L)}var xa=(e,r)=>{for(var t=[],n=0;n<e;n++)t.push(y()[r+n*4>>2]);return t},Ua=e=>{e=e.trim();const r=e.indexOf("(");return r!==-1?e.substr(0,r):e},Oa=(e,r,t,n,a,i,s,o)=>{var l=xa(r,t);e=I(e),e=Ua(e),a=te(n,a),er(e,function(){kt(`Cannot call ${e} due to unbound types`,l)},r-1),Ze([],l,c=>{var v=[c[0],null].concat(c.slice(1));return $t(e,Fa(e,v,null,a,i,s),r-1),[]})},Ma=(e,r,t)=>{switch(r){case 1:return t?n=>W()[n]:n=>j()[n];case 2:return t?n=>B()[n>>1]:n=>U()[n>>1];case 4:return t?n=>A()[n>>2]:n=>y()[n>>2];default:throw new TypeError(`invalid integer width (${r}): ${e}`)}},Ia=(e,r,t,n,a)=>{r=I(r);var i=v=>v;if(n===0){var s=32-8*t;i=v=>v<<s>>>s}var o=r.includes("unsigned"),l=(v,d)=>{},c;o?c=function(v,d){return l(d,this.name),d>>>0}:c=function(v,d){return l(d,this.name),d},Z(e,{name:r,fromWireType:i,toWireType:c,argPackAdvance:X,readValueFromPointer:Ma(r,t,n!==0),destructorFunction:null})},Da=(e,r,t)=>{var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],a=n[r];function i(s){var o=y()[s>>2],l=y()[s+4>>2];return new a(W().buffer,l,o)}t=I(t),Z(e,{name:t,fromWireType:i,argPackAdvance:X,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},La=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},Ha=(e,r)=>{r=I(r);var t=r==="std::string";Z(e,{name:r,fromWireType(n){var a=y()[n>>2],i=n+4,s;if(t)for(var o=i,l=0;l<=a;++l){var c=i+l;if(l==a||j()[c]==0){var v=c-o,d=Ae(o,v);s===void 0?s=d:(s+="\0",s+=d),o=c+1}}else{for(var $=new Array(a),l=0;l<a;++l)$[l]=String.fromCharCode(j()[i+l]);s=$.join("")}return ae(n),s},toWireType(n,a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));var i,s=typeof a=="string";s||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int8Array||T("Cannot pass non-string to std::string"),t&&s?i=La(a):i=a.length;var o=fr(4+i+1),l=o+4;if(y()[o>>2]=i,t&&s)pe(a,l,i+1);else if(s)for(var c=0;c<i;++c){var v=a.charCodeAt(c);v>255&&(ae(l),T("String has UTF-16 code units that do not fit in 8 bits")),j()[l+c]=v}else for(var c=0;c<i;++c)j()[l+c]=a[c];return n!==null&&n.push(ae,o),o},argPackAdvance:X,readValueFromPointer:de,destructorFunction(n){ae(n)}})},Va=new TextDecoder("utf-16le"),Ba=(e,r)=>{for(var t=e,n=t>>1,a=n+r/2;!(n>=a)&&U()[n];)++n;return t=n<<1,Va.decode(j().slice(e,t))},Na=(e,r,t)=>{if(t??(t=2147483647),t<2)return 0;t-=2;for(var n=r,a=t<e.length*2?t/2:e.length,i=0;i<a;++i){var s=e.charCodeAt(i);B()[r>>1]=s,r+=2}return B()[r>>1]=0,r-n},Ya=e=>e.length*2,Ga=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var a=A()[e+t*4>>2];if(a==0)break;if(++t,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|i&1023)}else n+=String.fromCharCode(a)}return n},Ka=(e,r,t)=>{if(t??(t=2147483647),t<4)return 0;for(var n=r,a=n+t-4,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343){var o=e.charCodeAt(++i);s=65536+((s&1023)<<10)|o&1023}if(A()[r>>2]=s,r+=4,r+4>a)break}return A()[r>>2]=0,r-n},qa=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r},za=(e,r,t)=>{t=I(t);var n,a,i,s;r===2?(n=Ba,a=Na,s=Ya,i=o=>U()[o>>1]):r===4&&(n=Ga,a=Ka,s=qa,i=o=>y()[o>>2]),Z(e,{name:t,fromWireType:o=>{for(var l=y()[o>>2],c,v=o+4,d=0;d<=l;++d){var $=o+4+d*r;if(d==l||i($)==0){var x=$-v,L=n(v,x);c===void 0?c=L:(c+="\0",c+=L),v=$+r}}return ae(o),c},toWireType:(o,l)=>{typeof l!="string"&&T(`Cannot pass non-string to C++ string type ${t}`);var c=s(l),v=fr(4+c+r);return y()[v>>2]=c/r,a(l,v+4,c+r),o!==null&&o.push(ae,v),v},argPackAdvance:X,readValueFromPointer:de,destructorFunction(o){ae(o)}})},Ja=(e,r,t,n,a,i)=>{We[e]={name:I(r),rawConstructor:te(t,n),rawDestructor:te(a,i),fields:[]}},Za=(e,r,t,n,a,i,s,o,l,c)=>{We[e].fields.push({fieldName:I(r),getterReturnType:t,getter:te(n,a),getterContext:i,setterArgumentType:s,setter:te(o,l),setterContext:c})},Xa=(e,r)=>{r=I(r),Z(e,{isVoid:!0,name:r,argPackAdvance:0,fromWireType:()=>{},toWireType:(t,n)=>{}})},Qa=1,ei=()=>Qa,ri=e=>{cr(e,!b,1,!q,2097152,!1),g.threadInitTLS()},ti=()=>{if(!Ne())try{p?vr(ue):Ge(ue)}catch(e){at(e)}},Wt=e=>{if(!be)try{e(),ti()}catch(r){at(r)}},or=e=>{if(typeof Atomics.waitAsync=="function"){var r=Atomics.waitAsync(A(),e>>2,e);r.value.then(Ue);var t=e+128;Atomics.store(A(),t>>2,1)}},Ue=()=>{var e=Me();e&&(or(e),Wt(zt))},ni=(e,r)=>{if(e==r)setTimeout(Ue);else if(p)postMessage({targetThread:e,cmd:"checkMailbox"});else{var t=g.pthreads[e];if(!t)return;t.postMessage({cmd:"checkMailbox"})}},sr=[],ai=(e,r,t,n,a)=>{sr.length=n;for(var i=a>>3,s=0;s<n;s++)sr[s]=_()[i+s];var o=Bi[e];g.currentProxiedOperationCallerThread=t;var l=o(...sr);return g.currentProxiedOperationCallerThread=0,l},ii=()=>{qe=!1,$e=0},oi=e=>{p?postMessage({cmd:"cleanupThread",thread:e}):tt(e)},si=e=>{},Oe=[],ui=(e,r,t,n)=>(e=Oe[e],r=D.toValue(r),e(null,r,t,n)),li={},ur=e=>{var r=li[e];return r===void 0?I(e):r},fi=(e,r,t,n,a)=>(e=Oe[e],r=D.toValue(r),t=ur(t),e(r,r[t],n,a)),jt=()=>typeof globalThis=="object"?globalThis:function(){return Function}()("return this")(),ci=e=>e===0?D.toHandle(jt()):(e=ur(e),D.toHandle(jt()[e])),vi=e=>{var r=Oe.length;return Oe.push(e),r},pi=(e,r)=>{for(var t=new Array(e),n=0;n<e;++n)t[n]=ar(y()[r+n*4>>2],"parameter "+n);return t},di=(e,r,t)=>{var n=[],a=e.toWireType(n,t);return n.length&&(y()[r>>2]=D.toHandle(n)),a},_i=(e,r,t)=>{var n=pi(e,r),a=n.shift();e--;var i=`return function (obj, func, destructorsRef, args) {
`,s=0,o=[];t===0&&o.push("obj");for(var l=["retType"],c=[a],v=0;v<e;++v)o.push("arg"+v),l.push("argType"+v),c.push(n[v]),i+=`  var arg${v} = argType${v}.readValueFromPointer(args${s?"+"+s:""});
`,s+=n[v].argPackAdvance;var d=t===1?"new func":"func.call";i+=`  var rv = ${d}(${o.join(", ")});
`,a.isVoid||(l.push("emval_returnValue"),c.push(di),i+=`  return emval_returnValue(retType, destructorsRef, rv);
`),i+=`};
`,l.push(i);var $=Pt(Function,l)(...c),x=`methodCaller<(${n.map(L=>L.name).join(", ")}) => ${a.name}>`;return vi(fe(x,$))},hi=e=>{e>9&&(ne[e+1]+=1)},mi=()=>D.toHandle([]),gi=e=>D.toHandle(ur(e)),yi=()=>D.toHandle({}),wi=e=>{var r=D.toValue(e);Je(r),nr(e)},bi=(e,r,t)=>{e=D.toValue(e),r=D.toValue(r),t=D.toValue(t),e[r]=t},Ti=(e,r)=>{e=ar(e,"_emval_take_value");var t=e.readValueFromPointer(r);return D.toHandle(t)},$i=e=>e%4===0&&(e%100!==0||e%400===0),Ci=[0,31,60,91,121,152,182,213,244,274,305,335],Ai=[0,31,59,90,120,151,181,212,243,273,304,334],ki=e=>{var r=$i(e.getFullYear()),t=r?Ci:Ai,n=t[e.getMonth()]+e.getDate()-1;return n};function Ei(e,r,t){var n=xn(e,r),a=new Date(n*1e3);A()[t>>2]=a.getSeconds(),A()[t+4>>2]=a.getMinutes(),A()[t+8>>2]=a.getHours(),A()[t+12>>2]=a.getDate(),A()[t+16>>2]=a.getMonth(),A()[t+20>>2]=a.getFullYear()-1900,A()[t+24>>2]=a.getDay();var i=ki(a)|0;A()[t+28>>2]=i,A()[t+36>>2]=-(a.getTimezoneOffset()*60);var s=new Date(a.getFullYear(),0,1),o=new Date(a.getFullYear(),6,1).getTimezoneOffset(),l=s.getTimezoneOffset(),c=(o!=l&&a.getTimezoneOffset()==Math.min(l,o))|0;A()[t+32>>2]=c}function Rt(e,r,t,n,a,i,s,o){return p?O(9,0,1,e,r,t,n,a,i,s,o):-52}function St(e,r,t,n,a,i,s){if(p)return O(10,0,1,e,r,t,n,a,i,s)}var me={},Ft=()=>performance.timeOrigin+performance.now();function xt(e,r){if(p)return O(11,0,1,e,r);if(me[e]&&(clearTimeout(me[e].id),delete me[e]),!r)return 0;var t=setTimeout(()=>{delete me[e],Wt(()=>qt(e,Ft()))},r);return me[e]={id:t,timeout_ms:r},0}var Pi=(e,r,t,n)=>{var a=new Date().getFullYear(),i=new Date(a,0,1),s=new Date(a,6,1),o=i.getTimezoneOffset(),l=s.getTimezoneOffset(),c=Math.max(o,l);y()[e>>2]=c*60,A()[r>>2]=+(o!=l);var v=x=>{var L=x>=0?"-":"+",Q=Math.abs(x),ie=String(Math.floor(Q/60)).padStart(2,"0"),V=String(Q%60).padStart(2,"0");return`UTC${L}${ie}${V}`},d=v(o),$=v(l);l<o?(pe(d,t,17),pe($,n,17)):(pe(d,n,17),pe($,t,17))},Wi=()=>{},ji=()=>Date.now(),Ri=()=>{$e+=1},Si=()=>{throw Ri(),"unwind"},Ut=()=>2147483648,Fi=()=>Ut(),xi=()=>1,Ui=(e,r)=>Math.ceil(e/r)*r,Oi=e=>{var r=M.buffer,t=(e-r.byteLength+65535)/65536|0;try{return M.grow(t),K(),1}catch{}},Mi=e=>{var r=j().length;if(e>>>=0,e<=r)return!1;var t=Ut();if(e>t)return!1;for(var n=1;n<=4;n*=2){var a=r*(1+.2/n);a=Math.min(a,e+100663296);var i=Math.min(t,Ui(Math.max(e,a),65536)),s=Oi(i);if(s)return!0}return!1},lr={},Ii=()=>H||"./this.program",ge=()=>{if(!ge.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Ii()};for(var t in lr)lr[t]===void 0?delete r[t]:r[t]=lr[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);ge.strings=n}return ge.strings},Di=(e,r)=>{for(var t=0;t<e.length;++t)W()[r++]=e.charCodeAt(t);W()[r]=0},Ot=function(e,r){if(p)return O(12,0,1,e,r);var t=0;return ge().forEach((n,a)=>{var i=r+t;y()[e+a*4>>2]=i,Di(n,i),t+=n.length+1}),0},Mt=function(e,r){if(p)return O(13,0,1,e,r);var t=ge();y()[e>>2]=t.length;var n=0;return t.forEach(a=>n+=a.length+1),y()[r>>2]=n,0};function It(e){return p?O(14,0,1,e):52}function Dt(e,r,t,n){return p?O(15,0,1,e,r,t,n):52}function Lt(e,r,t,n,a){return p?O(16,0,1,e,r,t,n,a):70}var Li=[null,[],[]],Hi=(e,r=0,t=NaN)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;return st.decode(e.buffer?e.buffer instanceof SharedArrayBuffer?e.slice(r,a):e.subarray(r,a):new Uint8Array(e.slice(r,a)))},Vi=(e,r)=>{var t=Li[e];r===0||r===10?((e===1?Fr:N)(Hi(t)),t.length=0):t.push(r)};function Ht(e,r,t,n){if(p)return O(17,0,1,e,r,t,n);for(var a=0,i=0;i<t;i++){var s=y()[r>>2],o=y()[r+4>>2];r+=8;for(var l=0;l<o;l++)Vi(e,j()[s+l]);a+=o}return y()[n>>2]=a,0}g.init(),mt=f.InternalError=class extends Error{constructor(r){super(r),this.name="InternalError"}},Qn(),_e=f.BindingError=class extends Error{constructor(r){super(r),this.name="BindingError"}},ua(),ma(),Ct=f.UnboundTypeError=ba(Error,"UnboundTypeError"),Ca();var Bi=[Ye,it,lt,ct,vt,pt,dt,_t,ht,Rt,St,xt,Ot,Mt,It,Dt,Lt,Ht],Vt;function Ni(){Vt={$:Dn,r:Ln,x:Hn,b:Bn,i:Nn,U:Yn,w:Gn,pa:Kn,ya:ft,e:Vn,X:ct,wa:vt,Fa:pt,Y:dt,va:_t,ra:ht,Ja:Jn,da:Zn,ka:Xn,Ma:ra,L:Ta,La:ka,z:Pa,d:Wa,_:Ra,p:Oa,A:Ia,n:Da,aa:Ha,M:za,O:Ja,G:Za,Na:Xa,Ia:ei,Ca:ri,sa:ni,za:ai,na:ii,S:oi,Ba:or,Ha:si,Oa:ui,Ka:fi,l:nr,N:ci,ca:_i,R:hi,Z:mi,v:gi,F:yi,ba:wi,t:bi,o:Ti,ia:Ei,ga:Rt,ha:St,oa:xt,Aa:Pi,T:Wi,K:ji,Ga:Si,ta:Fi,y:Ft,ua:xi,qa:Mi,Da:Ot,Ea:Mt,xa:Ge,E:It,W:Dt,ja:Lt,V:Ht,I:ro,c:Yi,f:Xi,u:eo,la:ao,H:no,B:so,P:io,D:uo,fa:fo,ea:co,h:Qi,k:Ki,g:to,m:qi,j:Ji,J:zi,Q:Zi,s:oo,q:Gi,C:lo,a:M,ma:Ye}}var m=Sn(),Me=()=>(Me=m.Qa)(),fr=e=>(fr=m.Ra)(e),Bt=e=>(Bt=m.Sa)(e),Nt=()=>(Nt=m.Ta)(),ae=e=>(ae=m.Ua)(e),cr=(e,r,t,n,a,i)=>(cr=m.Xa)(e,r,t,n,a,i),Yt=()=>(Yt=m.Ya)(),Gt=(e,r,t,n,a)=>(Gt=m.Za)(e,r,t,n,a),Kt=e=>(Kt=m._a)(e),vr=e=>(vr=m.$a)(e),qt=(e,r)=>(qt=m.ab)(e,r),zt=()=>(zt=m.bb)(),E=(e,r)=>(E=m.cb)(e,r),Jt=e=>(Jt=m.db)(e),Zt=(e,r)=>(Zt=m.eb)(e,r),Xt=e=>(Xt=m.fb)(e),Qt=e=>(Qt=m.gb)(e),en=()=>(en=m.hb)(),rn=e=>(rn=m.ib)(e),tn=e=>(tn=m.jb)(e),nn=(e,r,t)=>(nn=m.kb)(e,r,t),an=e=>(an=m.lb)(e);f.dynCall_ji=(e,r)=>(f.dynCall_ji=m.mb)(e,r);var on=f.dynCall_iij=(e,r,t,n)=>(on=f.dynCall_iij=m.nb)(e,r,t,n);f.dynCall_jijj=(e,r,t,n,a,i)=>(f.dynCall_jijj=m.ob)(e,r,t,n,a,i),f.dynCall_vijj=(e,r,t,n,a,i)=>(f.dynCall_vijj=m.pb)(e,r,t,n,a,i),f.dynCall_jiiiii=(e,r,t,n,a,i)=>(f.dynCall_jiiiii=m.qb)(e,r,t,n,a,i),f.dynCall_jii=(e,r,t)=>(f.dynCall_jii=m.rb)(e,r,t),f.dynCall_jiiii=(e,r,t,n,a)=>(f.dynCall_jiiii=m.sb)(e,r,t,n,a),f.dynCall_jiji=(e,r,t,n,a)=>(f.dynCall_jiji=m.tb)(e,r,t,n,a);var sn=f.dynCall_iiiiij=(e,r,t,n,a,i,s)=>(sn=f.dynCall_iiiiij=m.ub)(e,r,t,n,a,i,s);f.dynCall_viijii=(e,r,t,n,a,i,s)=>(f.dynCall_viijii=m.vb)(e,r,t,n,a,i,s),f.dynCall_iiiiijj=(e,r,t,n,a,i,s,o,l)=>(f.dynCall_iiiiijj=m.wb)(e,r,t,n,a,i,s,o,l),f.dynCall_iiiiiijj=(e,r,t,n,a,i,s,o,l,c)=>(f.dynCall_iiiiiijj=m.xb)(e,r,t,n,a,i,s,o,l,c);function Yi(e,r){var t=R();try{return S(e)(r)}catch(n){if(k(t),n!==n+0)throw n;E(1,0)}}function Gi(e,r,t,n,a,i,s,o,l,c,v){var d=R();try{S(e)(r,t,n,a,i,s,o,l,c,v)}catch($){if(k(d),$!==$+0)throw $;E(1,0)}}function Ki(e,r){var t=R();try{S(e)(r)}catch(n){if(k(t),n!==n+0)throw n;E(1,0)}}function qi(e,r,t,n){var a=R();try{S(e)(r,t,n)}catch(i){if(k(a),i!==i+0)throw i;E(1,0)}}function zi(e,r,t,n,a,i){var s=R();try{S(e)(r,t,n,a,i)}catch(o){if(k(s),o!==o+0)throw o;E(1,0)}}function Ji(e,r,t,n,a){var i=R();try{S(e)(r,t,n,a)}catch(s){if(k(i),s!==s+0)throw s;E(1,0)}}function Zi(e,r,t,n,a,i,s){var o=R();try{S(e)(r,t,n,a,i,s)}catch(l){if(k(o),l!==l+0)throw l;E(1,0)}}function Xi(e,r,t){var n=R();try{return S(e)(r,t)}catch(a){if(k(n),a!==a+0)throw a;E(1,0)}}function Qi(e){var r=R();try{S(e)()}catch(t){if(k(r),t!==t+0)throw t;E(1,0)}}function eo(e,r,t,n){var a=R();try{return S(e)(r,t,n)}catch(i){if(k(a),i!==i+0)throw i;E(1,0)}}function ro(e){var r=R();try{return S(e)()}catch(t){if(k(r),t!==t+0)throw t;E(1,0)}}function to(e,r,t){var n=R();try{S(e)(r,t)}catch(a){if(k(n),a!==a+0)throw a;E(1,0)}}function no(e,r,t,n,a,i){var s=R();try{return S(e)(r,t,n,a,i)}catch(o){if(k(s),o!==o+0)throw o;E(1,0)}}function ao(e,r,t,n,a,i){var s=R();try{return S(e)(r,t,n,a,i)}catch(o){if(k(s),o!==o+0)throw o;E(1,0)}}function io(e,r,t,n,a,i,s,o){var l=R();try{return S(e)(r,t,n,a,i,s,o)}catch(c){if(k(l),c!==c+0)throw c;E(1,0)}}function oo(e,r,t,n,a,i,s,o){var l=R();try{S(e)(r,t,n,a,i,s,o)}catch(c){if(k(l),c!==c+0)throw c;E(1,0)}}function so(e,r,t,n,a,i,s){var o=R();try{return S(e)(r,t,n,a,i,s)}catch(l){if(k(o),l!==l+0)throw l;E(1,0)}}function uo(e,r,t,n,a,i,s,o,l,c,v,d){var $=R();try{return S(e)(r,t,n,a,i,s,o,l,c,v,d)}catch(x){if(k($),x!==x+0)throw x;E(1,0)}}function lo(e,r,t,n,a,i,s,o,l,c,v,d,$,x,L,Q){var ie=R();try{S(e)(r,t,n,a,i,s,o,l,c,v,d,$,x,L,Q)}catch(V){if(k(ie),V!==V+0)throw V;E(1,0)}}function fo(e,r,t,n,a,i,s){var o=R();try{return sn(e,r,t,n,a,i,s)}catch(l){if(k(o),l!==l+0)throw l;E(1,0)}}function co(e,r,t,n){var a=R();try{return on(e,r,t,n)}catch(i){if(k(a),i!==i+0)throw i;E(1,0)}}var Ie,un;ve=function e(){Ie||ln(),Ie||(ve=e)};function ln(){if(oe>0)return;if(p){w(f),Gr(),startWorker(f);return}if(!un&&(un=1,Cn(),oe>0))return;function e(){var r;Ie||(Ie=1,f.calledRun=1,!be&&(Gr(),w(f),(r=f.onRuntimeInitialized)==null||r.call(f),An()))}f.setStatus?(f.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>f.setStatus(""),1),e()},1)):e()}if(f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.pop()();return ln(),F=ee,F}})(),gn,yn,Wo=(yn=(gn=globalThis.self)==null?void 0:gn.name)==null?void 0:yn.startsWith("em-pthread");Wo&&Po();var Wr;(function(u){u[u.UVAdapt=0]="UVAdapt",u[u.UV420=1]="UV420",u[u.UV444=2]="UV444",u[u.UVAuto=3]="UVAuto"})(Wr||(Wr={}));var jr;(function(u){u[u.YCoCg=0]="YCoCg",u[u.YCbCr=1]="YCbCr",u[u.Custom=2]="Custom",u[u.YIQ=3]="YIQ"})(jr||(jr={}));Wr.UVAuto,jr.YCoCg;globalThis._icodec_ImageData=(u,P,F,W)=>W===8?new jo(u,P,F):new bn(u,P,F,W);class jo extends ImageData{constructor(){super(...arguments);ce(this,"depth",8)}}var Ro=wn('<meta name="description" content="Converter for heif">'),So=wn('<div><span>상당히 느립니다.</span> <label for="heic">HEIC</label> <input type="file" name="heif" multiple accept="image/*"> <label for="webp">WEBP</label> <input type="file" name="webp" multiple accept="image/*"> <label for="avif">AVIF</label> <input type="file" name="avif" multiple accept="image/*"></div>');function Bo(u,P){ho(P,!1);async function F(h){const _=Array.from(h.target.files??[]);if(!_.length)return;const f=new Worker(yr,{type:"module"}),w=hr(f),C=new mr;try{const ee=_.map(async b=>{try{if(b.type==="image/heic"||b.type==="image/heif"){console.warn(`Skipping ${b.name} as it is already in HEIC format.`),C.file(b.name,b);return}let p=await createImageBitmap(b);const G=await w.bitmapToHEIC(gr(p,[p])),H=b.name.replace(/\.[^/.]+$/,"")+".heic";C.file(H,G)}catch(p){console.error(`Error processing file ${b.name}:`,p)}});await Promise.all(ee);const q=await C.generateAsync({type:"blob"});wr(q,"converted_images.zip")}finally{f.terminate()}}async function W(h){const _=Array.from(h.target.files??[]);if(!_.length)return;const f=new Worker(yr,{type:"module"}),w=hr(f),C=new mr;try{const ee=_.map(async b=>{try{if(b.type==="image/webp"){console.warn(`Skipping ${b.name} as it is already in webp format.`),C.file(b.name,b);return}let p=await createImageBitmap(b);const G=await w.bitmapToWEBP(gr(p,[p])),H=b.name.replace(/\.[^/.]+$/,"")+".webp";C.file(H,G)}catch(p){console.error(`Error processing file ${b.name}:`,p)}});await Promise.all(ee);const q=await C.generateAsync({type:"blob"});wr(q,"converted_images.zip")}finally{f.terminate()}}async function j(h){const _=Array.from(h.target.files??[]);if(!_.length)return;const f=new Worker(yr,{type:"module"}),w=hr(f),C=new mr;try{const ee=_.map(async b=>{try{if(b.type==="image/avif"){console.warn(`Skipping ${b.name} as it is already in AVIF format.`),C.file(b.name,b);return}let p=await createImageBitmap(b);const G=await w.bitmapToAVIF(gr(p,[p])),H=b.name.replace(/\.[^/.]+$/,"")+".avif";C.file(H,G)}catch(p){console.error(`Error processing file ${b.name}:`,p)}});await Promise.all(ee);const q=await C.generateAsync({type:"blob"});wr(q,"converted_images.zip")}finally{f.terminate()}}To();var B=So();bo(h=>{var _=Ro();go.title="About",_n(h,_)});var U=dr(yo(B),4),A=dr(U,4),y=dr(A,4);wo(B),_r("change",U,F),_r("change",A,W),_r("change",y,j),_n(u,B),mo()}export{Bo as component};
